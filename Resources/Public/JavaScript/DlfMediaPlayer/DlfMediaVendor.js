/*! For license information please see DlfMediaVendor.js.LICENSE.txt */
(self.webpackChunkkitodo_presentation=self.webpackChunkkitodo_presentation||[]).push([[951],{157:(e,t,n)=>{const i=n(6886),r=n(9953),a=n(9899),o=n(8820),s=n(6421),u=n(7756),l=n(1332),h=n(7518),c=n(4764),d=n(1427),p=n(4565),f=n(208),g=n(9801);function m(e,t,n){const i=e.size,r=p.getEncodedBits(t,n);let a,o;for(a=0;a<15;a++)o=1==(r>>a&1),a<6?e.set(a,8,o,!0):a<8?e.set(a+1,8,o,!0):e.set(i-15+a,8,o,!0),a<8?e.set(8,i-a-1,o,!0):a<9?e.set(8,15-a-1+1,o,!0):e.set(8,15-a-1,o,!0);e.set(i-8,8,1,!0)}function v(e,t,n,r){let p;if(Array.isArray(e))p=g.fromArray(e);else{if("string"!=typeof e)throw new Error("Invalid data");{let i=t;if(!i){const t=g.rawSplit(e);i=d.getBestVersionForData(t,n)}p=g.fromString(e,i||40)}}const v=d.getBestVersionForData(p,n);if(!v)throw new Error("The amount of data is too big to be stored in a QR Code");if(t){if(t<v)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+v+".\n")}else t=v;const y=function(e,t,n){const r=new a;n.forEach(function(t){r.put(t.mode.bit,4),r.put(t.getLength(),f.getCharCountIndicator(t.mode,e)),t.write(r)});const o=8*(i.getSymbolTotalCodewords(e)-h.getTotalCodewordsCount(e,t));for(r.getLengthInBits()+4<=o&&r.put(0,4);r.getLengthInBits()%8!=0;)r.putBit(0);const s=(o-r.getLengthInBits())/8;for(let e=0;e<s;e++)r.put(e%2?17:236,8);return function(e,t,n){const r=i.getSymbolTotalCodewords(t),a=r-h.getTotalCodewordsCount(t,n),o=h.getBlocksCount(t,n),s=o-r%o,u=Math.floor(r/o),l=Math.floor(a/o),d=l+1,p=u-l,f=new c(p);let g=0;const m=new Array(o),v=new Array(o);let y=0;const b=new Uint8Array(e.buffer);for(let e=0;e<o;e++){const t=e<s?l:d;m[e]=b.slice(g,g+t),v[e]=f.encode(m[e]),g+=t,y=Math.max(y,t)}const _=new Uint8Array(r);let w,S,T=0;for(w=0;w<y;w++)for(S=0;S<o;S++)w<m[S].length&&(_[T++]=m[S][w]);for(w=0;w<p;w++)for(S=0;S<o;S++)_[T++]=v[S][w];return _}(r,e,t)}(t,n,p),b=i.getSymbolSize(t),_=new o(b);return function(e,t){const n=e.size,i=u.getPositions(t);for(let t=0;t<i.length;t++){const r=i[t][0],a=i[t][1];for(let t=-1;t<=7;t++)if(!(r+t<=-1||n<=r+t))for(let i=-1;i<=7;i++)a+i<=-1||n<=a+i||(t>=0&&t<=6&&(0===i||6===i)||i>=0&&i<=6&&(0===t||6===t)||t>=2&&t<=4&&i>=2&&i<=4?e.set(r+t,a+i,!0,!0):e.set(r+t,a+i,!1,!0))}}(_,t),function(e){const t=e.size;for(let n=8;n<t-8;n++){const t=n%2==0;e.set(n,6,t,!0),e.set(6,n,t,!0)}}(_),function(e,t){const n=s.getPositions(t);for(let t=0;t<n.length;t++){const i=n[t][0],r=n[t][1];for(let t=-2;t<=2;t++)for(let n=-2;n<=2;n++)-2===t||2===t||-2===n||2===n||0===t&&0===n?e.set(i+t,r+n,!0,!0):e.set(i+t,r+n,!1,!0)}}(_,t),m(_,n,0),t>=7&&function(e,t){const n=e.size,i=d.getEncodedBits(t);let r,a,o;for(let t=0;t<18;t++)r=Math.floor(t/3),a=t%3+n-8-3,o=1==(i>>t&1),e.set(r,a,o,!0),e.set(a,r,o,!0)}(_,t),function(e,t){const n=e.size;let i=-1,r=n-1,a=7,o=0;for(let s=n-1;s>0;s-=2)for(6===s&&s--;;){for(let n=0;n<2;n++)if(!e.isReserved(r,s-n)){let i=!1;o<t.length&&(i=1==(t[o]>>>a&1)),e.set(r,s-n,i),a--,-1===a&&(o++,a=7)}if(r+=i,r<0||n<=r){r-=i,i=-i;break}}}(_,y),isNaN(r)&&(r=l.getBestMask(_,m.bind(null,_,n))),l.applyMask(r,_),m(_,n,r),{modules:_,version:t,errorCorrectionLevel:n,maskPattern:r,segments:p}}t.create=function(e,t){if(void 0===e||""===e)throw new Error("No input text");let n,a,o=r.M;return void 0!==t&&(o=r.from(t.errorCorrectionLevel,r.M),n=d.from(t.version),a=l.from(t.maskPattern),t.toSJISFunc&&i.setToSJISFunction(t.toSJISFunc)),v(e,n,o,a)}},208:(e,t,n)=>{const i=n(1878),r=n(7044);t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(e,t){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!i.isValid(t))throw new Error("Invalid version: "+t);return t>=1&&t<10?e.ccBits[0]:t<27?e.ccBits[1]:e.ccBits[2]},t.getBestModeForData=function(e){return r.testNumeric(e)?t.NUMERIC:r.testAlphanumeric(e)?t.ALPHANUMERIC:r.testKanji(e)?t.KANJI:t.BYTE},t.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},t.isValid=function(e){return e&&e.bit&&e.ccBits},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+e)}}(e)}catch(e){return n}}},317:(e,t,n)=>{"use strict";function i(e,t){this._waveformData=e,this._channelIndex=t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e){return null==e}function o(e,t,n){var i;return function(r){return i=i||function(e,t,n){var i=void 0===t?null:t,r=function(e,t){var n=atob(e);if(t){for(var i=new Uint8Array(n.length),r=0,a=n.length;r<a;++r)i[r]=n.charCodeAt(r);return String.fromCharCode.apply(null,new Uint16Array(i.buffer))}return n}(e,void 0!==n&&n),a=r.indexOf("\n",10)+1,o=r.substring(a)+(i?"//# sourceMappingURL="+i:""),s=new Blob([o],{type:"application/javascript"});return URL.createObjectURL(s)}(e,t,n),new Worker(i,r)}}n.d(t,{A:()=>u}),i.prototype.min_sample=function(e){var t=2*(e*this._waveformData.channels+this._channelIndex);return this._waveformData._at(t)},i.prototype.max_sample=function(e){var t=2*(e*this._waveformData.channels+this._channelIndex)+1;return this._waveformData._at(t)},i.prototype.set_min_sample=function(e,t){var n=2*(e*this._waveformData.channels+this._channelIndex);return this._waveformData._set_at(n,t)},i.prototype.set_max_sample=function(e,t){var n=2*(e*this._waveformData.channels+this._channelIndex)+1;return this._waveformData._set_at(n,t)},i.prototype.min_array=function(){for(var e=this._waveformData.length,t=[],n=0;n<e;n++)t.push(this.min_sample(n));return t},i.prototype.max_array=function(){for(var e=this._waveformData.length,t=[],n=0;n<e;n++)t.push(this.max_sample(n));return t};var s=o("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyoqCiAgICogQXVkaW9CdWZmZXItYmFzZWQgV2F2ZWZvcm1EYXRhIGdlbmVyYXRvcgogICAqCiAgICogQWRhcHRlZCBmcm9tIEJsb2NrRmlsZTo6Q2FsY1N1bW1hcnkgaW4gQXVkYWNpdHksIHdpdGggcGVybWlzc2lvbi4KICAgKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2F1ZGFjaXR5L2F1ZGFjaXR5L2Jsb2IvCiAgICogICAxMTA4YzEzNzZjMDkxNjYxNjIzMzVmYWI0NzQzMDA4Y2JhNTdjNGVlL3NyYy9CbG9ja0ZpbGUuY3BwI0wxOTgKICAgKi8KCiAgdmFyIElOVDhfTUFYID0gMTI3OwogIHZhciBJTlQ4X01JTiA9IC0xMjg7CiAgdmFyIElOVDE2X01BWCA9IDMyNzY3OwogIHZhciBJTlQxNl9NSU4gPSAtMzI3Njg7CiAgZnVuY3Rpb24gY2FsY3VsYXRlV2F2ZWZvcm1EYXRhTGVuZ3RoKGF1ZGlvX3NhbXBsZV9jb3VudCwgc2NhbGUpIHsKICAgIHZhciBkYXRhX2xlbmd0aCA9IE1hdGguZmxvb3IoYXVkaW9fc2FtcGxlX2NvdW50IC8gc2NhbGUpOwogICAgdmFyIHNhbXBsZXNfcmVtYWluaW5nID0gYXVkaW9fc2FtcGxlX2NvdW50IC0gZGF0YV9sZW5ndGggKiBzY2FsZTsKICAgIGlmIChzYW1wbGVzX3JlbWFpbmluZyA+IDApIHsKICAgICAgZGF0YV9sZW5ndGgrKzsKICAgIH0KICAgIHJldHVybiBkYXRhX2xlbmd0aDsKICB9CiAgZnVuY3Rpb24gZ2VuZXJhdGVXYXZlZm9ybURhdGEob3B0aW9ucykgewogICAgdmFyIHNjYWxlID0gb3B0aW9ucy5zY2FsZTsKICAgIHZhciBhbXBsaXR1ZGVfc2NhbGUgPSBvcHRpb25zLmFtcGxpdHVkZV9zY2FsZTsKICAgIHZhciBzcGxpdF9jaGFubmVscyA9IG9wdGlvbnMuc3BsaXRfY2hhbm5lbHM7CiAgICB2YXIgbGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7CiAgICB2YXIgc2FtcGxlX3JhdGUgPSBvcHRpb25zLnNhbXBsZV9yYXRlOwogICAgdmFyIGNoYW5uZWxzID0gb3B0aW9ucy5jaGFubmVscy5tYXAoZnVuY3Rpb24gKGNoYW5uZWwpIHsKICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoY2hhbm5lbCk7CiAgICB9KTsKICAgIHZhciBvdXRwdXRfY2hhbm5lbHMgPSBzcGxpdF9jaGFubmVscyA/IGNoYW5uZWxzLmxlbmd0aCA6IDE7CiAgICB2YXIgaGVhZGVyX3NpemUgPSAyNDsKICAgIHZhciBkYXRhX2xlbmd0aCA9IGNhbGN1bGF0ZVdhdmVmb3JtRGF0YUxlbmd0aChsZW5ndGgsIHNjYWxlKTsKICAgIHZhciBieXRlc19wZXJfc2FtcGxlID0gb3B0aW9ucy5iaXRzID09PSA4ID8gMSA6IDI7CiAgICB2YXIgdG90YWxfc2l6ZSA9IGhlYWRlcl9zaXplICsgZGF0YV9sZW5ndGggKiAyICogYnl0ZXNfcGVyX3NhbXBsZSAqIG91dHB1dF9jaGFubmVsczsKICAgIHZhciBidWZmZXIgPSBuZXcgQXJyYXlCdWZmZXIodG90YWxfc2l6ZSk7CiAgICB2YXIgZGF0YV92aWV3ID0gbmV3IERhdGFWaWV3KGJ1ZmZlcik7CiAgICB2YXIgc2NhbGVfY291bnRlciA9IDA7CiAgICB2YXIgb2Zmc2V0ID0gaGVhZGVyX3NpemU7CiAgICB2YXIgbWluX3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICB2YXIgbWF4X3ZhbHVlID0gbmV3IEFycmF5KG91dHB1dF9jaGFubmVscyk7CiAgICBmb3IgKHZhciBjaGFubmVsID0gMDsgY2hhbm5lbCA8IG91dHB1dF9jaGFubmVsczsgY2hhbm5lbCsrKSB7CiAgICAgIG1pbl92YWx1ZVtjaGFubmVsXSA9IEluZmluaXR5OwogICAgICBtYXhfdmFsdWVbY2hhbm5lbF0gPSAtSW5maW5pdHk7CiAgICB9CiAgICB2YXIgcmFuZ2VfbWluID0gb3B0aW9ucy5iaXRzID09PSA4ID8gSU5UOF9NSU4gOiBJTlQxNl9NSU47CiAgICB2YXIgcmFuZ2VfbWF4ID0gb3B0aW9ucy5iaXRzID09PSA4ID8gSU5UOF9NQVggOiBJTlQxNl9NQVg7CiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMCwgMiwgdHJ1ZSk7IC8vIFZlcnNpb24KICAgIGRhdGFfdmlldy5zZXRVaW50MzIoNCwgb3B0aW9ucy5iaXRzID09PSA4LCB0cnVlKTsgLy8gSXMgOCBiaXQ/CiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoOCwgc2FtcGxlX3JhdGUsIHRydWUpOyAvLyBTYW1wbGUgcmF0ZQogICAgZGF0YV92aWV3LnNldEludDMyKDEyLCBzY2FsZSwgdHJ1ZSk7IC8vIFNjYWxlCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMTYsIGRhdGFfbGVuZ3RoLCB0cnVlKTsgLy8gTGVuZ3RoCiAgICBkYXRhX3ZpZXcuc2V0SW50MzIoMjAsIG91dHB1dF9jaGFubmVscywgdHJ1ZSk7CiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgIHZhciBzYW1wbGUgPSAwOwogICAgICBpZiAob3V0cHV0X2NoYW5uZWxzID09PSAxKSB7CiAgICAgICAgZm9yICh2YXIgX2NoYW5uZWwgPSAwOyBfY2hhbm5lbCA8IGNoYW5uZWxzLmxlbmd0aDsgKytfY2hhbm5lbCkgewogICAgICAgICAgc2FtcGxlICs9IGNoYW5uZWxzW19jaGFubmVsXVtpXTsKICAgICAgICB9CiAgICAgICAgc2FtcGxlID0gTWF0aC5mbG9vcihyYW5nZV9tYXggKiBzYW1wbGUgKiBhbXBsaXR1ZGVfc2NhbGUgLyBjaGFubmVscy5sZW5ndGgpOwogICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbMF0pIHsKICAgICAgICAgIG1pbl92YWx1ZVswXSA9IHNhbXBsZTsKICAgICAgICAgIGlmIChtaW5fdmFsdWVbMF0gPCByYW5nZV9taW4pIHsKICAgICAgICAgICAgbWluX3ZhbHVlWzBdID0gcmFuZ2VfbWluOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBpZiAoc2FtcGxlID4gbWF4X3ZhbHVlWzBdKSB7CiAgICAgICAgICBtYXhfdmFsdWVbMF0gPSBzYW1wbGU7CiAgICAgICAgICBpZiAobWF4X3ZhbHVlWzBdID4gcmFuZ2VfbWF4KSB7CiAgICAgICAgICAgIG1heF92YWx1ZVswXSA9IHJhbmdlX21heDsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZm9yICh2YXIgX2NoYW5uZWwyID0gMDsgX2NoYW5uZWwyIDwgb3V0cHV0X2NoYW5uZWxzOyArK19jaGFubmVsMikgewogICAgICAgICAgc2FtcGxlID0gTWF0aC5mbG9vcihyYW5nZV9tYXggKiBjaGFubmVsc1tfY2hhbm5lbDJdW2ldICogYW1wbGl0dWRlX3NjYWxlKTsKICAgICAgICAgIGlmIChzYW1wbGUgPCBtaW5fdmFsdWVbX2NoYW5uZWwyXSkgewogICAgICAgICAgICBtaW5fdmFsdWVbX2NoYW5uZWwyXSA9IHNhbXBsZTsKICAgICAgICAgICAgaWYgKG1pbl92YWx1ZVtfY2hhbm5lbDJdIDwgcmFuZ2VfbWluKSB7CiAgICAgICAgICAgICAgbWluX3ZhbHVlW19jaGFubmVsMl0gPSByYW5nZV9taW47CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIGlmIChzYW1wbGUgPiBtYXhfdmFsdWVbX2NoYW5uZWwyXSkgewogICAgICAgICAgICBtYXhfdmFsdWVbX2NoYW5uZWwyXSA9IHNhbXBsZTsKICAgICAgICAgICAgaWYgKG1heF92YWx1ZVtfY2hhbm5lbDJdID4gcmFuZ2VfbWF4KSB7CiAgICAgICAgICAgICAgbWF4X3ZhbHVlW19jaGFubmVsMl0gPSByYW5nZV9tYXg7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKCsrc2NhbGVfY291bnRlciA9PT0gc2NhbGUpIHsKICAgICAgICBmb3IgKHZhciBfY2hhbm5lbDMgPSAwOyBfY2hhbm5lbDMgPCBvdXRwdXRfY2hhbm5lbHM7IF9jaGFubmVsMysrKSB7CiAgICAgICAgICBpZiAob3B0aW9ucy5iaXRzID09PSA4KSB7CiAgICAgICAgICAgIGRhdGFfdmlldy5zZXRJbnQ4KG9mZnNldCsrLCBtaW5fdmFsdWVbX2NoYW5uZWwzXSk7CiAgICAgICAgICAgIGRhdGFfdmlldy5zZXRJbnQ4KG9mZnNldCsrLCBtYXhfdmFsdWVbX2NoYW5uZWwzXSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50MTYob2Zmc2V0LCBtaW5fdmFsdWVbX2NoYW5uZWwzXSwgdHJ1ZSk7CiAgICAgICAgICAgIGRhdGFfdmlldy5zZXRJbnQxNihvZmZzZXQgKyAyLCBtYXhfdmFsdWVbX2NoYW5uZWwzXSwgdHJ1ZSk7CiAgICAgICAgICAgIG9mZnNldCArPSA0OwogICAgICAgICAgfQogICAgICAgICAgbWluX3ZhbHVlW19jaGFubmVsM10gPSBJbmZpbml0eTsKICAgICAgICAgIG1heF92YWx1ZVtfY2hhbm5lbDNdID0gLUluZmluaXR5OwogICAgICAgIH0KICAgICAgICBzY2FsZV9jb3VudGVyID0gMDsKICAgICAgfQogICAgfQogICAgaWYgKHNjYWxlX2NvdW50ZXIgPiAwKSB7CiAgICAgIGZvciAodmFyIF9jaGFubmVsNCA9IDA7IF9jaGFubmVsNCA8IG91dHB1dF9jaGFubmVsczsgX2NoYW5uZWw0KyspIHsKICAgICAgICBpZiAob3B0aW9ucy5iaXRzID09PSA4KSB7CiAgICAgICAgICBkYXRhX3ZpZXcuc2V0SW50OChvZmZzZXQrKywgbWluX3ZhbHVlW19jaGFubmVsNF0pOwogICAgICAgICAgZGF0YV92aWV3LnNldEludDgob2Zmc2V0KyssIG1heF92YWx1ZVtfY2hhbm5lbDRdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGF0YV92aWV3LnNldEludDE2KG9mZnNldCwgbWluX3ZhbHVlW19jaGFubmVsNF0sIHRydWUpOwogICAgICAgICAgZGF0YV92aWV3LnNldEludDE2KG9mZnNldCArIDIsIG1heF92YWx1ZVtfY2hhbm5lbDRdLCB0cnVlKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBidWZmZXI7CiAgfQoKICBvbm1lc3NhZ2UgPSBmdW5jdGlvbiBvbm1lc3NhZ2UoZXZ0KSB7CiAgICB2YXIgYnVmZmVyID0gZ2VuZXJhdGVXYXZlZm9ybURhdGEoZXZ0LmRhdGEpOwoKICAgIC8vIFRyYW5zZmVyIGJ1ZmZlciB0byB0aGUgY2FsbGluZyB0aHJlYWQKICAgIHRoaXMucG9zdE1lc3NhZ2UoYnVmZmVyLCBbYnVmZmVyXSk7CiAgICB0aGlzLmNsb3NlKCk7CiAgfTsKCn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPXdhdmVmb3JtLWRhdGEtd29ya2VyLmpzLm1hcAoK",null,!1);function u(e){if(function(e){return e&&"object"===r(e)&&"sample_rate"in e&&"samples_per_pixel"in e&&"bits"in e&&"length"in e&&"data"in e}(e)&&(e=function(e){var t=e.data,n=e.channels||1,i=8===e.bits?1:2,r=2*e.length*n;if(t.length!==r)throw new Error("WaveformData.create(): Length mismatch in JSON waveform data");var a=24+t.length*i,o=new ArrayBuffer(a),s=new DataView(o);s.setInt32(0,2,!0),s.setUint32(4,8===e.bits,!0),s.setInt32(8,e.sample_rate,!0),s.setInt32(12,e.samples_per_pixel,!0),s.setInt32(16,e.length,!0),s.setInt32(20,n,!0);var u=24;if(8===e.bits)for(var l=0;l<t.length;l++)s.setInt8(u++,t[l],!0);else for(var h=0;h<t.length;h++)s.setInt16(u,t[h],!0),u+=2;return o}(e)),!function(e){var t=e&&"object"===r(e)&&"byteLength"in e;if(t){var n=new DataView(e).getInt32(0,!0);if(1!==n&&2!==n)throw new TypeError("WaveformData.create(): This waveform data version not supported")}return t}(e))throw new TypeError("WaveformData.create(): Unknown data format");this._data=new DataView(e),this._offset=2===this._version()?24:20,this._channels=[];for(var t=0;t<this.channels;t++)this._channels[t]=new i(this,t)}function l(e,t,n){var i=function(e){for(var t=[],n=0;n<e.numberOfChannels;++n)t.push(e.getChannelData(n).buffer);return t}(e);if(t.disable_worker){var r=function(e){for(var t=e.scale,n=e.amplitude_scale,i=e.split_channels,r=e.length,a=e.sample_rate,o=e.channels.map(function(e){return new Float32Array(e)}),s=i?o.length:1,u=function(e,t){var n=Math.floor(e/t);return e-n*t>0&&n++,n}(r,t),l=8===e.bits?1:2,h=new ArrayBuffer(24+2*u*l*s),c=new DataView(h),d=0,p=24,f=new Array(s),g=new Array(s),m=0;m<s;m++)f[m]=1/0,g[m]=-1/0;var v=8===e.bits?-128:-32768,y=8===e.bits?127:32767;c.setInt32(0,2,!0),c.setUint32(4,8===e.bits,!0),c.setInt32(8,a,!0),c.setInt32(12,t,!0),c.setInt32(16,u,!0),c.setInt32(20,s,!0);for(var b=0;b<r;b++){var _=0;if(1===s){for(var w=0;w<o.length;++w)_+=o[w][b];(_=Math.floor(y*_*n/o.length))<f[0]&&(f[0]=_,f[0]<v&&(f[0]=v)),_>g[0]&&(g[0]=_,g[0]>y&&(g[0]=y))}else for(var S=0;S<s;++S)(_=Math.floor(y*o[S][b]*n))<f[S]&&(f[S]=_,f[S]<v&&(f[S]=v)),_>g[S]&&(g[S]=_,g[S]>y&&(g[S]=y));if(++d===t){for(var T=0;T<s;T++)8===e.bits?(c.setInt8(p++,f[T]),c.setInt8(p++,g[T])):(c.setInt16(p,f[T],!0),c.setInt16(p+2,g[T],!0),p+=4),f[T]=1/0,g[T]=-1/0;d=0}}if(d>0)for(var A=0;A<s;A++)8===e.bits?(c.setInt8(p++,f[A]),c.setInt8(p++,g[A])):(c.setInt16(p,f[A],!0),c.setInt16(p+2,g[A],!0));return h}({scale:t.scale,bits:t.bits,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:i});n(void 0,new u(r),e)}else{var a=new s;a.onmessage=function(t){n(void 0,new u(t.data),e)},a.postMessage({scale:t.scale,bits:t.bits,amplitude_scale:t.amplitude_scale,split_channels:t.split_channels,length:e.length,sample_rate:e.sampleRate,channels:i},i)}}function h(e){this._inputData=e.waveformData,this._output_samples_per_pixel=e.scale,this._scale=this._inputData.scale,this._input_buffer_size=this._inputData.length;var t=this._input_buffer_size*this._inputData.scale,n=Math.ceil(t/this._output_samples_per_pixel),i=8===this._inputData.bits?1:2,r=24+2*n*this._inputData.channels*i;this._output_data=new ArrayBuffer(r),this.output_dataview=new DataView(this._output_data),this.output_dataview.setInt32(0,2,!0),this.output_dataview.setUint32(4,8===this._inputData.bits,!0),this.output_dataview.setInt32(8,this._inputData.sample_rate,!0),this.output_dataview.setInt32(12,this._output_samples_per_pixel,!0),this.output_dataview.setInt32(16,n,!0),this.output_dataview.setInt32(20,this._inputData.channels,!0),this._outputWaveformData=new u(this._output_data),this._input_index=0,this._output_index=0;var a=this._inputData.channels;this._min=new Array(a),this._max=new Array(a);for(var o=0;o<a;++o)this._input_buffer_size>0?(this._min[o]=this._inputData.channel(o).min_sample(this._input_index),this._max[o]=this._inputData.channel(o).max_sample(this._input_index)):(this._min[o]=0,this._max[o]=0);this._min_value=8===this._inputData.bits?-128:-32768,this._max_value=8===this._inputData.bits?127:32767,this._where=0,this._prev_where=0,this._stop=0,this._last_input_index=0}u.create=function(e){return new u(e)},u.createFromAudio=function(e,t){var n=function(e){return{scale:e.scale||512,bits:e.bits||8,amplitude_scale:e.amplitude_scale||1,split_channels:e.split_channels||false,disable_worker:e.disable_worker||false}}(e);if(e.audio_context&&e.array_buffer)return function(e,t,n,i){function r(e){e||(e=new DOMException("EncodingError")),i(e),i=function(){}}var a=e.decodeAudioData(t,function(e){l(e,n,i)},r);a&&a.catch(r)}(e.audio_context,e.array_buffer,n,t);if(e.audio_buffer)return l(e.audio_buffer,n,t);throw new TypeError("WaveformData.createFromAudio(): Pass either an AudioContext and ArrayBuffer, or an AudioBuffer object")},h.prototype.sample_at_pixel=function(e){return Math.floor(e*this._output_samples_per_pixel)},h.prototype.next=function(){for(var e,t=0,n=this._inputData.channels;this._input_index<this._input_buffer_size&&t<1e3;){for(;Math.floor(this.sample_at_pixel(this._output_index)/this._scale)===this._input_index;){if(this._output_index>0)for(var i=0;i<n;++i)(e=this._outputWaveformData.channel(i)).set_min_sample(this._output_index-1,this._min[i]),e.set_max_sample(this._output_index-1,this._max[i]);if(this._last_input_index=this._input_index,this._output_index++,this._where=this.sample_at_pixel(this._output_index),this._prev_where=this.sample_at_pixel(this._output_index-1),this._where!==this._prev_where)for(var r=0;r<n;++r)this._min[r]=this._max_value,this._max[r]=this._min_value}for(this._where=this.sample_at_pixel(this._output_index),this._stop=Math.floor(this._where/this._scale),this._stop>this._input_buffer_size&&(this._stop=this._input_buffer_size);this._input_index<this._stop;){for(var a=0;a<n;++a){var o=(e=this._inputData.channel(a)).min_sample(this._input_index);o<this._min[a]&&(this._min[a]=o),(o=e.max_sample(this._input_index))>this._max[a]&&(this._max[a]=o)}this._input_index++}t++}if(this._input_index<this._input_buffer_size)return!1;if(this._input_index!==this._last_input_index)for(var s=0;s<n;++s)(e=this._outputWaveformData.channel(s)).set_min_sample(this._output_index-1,this._min[s]),e.set_max_sample(this._output_index-1,this._max[s]);return!0},h.prototype.getOutputData=function(){return this._output_data},u.prototype={_getResampleOptions:function(e){var t={};if(t.scale=e.scale,t.width=e.width,!a(t.width)&&("number"!=typeof t.width||t.width<=0))throw new RangeError("WaveformData.resample(): width should be a positive integer value");if(!a(t.scale)&&("number"!=typeof t.scale||t.scale<=0))throw new RangeError("WaveformData.resample(): scale should be a positive integer value");if(!t.scale&&!t.width)throw new Error("WaveformData.resample(): Missing scale or width option");if(t.width&&(t.scale=Math.floor(this.duration*this.sample_rate/t.width)),t.scale<this.scale)throw new Error("WaveformData.resample(): Zoom level "+t.scale+" too low, minimum: "+this.scale);return t.abortSignal=e.abortSignal,t},resample:function(e){(e=this._getResampleOptions(e)).waveformData=this;for(var t=new h(e);!t.next(););return new u(t.getOutputData())},concat:function(){var e=this,t=Array.prototype.slice.call(arguments);t.forEach(function(t){if(e.channels!==t.channels||e.sample_rate!==t.sample_rate||e.bits!==t.bits||e.scale!==t.scale)throw new Error("WaveformData.concat(): Waveforms are incompatible")});var n=this._concatBuffers.apply(this,t);return u.create(n)},_concatBuffers:function(){for(var e=Array.prototype.slice.call(arguments),t=this._offset,n=t,i=0,r=[this].concat(e).map(function(e){return e._data.buffer}),a=0;a<r.length;a++){var o=r[a],s=new DataView(o).getInt32(16,!0);n+=o.byteLength-t,i+=s}for(var u=new ArrayBuffer(n),l=new DataView(r[0]),h=new DataView(u),c=0;c<t;c++)h.setUint8(c,l.getUint8(c));h.setInt32(16,i,!0);for(var d=0,p=new Uint8Array(u,t),f=0;f<r.length;f++){var g=r[f];p.set(new Uint8Array(g,t),d),d+=g.byteLength-t}return u},slice:function(e){var t=0,n=0;if(a(e.startIndex)||a(e.endIndex)?a(e.startTime)||a(e.endTime)||(t=this.at_time(e.startTime),n=this.at_time(e.endTime)):(t=e.startIndex,n=e.endIndex),t<0)throw new RangeError("startIndex or startTime must not be negative");if(n<0)throw new RangeError("endIndex or endTime must not be negative");t>this.length&&(t=this.length),n>this.length&&(n=this.length),t>n&&(t=n);var i=n-t,r=8===this.bits?1:2,o=24+2*i*this.channels*r,s=new ArrayBuffer(o),l=new DataView(s);l.setInt32(0,2,!0),l.setUint32(4,8===this.bits,!0),l.setInt32(8,this.sample_rate,!0),l.setInt32(12,this.scale,!0),l.setInt32(16,i,!0),l.setInt32(20,this.channels,!0);for(var h=0;h<i*this.channels*2;h++){var c=this._at(t*this.channels*2+h);8===this.bits?l.setInt8(24+h,c):l.setInt16(24+2*h,c,!0)}return new u(s)},_version:function(){return this._data.getInt32(0,!0)},get length(){return this._data.getUint32(16,!0)},get bits(){return Boolean(this._data.getUint32(4,!0))?8:16},get duration(){return this.length*this.scale/this.sample_rate},get pixels_per_second(){return this.sample_rate/this.scale},get seconds_per_pixel(){return this.scale/this.sample_rate},get channels(){return 2===this._version()?this._data.getInt32(20,!0):1},channel:function(e){if(e>=0&&e<this._channels.length)return this._channels[e];throw new RangeError("Invalid channel: "+e)},get sample_rate(){return this._data.getInt32(8,!0)},get scale(){return this._data.getInt32(12,!0)},_at:function(e){return 8===this.bits?this._data.getInt8(this._offset+e):this._data.getInt16(this._offset+2*e,!0)},_set_at:function(e,t){return 8===this.bits?this._data.setInt8(this._offset+e,t):this._data.setInt16(this._offset+2*e,t,!0)},at_time:function(e){return Math.floor(e*this.sample_rate/this.scale)},time:function(e){return e*this.scale/this.sample_rate},toJSON:function(){for(var e={version:2,channels:this.channels,sample_rate:this.sample_rate,samples_per_pixel:this.scale,bits:this.bits,length:this.length,data:[]},t=0;t<this.length;t++)for(var n=0;n<this.channels;n++)e.data.push(this.channel(n).min_sample(t)),e.data.push(this.channel(n).max_sample(t));return e},toArrayBuffer:function(){return this._data.buffer}}},663:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;var i=n(680);Object.defineProperty(t,"Konva",{enumerable:!0,get:function(){return i.Konva}});const r=n(680);e.exports=r.Konva},680:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Konva=void 0;const i=n(8871),r=n(4060),a=n(6536),o=n(4473),s=n(7324),u=n(6267),l=n(7457),h=n(7949),c=n(1268),d=n(4723),p=n(9696),f=n(8665),g=n(9869),m=n(8604);t.Konva=r.Util._assign(i.Konva,{Util:r.Util,Transform:r.Transform,Node:a.Node,Container:o.Container,Stage:s.Stage,stages:s.stages,Layer:u.Layer,FastLayer:l.FastLayer,Group:h.Group,DD:c.DD,Shape:d.Shape,shapes:d.shapes,Animation:p.Animation,Tween:f.Tween,Easings:f.Easings,Context:g.Context,Canvas:m.Canvas}),t.default=t.Konva},1268:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DD=void 0;const i=n(8871),r=n(4060);t.DD={get isDragging(){let e=!1;return t.DD._dragElements.forEach(t=>{"dragging"===t.dragStatus&&(e=!0)}),e},justDragged:!1,get node(){let e;return t.DD._dragElements.forEach(t=>{e=t.node}),e},_dragElements:new Map,_drag(e){const n=[];t.DD._dragElements.forEach((t,i)=>{const{node:a}=t,o=a.getStage();o.setPointersPositions(e),void 0===t.pointerId&&(t.pointerId=r.Util._getFirstPointerId(e));const s=o._changedPointerPositions.find(e=>e.id===t.pointerId);if(s){if("dragging"!==t.dragStatus){const n=a.dragDistance();if(Math.max(Math.abs(s.x-t.startPointerPos.x),Math.abs(s.y-t.startPointerPos.y))<n)return;if(a.startDrag({evt:e}),!a.isDragging())return}a._setDragPosition(e,t),n.push(a)}}),n.forEach(t=>{t.fire("dragmove",{type:"dragmove",target:t,evt:e},!0)})},_endDragBefore(e){const n=[];t.DD._dragElements.forEach(r=>{const{node:a}=r,o=a.getStage();if(e&&o.setPointersPositions(e),!o._changedPointerPositions.find(e=>e.id===r.pointerId))return;"dragging"!==r.dragStatus&&"stopped"!==r.dragStatus||(t.DD.justDragged=!0,i.Konva._mouseListenClick=!1,i.Konva._touchListenClick=!1,i.Konva._pointerListenClick=!1,r.dragStatus="stopped");const s=r.node.getLayer()||r.node instanceof i.Konva.Stage&&r.node;s&&-1===n.indexOf(s)&&n.push(s)}),n.forEach(e=>{e.draw()})},_endDragAfter(e){t.DD._dragElements.forEach((n,i)=>{"stopped"===n.dragStatus&&n.node.fire("dragend",{type:"dragend",target:n.node,evt:e},!0),"dragging"!==n.dragStatus&&t.DD._dragElements.delete(i)})}},i.Konva.isBrowser&&(window.addEventListener("mouseup",t.DD._endDragBefore,!0),window.addEventListener("touchend",t.DD._endDragBefore,!0),window.addEventListener("touchcancel",t.DD._endDragBefore,!0),window.addEventListener("mousemove",t.DD._drag),window.addEventListener("touchmove",t.DD._drag),window.addEventListener("mouseup",t.DD._endDragAfter,!1),window.addEventListener("touchend",t.DD._endDragAfter,!1),window.addEventListener("touchcancel",t.DD._endDragAfter,!1))},1332:(e,t)=>{t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};function n(e,n,i){switch(e){case t.Patterns.PATTERN000:return(n+i)%2==0;case t.Patterns.PATTERN001:return n%2==0;case t.Patterns.PATTERN010:return i%3==0;case t.Patterns.PATTERN011:return(n+i)%3==0;case t.Patterns.PATTERN100:return(Math.floor(n/2)+Math.floor(i/3))%2==0;case t.Patterns.PATTERN101:return n*i%2+n*i%3==0;case t.Patterns.PATTERN110:return(n*i%2+n*i%3)%2==0;case t.Patterns.PATTERN111:return(n*i%3+(n+i)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}}t.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},t.from=function(e){return t.isValid(e)?parseInt(e,10):void 0},t.getPenaltyN1=function(e){const t=e.size;let n=0,i=0,r=0,a=null,o=null;for(let s=0;s<t;s++){i=r=0,a=o=null;for(let u=0;u<t;u++){let t=e.get(s,u);t===a?i++:(i>=5&&(n+=i-5+3),a=t,i=1),t=e.get(u,s),t===o?r++:(r>=5&&(n+=r-5+3),o=t,r=1)}i>=5&&(n+=i-5+3),r>=5&&(n+=r-5+3)}return n},t.getPenaltyN2=function(e){const t=e.size;let n=0;for(let i=0;i<t-1;i++)for(let r=0;r<t-1;r++){const t=e.get(i,r)+e.get(i,r+1)+e.get(i+1,r)+e.get(i+1,r+1);4!==t&&0!==t||n++}return 3*n},t.getPenaltyN3=function(e){const t=e.size;let n=0,i=0,r=0;for(let a=0;a<t;a++){i=r=0;for(let o=0;o<t;o++)i=i<<1&2047|e.get(a,o),o>=10&&(1488===i||93===i)&&n++,r=r<<1&2047|e.get(o,a),o>=10&&(1488===r||93===r)&&n++}return 40*n},t.getPenaltyN4=function(e){let t=0;const n=e.data.length;for(let i=0;i<n;i++)t+=e.data[i];return 10*Math.abs(Math.ceil(100*t/n/5)-10)},t.applyMask=function(e,t){const i=t.size;for(let r=0;r<i;r++)for(let a=0;a<i;a++)t.isReserved(a,r)||t.xor(a,r,n(e,a,r))},t.getBestMask=function(e,n){const i=Object.keys(t.Patterns).length;let r=0,a=1/0;for(let o=0;o<i;o++){n(o),t.applyMask(o,e);const i=t.getPenaltyN1(e)+t.getPenaltyN2(e)+t.getPenaltyN3(e)+t.getPenaltyN4(e);t.applyMask(o,e),i<a&&(a=i,r=o)}return r}},1333:e=>{e.exports=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}},1427:(e,t,n)=>{const i=n(6886),r=n(7518),a=n(9953),o=n(208),s=n(1878),u=i.getBCHDigit(7973);function l(e,t){return o.getCharCountIndicator(e,t)+4}function h(e,t){let n=0;return e.forEach(function(e){const i=l(e.mode,t);n+=i+e.getBitsLength()}),n}t.from=function(e,t){return s.isValid(e)?parseInt(e,10):t},t.getCapacity=function(e,t,n){if(!s.isValid(e))throw new Error("Invalid QR Code version");void 0===n&&(n=o.BYTE);const a=8*(i.getSymbolTotalCodewords(e)-r.getTotalCodewordsCount(e,t));if(n===o.MIXED)return a;const u=a-l(n,e);switch(n){case o.NUMERIC:return Math.floor(u/10*3);case o.ALPHANUMERIC:return Math.floor(u/11*2);case o.KANJI:return Math.floor(u/13);case o.BYTE:default:return Math.floor(u/8)}},t.getBestVersionForData=function(e,n){let i;const r=a.from(n,a.M);if(Array.isArray(e)){if(e.length>1)return function(e,n){for(let i=1;i<=40;i++)if(h(e,i)<=t.getCapacity(i,n,o.MIXED))return i}(e,r);if(0===e.length)return 1;i=e[0]}else i=e;return function(e,n,i){for(let r=1;r<=40;r++)if(n<=t.getCapacity(r,i,e))return r}(i.mode,i.getLength(),r)},t.getEncodedBits=function(e){if(!s.isValid(e)||e<7)throw new Error("Invalid QR Code version");let t=e<<12;for(;i.getBCHDigit(t)-u>=0;)t^=7973<<i.getBCHDigit(t)-u;return e<<12|t}},1433:(e,t,n)=>{const i=n(208),r=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function a(e){this.mode=i.ALPHANUMERIC,this.data=e}a.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t+2<=this.data.length;t+=2){let n=45*r.indexOf(this.data[t]);n+=r.indexOf(this.data[t+1]),e.put(n,11)}this.data.length%2&&e.put(r.indexOf(this.data[t]),6)},e.exports=a},1878:(e,t)=>{t.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}},1958:(e,t,n)=>{"use strict";t.EY=void 0;const i=n(4060),r=n(4892),a=n(4723),o=n(8871),s=n(5483),u=n(8871);function l(e){return[...e].reduce((e,t,n,i)=>{if(/\p{Emoji}/u.test(t)){const r=i[n+1];r&&/\p{Emoji_Modifier}|\u200D/u.test(r)?(e.push(t+r),i[n+1]=""):e.push(t)}else/\p{Regional_Indicator}{2}/u.test(t+(i[n+1]||""))?e.push(t+i[n+1]):n>0&&/\p{Mn}|\p{Me}|\p{Mc}/u.test(t)?e[e.length-1]+=t:t&&e.push(t);return e},[])}const h="auto",c="inherit",d="justify",p="left",f="middle",g="normal",m=" ",v="none",y=["direction","fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],b=y.length;let _;function w(){return _||(_=i.Util.createCanvasElement().getContext("2d"),_)}class S extends a.Shape{constructor(e){super(function(e){return(e=e||{}).fillLinearGradientColorStops||e.fillRadialGradientColorStops||e.fillPatternImage||(e.fill=e.fill||"black"),e}(e)),this._partialTextX=0,this._partialTextY=0;for(let e=0;e<b;e++)this.on(y[e]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(e){const t=this.textArr,n=t.length;if(!this.text())return;let i,r=this.padding(),a=this.fontSize(),s=this.lineHeight()*a,u=this.verticalAlign(),h=this.direction(),g=0,m=this.align(),v=this.getWidth(),y=this.letterSpacing(),b=this.fill(),_=this.textDecoration(),w=-1!==_.indexOf("underline"),S=-1!==_.indexOf("line-through");h=h===c?e.direction:h;let T=s/2,A=f;if(o.Konva._fixTextRendering){const e=this.measureSize("M");A="alphabetic",T=(e.fontBoundingBoxAscent-e.fontBoundingBoxDescent)/2+s/2}for("rtl"===h&&e.setAttr("direction",h),e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",A),e.setAttr("textAlign",p),u===f?g=(this.getHeight()-n*s-2*r)/2:"bottom"===u&&(g=this.getHeight()-n*s-2*r),e.translate(r,g+r),i=0;i<n;i++){let u=0,c=0;const p=t[i],f=p.text,g=p.width,_=p.lastInParagraph;if(e.save(),"right"===m?u+=v-g-2*r:"center"===m&&(u+=(v-g-2*r)/2),w){e.save(),e.beginPath();const t=u,n=T+c+(o.Konva._fixTextRendering?Math.round(a/4):Math.round(a/2));e.moveTo(t,n);const i=m!==d||_?g:v-2*r;e.lineTo(t+Math.round(i),n),e.lineWidth=a/15;const s=this._getLinearGradient();e.strokeStyle=s||b,e.stroke(),e.restore()}if(S){e.save(),e.beginPath();const t=o.Konva._fixTextRendering?-Math.round(a/4):0;e.moveTo(u,T+c+t);const n=m!==d||_?g:v-2*r;e.lineTo(u+Math.round(n),T+c+t),e.lineWidth=a/15;const i=this._getLinearGradient();e.strokeStyle=i||b,e.stroke(),e.restore()}if("rtl"===h||0===y&&m!==d)0!==y&&e.setAttr("letterSpacing",`${y}px`),this._partialTextX=u,this._partialTextY=T+c,this._partialText=f,e.fillStrokeShape(this);else{const t=f.split(" ").length-1,n=l(f);for(let i=0;i<n.length;i++){const a=n[i];" "!==a||_||m!==d||(u+=(v-2*r-g)/t),this._partialTextX=u,this._partialTextY=T+c,this._partialText=a,e.fillStrokeShape(this),u+=this.measureSize(a).width+y}}e.restore(),n>1&&(T+=s)}}_hitFunc(e){const t=this.getWidth(),n=this.getHeight();e.beginPath(),e.rect(0,0,t,n),e.closePath(),e.fillStrokeShape(this)}setText(e){const t=i.Util._isString(e)?e:null==e?"":e+"";return this._setAttr("text",t),this}getWidth(){return this.attrs.width===h||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===h||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return i.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var t,n,i,r,a,o,s,u,l,h,c;let d,p=w(),f=this.fontSize();p.save(),p.font=this._getContextFont(),d=p.measureText(e),p.restore();const g=f/100;return{actualBoundingBoxAscent:null!==(t=d.actualBoundingBoxAscent)&&void 0!==t?t:71.58203125*g,actualBoundingBoxDescent:null!==(n=d.actualBoundingBoxDescent)&&void 0!==n?n:0,actualBoundingBoxLeft:null!==(i=d.actualBoundingBoxLeft)&&void 0!==i?i:-7.421875*g,actualBoundingBoxRight:null!==(r=d.actualBoundingBoxRight)&&void 0!==r?r:75.732421875*g,alphabeticBaseline:null!==(a=d.alphabeticBaseline)&&void 0!==a?a:0,emHeightAscent:null!==(o=d.emHeightAscent)&&void 0!==o?o:100*g,emHeightDescent:null!==(s=d.emHeightDescent)&&void 0!==s?s:-20*g,fontBoundingBoxAscent:null!==(u=d.fontBoundingBoxAscent)&&void 0!==u?u:91*g,fontBoundingBoxDescent:null!==(l=d.fontBoundingBoxDescent)&&void 0!==l?l:21*g,hangingBaseline:null!==(h=d.hangingBaseline)&&void 0!==h?h:72.80000305175781*g,ideographicBaseline:null!==(c=d.ideographicBaseline)&&void 0!==c?c:-21*g,width:d.width,height:f}}_getContextFont(){return this.fontStyle()+m+this.fontVariant()+m+(this.fontSize()+"px ")+this.fontFamily().split(",").map(e=>{const t=(e=e.trim()).indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e=`"${e}"`),e}).join(", ")}_addTextLine(e){this.align()===d&&(e=e.trim());const t=this._getTextWidth(e);return this.textArr.push({text:e,width:t,lastInParagraph:!1})}_getTextWidth(e){const t=this.letterSpacing(),n=e.length;return w().measureText(e).width+t*n}_setTextData(){let e=this.text().split("\n"),t=+this.fontSize(),n=0,i=this.lineHeight()*t,r=this.attrs.width,a=this.attrs.height,o=r!==h&&void 0!==r,s=a!==h&&void 0!==a,u=this.padding(),c=r-2*u,d=a-2*u,p=0,f=this.wrap(),g="char"!==f&&f!==v,y=this.ellipsis();this.textArr=[],w().font=this._getContextFont();const b=y?this._getTextWidth("…"):0;for(let t=0,r=e.length;t<r;++t){let a=e[t],u=this._getTextWidth(a);if(o&&u>c)for(;a.length>0;){let e=0,t=l(a).length,r="",o=0;for(;e<t;){const n=e+t>>>1,u=l(a).slice(0,n+1).join(""),h=this._getTextWidth(u);(y&&s&&p+i>d?h+b:h)<=c?(e=n+1,r=u,o=h):t=n}if(!r)break;if(g){const t=l(a),n=l(r),i=t[n.length];let s;if((i===m||"-"===i)&&o<=c)s=n.length;else{const e=n.lastIndexOf(m),t=n.lastIndexOf("-");s=Math.max(e,t)+1}s>0&&(e=s,r=t.slice(0,e).join(""),o=this._getTextWidth(r))}if(r=r.trimRight(),this._addTextLine(r),n=Math.max(n,o),p+=i,this._shouldHandleEllipsis(p)){this._tryToAddEllipsisToLastLine();break}if(a=l(a).slice(e).join("").trimLeft(),a.length>0&&(u=this._getTextWidth(a),u<=c)){this._addTextLine(a),p+=i,n=Math.max(n,u);break}}else this._addTextLine(a),p+=i,n=Math.max(n,u),this._shouldHandleEllipsis(p)&&t<r-1&&this._tryToAddEllipsisToLastLine();if(this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0),s&&p+i>d)break}this.textHeight=t,this.textWidth=n}_shouldHandleEllipsis(e){const t=+this.fontSize(),n=this.lineHeight()*t,i=this.attrs.height,r=i!==h&&void 0!==i,a=i-2*this.padding();return!(this.wrap()!==v)||r&&e+n>a}_tryToAddEllipsisToLastLine(){const e=this.attrs.width,t=e!==h&&void 0!==e,n=e-2*this.padding(),i=this.ellipsis(),r=this.textArr[this.textArr.length-1];r&&i&&(t&&(this._getTextWidth(r.text+"…")<n||(r.text=r.text.slice(0,r.text.length-3))),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(r.text+"…"))}getStrokeScaleEnabled(){return!0}_useBufferCanvas(){const e=-1!==this.textDecoration().indexOf("underline")||-1!==this.textDecoration().indexOf("line-through"),t=this.hasShadow();return!(!e||!t)||super._useBufferCanvas()}}t.EY=S,S.prototype._fillFunc=function(e){e.fillText(this._partialText,this._partialTextX,this._partialTextY)},S.prototype._strokeFunc=function(e){e.setAttr("miterLimit",2),e.strokeText(this._partialText,this._partialTextX,this._partialTextY)},S.prototype.className="Text",S.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],(0,u._registerNode)(S),r.Factory.overWriteSetter(S,"width",(0,s.getNumberOrAutoValidator)()),r.Factory.overWriteSetter(S,"height",(0,s.getNumberOrAutoValidator)()),r.Factory.addGetterSetter(S,"direction",c),r.Factory.addGetterSetter(S,"fontFamily","Arial"),r.Factory.addGetterSetter(S,"fontSize",12,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(S,"fontStyle",g),r.Factory.addGetterSetter(S,"fontVariant",g),r.Factory.addGetterSetter(S,"padding",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(S,"align",p),r.Factory.addGetterSetter(S,"verticalAlign","top"),r.Factory.addGetterSetter(S,"lineHeight",1,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(S,"wrap","word"),r.Factory.addGetterSetter(S,"ellipsis",!1,(0,s.getBooleanValidator)()),r.Factory.addGetterSetter(S,"letterSpacing",0,(0,s.getNumberValidator)()),r.Factory.addGetterSetter(S,"text","",(0,s.getStringValidator)()),r.Factory.addGetterSetter(S,"textDecoration","")},2065:(e,t,n)=>{"use strict";n.d(t,{Ay:()=>Pe});var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)};function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return a=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},a.apply(this,arguments)};function o(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function s(e,t){var n=t&&t.cache?t.cache:y,i=t&&t.serializer?t.serializer:m;return(t&&t.strategy?t.strategy:c)(e,{cache:n,serializer:i})}function u(e,t,n,i){var r,a=null==(r=i)||"number"==typeof r||"boolean"==typeof r?i:n(i),o=t.get(a);return void 0===o&&(o=e.call(this,i),t.set(a,o)),o}function l(e,t,n){var i=Array.prototype.slice.call(arguments,3),r=n(i),a=t.get(r);return void 0===a&&(a=e.apply(this,i),t.set(r,a)),a}function h(e,t,n,i,r){return n.bind(t,e,i,r)}function c(e,t){return h(e,this,1===e.length?u:l,t.cache.create(),t.serializer)}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var d,p,f,g,m=function(){return JSON.stringify(arguments)},v=function(){function e(){this.cache=Object.create(null)}return e.prototype.get=function(e){return this.cache[e]},e.prototype.set=function(e,t){this.cache[e]=t},e}(),y={create:function(){return new v}},b={variadic:function(e,t){return h(e,this,l,t.cache.create(),t.serializer)},monadic:function(e,t){return h(e,this,u,t.cache.create(),t.serializer)}};function _(e){return e.type===p.literal}function w(e){return e.type===p.argument}function S(e){return e.type===p.number}function T(e){return e.type===p.date}function A(e){return e.type===p.time}function E(e){return e.type===p.select}function x(e){return e.type===p.plural}function C(e){return e.type===p.pound}function k(e){return e.type===p.tag}function I(e){return!(!e||"object"!=typeof e||e.type!==f.number)}function M(e){return!(!e||"object"!=typeof e||e.type!==f.dateTime)}!function(e){e[e.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",e[e.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",e[e.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",e[e.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",e[e.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",e[e.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",e[e.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",e[e.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",e[e.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",e[e.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",e[e.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",e[e.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",e[e.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",e[e.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",e[e.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",e[e.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",e[e.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",e[e.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",e[e.INVALID_TAG=23]="INVALID_TAG",e[e.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",e[e.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",e[e.UNCLOSED_TAG=27]="UNCLOSED_TAG"}(d||(d={})),(g=p||(p={}))[g.literal=0]="literal",g[g.argument=1]="argument",g[g.number=2]="number",g[g.date=3]="date",g[g.time=4]="time",g[g.select=5]="select",g[g.plural=6]="plural",g[g.pound=7]="pound",g[g.tag=8]="tag",function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(f||(f={}));var P=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,L=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function D(e){var t={};return e.replace(L,function(e){var n=e.length;switch(e[0]){case"G":t.era=4===n?"long":5===n?"narrow":"short";break;case"y":t.year=2===n?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][n-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][n-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===n?"long":5===n?"narrow":"short";break;case"e":if(n<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"c":if(n<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][n-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][n-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][n-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][n-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][n-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][n-1];break;case"s":t.second=["numeric","2-digit"][n-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=n<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),t}var R=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function N(e){return e.replace(/^(.*?)-/,"")}var O=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,U=/^(@+)?(\+|#+)?[rs]?$/g,B=/(\*)(0+)|(#+)(0+)|(0+)/g,F=/^(0+)$/;function j(e){var t={};return"r"===e[e.length-1]?t.roundingPriority="morePrecision":"s"===e[e.length-1]&&(t.roundingPriority="lessPrecision"),e.replace(U,function(e,n,i){return"string"!=typeof i?(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length):"+"===i?t.minimumSignificantDigits=n.length:"#"===n[0]?t.maximumSignificantDigits=n.length:(t.minimumSignificantDigits=n.length,t.maximumSignificantDigits=n.length+("string"==typeof i?i.length:0)),""}),t}function G(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function H(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var n=e.slice(0,2);if("+!"===n?(t.signDisplay="always",e=e.slice(2)):"+?"===n&&(t.signDisplay="exceptZero",e=e.slice(2)),!F.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function V(e){return G(e)||{}}function W(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n];switch(r.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=r.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=N(r.options[0]);continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=a(a(a({},t),{notation:"scientific"}),r.options.reduce(function(e,t){return a(a({},e),V(t))},{}));continue;case"engineering":t=a(a(a({},t),{notation:"engineering"}),r.options.reduce(function(e,t){return a(a({},e),V(t))},{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(r.options[0]);continue;case"rounding-mode-floor":t.roundingMode="floor";continue;case"rounding-mode-ceiling":t.roundingMode="ceil";continue;case"rounding-mode-down":t.roundingMode="trunc";continue;case"rounding-mode-up":t.roundingMode="expand";continue;case"rounding-mode-half-even":t.roundingMode="halfEven";continue;case"rounding-mode-half-down":t.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":t.roundingMode="halfExpand";continue;case"integer-width":if(r.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");r.options[0].replace(B,function(e,n,i,r,a,o){if(n)t.minimumIntegerDigits=i.length;else{if(r&&a)throw new Error("We currently do not support maximum integer digits");if(o)throw new Error("We currently do not support exact integer digits")}return""});continue}if(F.test(r.stem))t.minimumIntegerDigits=r.stem.length;else if(O.test(r.stem)){if(r.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");r.stem.replace(O,function(e,n,i,r,a,o){return"*"===i?t.minimumFractionDigits=n.length:r&&"#"===r[0]?t.maximumFractionDigits=r.length:a&&o?(t.minimumFractionDigits=a.length,t.maximumFractionDigits=a.length+o.length):(t.minimumFractionDigits=n.length,t.maximumFractionDigits=n.length),""});var o=r.options[0];"w"===o?t=a(a({},t),{trailingZeroDisplay:"stripIfInteger"}):o&&(t=a(a({},t),j(o)))}else if(U.test(r.stem))t=a(a({},t),j(r.stem));else{var s=G(r.stem);s&&(t=a(a({},t),s));var u=H(r.stem);u&&(t=a(a({},t),u))}}return t}var z,K={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function X(e){var t=e.hourCycle;if(void 0===t&&e.hourCycles&&e.hourCycles.length&&(t=e.hourCycles[0]),t)switch(t){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var n,i=e.language;return"root"!==i&&(n=e.maximize().region),(K[n||""]||K[i||""]||K["".concat(i,"-001")]||K["001"])[0]}var Y=new RegExp("^".concat(P.source,"*")),q=new RegExp("".concat(P.source,"*$"));function Z(e,t){return{start:e,end:t}}var J=!!String.prototype.startsWith&&"_a".startsWith("a",1),Q=!!String.fromCodePoint,$=!!Object.fromEntries,ee=!!String.prototype.codePointAt,te=!!String.prototype.trimStart,ne=!!String.prototype.trimEnd,ie=Number.isSafeInteger?Number.isSafeInteger:function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e&&Math.abs(e)<=9007199254740991},re=!0;try{re="a"===(null===(z=de("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu").exec("a"))||void 0===z?void 0:z[0])}catch(e){re=!1}var ae,oe=J?function(e,t,n){return e.startsWith(t,n)}:function(e,t,n){return e.slice(n,n+t.length)===t},se=Q?String.fromCodePoint:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n,i="",r=e.length,a=0;r>a;){if((n=e[a++])>1114111)throw RangeError(n+" is not a valid code point");i+=n<65536?String.fromCharCode(n):String.fromCharCode(55296+((n-=65536)>>10),n%1024+56320)}return i},ue=$?Object.fromEntries:function(e){for(var t={},n=0,i=e;n<i.length;n++){var r=i[n],a=r[0],o=r[1];t[a]=o}return t},le=ee?function(e,t){return e.codePointAt(t)}:function(e,t){var n=e.length;if(!(t<0||t>=n)){var i,r=e.charCodeAt(t);return r<55296||r>56319||t+1===n||(i=e.charCodeAt(t+1))<56320||i>57343?r:i-56320+(r-55296<<10)+65536}},he=te?function(e){return e.trimStart()}:function(e){return e.replace(Y,"")},ce=ne?function(e){return e.trimEnd()}:function(e){return e.replace(q,"")};function de(e,t){return new RegExp(e,t)}if(re){var pe=de("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");ae=function(e,t){var n;return pe.lastIndex=t,null!==(n=pe.exec(e)[1])&&void 0!==n?n:""}}else ae=function(e,t){for(var n=[];;){var i=le(e,t);if(void 0===i||ye(i)||be(i))break;n.push(i),t+=i>=65536?2:1}return se.apply(void 0,n)};var fe,ge=function(){function e(e,t){void 0===t&&(t={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!t.ignoreTag,this.locale=t.locale,this.requiresOtherClause=!!t.requiresOtherClause,this.shouldParseSkeletons=!!t.shouldParseSkeletons}return e.prototype.parse=function(){if(0!==this.offset())throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},e.prototype.parseMessage=function(e,t,n){for(var i=[];!this.isEOF();){var r=this.char();if(123===r){if((a=this.parseArgument(e,n)).err)return a;i.push(a.val)}else{if(125===r&&e>0)break;if(35!==r||"plural"!==t&&"selectordinal"!==t){if(60===r&&!this.ignoreTag&&47===this.peek()){if(n)break;return this.error(d.UNMATCHED_CLOSING_TAG,Z(this.clonePosition(),this.clonePosition()))}if(60===r&&!this.ignoreTag&&me(this.peek()||0)){if((a=this.parseTag(e,t)).err)return a;i.push(a.val)}else{var a;if((a=this.parseLiteral(e,t)).err)return a;i.push(a.val)}}else{var o=this.clonePosition();this.bump(),i.push({type:p.pound,location:Z(o,this.clonePosition())})}}}return{val:i,err:null}},e.prototype.parseTag=function(e,t){var n=this.clonePosition();this.bump();var i=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:p.literal,value:"<".concat(i,"/>"),location:Z(n,this.clonePosition())},err:null};if(this.bumpIf(">")){var r=this.parseMessage(e+1,t,!0);if(r.err)return r;var a=r.val,o=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!me(this.char()))return this.error(d.INVALID_TAG,Z(o,this.clonePosition()));var s=this.clonePosition();return i!==this.parseTagName()?this.error(d.UNMATCHED_CLOSING_TAG,Z(s,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:p.tag,value:i,children:a,location:Z(n,this.clonePosition())},err:null}:this.error(d.INVALID_TAG,Z(o,this.clonePosition())))}return this.error(d.UNCLOSED_TAG,Z(n,this.clonePosition()))}return this.error(d.INVALID_TAG,Z(n,this.clonePosition()))},e.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&ve(this.char());)this.bump();return this.message.slice(e,this.offset())},e.prototype.parseLiteral=function(e,t){for(var n=this.clonePosition(),i="";;){var r=this.tryParseQuote(t);if(r)i+=r;else{var a=this.tryParseUnquoted(e,t);if(a)i+=a;else{var o=this.tryParseLeftAngleBracket();if(!o)break;i+=o}}}var s=Z(n,this.clonePosition());return{val:{type:p.literal,value:i,location:s},err:null}},e.prototype.tryParseLeftAngleBracket=function(){return this.isEOF()||60!==this.char()||!this.ignoreTag&&(me(e=this.peek()||0)||47===e)?null:(this.bump(),"<");var e},e.prototype.tryParseQuote=function(e){if(this.isEOF()||39!==this.char())return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if("plural"===e||"selectordinal"===e)break;return null;default:return null}this.bump();var t=[this.char()];for(this.bump();!this.isEOF();){var n=this.char();if(39===n){if(39!==this.peek()){this.bump();break}t.push(39),this.bump()}else t.push(n);this.bump()}return se.apply(void 0,t)},e.prototype.tryParseUnquoted=function(e,t){if(this.isEOF())return null;var n=this.char();return 60===n||123===n||35===n&&("plural"===t||"selectordinal"===t)||125===n&&e>0?null:(this.bump(),se(n))},e.prototype.parseArgument=function(e,t){var n=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,Z(n,this.clonePosition()));if(125===this.char())return this.bump(),this.error(d.EMPTY_ARGUMENT,Z(n,this.clonePosition()));var i=this.parseIdentifierIfPossible().value;if(!i)return this.error(d.MALFORMED_ARGUMENT,Z(n,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,Z(n,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:p.argument,value:i,location:Z(n,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,Z(n,this.clonePosition())):this.parseArgumentOptions(e,t,i,n);default:return this.error(d.MALFORMED_ARGUMENT,Z(n,this.clonePosition()))}},e.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),t=this.offset(),n=ae(this.message,t),i=t+n.length;return this.bumpTo(i),{value:n,location:Z(e,this.clonePosition())}},e.prototype.parseArgumentOptions=function(e,t,n,i){var r,o=this.clonePosition(),s=this.parseIdentifierIfPossible().value,u=this.clonePosition();switch(s){case"":return this.error(d.EXPECT_ARGUMENT_TYPE,Z(o,u));case"number":case"date":case"time":this.bumpSpace();var l=null;if(this.bumpIf(",")){this.bumpSpace();var h=this.clonePosition();if((w=this.parseSimpleArgStyleIfPossible()).err)return w;if(0===(v=ce(w.val)).length)return this.error(d.EXPECT_ARGUMENT_STYLE,Z(this.clonePosition(),this.clonePosition()));l={style:v,styleLocation:Z(h,this.clonePosition())}}if((S=this.tryParseArgumentClose(i)).err)return S;var c=Z(i,this.clonePosition());if(l&&oe(null==l?void 0:l.style,"::",0)){var g=he(l.style.slice(2));if("number"===s)return(w=this.parseNumberSkeletonFromString(g,l.styleLocation)).err?w:{val:{type:p.number,value:n,location:c,style:w.val},err:null};if(0===g.length)return this.error(d.EXPECT_DATE_TIME_SKELETON,c);var m=g;this.locale&&(m=function(e,t){for(var n="",i=0;i<e.length;i++){var r=e.charAt(i);if("j"===r){for(var a=0;i+1<e.length&&e.charAt(i+1)===r;)a++,i++;var o=1+(1&a),s=a<2?1:3+(a>>1),u=X(t);for("H"!=u&&"k"!=u||(s=0);s-- >0;)n+="a";for(;o-- >0;)n=u+n}else n+="J"===r?"H":r}return n}(g,this.locale));var v={type:f.dateTime,pattern:m,location:l.styleLocation,parsedOptions:this.shouldParseSkeletons?D(m):{}};return{val:{type:"date"===s?p.date:p.time,value:n,location:c,style:v},err:null}}return{val:{type:"number"===s?p.number:"date"===s?p.date:p.time,value:n,location:c,style:null!==(r=null==l?void 0:l.style)&&void 0!==r?r:null},err:null};case"plural":case"selectordinal":case"select":var y=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(d.EXPECT_SELECT_ARGUMENT_OPTIONS,Z(y,a({},y)));this.bumpSpace();var b=this.parseIdentifierIfPossible(),_=0;if("select"!==s&&"offset"===b.value){if(!this.bumpIf(":"))return this.error(d.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Z(this.clonePosition(),this.clonePosition()));var w;if(this.bumpSpace(),(w=this.tryParseDecimalInteger(d.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,d.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE)).err)return w;this.bumpSpace(),b=this.parseIdentifierIfPossible(),_=w.val}var S,T=this.tryParsePluralOrSelectOptions(e,s,t,b);if(T.err)return T;if((S=this.tryParseArgumentClose(i)).err)return S;var A=Z(i,this.clonePosition());return"select"===s?{val:{type:p.select,value:n,options:ue(T.val),location:A},err:null}:{val:{type:p.plural,value:n,options:ue(T.val),offset:_,pluralType:"plural"===s?"cardinal":"ordinal",location:A},err:null};default:return this.error(d.INVALID_ARGUMENT_TYPE,Z(o,u))}},e.prototype.tryParseArgumentClose=function(e){return this.isEOF()||125!==this.char()?this.error(d.EXPECT_ARGUMENT_CLOSING_BRACE,Z(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},e.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,t=this.clonePosition();!this.isEOF();)switch(this.char()){case 39:this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(d.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Z(n,this.clonePosition()));this.bump();break;case 123:e+=1,this.bump();break;case 125:if(!(e>0))return{val:this.message.slice(t.offset,this.offset()),err:null};e-=1;break;default:this.bump()}return{val:this.message.slice(t.offset,this.offset()),err:null}},e.prototype.parseNumberSkeletonFromString=function(e,t){var n=[];try{n=function(e){if(0===e.length)throw new Error("Number skeleton cannot be empty");for(var t=[],n=0,i=e.split(R).filter(function(e){return e.length>0});n<i.length;n++){var r=i[n].split("/");if(0===r.length)throw new Error("Invalid number skeleton");for(var a=r[0],o=r.slice(1),s=0,u=o;s<u.length;s++)if(0===u[s].length)throw new Error("Invalid number skeleton");t.push({stem:a,options:o})}return t}(e)}catch(e){return this.error(d.INVALID_NUMBER_SKELETON,t)}return{val:{type:f.number,tokens:n,location:t,parsedOptions:this.shouldParseSkeletons?W(n):{}},err:null}},e.prototype.tryParsePluralOrSelectOptions=function(e,t,n,i){for(var r,a=!1,o=[],s=new Set,u=i.value,l=i.location;;){if(0===u.length){var h=this.clonePosition();if("select"===t||!this.bumpIf("="))break;var c=this.tryParseDecimalInteger(d.EXPECT_PLURAL_ARGUMENT_SELECTOR,d.INVALID_PLURAL_ARGUMENT_SELECTOR);if(c.err)return c;l=Z(h,this.clonePosition()),u=this.message.slice(h.offset,this.offset())}if(s.has(u))return this.error("select"===t?d.DUPLICATE_SELECT_ARGUMENT_SELECTOR:d.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,l);"other"===u&&(a=!0),this.bumpSpace();var p=this.clonePosition();if(!this.bumpIf("{"))return this.error("select"===t?d.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:d.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Z(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(e+1,t,n);if(f.err)return f;var g=this.tryParseArgumentClose(p);if(g.err)return g;o.push([u,{value:f.val,location:Z(p,this.clonePosition())}]),s.add(u),this.bumpSpace(),u=(r=this.parseIdentifierIfPossible()).value,l=r.location}return 0===o.length?this.error("select"===t?d.EXPECT_SELECT_ARGUMENT_SELECTOR:d.EXPECT_PLURAL_ARGUMENT_SELECTOR,Z(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!a?this.error(d.MISSING_OTHER_CLAUSE,Z(this.clonePosition(),this.clonePosition())):{val:o,err:null}},e.prototype.tryParseDecimalInteger=function(e,t){var n=1,i=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(n=-1);for(var r=!1,a=0;!this.isEOF();){var o=this.char();if(!(o>=48&&o<=57))break;r=!0,a=10*a+(o-48),this.bump()}var s=Z(i,this.clonePosition());return r?ie(a*=n)?{val:a,err:null}:this.error(t,s):this.error(e,s)},e.prototype.offset=function(){return this.position.offset},e.prototype.isEOF=function(){return this.offset()===this.message.length},e.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},e.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var t=le(this.message,e);if(void 0===t)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return t},e.prototype.error=function(e,t){return{val:null,err:{kind:e,message:this.message,location:t}}},e.prototype.bump=function(){if(!this.isEOF()){var e=this.char();10===e?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},e.prototype.bumpIf=function(e){if(oe(this.message,e,this.offset())){for(var t=0;t<e.length;t++)this.bump();return!0}return!1},e.prototype.bumpUntil=function(e){var t=this.offset(),n=this.message.indexOf(e,t);return n>=0?(this.bumpTo(n),!0):(this.bumpTo(this.message.length),!1)},e.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var t=this.offset();if(t===e)break;if(t>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},e.prototype.bumpSpace=function(){for(;!this.isEOF()&&ye(this.char());)this.bump()},e.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),t=this.offset(),n=this.message.charCodeAt(t+(e>=65536?2:1));return null!=n?n:null},e}();function me(e){return e>=97&&e<=122||e>=65&&e<=90}function ve(e){return 45===e||46===e||e>=48&&e<=57||95===e||e>=97&&e<=122||e>=65&&e<=90||183==e||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8255&&e<=8256||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=65536&&e<=983039}function ye(e){return e>=9&&e<=13||32===e||133===e||e>=8206&&e<=8207||8232===e||8233===e}function be(e){return e>=33&&e<=35||36===e||e>=37&&e<=39||40===e||41===e||42===e||43===e||44===e||45===e||e>=46&&e<=47||e>=58&&e<=59||e>=60&&e<=62||e>=63&&e<=64||91===e||92===e||93===e||94===e||96===e||123===e||124===e||125===e||126===e||161===e||e>=162&&e<=165||166===e||167===e||169===e||171===e||172===e||174===e||176===e||177===e||182===e||187===e||191===e||215===e||247===e||e>=8208&&e<=8213||e>=8214&&e<=8215||8216===e||8217===e||8218===e||e>=8219&&e<=8220||8221===e||8222===e||8223===e||e>=8224&&e<=8231||e>=8240&&e<=8248||8249===e||8250===e||e>=8251&&e<=8254||e>=8257&&e<=8259||8260===e||8261===e||8262===e||e>=8263&&e<=8273||8274===e||8275===e||e>=8277&&e<=8286||e>=8592&&e<=8596||e>=8597&&e<=8601||e>=8602&&e<=8603||e>=8604&&e<=8607||8608===e||e>=8609&&e<=8610||8611===e||e>=8612&&e<=8613||8614===e||e>=8615&&e<=8621||8622===e||e>=8623&&e<=8653||e>=8654&&e<=8655||e>=8656&&e<=8657||8658===e||8659===e||8660===e||e>=8661&&e<=8691||e>=8692&&e<=8959||e>=8960&&e<=8967||8968===e||8969===e||8970===e||8971===e||e>=8972&&e<=8991||e>=8992&&e<=8993||e>=8994&&e<=9e3||9001===e||9002===e||e>=9003&&e<=9083||9084===e||e>=9085&&e<=9114||e>=9115&&e<=9139||e>=9140&&e<=9179||e>=9180&&e<=9185||e>=9186&&e<=9254||e>=9255&&e<=9279||e>=9280&&e<=9290||e>=9291&&e<=9311||e>=9472&&e<=9654||9655===e||e>=9656&&e<=9664||9665===e||e>=9666&&e<=9719||e>=9720&&e<=9727||e>=9728&&e<=9838||9839===e||e>=9840&&e<=10087||10088===e||10089===e||10090===e||10091===e||10092===e||10093===e||10094===e||10095===e||10096===e||10097===e||10098===e||10099===e||10100===e||10101===e||e>=10132&&e<=10175||e>=10176&&e<=10180||10181===e||10182===e||e>=10183&&e<=10213||10214===e||10215===e||10216===e||10217===e||10218===e||10219===e||10220===e||10221===e||10222===e||10223===e||e>=10224&&e<=10239||e>=10240&&e<=10495||e>=10496&&e<=10626||10627===e||10628===e||10629===e||10630===e||10631===e||10632===e||10633===e||10634===e||10635===e||10636===e||10637===e||10638===e||10639===e||10640===e||10641===e||10642===e||10643===e||10644===e||10645===e||10646===e||10647===e||10648===e||e>=10649&&e<=10711||10712===e||10713===e||10714===e||10715===e||e>=10716&&e<=10747||10748===e||10749===e||e>=10750&&e<=11007||e>=11008&&e<=11055||e>=11056&&e<=11076||e>=11077&&e<=11078||e>=11079&&e<=11084||e>=11085&&e<=11123||e>=11124&&e<=11125||e>=11126&&e<=11157||11158===e||e>=11159&&e<=11263||e>=11776&&e<=11777||11778===e||11779===e||11780===e||11781===e||e>=11782&&e<=11784||11785===e||11786===e||11787===e||11788===e||11789===e||e>=11790&&e<=11798||11799===e||e>=11800&&e<=11801||11802===e||11803===e||11804===e||11805===e||e>=11806&&e<=11807||11808===e||11809===e||11810===e||11811===e||11812===e||11813===e||11814===e||11815===e||11816===e||11817===e||e>=11818&&e<=11822||11823===e||e>=11824&&e<=11833||e>=11834&&e<=11835||e>=11836&&e<=11839||11840===e||11841===e||11842===e||e>=11843&&e<=11855||e>=11856&&e<=11857||11858===e||e>=11859&&e<=11903||e>=12289&&e<=12291||12296===e||12297===e||12298===e||12299===e||12300===e||12301===e||12302===e||12303===e||12304===e||12305===e||e>=12306&&e<=12307||12308===e||12309===e||12310===e||12311===e||12312===e||12313===e||12314===e||12315===e||12316===e||12317===e||e>=12318&&e<=12319||12320===e||12336===e||64830===e||64831===e||e>=65093&&e<=65094}function _e(e){e.forEach(function(e){if(delete e.location,E(e)||x(e))for(var t in e.options)delete e.options[t].location,_e(e.options[t].value);else S(e)&&I(e.style)||(T(e)||A(e))&&M(e.style)?delete e.style.location:k(e)&&_e(e.children)})}function we(e,t){void 0===t&&(t={}),t=a({shouldParseSkeletons:!0,requiresOtherClause:!0},t);var n=new ge(e,t).parse();if(n.err){var i=SyntaxError(d[n.err.kind]);throw i.location=n.err.location,i.originalMessage=n.err.message,i}return(null==t?void 0:t.captureLocation)||_e(n.val),n.val}!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(fe||(fe={}));var Se,Te=function(e){function t(t,n,i){var r=e.call(this,t)||this;return r.code=n,r.originalMessage=i,r}return r(t,e),t.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},t}(Error),Ae=function(e){function t(t,n,i,r){return e.call(this,'Invalid values for "'.concat(t,'": "').concat(n,'". Options are "').concat(Object.keys(i).join('", "'),'"'),fe.INVALID_VALUE,r)||this}return r(t,e),t}(Te),Ee=function(e){function t(t,n,i){return e.call(this,'Value for "'.concat(t,'" must be of type ').concat(n),fe.INVALID_VALUE,i)||this}return r(t,e),t}(Te),xe=function(e){function t(t,n){return e.call(this,'The intl string context variable "'.concat(t,'" was not provided to the string "').concat(n,'"'),fe.MISSING_VALUE,n)||this}return r(t,e),t}(Te);function Ce(e){return"function"==typeof e}function ke(e,t,n,i,r,a,o){if(1===e.length&&_(e[0]))return[{type:Se.literal,value:e[0].value}];for(var s=[],u=0,l=e;u<l.length;u++){var h=l[u];if(_(h))s.push({type:Se.literal,value:h.value});else if(C(h))"number"==typeof a&&s.push({type:Se.literal,value:n.getNumberFormat(t).format(a)});else{var c=h.value;if(!r||!(c in r))throw new xe(c,o);var d=r[c];if(w(h))d&&"string"!=typeof d&&"number"!=typeof d||(d="string"==typeof d||"number"==typeof d?String(d):""),s.push({type:"string"==typeof d?Se.literal:Se.object,value:d});else if(T(h)){var p="string"==typeof h.style?i.date[h.style]:M(h.style)?h.style.parsedOptions:void 0;s.push({type:Se.literal,value:n.getDateTimeFormat(t,p).format(d)})}else if(A(h))p="string"==typeof h.style?i.time[h.style]:M(h.style)?h.style.parsedOptions:i.time.medium,s.push({type:Se.literal,value:n.getDateTimeFormat(t,p).format(d)});else if(S(h))(p="string"==typeof h.style?i.number[h.style]:I(h.style)?h.style.parsedOptions:void 0)&&p.scale&&(d*=p.scale||1),s.push({type:Se.literal,value:n.getNumberFormat(t,p).format(d)});else{if(k(h)){var f=h.children,g=h.value,m=r[g];if(!Ce(m))throw new Ee(g,"function",o);var v=m(ke(f,t,n,i,r,a).map(function(e){return e.value}));Array.isArray(v)||(v=[v]),s.push.apply(s,v.map(function(e){return{type:"string"==typeof e?Se.literal:Se.object,value:e}}))}if(E(h)){if(!(y=h.options[d]||h.options.other))throw new Ae(h.value,d,Object.keys(h.options),o);s.push.apply(s,ke(y.value,t,n,i,r))}else if(x(h)){var y;if(!(y=h.options["=".concat(d)])){if(!Intl.PluralRules)throw new Te('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',fe.MISSING_INTL_API,o);var b=n.getPluralRules(t,{type:h.pluralType}).select(d-(h.offset||0));y=h.options[b]||h.options.other}if(!y)throw new Ae(h.value,d,Object.keys(h.options),o);s.push.apply(s,ke(y.value,t,n,i,r,d-(h.offset||0)))}}}}return(P=s).length<2?P:P.reduce(function(e,t){var n=e[e.length-1];return n&&n.type===Se.literal&&t.type===Se.literal?n.value+=t.value:e.push(t),e},[]);var P}function Ie(e){return{create:function(){return{get:function(t){return e[t]},set:function(t,n){e[t]=n}}}}}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(Se||(Se={}));var Me=function(){function e(t,n,i,r){void 0===n&&(n=e.defaultLocale);var u,l,h,c=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=c.formatToParts(e);if(1===t.length)return t[0].value;var n=t.reduce(function(e,t){return e.length&&t.type===Se.literal&&"string"==typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e},[]);return n.length<=1?n[0]||"":n},this.formatToParts=function(e){return ke(c.ast,c.locales,c.formatters,c.formats,e,void 0,c.message)},this.resolvedOptions=function(){var e;return{locale:(null===(e=c.resolvedLocale)||void 0===e?void 0:e.toString())||Intl.NumberFormat.supportedLocalesOf(c.locales)[0]}},this.getAst=function(){return c.ast},this.locales=n,this.resolvedLocale=e.resolveLocale(n),"string"==typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var d=r||{},p=(d.formatters,function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(d,["formatters"]));this.ast=e.__parse(t,a(a({},p),{locale:this.resolvedLocale}))}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=(l=e.formats,(h=i)?Object.keys(l).reduce(function(e,t){var n,i;return e[t]=(n=l[t],(i=h[t])?a(a(a({},n||{}),i||{}),Object.keys(n).reduce(function(e,t){return e[t]=a(a({},n[t]),i[t]||{}),e},{})):n),e},a({},l)):l),this.formatters=r&&r.formatters||(void 0===(u=this.formatterCache)&&(u={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:s(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.NumberFormat).bind.apply(e,o([void 0],t,!1)))},{cache:Ie(u.number),strategy:b.variadic}),getDateTimeFormat:s(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.DateTimeFormat).bind.apply(e,o([void 0],t,!1)))},{cache:Ie(u.dateTime),strategy:b.variadic}),getPluralRules:s(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new((e=Intl.PluralRules).bind.apply(e,o([void 0],t,!1)))},{cache:Ie(u.pluralRules),strategy:b.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.resolveLocale=function(e){if(void 0!==Intl.Locale){var t=Intl.NumberFormat.supportedLocalesOf(e);return t.length>0?new Intl.Locale(t[0]):new Intl.Locale("string"==typeof e?e:e[0])}},e.__parse=we,e.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}();const Pe=Me},2726:(e,t)=>{function n(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const n=parseInt(t.join(""),16);return{r:n>>24&255,g:n>>16&255,b:n>>8&255,a:255&n,hex:"#"+t.slice(0,6).join("")}}t.getOptions=function(e){e||(e={}),e.color||(e.color={});const t=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,i=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:i,scale:i?4:r,margin:t,color:{dark:n(e.color.dark||"#000000ff"),light:n(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},t.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},t.getImageWidth=function(e,n){const i=t.getScale(e,n);return Math.floor((e+2*n.margin)*i)},t.qrToImageData=function(e,n,i){const r=n.modules.size,a=n.modules.data,o=t.getScale(r,i),s=Math.floor((r+2*i.margin)*o),u=i.margin*o,l=[i.color.light,i.color.dark];for(let t=0;t<s;t++)for(let n=0;n<s;n++){let h=4*(t*s+n),c=i.color.light;t>=u&&n>=u&&t<s-u&&n<s-u&&(c=l[a[Math.floor((t-u)/o)*r+Math.floor((n-u)/o)]?1:0]),e[h++]=c.r,e[h++]=c.g,e[h++]=c.b,e[h]=c.a}}},2731:(e,t)=>{const n=new Uint8Array(512),i=new Uint8Array(256);!function(){let e=1;for(let t=0;t<255;t++)n[t]=e,i[e]=t,e<<=1,256&e&&(e^=285);for(let e=255;e<512;e++)n[e]=n[e-255]}(),t.log=function(e){if(e<1)throw new Error("log("+e+")");return i[e]},t.exp=function(e){return n[e]},t.mul=function(e,t){return 0===e||0===t?0:n[i[e]+i[t]]}},3318:(e,t)=>{!function(){"use strict";var n={};function i(e){return c(">"+p("B",e.length),e)}function r(e){return c(">"+p("H",e.length),e)}function a(e){return c(">"+p("L",e.length),e)}function o(e,t,n){var o,s,u,l,h="",d="";if("Byte"==t)(o=e.length)<=4?d=i(e)+p("\0",4-o):(d=c(">L",[n]),h=i(e));else if("Short"==t)(o=e.length)<=2?d=r(e)+p("\0\0",2-o):(d=c(">L",[n]),h=r(e));else if("Long"==t)(o=e.length)<=1?d=a(e):(d=c(">L",[n]),h=a(e));else if("Ascii"==t)(o=(s=e+"\0").length)>4?(d=c(">L",[n]),h=s):d=s+p("\0",4-o);else if("Rational"==t){if("number"==typeof e[0])o=1,u=e[0],l=e[1],s=c(">L",[u])+c(">L",[l]);else{o=e.length,s="";for(var f=0;f<o;f++)u=e[f][0],l=e[f][1],s+=c(">L",[u])+c(">L",[l])}d=c(">L",[n]),h=s}else if("SRational"==t){if("number"==typeof e[0])o=1,u=e[0],l=e[1],s=c(">l",[u])+c(">l",[l]);else for(o=e.length,s="",f=0;f<o;f++)u=e[f][0],l=e[f][1],s+=c(">l",[u])+c(">l",[l]);d=c(">L",[n]),h=s}else"Undefined"==t&&((o=e.length)>4?(d=c(">L",[n]),h=e):d=e+p("\0",4-o));return[c(">L",[o]),d,h]}function s(e,t,n){var i,r=Object.keys(e).length,a=c(">H",[r]);i=["0th","1st"].indexOf(t)>-1?2+12*r+4:2+12*r;var s="",u="";for(var l in e)if("string"==typeof l&&(l=parseInt(l)),!("0th"==t&&[34665,34853].indexOf(l)>-1||"Exif"==t&&40965==l||"1st"==t&&[513,514].indexOf(l)>-1)){var h=e[l],d=c(">H",[l]),p=m[t][l].type,f=c(">H",[g[p]]);"number"==typeof h&&(h=[h]);var v=o(h,p,8+i+n+u.length);s+=d+f+v[0]+v[1],u+=v[2]}return[a+s,u]}function u(e){var t;if("ÿØ"==e.slice(0,2))t=function(e){for(var t,n=0;n<e.length;n++)if("ÿá"==(t=e[n]).slice(0,2)&&"Exif\0\0"==t.slice(4,10))return t;return null}(f(e)),this.tiftag=t?t.slice(10):null;else if(["II","MM"].indexOf(e.slice(0,2))>-1)this.tiftag=e;else{if("Exif"!=e.slice(0,4))throw new Error("Given file is neither JPEG nor TIFF.");this.tiftag=e.slice(6)}}if(n.version="1.0.4",n.remove=function(e){var t=!1;if("ÿØ"==e.slice(0,2));else{if("data:image/jpeg;base64,"!=e.slice(0,23)&&"data:image/jpg;base64,"!=e.slice(0,22))throw new Error("Given data is not jpeg.");e=h(e.split(",")[1]),t=!0}var n=f(e).filter(function(e){return!("ÿá"==e.slice(0,2)&&"Exif\0\0"==e.slice(4,10))}).join("");return t&&(n="data:image/jpeg;base64,"+l(n)),n},n.insert=function(e,t){var n=!1;if("Exif\0\0"!=e.slice(0,6))throw new Error("Given data is not exif.");if("ÿØ"==t.slice(0,2));else{if("data:image/jpeg;base64,"!=t.slice(0,23)&&"data:image/jpg;base64,"!=t.slice(0,22))throw new Error("Given data is not jpeg.");t=h(t.split(",")[1]),n=!0}var i="ÿá"+c(">H",[e.length+2])+e,r=function(e,t){var n=!1,i=[];return e.forEach(function(r,a){"ÿá"==r.slice(0,2)&&"Exif\0\0"==r.slice(4,10)&&(n?i.unshift(a):(e[a]=t,n=!0))}),i.forEach(function(t){e.splice(t,1)}),!n&&t&&(e=[e[0],t].concat(e.slice(1))),e.join("")}(f(t),i);return n&&(r="data:image/jpeg;base64,"+l(r)),r},n.load=function(e){var t;if("string"!=typeof e)throw new Error("'load' gots invalid type argument.");if("ÿØ"==e.slice(0,2))t=e;else if("data:image/jpeg;base64,"==e.slice(0,23)||"data:image/jpg;base64,"==e.slice(0,22))t=h(e.split(",")[1]);else{if("Exif"!=e.slice(0,4))throw new Error("'load' gots invalid file data.");t=e.slice(6)}var n={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},i=new u(t);if(null===i.tiftag)return n;"II"==i.tiftag.slice(0,2)?i.endian_mark="<":i.endian_mark=">";var r=d(i.endian_mark+"L",i.tiftag.slice(4,8))[0];n["0th"]=i.get_ifd(r,"0th");var a=n["0th"].first_ifd_pointer;if(delete n["0th"].first_ifd_pointer,34665 in n["0th"]&&(r=n["0th"][34665],n.Exif=i.get_ifd(r,"Exif")),34853 in n["0th"]&&(r=n["0th"][34853],n.GPS=i.get_ifd(r,"GPS")),40965 in n.Exif&&(r=n.Exif[40965],n.Interop=i.get_ifd(r,"Interop")),"\0\0\0\0"!=a&&(r=d(i.endian_mark+"L",a)[0],n["1st"]=i.get_ifd(r,"1st"),513 in n["1st"]&&514 in n["1st"])){var o=n["1st"][513]+n["1st"][514],s=i.tiftag.slice(n["1st"][513],o);n.thumbnail=s}return n},n.dump=function(e){var t,i,r,a,o,u,l=(t=e,JSON.parse(JSON.stringify(t))),h=!1,d=!1,p=!1,m=!1;i="0th"in l?l["0th"]:{},"Exif"in l&&Object.keys(l.Exif).length||"Interop"in l&&Object.keys(l.Interop).length?(i[34665]=1,h=!0,r=l.Exif,"Interop"in l&&Object.keys(l.Interop).length?(r[40965]=1,p=!0,a=l.Interop):Object.keys(r).indexOf(n.ExifIFD.InteroperabilityTag.toString())>-1&&delete r[40965]):Object.keys(i).indexOf(n.ImageIFD.ExifTag.toString())>-1&&delete i[34665],"GPS"in l&&Object.keys(l.GPS).length?(i[n.ImageIFD.GPSTag]=1,d=!0,o=l.GPS):Object.keys(i).indexOf(n.ImageIFD.GPSTag.toString())>-1&&delete i[n.ImageIFD.GPSTag],"1st"in l&&"thumbnail"in l&&null!=l.thumbnail&&(m=!0,l["1st"][513]=1,l["1st"][514]=1,u=l["1st"]);var v,y,b,_=s(i,"0th",0),w=_[0].length+12*h+12*d+4+_[1].length,S="",T=0,A="",E=0,x="",C=0,k="";if(h&&(T=(v=s(r,"Exif",w))[0].length+12*p+v[1].length),d&&(E=(A=s(o,"GPS",w+T).join("")).length),p&&(C=(x=s(a,"Interop",w+T+E).join("")).length),m&&(y=s(u,"1st",w+T+E+C),(b=function(e){for(var t=f(e);"ÿà"<=t[1].slice(0,2)&&t[1].slice(0,2)<="ÿï";)t=[t[0]].concat(t.slice(2));return t.join("")}(l.thumbnail)).length>64e3))throw new Error("Given thumbnail is too large. max 64kB");var I="",M="",P="",L="\0\0\0\0";if(h){var D=c(">L",[R=8+w]);I=c(">H",[34665])+c(">H",[g.Long])+c(">L",[1])+D}if(d&&(D=c(">L",[R=8+w+T]),M=c(">H",[34853])+c(">H",[g.Long])+c(">L",[1])+D),p&&(D=c(">L",[R=8+w+T+E]),P=c(">H",[40965])+c(">H",[g.Long])+c(">L",[1])+D),m){var R;L=c(">L",[R=8+w+T+E+C]);var N="\0\0\0\0"+c(">L",[R+y[0].length+24+4+y[1].length]),O="\0\0\0\0"+c(">L",[b.length]);k=y[0]+N+O+"\0\0\0\0"+y[1]+b}var U=_[0]+I+M+L+_[1];return h&&(S=v[0]+P+v[1]),"Exif\0\0MM\0*\0\0\0\b"+U+S+A+x+k},u.prototype={get_ifd:function(e,t){var n,i={},r=d(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],a=e+2;n=["0th","1st"].indexOf(t)>-1?"Image":t;for(var o=0;o<r;o++){e=a+12*o;var s=d(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],u=[d(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],d(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],this.tiftag.slice(e+8,e+12)];s in m[n]&&(i[s]=this.convert_value(u))}return"0th"==t&&(e=a+12*r,i.first_ifd_pointer=this.tiftag.slice(e,e+4)),i},convert_value:function(e){var t,n=null,i=e[0],r=e[1],a=e[2];if(1==i)r>4?(t=d(this.endian_mark+"L",a)[0],n=d(this.endian_mark+p("B",r),this.tiftag.slice(t,t+r))):n=d(this.endian_mark+p("B",r),a.slice(0,r));else if(2==i)r>4?(t=d(this.endian_mark+"L",a)[0],n=this.tiftag.slice(t,t+r-1)):n=a.slice(0,r-1);else if(3==i)r>2?(t=d(this.endian_mark+"L",a)[0],n=d(this.endian_mark+p("H",r),this.tiftag.slice(t,t+2*r))):n=d(this.endian_mark+p("H",r),a.slice(0,2*r));else if(4==i)r>1?(t=d(this.endian_mark+"L",a)[0],n=d(this.endian_mark+p("L",r),this.tiftag.slice(t,t+4*r))):n=d(this.endian_mark+p("L",r),a);else if(5==i)if(t=d(this.endian_mark+"L",a)[0],r>1){n=[];for(var o=0;o<r;o++)n.push([d(this.endian_mark+"L",this.tiftag.slice(t+8*o,t+4+8*o))[0],d(this.endian_mark+"L",this.tiftag.slice(t+4+8*o,t+8+8*o))[0]])}else n=[d(this.endian_mark+"L",this.tiftag.slice(t,t+4))[0],d(this.endian_mark+"L",this.tiftag.slice(t+4,t+8))[0]];else if(7==i)r>4?(t=d(this.endian_mark+"L",a)[0],n=this.tiftag.slice(t,t+r)):n=a.slice(0,r);else if(9==i)r>1?(t=d(this.endian_mark+"L",a)[0],n=d(this.endian_mark+p("l",r),this.tiftag.slice(t,t+4*r))):n=d(this.endian_mark+p("l",r),a);else{if(10!=i)throw new Error("Exif might be wrong. Got incorrect value type to decode. type:"+i);if(t=d(this.endian_mark+"L",a)[0],r>1)for(n=[],o=0;o<r;o++)n.push([d(this.endian_mark+"l",this.tiftag.slice(t+8*o,t+4+8*o))[0],d(this.endian_mark+"l",this.tiftag.slice(t+4+8*o,t+8+8*o))[0]]);else n=[d(this.endian_mark+"l",this.tiftag.slice(t,t+4))[0],d(this.endian_mark+"l",this.tiftag.slice(t+4,t+8))[0]]}return n instanceof Array&&1==n.length?n[0]:n}},"undefined"!=typeof window&&"function"==typeof window.btoa)var l=window.btoa;if(void 0===l&&(l=function(e){for(var t,n,i,r,a,o,s,u="",l=0,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l<e.length;)r=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,o=(15&n)<<2|(i=e.charCodeAt(l++))>>6,s=63&i,isNaN(n)?o=s=64:isNaN(i)&&(s=64),u=u+h.charAt(r)+h.charAt(a)+h.charAt(o)+h.charAt(s);return u}),"undefined"!=typeof window&&"function"==typeof window.atob)var h=window.atob;function c(e,t){if(!(t instanceof Array))throw new Error("'pack' error. Got invalid type argument.");if(e.length-1!=t.length)throw new Error("'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.");var n;if("<"==e[0])n=!0;else{if(">"!=e[0])throw new Error("");n=!1}for(var i="",r=1,a=null,o=null,s=null;o=e[r];){if("b"==o.toLowerCase()){if(a=t[r-1],"b"==o&&a<0&&(a+=256),a>255||a<0)throw new Error("'pack' error.");s=String.fromCharCode(a)}else if("H"==o){if((a=t[r-1])>65535||a<0)throw new Error("'pack' error.");s=String.fromCharCode(Math.floor(a%65536/256))+String.fromCharCode(a%256),n&&(s=s.split("").reverse().join(""))}else{if("l"!=o.toLowerCase())throw new Error("'pack' error.");if(a=t[r-1],"l"==o&&a<0&&(a+=4294967296),a>4294967295||a<0)throw new Error("'pack' error.");s=String.fromCharCode(Math.floor(a/16777216))+String.fromCharCode(Math.floor(a%16777216/65536))+String.fromCharCode(Math.floor(a%65536/256))+String.fromCharCode(a%256),n&&(s=s.split("").reverse().join(""))}i+=s,r+=1}return i}function d(e,t){if("string"!=typeof t)throw new Error("'unpack' error. Got invalid type argument.");for(var n,i=0,r=1;r<e.length;r++)if("b"==e[r].toLowerCase())i+=1;else if("h"==e[r].toLowerCase())i+=2;else{if("l"!=e[r].toLowerCase())throw new Error("'unpack' error. Got invalid mark.");i+=4}if(i!=t.length)throw new Error("'unpack' error. Mismatch between symbol and string length. "+i+":"+t.length);if("<"==e[0])n=!0;else{if(">"!=e[0])throw new Error("'unpack' error.");n=!1}for(var a=[],o=0,s=1,u=null,l=null,h=null,c="";l=e[s];){if("b"==l.toLowerCase())h=1,u=(c=t.slice(o,o+h)).charCodeAt(0),"b"==l&&u>=128&&(u-=256);else if("H"==l)h=2,c=t.slice(o,o+h),n&&(c=c.split("").reverse().join("")),u=256*c.charCodeAt(0)+c.charCodeAt(1);else{if("l"!=l.toLowerCase())throw new Error("'unpack' error. "+l);h=4,c=t.slice(o,o+h),n&&(c=c.split("").reverse().join("")),u=16777216*c.charCodeAt(0)+65536*c.charCodeAt(1)+256*c.charCodeAt(2)+c.charCodeAt(3),"l"==l&&u>=2147483648&&(u-=4294967296)}a.push(u),o+=h,s+=1}return a}function p(e,t){for(var n="",i=0;i<t;i++)n+=e;return n}function f(e){if("ÿØ"!=e.slice(0,2))throw new Error("Given data isn't JPEG.");for(var t=2,n=["ÿØ"];;){if("ÿÚ"==e.slice(t,t+2)){n.push(e.slice(t));break}var i=t+d(">H",e.slice(t+2,t+4))[0]+2;if(n.push(e.slice(t,i)),(t=i)>=e.length)throw new Error("Wrong JPEG data.")}return n}void 0===h&&(h=function(e){var t,n,i,r,a,o,s="",u=0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<e.length;)t=l.indexOf(e.charAt(u++))<<2|(r=l.indexOf(e.charAt(u++)))>>4,n=(15&r)<<4|(a=l.indexOf(e.charAt(u++)))>>2,i=(3&a)<<6|(o=l.indexOf(e.charAt(u++))),s+=String.fromCharCode(t),64!=a&&(s+=String.fromCharCode(n)),64!=o&&(s+=String.fromCharCode(i));return s});var g={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},m={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};m["0th"]=m.Image,m["1st"]=m.Image,n.TAGS=m,n.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},n.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},n.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},n.InteropIFD={InteroperabilityIndex:1},n.GPSHelper={degToDmsRational:function(e){var t=Math.abs(e),n=t%1*60,i=n%1*60;return[[Math.floor(t),1],[Math.floor(n),1],[Math.round(100*i),100]]},dmsRationalToDeg:function(e,t){var n="S"===t||"W"===t?-1:1;return(e[0][0]/e[0][1]+e[1][0]/e[1][1]/60+e[2][0]/e[2][1]/3600)*n}},e.exports&&(t=e.exports=n),t.piexif=n}()},3443:(e,t,n)=>{"use strict";t.N=void 0;const i=n(4892),r=n(8871),a=n(4723),o=n(5483);function s(e,t,n,i,r,a,o){const s=Math.sqrt(Math.pow(n-e,2)+Math.pow(i-t,2)),u=Math.sqrt(Math.pow(r-n,2)+Math.pow(a-i,2)),l=o*s/(s+u),h=o*u/(s+u);return[n-l*(r-e),i-l*(a-t),n+h*(r-e),i+h*(a-t)]}function u(e,t){const n=e.length,i=[];for(let r=2;r<n-2;r+=2){const n=s(e[r-2],e[r-1],e[r],e[r+1],e[r+2],e[r+3],t);isNaN(n[0])||(i.push(n[0]),i.push(n[1]),i.push(e[r]),i.push(e[r+1]),i.push(n[2]),i.push(n[3]))}return i}class l extends a.Shape{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){const t=this.points(),n=t.length,i=this.tension(),r=this.closed(),a=this.bezier();if(!n)return;let o=0;if(e.beginPath(),e.moveTo(t[0],t[1]),0!==i&&n>4){const i=this.getTensionPoints(),a=i.length;for(o=r?0:4,r||e.quadraticCurveTo(i[0],i[1],i[2],i[3]);o<a-2;)e.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);r||e.quadraticCurveTo(i[a-2],i[a-1],t[n-2],t[n-1])}else if(a)for(o=2;o<n;)e.bezierCurveTo(t[o++],t[o++],t[o++],t[o++],t[o++],t[o++]);else for(o=2;o<n;o+=2)e.lineTo(t[o],t[o+1]);r?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():u(this.points(),this.tension())}_getTensionPointsClosed(){const e=this.points(),t=e.length,n=this.tension(),i=s(e[t-2],e[t-1],e[0],e[1],e[2],e[3],n),r=s(e[t-4],e[t-3],e[t-2],e[t-1],e[0],e[1],n),a=u(e,n);return[i[2],i[3]].concat(a).concat([r[0],r[1],e[t-2],e[t-1],r[2],r[3],i[0],i[1],e[0],e[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){let e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};e=0!==this.tension()?[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:this.points();let t,n,i=e[0],r=e[0],a=e[1],o=e[1];for(let s=0;s<e.length/2;s++)t=e[2*s],n=e[2*s+1],i=Math.min(i,t),r=Math.max(r,t),a=Math.min(a,n),o=Math.max(o,n);return{x:i,y:a,width:r-i,height:o-a}}}t.N=l,l.prototype.className="Line",l.prototype._attrsAffectingSize=["points","bezier","tension"],(0,r._registerNode)(l),i.Factory.addGetterSetter(l,"closed",!1),i.Factory.addGetterSetter(l,"bezier",!1),i.Factory.addGetterSetter(l,"tension",0,(0,o.getNumberValidator)()),i.Factory.addGetterSetter(l,"points",[],(0,o.getNumberArrayValidator)())},3838:(e,t,n)=>{!function(){var e="undefined"!=typeof window?window:n.g,i={};for(var r in function(e,t,n){var i;function r(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}var a="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},o=function(n){n=["object"==typeof globalThis&&globalThis,n,"object"==typeof e&&e,"object"==typeof self&&self,"object"==typeof t&&t];for(var i=0;i<n.length;++i){var r=n[i];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function s(e,t){if(t)e:{var n=o;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&a(n,e,{configurable:!0,writable:!0,value:t})}}function u(e){return(e={next:e})[Symbol.iterator]=function(){return this},e}function l(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if("number"==typeof e.length)return{next:r(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function h(e){if(!(e instanceof Array)){e=l(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}s("Symbol",function(e){function t(e,t){this.g=e,a(this,"description",{configurable:!0,writable:!0,value:t})}if(e)return e;t.prototype.toString=function(){return this.g};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return function e(r){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new t(n+(r||"")+"_"+i++,r)}}),s("Symbol.iterator",function(e){if(e)return e;e=Symbol("Symbol.iterator");for(var t="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),n=0;n<t.length;n++){var i=o[t[n]];"function"==typeof i&&"function"!=typeof i.prototype[e]&&a(i.prototype,e,{configurable:!0,writable:!0,value:function(){return u(r(this))}})}return e});var c,d="function"==typeof Object.create?Object.create:function(e){function t(){}return t.prototype=e,new t};if("function"==typeof Object.setPrototypeOf)c=Object.setPrototypeOf;else{var p;e:{var f={};try{f.__proto__={a:!0},p=f.a;break e}catch(e){}p=!1}c=p?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var g=c;function m(e,t){if(e.prototype=d(t.prototype),e.prototype.constructor=e,g)g(e,t);else for(var n in t)if("prototype"!=n)if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Mn=t.prototype}function v(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function y(e){if(e.s)throw new TypeError("Generator is already running");e.s=!0}function b(e,t){e.i={Pi:t,aj:!0},e.g=e.m||e.j}function _(e,t,n){return e.g=n,{value:t}}function w(e){e.g=0}function S(e,t,n){e.m=t,null!=n&&(e.j=n)}function T(e,t){e.m=0,e.j=t||0}function A(e,t,n){e.g=t,e.m=n||0}function E(e,t){return e.m=t||0,t=e.i.Pi,e.i=null,t}function x(e){e.B=[e.i],e.m=0,e.j=0}function C(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.aj?e.g=e.m||e.j:null!=n.A&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function k(e){this.g=new v,this.h=e}function I(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.s=!1,r;var a=r.value}catch(t){return e.g.l=null,b(e.g,t),M(e)}return e.g.l=null,i.call(e.g,a),M(e)}function M(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.s=!1,{value:t.value,done:!1}}catch(t){e.g.h=void 0,b(e.g,t)}if(e.g.s=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.aj)throw t.Pi;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function P(e){this.next=function(t){return y(e.g),e.g.l?t=I(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=M(e)),t},this.throw=function(t){return y(e.g),e.g.l?t=I(e,e.g.l.throw,t,e.g.u):(b(e.g,t),t=M(e)),t},this.return=function(t){return function(e,t){y(e.g);var n=e.g.l;return n?I(e,"return"in n?n.return:function(e){return{value:e,done:!0}},t,e.g.return):(e.g.return(t),M(e))}(e,t)},this[Symbol.iterator]=function(){return this}}function L(e){return function(e){function t(t){return e.next(t)}function n(t){return e.throw(t)}return new Promise(function(i,r){!function e(a){a.done?i(a.value):Promise.resolve(a.value).then(t,n).then(e,r)}(e.next())})}(new P(new k(e)))}function D(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}function O(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}function U(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var a=e[r];if(t.call(n,a,r,e))return{Yi:r,v:a}}return{Yi:-1,v:void 0}}v.prototype.u=function(e){this.h=e},v.prototype.return=function(e){this.i={return:e},this.g=this.j},v.prototype.A=function(e){this.g=e},s("Promise",function(e){function t(e){this.h=0,this.i=void 0,this.g=[],this.s=!1;var t=this.j();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function n(){this.g=null}function i(e){return e instanceof t?e:new t(function(t){t(e)})}if(e)return e;n.prototype.h=function(e){if(null==this.g){this.g=[];var t=this;this.i(function(){t.l()})}this.g.push(e)};var r=o.setTimeout;n.prototype.i=function(e){r(e,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var e=this.g;this.g=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.j(e)}}}this.g=null},n.prototype.j=function(e){this.i(function(){throw e})},t.prototype.j=function(){function e(e){return function(i){n||(n=!0,e.call(t,i))}}var t=this,n=!1;return{resolve:e(this.F),reject:e(this.l)}},t.prototype.F=function(e){if(e===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.H(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.D(e):this.m(e)}},t.prototype.D=function(e){var t=void 0;try{t=e.then}catch(e){return void this.l(e)}"function"==typeof t?this.I(t,e):this.m(e)},t.prototype.l=function(e){this.u(2,e)},t.prototype.m=function(e){this.u(1,e)},t.prototype.u=function(e,t){if(0!=this.h)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.h);this.h=e,this.i=t,2===this.h&&this.G(),this.B()},t.prototype.G=function(){var e=this;r(function(){if(e.C()){var t=o.console;void 0!==t&&t.error(e.i)}},1)},t.prototype.C=function(){if(this.s)return!1;var e=o.CustomEvent,t=o.Event,n=o.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=o.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.i,n(e))},t.prototype.B=function(){if(null!=this.g){for(var e=0;e<this.g.length;++e)a.h(this.g[e]);this.g=null}};var a=new n;return t.prototype.H=function(e){var t=this.j();e.ef(t.resolve,t.reject)},t.prototype.I=function(e,t){var n=this.j();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},t.prototype.then=function(e,n){function i(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){a(e)}}:t}var r,a,o=new t(function(e,t){r=e,a=t});return this.ef(i(e,r),i(n,a)),o},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.ef=function(e,t){function n(){switch(i.h){case 1:e(i.i);break;case 2:t(i.i);break;default:throw Error("Unexpected state: "+i.h)}}var i=this;null==this.g?a.h(n):this.g.push(n),this.s=!0},t.resolve=i,t.reject=function(e){return new t(function(t,n){n(e)})},t.race=function(e){return new t(function(t,n){for(var r=l(e),a=r.next();!a.done;a=r.next())i(a.value).ef(t,n)})},t.all=function(e){var n=l(e),r=n.next();return r.done?i([]):new t(function(e,t){function a(t){return function(n){o[t]=n,0==--s&&e(o)}}var o=[],s=0;do{o.push(void 0),s++,i(r.value).ef(a(o.length-1),t),r=n.next()}while(!r.done)})},t}),s("WeakMap",function(e){function t(e){if(this.g=(u+=Math.random()+1).toString(),e){e=l(e);for(var t;!(t=e.next()).done;)t=t.value,this.set(t[0],t[1])}}function n(){}function i(e){var t=typeof e;return"object"===t&&null!==e||"function"===t}function r(e){if(!R(e,s)){var t=new n;a(e,s,{value:t})}}function o(e){var t=Object[e];t&&(Object[e]=function(e){return e instanceof n?e:(Object.isExtensible(e)&&r(e),t(e))})}if(function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([[t,2],[n,3]]);return 2==i.get(t)&&3==i.get(n)&&(i.delete(t),i.set(n,4),!i.has(t)&&4==i.get(n))}catch(e){return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(e,t){if(!i(e))throw Error("Invalid WeakMap key");if(r(e),!R(e,s))throw Error("WeakMap key fail: "+e);return e[s][this.g]=t,this},t.prototype.get=function(e){return i(e)&&R(e,s)?e[s][this.g]:void 0},t.prototype.has=function(e){return i(e)&&R(e,s)&&R(e[s],this.g)},t.prototype.delete=function(e){return!!(i(e)&&R(e,s)&&R(e[s],this.g))&&delete e[s][this.g]},t}),s("Map",function(e){function t(){var e={};return e.Bc=e.next=e.head=e}function n(e,t){var n=e[1];return u(function(){if(n){for(;n.head!=e[1];)n=n.Bc;for(;n.next!=n.head;)return n=n.next,{done:!1,value:t(n)};n=null}return{done:!0,value:void 0}})}function i(e,t){var n=t&&typeof t;"object"==n||"function"==n?a.has(t)?n=a.get(t):(n=""+ ++o,a.set(t,n)):n="p_"+t;var i=e[0][n];if(i&&R(e[0],n))for(e=0;e<i.length;e++){var r=i[e];if(t!=t&&r.key!=r.key||t===r.key)return{id:n,list:i,index:e,entry:r}}return{id:n,list:i,index:-1,entry:void 0}}function r(e){if(this[0]={},this[1]=t(),this.size=0,e){e=l(e);for(var n;!(n=e.next()).done;)n=n.value,this.set(n[0],n[1])}}if(function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(l([[t,"s"]]));if("s"!=n.get(t)||1!=n.size||n.get({x:4})||n.set({x:4},"t")!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&"s"==r.value[1]&&!((r=i.next()).done||4!=r.value[0].x||"t"!=r.value[1]||!i.next().done)}catch(e){return!1}}())return e;var a=new WeakMap;r.prototype.set=function(e,t){var n=i(this,e=0===e?0:e);return n.list||(n.list=this[0][n.id]=[]),n.entry?n.entry.value=t:(n.entry={next:this[1],Bc:this[1].Bc,head:this[1],key:e,value:t},n.list.push(n.entry),this[1].Bc.next=n.entry,this[1].Bc=n.entry,this.size++),this},r.prototype.delete=function(e){return!(!(e=i(this,e)).entry||!e.list||(e.list.splice(e.index,1),e.list.length||delete this[0][e.id],e.entry.Bc.next=e.entry.next,e.entry.next.Bc=e.entry.Bc,e.entry.head=null,this.size--,0))},r.prototype.clear=function(){this[0]={},this[1]=this[1].Bc=t(),this.size=0},r.prototype.has=function(e){return!!i(this,e).entry},r.prototype.get=function(e){return(e=i(this,e).entry)&&e.value},r.prototype.entries=function(){return n(this,function(e){return[e.key,e.value]})},r.prototype.keys=function(){return n(this,function(e){return e.key})},r.prototype.values=function(){return n(this,function(e){return e.value})},r.prototype.forEach=function(e,t){for(var n,i=this.entries();!(n=i.next()).done;)n=n.value,e.call(t,n[1],n[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var o=0;return r}),s("Array.prototype.keys",function(e){return e||function(){return N(this,function(e){return e})}}),s("Set",function(e){function t(e){if(this.g=new Map,e){e=l(e);for(var t;!(t=e.next()).done;)this.add(t.value)}this.size=this.g.size}return function(){if(!e||"function"!=typeof e||!e.prototype.entries||"function"!=typeof Object.seal)return!1;try{var t=Object.seal({x:4}),n=new e(l([t]));if(!n.has(t)||1!=n.size||n.add(t)!=n||1!=n.size||n.add({x:4})!=n||2!=n.size)return!1;var i=n.entries(),r=i.next();return!r.done&&r.value[0]==t&&r.value[1]==t&&!(r=i.next()).done&&r.value[0]!=t&&4==r.value[0].x&&r.value[1]==r.value[0]&&i.next().done}catch(e){return!1}}()?e:(t.prototype.add=function(e){return e=0===e?0:e,this.g.set(e,e),this.size=this.g.size,this},t.prototype.delete=function(e){return e=this.g.delete(e),this.size=this.g.size,e},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(e){return this.g.has(e)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(e,t){var n=this;this.g.forEach(function(i){return e.call(t,i,i,n)})},t)}),s("Array.prototype.values",function(e){return e||function(){return N(this,function(e,t){return t})}}),s("Array.from",function(e){return e||function(e,t,n){t=null!=t?t:function(e){return e};var i=[],r="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];if("function"==typeof r){e=r.call(e);for(var a=0;!(r=e.next()).done;)i.push(t.call(n,r.value,a++))}else for(r=e.length,a=0;a<r;a++)i.push(t.call(n,e[a],a));return i}}),s("Object.is",function(e){return e||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}}),s("Array.prototype.includes",function(e){return e||function(e,t){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(0>(t=t||0)&&(t=Math.max(t+i,0));t<i;t++){var r=n[t];if(r===e||Object.is(r,e))return!0}return!1}}),s("String.prototype.includes",function(e){return e||function(e,t){return-1!==O(this,e,"includes").indexOf(e,t||0)}}),s("String.fromCodePoint",function(e){return e||function(e){for(var t="",n=0;n<arguments.length;n++){var i=Number(arguments[n]);if(0>i||1114111<i||i!==Math.floor(i))throw new RangeError("invalid_code_point "+i);65535>=i?t+=String.fromCharCode(i):(i-=65536,t+=String.fromCharCode(i>>>10&1023|55296),t+=String.fromCharCode(1023&i|56320))}return t}}),s("Array.prototype.findIndex",function(e){return e||function(e,t){return U(this,e,t).Yi}}),s("WeakSet",function(e){function t(e){if(this.g=new WeakMap,e){e=l(e);for(var t;!(t=e.next()).done;)this.add(t.value)}}return function(){if(!e||!Object.seal)return!1;try{var t=Object.seal({}),n=Object.seal({}),i=new e([t]);return!(!i.has(t)||i.has(n))&&(i.delete(t),i.add(n),!i.has(t)&&i.has(n))}catch(e){return!1}}()?e:(t.prototype.add=function(e){return this.g.set(e,!0),this},t.prototype.has=function(e){return this.g.has(e)},t.prototype.delete=function(e){return this.g.delete(e)},t)}),s("Array.prototype.find",function(e){return e||function(e,t){return U(this,e,t).v}}),s("String.prototype.startsWith",function(e){return e||function(e,t){var n=O(this,e,"startsWith"),i=n.length,r=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var a=0;a<r&&t<i;)if(n[t++]!=e[a++])return!1;return a>=r}}),s("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)R(e,t)&&n.push([t,e[t]]);return n}});var B="function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)R(i,r)&&(e[r]=i[r])}return e};function F(e){if(0>(e=Math.trunc(e)||0)&&(e+=this.length),!(0>e||e>=this.length))return this[e]}function j(e){return e||F}s("Object.assign",function(e){return e||B}),s("Promise.prototype.finally",function(e){return e||function(e){return this.then(function(t){return Promise.resolve(e()).then(function(){return t})},function(t){return Promise.resolve(e()).then(function(){throw t})})}}),s("Array.prototype.entries",function(e){return e||function(){return N(this,function(e,t){return[e,t]})}}),s("Number.isNaN",function(e){return e||function(e){return"number"==typeof e&&isNaN(e)}}),s("String.prototype.repeat",function(e){return e||function(e){var t=O(this,null,"repeat");if(0>e||1342177279<e)throw new RangeError("Invalid count value");e|=0;for(var n="";e;)1&e&&(n+=t),(e>>>=1)&&(t+=t);return n}}),s("Number.EPSILON",function(){return Math.pow(2,-52)}),s("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),s("Number.isFinite",function(e){return e||function(e){return"number"==typeof e&&!isNaN(e)&&1/0!==e&&-1/0!==e}}),s("Object.values",function(e){return e||function(e){var t,n=[];for(t in e)R(e,t)&&n.push(e[t]);return n}}),s("Math.log2",function(e){return e||function(e){return Math.log(e)/Math.LN2}}),s("String.prototype.endsWith",function(e){return e||function(e,t){var n=O(this,e,"endsWith");void 0===t&&(t=n.length),t=Math.max(0,Math.min(0|t,n.length));for(var i=e.length;0<i&&0<t;)if(n[--t]!=e[--i])return!1;return 0>=i}}),s("Math.trunc",function(e){return e||function(e){if(e=Number(e),isNaN(e)||1/0===e||-1/0===e||0===e)return e;var t=Math.floor(Math.abs(e));return 0>e?-t:t}}),s("Array.prototype.at",function(e){return e||F}),s("Int8Array.prototype.at",j),s("Uint8Array.prototype.at",j),s("Uint8ClampedArray.prototype.at",j),s("Int16Array.prototype.at",j),s("Uint16Array.prototype.at",j),s("Int32Array.prototype.at",j),s("Uint32Array.prototype.at",j),s("Float32Array.prototype.at",j),s("Float64Array.prototype.at",j),s("String.prototype.at",function(e){return e||F});var G=this||self;function H(e,t){e=e.split(".");var n,i=G;e[0]in i||void 0===i.execScript||i.execScript("var "+e[0]);for(;e.length&&(n=e.shift());)e.length||void 0===t?i=i[n]&&i[n]!==Object.prototype[n]?i[n]:i[n]={}:i[n]=t}function V(t,n){if(n)if(n instanceof Map)for(var i=l(n.keys()),r=i.next();!r.done;r=i.next())r=r.value,Object.defineProperty(this,r,{value:n.get(r),writable:!0,enumerable:!0});else for(i in n)Object.defineProperty(this,i,{value:n[i],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=e.performance&&e.performance.now?e.performance.now():Date.now(),this.type=t,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function W(e){var t,n=new V(e.type);for(t in e)Object.defineProperty(n,t,{value:e[t],writable:!0,enumerable:!0});return n}V.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},V.prototype.stopImmediatePropagation=function(){this.g=!0},V.prototype.stopPropagation=function(){},H("shaka.util.FakeEvent",V);var z={ym:"abrstatuschanged",zm:"adaptation",Am:"audiotrackchanged",Bm:"audiotrackschanged",Cm:"boundarycrossed",Dm:"buffering",Em:"canupdatestarttime",Fm:"complete",Gm:"currentitemchanged",Hm:"downloadcompleted",Im:"downloadfailed",Jm:"downloadheadersreceived",Km:"drmsessionupdate",Mm:"emsg",Sm:"itemsinserted",Tm:"itemsremoved",mn:"prft",Error:"error",Nm:"expirationupdated",Om:"firstquartile",Pm:"gapjumped",Um:"keystatuschanged",Ym:"loaded",Zm:"loading",an:"manifestparsed",cn:"manifestupdated",dn:"mediaqualitychanged",fn:"mediasourcerecovered",gn:"metadataadded",Metadata:"metadata",hn:"midpoint",jn:"nospatialvideoinfo",ln:"onstatechange",nn:"ratechange",qn:"segmentappended",rn:"sessiondata",sn:"spatialvideoinfo",tn:"stalldetected",un:"started",vn:"statechanged",wn:"streaming",xn:"textchanged",yn:"texttrackvisibility",zn:"thirdquartile",An:"timelineregionadded",Bn:"timelineregionenter",Cn:"timelineregionexit",Dn:"trackschanged",Fn:"unloading",Hn:"variantchanged"};function K(){}function X(){}function Y(){}function q(e){var t=D.apply(1,arguments);J.has(e)||(J.add(e),Y.apply(K,h(t)))}function Z(){}var J=new Set;function Q(){this.g=new Map}function $(){this.gb=new Q,this.Se=this}function ee(e,t){for(var n=[],i=(e=l(e)).next();!i.done;i=e.next())n.push(t(i.value));return n}function te(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if(t(n.value))return!0;return!1}function ne(e,t){for(var n=[],i=(e=l(e)).next();!i.done;i=e.next())t(i=i.value)&&n.push(i);return n}e.console&&((new Map).set(1,function(){return console.error.apply(console,h(D.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,h(D.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,h(D.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,h(D.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,h(D.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,h(D.apply(0,arguments)))}),Y=function(){return console.warn.apply(console,h(D.apply(0,arguments)))},X=function(){console.error.apply(console,h(D.apply(0,arguments)))}),(i=Q.prototype).push=function(e,t){this.g.has(e)?this.g.get(e).push(t):this.g.set(e,[t])},i.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},i.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(e){return e!=t});this.g.set(e,n),n.length||this.g.delete(e)}},i.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},i.size=function(){return this.g.size},i.keys=function(){return Array.from(this.g.keys())},$.prototype.addEventListener=function(e,t){this.gb&&this.gb.push(e,t)},$.prototype.removeEventListener=function(e,t){this.gb&&this.gb.remove(e,t)},$.prototype.dispatchEvent=function(e){if(!this.gb)return!0;var t=this.gb.get(e.type)||[],n=this.gb.get("All");for(n&&(t=t.concat(n)),n=(t=l(t)).next();!n.done;n=t.next()){n=n.value,e.target=this.Se,e.currentTarget=this.Se;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch(e){}if(e.g)break}return e.defaultPrevented},$.prototype.release=function(){this.gb=null};var ie=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");function re(e){var t;e instanceof re?(ae(this,e.jc),this.ud=e.ud,oe(this,e.Gb),se(this,e.Md),this.vb=e.vb,ue(this,e.g.clone()),this.$c=e.$c):e&&(t=String(e).match(ie))?(ae(this,t[1]||"",!0),this.ud=le(t[2]||""),oe(this,t[3]||"",!0),se(this,t[4]),this.vb=le(t[5]||"",!0),ue(this,t[6]||"",!0),this.$c=le(t[7]||"")):this.g=new ve(null)}function ae(e,t,n){e.jc=n?le(t,!0):t,e.jc&&(e.jc=e.jc.replace(/:$/,""))}function oe(e,t,n){e.Gb=n?le(t,!0):t}function se(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.Md=t}else e.Md=null}function ue(e,t,n){t instanceof ve?e.g=t:(n||(t=he(t,ge)),e.g=new ve(t))}function le(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function he(e,t,n){return null!=e?(e=encodeURI(e).replace(t,ce),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ce(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}(i=re.prototype).jc="",i.ud="",i.Gb="",i.Md=null,i.vb="",i.$c="",i.toString=function(){var e=[],t=this.jc;if(t&&e.push(he(t,de,!0),":"),t=this.Gb){e.push("//");var n=this.ud;n&&e.push(he(n,de,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.Md)&&e.push(":",String(t))}return(t=this.vb)&&(this.Gb&&"/"!=t.charAt(0)&&e.push("/"),e.push(he(t,"/"==t.charAt(0)?fe:pe,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.$c)&&e.push("#",he(t,me)),e.join("")},i.resolve=function(e){var t=this.clone();"data"===t.jc&&(t=new re);var n=!!e.jc;n?ae(t,e.jc):n=!!e.ud,n?t.ud=e.ud:n=!!e.Gb,n?oe(t,e.Gb):n=null!=e.Md;var i=e.vb;if(n)se(t,e.Md);else if(n=!!e.vb){if("/"!=i.charAt(0))if(this.Gb&&!this.vb)i="/"+i;else{var r=t.vb.lastIndexOf("/");-1!=r&&(i=t.vb.substr(0,r+1)+i)}if(".."==i||"."==i)i="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var a=[],o=0;o<i.length;){var s=i[o++];"."==s?r&&o==i.length&&a.push(""):".."==s?((1<a.length||1==a.length&&""!=a[0])&&a.pop(),r&&o==i.length&&a.push("")):(a.push(s),r=!0)}i=a.join("/")}}return n?t.vb=i:n=""!==e.g.toString(),n?ue(t,e.g.clone()):n=!!e.$c,n&&(t.$c=e.$c),t},i.clone=function(){return new re(this)};var de=/[#\/\?@]/g,pe=/[#\?:]/g,fe=/[#\?]/g,ge=/[#\?@]/g,me=/#/g;function ve(e){this.g=e||null}function ye(e){if(!e.kb&&(e.kb=new Map,e.ae=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var a=t[n].substring(0,i);r=t[n].substring(i+1)}else a=t[n];a=decodeURIComponent(a),r=r||"",e.add(a,decodeURIComponent(r))}}function be(e){return ye(e),e.ae}function _e(){}function we(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=Te(e);t=Te(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function Se(e){return ArrayBuffer.isView(e)?0==e.byteOffset&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function Te(e,t,n){return xe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint8Array)}function Ae(e,t,n){return xe(e,void 0===t?0:t,n=void 0===n?1/0:n,Uint16Array)}function Ee(e,t,n){return xe(e,void 0===t?0:t,n=void 0===n?1/0:n,DataView)}function xe(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,a=1;"BYTES_PER_ELEMENT"in i&&(a=i.BYTES_PER_ELEMENT);var o=((e.byteOffset||0)+e.byteLength)/a;return new i(r,e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/a,o))),Math.floor(Math.min(e+Math.max(n,0),o))-e)}function Ce(e,t,n){var i=D.apply(3,arguments);if(this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code,ke)try{throw Error(this.message||"Shaka Error")}catch(e){this.stack=e.stack}}(i=ve.prototype).kb=null,i.ae=null,i.add=function(e,t){ye(this),this.g=null;var n=this.kb.has(e)?this.kb.get(e):null;return n||this.kb.set(e,n=[]),n.push(t),this.ae++,this},i.set=function(e,t){return ye(this),this.g=null,this.kb.has(e)?this.kb.set(e,[t]):this.add(e,t),this},i.get=function(e){return ye(this),this.kb.get(e)||[]},i.toString=function(){if(this.g)return this.g;if(!this.kb||!this.kb.size)return"";for(var e=[],t=l(this.kb.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.kb.get(i);for(var r=0;r<i.length;r++){var a=n;""!==i[r]&&(a+="="+encodeURIComponent(i[r])),e.push(a)}}return this.g=e.join("&")},i.clone=function(){var e=new ve;if(e.g=this.g,this.kb){for(var t=new Map,n=l(this.kb),i=n.next();!i.done;i=n.next()){var r=l(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.kb=t,e.ae=this.ae}return e},H("shaka.util.BufferUtils",_e),_e.toDataView=Ee,_e.toUint16=Ae,_e.toUint8=Te,_e.toArrayBuffer=Se,_e.equal=we,Ce.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},H("shaka.util.Error",Ce);var ke=!0;function Ie(e){this.h=e,this.g=void 0}function Me(){return De.value()}Ce.Severity={RECOVERABLE:1,CRITICAL:2},Ce.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Ce.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4054,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007},Ie.prototype.value=function(){return void 0===this.g&&(this.g=this.h()),this.g};var Pe=null,Le=null,De=new Ie(function(){var e=void 0;return Pe&&(e=Pe()),!e&&Le&&(e=Le()),e});function Re(){}function Ne(t){if(!t)return"";if(239==(t=Te(t))[0]&&187==t[1]&&191==t[2]&&(t=t.subarray(3)),e.TextDecoder&&!Me().ei())return(t=(new TextDecoder).decode(t)).includes("�")&&X('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),t;for(var n="",i=0;i<t.length;++i){var r=65533;if(128&t[i]?t.length>=i+2&&192==(224&t[i])&&128==(192&t[i+1])?(r=(31&t[i])<<6|63&t[i+1],i+=1):t.length>=i+3&&224==(240&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])?(r=(15&t[i])<<12|(63&t[i+1])<<6|63&t[i+2],i+=2):t.length>=i+4&&240==(241&t[i])&&128==(192&t[i+1])&&128==(192&t[i+2])&&128==(192&t[i+3])&&(r=(7&t[i])<<18|(63&t[i+1])<<12|(63&t[i+2])<<6|63&t[i+3],i+=3):r=t[i],65535>=r)n+=String.fromCharCode(r);else{var a=1023&(r-=65536);n+=String.fromCharCode(55296+(r>>10)),n+=String.fromCharCode(56320+a)}}return n}function Oe(e,t,n){if(!e)return"";if(!n&&0!=e.byteLength%2)throw new Ce(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ee(e);for(var r=0;r<n;r++)i[r]=e.getUint16(2*r,t);return je(i)}function Ue(e){function t(e){return n.byteLength<=e||9<=n[e]&&126>=n[e]}if(!e)return"";var n=Te(e);if(239==n[0]&&187==n[1]&&191==n[2])return Ne(n);if(254==n[0]&&255==n[1])return Oe(n.subarray(2),!1);if(255==n[0]&&254==n[1])return Oe(n.subarray(2),!0);if(0==n[0]&&0==n[2])return Oe(e,!1);if(0==n[1]&&0==n[3])return Oe(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Ne(e);throw new Ce(2,2,2003)}function Be(t){if(e.TextEncoder&&!Me().ei()){var n=new TextEncoder;return Se(n.encode(t))}t=encodeURIComponent(t),t=unescape(t),n=new Uint8Array(t.length);for(var i=0;i<t.length;i++)n[i]=t[i].charCodeAt(0);return Se(n)}function Fe(e,t){for(var n=new ArrayBuffer(2*e.length),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(2*r,e.charCodeAt(r),t);return n}function je(e){return He.value()(e)}function Ge(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(e){return"#"==e[1]?0<=(e="x"==e[2]||"X"==e[2]?parseInt(e.substring(3),16):parseInt(e.substring(2),10))&&1114111>=e?String.fromCodePoint(e):"":t[e]||"'"}):e||""}H("shaka.util.StringUtils",Re),Re.resetFromCharCode=function(){He.g=void 0},Re.toUTF16=Fe,Re.toUTF8=Be,Re.fromBytesAutoDetect=Ue,Re.fromUTF16=Oe,Re.fromUTF8=Ne;var He=new Ie(function(){function e(e){try{var t=new Uint8Array(e);return 0<String.fromCharCode.apply(null,t).length}catch(e){return!1}}for(var t={Rc:65536};0<t.Rc;(t={Rc:t.Rc}).Rc/=2)if(e(t.Rc))return function(e){return function(t){for(var n="",i=0;i<t.length;i+=e.Rc)n+=String.fromCharCode.apply(null,t.subarray(i,i+e.Rc));return n}}(t);return null});function Ve(){}function We(e){return e=je(Te(e)),btoa(e)}function ze(e,t){return t=null==t||t,e=We(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,"")}function Ke(t){t=e.atob(t.replace(/-/g,"+").replace(/_/g,"/"));for(var n=new Uint8Array(t.length),i=0;i<t.length;++i)n[i]=t.charCodeAt(i);return n}function Xe(t){for(var n=t.length/2,i=new Uint8Array(n),r=0;r<n;r++)i[r]=e.parseInt(t.substr(2*r,2),16);return i}function Ye(e){var t=Te(e);e="";for(var n=(t=l(t)).next();!n.done;n=t.next())1==(n=(n=n.value).toString(16)).length&&(n="0"+n),e+=n;return e}function qe(){for(var e=D.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&1===r.BYTES_PER_ELEMENT?t.set(r,n):t.set(Te(r),n),n+=r.byteLength}return t}function Ze(e,t,n){if(n=void 0===n?"":n,0==t.length)return e;if(1==e.length&&1==t.length){var i=new re(e[0]);return t=new re(t[0]),t=i.resolve(t),n&&ue(t,n),[t.toString()]}t=t.map(function(e){return new re(e)}),i=[];for(var r=(e=l(e)).next();!r.done;r=e.next()){r=new re(r.value);for(var a=l(t),o=a.next();!o.done;o=a.next())o=r.resolve(o.value),n&&ue(o,n),i.push(o.toString())}return i}function Je(e,t,n,i){return e={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set},i&&(e.keySystemUris=new Set([i])),e}function Qe(t,n){n=void 0===n?"cenc":n;var i=[],r=[],a=[];t.forEach(function(e,t){var n=t;22!=n.length&&(n=ze(Xe(t),!1));var o=e;22!=o.length&&(o=ze(Xe(e),!1)),e={kty:"oct",kid:n,k:o},i.push(e),r.push(e.kid),a.push(t)}),t=JSON.stringify({keys:i});var o=JSON.stringify({kids:r});return o=[{initData:Te(Be(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:n,licenseServerUri:"data:application/json;base64,"+e.btoa(t),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(a)}}function $e(e,t){if(1==t.length)return t[0];if(null!=(e=et(e,t)))return e;throw new Ce(2,4,4025,t)}function et(e,t){for(var n=at.get(e),i=(n=l(n)).next();!i.done;i=n.next()){i=i.value;for(var r=l(t),a=r.next();!a.done;a=r.next())if(a=a.value,i.test(a.trim()))return a.trim()}return e==nt?"":null}function tt(e,t){for(var n=[],i=(e=l(e=at.get(e))).next();!i.done;i=e.next()){i=i.value;for(var r=l(t),a=r.next();!a.done;a=r.next())a=a.value,i.test(a.trim())&&n.push(a.trim())}return n}H("shaka.util.Uint8ArrayUtils",Ve),Ve.concat=qe,Ve.toHex=Ye,Ve.fromHex=Xe,Ve.fromBase64=Ke,Ve.toBase64=ze,Ve.toStandardBase64=We;var nt="text",it={Ha:"video",ma:"audio",$a:nt,wg:"image",wm:"application"},rt=1/15,at=(new Map).set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function ot(){}function st(e,t){return e=ht(e),t=ht(t),e.split("-")[0]==t.split("-")[0]}function ut(e,t){return e=ht(e),t=ht(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&1==e.length&&2==t.length}function lt(e,t){return e=ht(e),t=ht(t),e=e.split("-"),t=t.split("-"),2==e.length&&2==t.length&&e[0]==t[0]}function ht(e){var t=(e=l(e.split("-x-"))).next().value;t=void 0===t?"":t,e=void 0===(e=e.next().value)?"":e;var n=l(t.split("-"));return t=void 0===(t=n.next().value)?"":t,n=void 0===(n=n.next().value)?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=mt.get(t)||t,((n=n.toUpperCase())?t+"-"+n:t)+(e?"-"+e:"")}function ct(e,t){var n=pt(e),i=pt(t);return e!=n&&t!=i&&n==i}function dt(e,t){return e=ht(e),(t=ht(t))==e?4:ut(t,e)?3:lt(t,e)?2:ut(e,t)?1:0}function pt(e){var t=e.indexOf("-");return e=(e=0<=t?e.substring(0,t):e).toLowerCase(),mt.get(e)||e}function ft(e){return e.language?ht(e.language):e.audio&&e.audio.language?ht(e.audio.language):e.video&&e.video.language?ht(e.video.language):"und"}function gt(e,t){e=ht(e);for(var n=new Set,i=(t=l(t)).next();!i.done;i=t.next())n.add(ht(i.value));for(i=(t=l(n)).next();!i.done;i=t.next())if((i=i.value)==e)return i;for(i=(t=l(n)).next();!i.done;i=t.next())if(ut(i=i.value,e))return i;for(i=(t=l(n)).next();!i.done;i=t.next())if(lt(i=i.value,e))return i;for(t=(n=l(n)).next();!t.done;t=n.next())if(ut(e,t=t.value))return t;return null}H("shaka.util.LanguageUtils",ot),ot.findClosestLocale=gt,ot.getLocaleForVariant=ft,ot.getLocaleForText=function(e){return ht(e.language||"und")},ot.getBase=pt,ot.relatedness=dt,ot.areSiblings=ct,ot.normalize=ht,ot.isSiblingOf=lt,ot.isParentOf=ut,ot.areLanguageCompatible=st,ot.areLocaleCompatible=function(e,t){return(e=ht(e))==ht(t)};var mt=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function vt(e){$.call(this),this.j=ht(e),this.i=new Map,this.g=new Set,this.h=new Map}function yt(e){for(var t=e.h,n=e.j,i=e.g,r=new Set,a=l(i),o=a.next(),s={};!o.done;s={qe:void 0},o=a.next()){s.qe=o.value,r.add(s.qe),r.add(pt(s.qe)),(o=ne(t.keys(),function(e){return function(t){return ct(t,e.qe)}}(s))).sort();for(var u=(o=l(o)).next();!u.done;u=o.next())r.add(u.value);for((s=ne(t.keys(),function(e){return function(t){return pt(t)==e.qe}}(s))).sort(),o=(s=l(s)).next();!o.done;o=s.next())r.add(o.value)}for(r.add(n),n=[],a=(r=l(r)).next();!a.done;a=r.next())(a=t.get(a.value))&&n.push(a);for(n.reverse(),e.i.clear(),r=(t=l(n)).next();!r.done;r=t.next())r.value.forEach(function(t,n){e.i.set(n,t)});for(t=e.i.keys(),r=new Set,a=(n=l(e.g)).next();!a.done;a=n.next())bt(a=e.h.get(a.value)||new Map,t,r);0<r.size&&(i=(new Map).set("locales",Array.from(i)).set("missing",Array.from(r)),e.dispatchEvent(new V("missing-localizations",i)))}function bt(e,t,n){for(var i=(t=l(t)).next();!i.done;i=t.next())i=i.value,e.get(i)||n.add(i)}m(vt,$),(i=vt.prototype).release=function(){$.prototype.release.call(this)},i.Gi=function(e){var t=this;this.g.clear();for(var n=(e=l(e)).next();!n.done;n=e.next())this.g.add(ht(n.value));yt(this),(e=ne(this.g,function(e){return!t.h.has(e)})).length&&this.dispatchEvent(new V("unknown-locales",(new Map).set("locales",e))),e=ne(this.g,function(e){return t.h.has(e)}),e=(new Map).set("locales",e.length?e:[this.j]),this.dispatchEvent(new V("locale-changed",e))},i.Va=function(e,t,n){e=ht(e),void 0===n&&(n=_t);var i=this.h.get(e)||new Map;return t.forEach(function(e,t){i.has(t)&&n!=_t||i.set(t,e)}),this.h.set(e,i),yt(this),this.dispatchEvent(new V("locale-updated")),this},i.am=function(e){for(var t=l(e.keys()),n=t.next();!n.done;n=t.next())n=n.value,e.set(n,this.resolve(n))},i.resolve=function(e){return this.i.get(e)||(e=(new Map).set("locales",Array.from(this.g)).set("missing",e),this.dispatchEvent(new V("unknown-localization",e)),"")},i.Fk=function(){return this.g},H("shaka.ui.Localization",vt),vt.prototype.getCurrentLocales=vt.prototype.Fk,vt.prototype.resolve=vt.prototype.resolve,vt.prototype.resolveDictionary=vt.prototype.am,vt.prototype.insert=vt.prototype.Va,vt.prototype.changeLocale=vt.prototype.Gi,vt.prototype.release=vt.prototype.release;var _t=1;function wt(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}function St(e){return e.h/(1-Math.pow(e.g,e.i))}function Tt(){this.h=new wt(2),this.j=new wt(5),this.g=0,this.i=128e3,this.l=16e3}function At(){this.g=new Q}function Et(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=function(e,t){if(null==t)return!1;if("boolean"==typeof t)return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(e){return!n.has(e)}),function(e){var t=xt;if(null==t){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch(e){t=!1}xt=t}return t||!1}(e)?t:t.capture||!1}(e,i),this.target.addEventListener(t,n,this.g)}vt.ConflictResolution={USE_OLD:0,USE_NEW:_t},vt.UNKNOWN_LOCALES="unknown-locales",vt.UNKNOWN_LOCALIZATION="unknown-localization",vt.MISSING_LOCALIZATIONS="missing-localizations",vt.LOCALE_CHANGED="locale-changed",vt.LOCALE_UPDATED="locale-updated",wt.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)},Tt.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},Tt.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},Tt.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(St(this.h),St(this.j))},(i=At.prototype).release=function(){this.Sa(),this.g=null},i.o=function(e,t,n,i){this.g&&(e=new Et(e,t,n,i),this.g.push(t,e))},i.ra=function(e,t,n,i){var r=this;this.o(e,t,function i(a){r.Da(e,t,i),n(a)},i)},i.Da=function(e,t,n){if(this.g)for(var i=this.g.get(t)||[],r=(i=l(i)).next();!r.done;r=i.next())(r=r.value).target!=e||n!=r.listener&&n||(r.Da(),this.g.remove(t,r))},i.Sa=function(){if(this.g){for(var e=[],t=l(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,h(n.value));for(t=(e=l(e)).next();!t.done;t=e.next())t.value.Da();this.g.g.clear()}},H("shaka.util.EventManager",At),At.prototype.removeAll=At.prototype.Sa,At.prototype.unlisten=At.prototype.Da,At.prototype.listenOnce=At.prototype.ra,At.prototype.listen=At.prototype.o,At.prototype.release=At.prototype.release,Et.prototype.Da=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};var xt=void 0;function Ct(e,t){this.g=e,this.h=t}function kt(e,t){var n=new Ct(5,0),i=Pt,r=i.g,a=n.h-r.h;(0<(n.g-r.g||a)?i.i:i.h)(i.g,n,e,t)}function It(e,t,n,i){Y([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function Mt(e,t,n,i){X([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}H("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3}),Ct.prototype.toString=function(){return"v"+this.g+"."+this.h};var Pt=null;function Lt(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.s=i,this.j=!1;e:{if("undefined"==typeof libDPIModule&&Y("Could not find LCEVC Library dependencies on this page"),"undefined"!=typeof LCEVCdec)this.h=LCEVCdec;else{if("undefined"==typeof LcevcDil){Y("Could not find LCEVC Library on this page"),e=!1;break e}this.h=LcevcDil,this.j=!0,kt("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead")}void 0===this.h.SupportObject?(Y("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||Y(this.h.SupportObject.SupportError),e=void 0!==this.h&&"undefined"!=typeof libDPIModule&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Dt(e,t,n,i){"video"!==i.type||e.s&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.s)}function Rt(e){e.g&&e.i.classList.add("shaka-hidden")}function Nt(e){return!(!e||"undefined"==typeof LCEVCdec)&&"lvc1"==e.codecs}function Ot(t){if(Ft.has(t))return Ft.get(t);var n=e.ManagedMediaSource||e.MediaSource;return!!n&&(n=n.isTypeSupported(t),Ft.set(t,n),n)}function Ut(){var t=e.ManagedSourceBuffer||e.SourceBuffer;return!!t&&!!t.prototype&&!!t.prototype.changeType}function Bt(){var t=e.ManagedMediaSource||e.MediaSource;return!!(t&&t.prototype&&t.prototype.setLiveSeekableRange&&t.prototype.clearLiveSeekableRange)}Lt.prototype.release=function(){this.g&&(this.g.close(),this.g=null)},H("shaka.lcevc.Dec",Lt),Lt.prototype.release=Lt.prototype.release;var Ft=new Map;function jt(){}function Gt(){}function Ht(){}function Vt(e){this.h=new Map,this.i=0,this.j=new Gt,(e=zt(e.toLowerCase()))&&(this.j=e()),this.g=new jt,(e=Xt)&&(this.g=e(),this.h.set(this.i,this.g))}function Wt(e,t){Kt.set(e,t)}function zt(e){return Kt.get(e)}jt.prototype.extract=function(){},jt.prototype.decode=function(){return[]},jt.prototype.clear=function(){},jt.prototype.getStreams=function(){return[]},Gt.prototype.init=function(){},Gt.prototype.parse=function(){return[]},(i=Ht.prototype).init=function(){},i.Rf=function(){},i.Wd=function(){},i.remove=function(){},i.xg=function(){},H("shaka.media.IClosedCaptionParser",Ht),(i=Vt.prototype).init=function(e,t,n){if(t=void 0!==t&&t,-1!=(n=void 0===n?-1:n)&&this.i!=n){t=n;var i=this.h.get(t);this.h.set(this.i,this.g),i?this.g=i:((i=Xt)&&(this.g=i()),this.h.set(t,this.g))}else t||this.Wd();this.j.init(e),-1!=n&&(this.i=n)},i.Rf=function(e){for(var t=(e=l(e=this.j.parse(e))).next();!t.done;t=e.next()){var n=Te((t=t.value).packet);0<n.length&&this.g.extract(n,t.pts)}return this.g.decode()},i.Wd=function(){this.g.clear()},i.remove=function(e){e=void 0===e?[]:e,e=new Set(e);for(var t=l(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var i=this.h.get(n);i&&i.clear(),this.h.delete(n)}},i.xg=function(){return this.g.getStreams()},H("shaka.media.ClosedCaptionParser",Vt),Vt.findDecoder=function(){return Xt},Vt.unregisterDecoder=function(){Xt=null},Vt.registerDecoder=function(e){Xt=e},Vt.findParser=zt,Vt.unregisterParser=function(e){Kt.delete(e)},Vt.registerParser=Wt;var Kt=new Map,Xt=null;function Yt(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qt,this.scroll=Zt}H("shaka.text.CueRegion",Yt);var qt=1;Yt.units={PX:0,PERCENTAGE:qt,LINES:2};var Zt="";function Jt(e,t){return!("number"!=typeof e||"number"!=typeof t||!isNaN(e)||!isNaN(t))||e===t}function Qt(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function $t(e,t,n){if(n||(n=Jt),e.length!=t.length)return!1;t=t.slice();for(var i=(e=l(e)).next(),r={};!i.done;r={bj:void 0},i=e.next()){if(r.bj=i.value,-1==(i=t.findIndex(function(e){return function(t){return n(e.bj,t)}}(r))))return!1;t[i]=t[t.length-1],t.pop()}return 0==t.length}function en(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Jt),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function tn(e){this.h=e||"",this.g=0}function nn(e){rn(e,/[ \t]+/gm)}function rn(e,t){return t.lastIndex=e.g,t=null==(t=t.exec(e.h))?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||null==t||t.position!=e.g?null:(e.g+=t.length,t.results)}function an(e){return e.g==e.h.length?null:(e=rn(e,/[^ \t\n]*/gm))?e[0]:null}function on(e){if(null==(e=rn(e,un)))return null;var t=Number(e[2]),n=Number(e[3]);return 59<t||59<n?null:(Number(e[6])||0)/1e3+n+60*t+3600*(Number(e[1])||0)}function sn(e){return e?on(new tn(e)):null}Yt.scrollMode={NONE:Zt,UP:"up"};var un=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function ln(){}function hn(e){var t=new WeakSet;return function e(n){switch(typeof n){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return n;default:if(!n||ArrayBuffer.isView(n))return n;if(t.has(n))return null;var i=Array.isArray(n);if(n.constructor!=Object&&!i)return null;t.add(n);var r,a=i?[]:{};for(r in n)a[r]=e(n[r]);return i&&(a.length=n.length),a}}(e)}function cn(e){var t,n={};for(t in e)n[t]=e[t];return n}function dn(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];void 0!==r&&(r=dn(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if("function"==typeof e)e="";else if(e instanceof Object){for((n=Object.keys(e)).sort(),t=[],i=(n=l(n)).next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),void 0!==(r=e[r])&&(r=dn(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}function pn(e,t){var n=void 0!==n&&n;return fn(e=Ue(e),t,n)}function fn(e,t,n){return e=function(e,t){function n(){for(var t=i;-1==="\r\n\t>/= ".indexOf(e[i])&&e[i];)i++;return e.slice(t,i)}var i=0;return function r(a,o){o=void 0!==o&&o;for(var s=[];e[i];)if(60==e.charCodeAt(i)){if(47===e.charCodeAt(i+1)){o=i+2,i=e.indexOf(">",i);var u=(o=e.substring(o,i)).indexOf(a);if(-1==u){var l=a.indexOf(".");0<l&&(u=o.indexOf(a.substring(0,l)))}if(-1==u)throw a=e.substring(0,i).split("\n"),Error("Unexpected close tag\nLine: "+(a.length-1)+"\nColumn: "+(a[a.length-1].length+1)+"\nChar: "+e[i]);i+1&&(i+=1);break}if(33===e.charCodeAt(i+1)){if(45==e.charCodeAt(i+2)){for(;-1!==i&&(62!==e.charCodeAt(i)||45!=e.charCodeAt(i-1)||45!=e.charCodeAt(i-2)||-1==i);)i=e.indexOf(">",i+1);-1===i&&(i=e.length)}else if(91===e.charCodeAt(i+2)&&91===e.charCodeAt(i+8)&&"cdata"===e.substr(i+3,5).toLowerCase()){-1==(u=e.indexOf("]]>",i))?(s.push(e.substr(i+9)),i=e.length):(s.push(e.substring(i+9,u)),i=u+3);continue}i++;continue}e:{l=o,i++;var c=n(),d={};for(u=[];62!==e.charCodeAt(i)&&e[i];){var p=e.charCodeAt(i);if(64<p&&91>p||96<p&&123>p){p=n();for(var f=e.charCodeAt(i);f&&39!==f&&34!==f&&!(64<f&&91>f||96<f&&123>f)&&62!==f;)i++,f=e.charCodeAt(i);var g=i+1;if(i=e.indexOf(e[i],g),g=e.slice(g,i),39===f||34===f){if(-1===i){if(l={tagName:c,attributes:d,children:u,parent:null},t)for(c=0;c<u.length;c++)"string"!=typeof u[c]&&(u[c].parent=l);u=l;break e}}else g=null,i--;if(p.startsWith("xmlns:")){f=g;var m=p.split(":")[1];Vn.set(f,m),Wn.set(m,f)}"tt"===c&&"xml:space"===p&&"preserve"===g&&(l=!0),d[p]=g}i++}for(47!==e.charCodeAt(i-1)?(i++,u=r(c,l)):i++,l={tagName:c,attributes:d,children:u,parent:null},c=u.length,d=0;d<c;d++)"string"!=typeof(p=u[d])?t&&(p.parent=l):d==c-1&&"\n"==p&&u.pop();u=l}if(s.push(u),"string"==typeof u)break;"?"===u.tagName[0]&&u.children&&(s.push.apply(s,h(u.children)),u.children=[])}else u=i,-2==(i=e.indexOf("<",i)-1)&&(i=e.length),u=e.slice(u,i+1),o?0<u.length&&s.push(u):(s.length&&1==u.length&&"\n"==u[0]||0<u.trim().length)&&s.push(u),i++;return s}("")}(e,void 0!==n&&n),!t&&e.length?e[0]:(e=e.find(function(e){return t.split(",").includes(e.tagName)}))?e:null}function gn(e){return Vn.has(e)?Vn.get(e):""}function mn(e){return"string"==typeof e}function vn(e){var t=[];if(!e.children)return[];for(var n=(e=l(e.children)).next();!n.done;n=e.next())"string"!=typeof(n=n.value)&&t.push(n);return t}function yn(e,t){var n=[];if(!e.children)return[];for(var i=(e=l(e.children)).next();!i.done;i=e.next())(i=i.value).tagName===t&&n.push(i);return n}function bn(e){return"string"==typeof e?Ge(e):""===(e=e.children.reduce(function(e,t){return"string"==typeof t?e+t:e},""))?null:Ge(e)}function _n(e){return Array.from(e.children).every(function(e){return"string"==typeof e})?((e=bn(e))&&(e=e.trim()),e):null}function wn(e,t,n){if(n=void 0===n?[]:n,e.tagName===t&&n.push(e),e.children)for(var i=(e=l(e.children)).next();!i.done;i=e.next())wn(i.value,t,n);return n}function Sn(e,t){return 1!=(e=yn(e,t)).length?null:e[0]}function Tn(e,t,n){return 1!=(e=xn(e,t,n)).length?null:e[0]}function An(e,t,n,i){i=void 0===i?null:i;var r=null;return null!=(e=e.attributes[t])&&(r=n(e)),null==r?i:r}function En(e,t,n){return t=gn(t),e.attributes[t+":"+n]||null}function xn(e,t,n){var i=gn(t);if(t=[],e.children)for(n=i?i+":"+n:n,i=(e=l(e.children)).next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function Cn(e,t,n){for(var i=(t=l(t)).next();!i.done;i=t.next())if(i=En(e,i.value,n))return i;return null}function kn(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function In(e){return e&&(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e))?(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null):null}function Mn(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return t?(e=Number(t[1]),isFinite(e)?(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null):null):null}function Pn(e){return 0==(e=Number(e))%1?e:null}function Ln(e){return 0==(e=Number(e))%1&&0<e?e:null}function Dn(e){return 0==(e=Number(e))%1&&0<=e?e:null}function Rn(e){return e=Number(e),isNaN(e)?null:e}function Nn(e){return!!e&&"true"===e.toLowerCase()}function On(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Un(e){for(var t=[],n=(e=l(e=Ge(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/))).next();!n.done;n=e.next()){var i=(n=n.value).match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),a=n.match(/(@t='(\d+)')/),o=n.match(/(@n='(\d+)')/),s=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:a?Number(a[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:s?Number(s[1])-1:null,Fc:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Fc=n.slice(1))}return t}function Bn(e,t){var n=Un(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;null==(n=i.position)&&(null!==i.t&&(n=Fn(e,"t",i.t)),null!==i.n&&(n=Fn(e,"n",i.n))),null===n?n="prepend"===r?0:e.length:"prepend"===r?--n:"after"===r&&++n,r=t.tagName,(i=i.Fc)&&e[n]?jn(e[n],r,i,_n(t)||""):("remove"!==r&&"replace"!==r||e.splice(n,1),"add"!==r&&"replace"!==r||e.splice.apply(e,[n,0].concat(h(t.children))))}}function Fn(e,t,n){for(var i=0,r=(e=l(e)).next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function jn(e,t,n,i){"remove"===t?delete e.attributes[n]:"add"!==t&&"replace"!==t||(e.attributes[n]=i)}function Gn(e){var t="",n=e.tagName.split(":");for(var i in 0<n.length&&(t=n[0],t=Wn.has(t)?Wn.get(t):""),t=document.createElementNS(t,e.tagName),e.attributes)t.setAttribute(i,e.attributes[i]);for(i=(e=l(e.children)).next();!i.done;i=e.next())n=void 0,n="string"==typeof(i=i.value)?new Text(i):Gn(i),t.appendChild(n);return t}function Hn(e){if(!e)return null;for(var t={tagName:e.tagName,attributes:cn(e.attributes),children:[],parent:null},n=(e=l(e.children)).next();!n.done;n=e.next())"string"==typeof(n=n.value)||((n=Hn(n)).parent=t),t.children.push(n);return t}H("shaka.util.ObjectUtils",ln),ln.alphabeticalKeyOrderStringify=dn,ln.shallowCloneObject=cn,ln.cloneObject=hn;var Vn=new Map,Wn=new Map;function zn(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new Yt,this.position=null,this.positionAlign=Qn,this.size=0,this.textAlign=$n,this.direction=ii,this.writingMode=ri,this.lineInterpretation=ai,this.line=null,this.lineHeight="",this.lineAlign=oi,this.displayAlign=ti,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=hi,this.fontStyle=di,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={Yc:32,rows:15}}function Kn(e,t){return(e=new zn(e,t,"")).lineBreak=!0,e}function Xn(e,t){if(e.payload!=t.payload||!(.001>Math.abs(e.startTime-t.startTime)&&.001>Math.abs(e.endTime-t.endTime)))return!1;for(var n in e)if("startTime"!=n&&"endTime"!=n&&"payload"!=n)if("nestedCues"==n){if(!en(e.nestedCues,t.nestedCues,Xn))return!1}else if("region"==n||"cellResolution"==n){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!en(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1;return!0}function Yn(e,t){t=void 0===t?new Map:t;var n=e.payload;if(n.includes("<")){0===t.size&&qn(t);var i=n;n=[];for(var r=-1,a=0;a<i.length;a++)"<"===i[a]?r=a+1:">"===i[a]&&0<r&&((r=i.substr(r,a-r)).match(mi)&&n.push(r),r=-1);for(a=(n=l(n)).next();!a.done;a=n.next())a=a.value,i=i.replace("<"+a+">",'<div time="'+a+'">'),i+="</div>";e:{a=i,r=[];var o=-1;n="",i=!1;for(var s=0;s<a.length;s++)if("/"===a[s]){var u=a.indexOf(">",s);if(-1===u){n=a;break e}if((u=a.substring(s+1,u))&&"v"==u){i=!0;var h=null;if(r.length&&(h=r[r.length-1]),h){if(h===u)n+="/"+u+">";else{if(!h.startsWith("v")){n+=a[s];continue}n+="/"+h+">"}s+=u.length+1}else n+=a[s]}else n+=a[s]}else"<"===a[s]?"v"!=a[o=s+1]&&(o=-1):">"===a[s]&&0<o&&(r.push(a.substr(o,s-o)),o=-1),n+=a[s];for(r=(a=l(r)).next();!r.done;r=a.next())o=(r=r.value).replace(" ",".voice-"),n=(n=n.replace("<"+r+">","<"+o+">")).replace("</"+r+">","</"+o+">"),i||(n+="</"+o+">")}n=function(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(e){return t[e]||""}):e||""}(n),e.payload="";try{var c=fn("<span>"+n+"</span>","span")}catch(e){}if(c)if(1!=(c=c.children).length||c[0].tagName)for(n=(c=l(c)).next();!n.done;n=c.next())Zn(n.value,e,t);else e.payload=Ge(n);else e.payload=Ge(n)}else e.payload=Ge(n)}function qn(e){for(var t=l(Object.entries(ui)),n=t.next();!n.done;n=t.next()){var i=l(n.value);n=i.next().value,i=i.next().value;var r=new zn(0,0,"");r.color=i,e.set("."+n,r)}for(n=(t=l(Object.entries(li))).next();!n.done;n=t.next())n=(i=l(n.value)).next().value,i=i.next().value,(r=new zn(0,0,"")).backgroundColor=i,e.set("."+n,r)}function Zn(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new Yt,i.position=null,i.size=0,i.textAlign=$n,e.tagName)for(var r=l(e.tagName.split(/(?=[ .])+/g)),a=r.next();!a.done;a=r.next()){var o=a=a.value;if(o.startsWith(".voice-")){var s=o.split("-").pop();o='v[voice="'+s+'"]',n.has(o)||(o="v[voice="+s+"]")}switch(n.has(o)&&(s=i,o=n.get(o))&&(s.backgroundColor=Jn(o.backgroundColor,s.backgroundColor),s.color=Jn(o.color,s.color),s.fontFamily=Jn(o.fontFamily,s.fontFamily),s.fontSize=Jn(o.fontSize,s.fontSize),s.textShadow=Jn(o.textShadow,s.textShadow),s.fontWeight=o.fontWeight,s.fontStyle=o.fontStyle,s.opacity=o.opacity,s.rubyTag=o.rubyTag,s.textCombineUpright=o.textCombineUpright,s.wrapLine=o.wrapLine),a){case"br":return i=Kn(i.startTime,i.endTime),void t.nestedCues.push(i);case"b":i.fontWeight=ci;break;case"i":i.fontStyle=pi;break;case"u":i.textDecoration.push(gi);break;case"font":(a=e.attributes.color)&&(i.color=a);break;case"div":if(!(a=e.attributes.time))break;(a=sn(a))&&(i.startTime=a);break;case"ruby":case"rp":case"rt":i.rubyTag=a}}if(r=e.children,mn(e)||1==r.length&&mn(r[0]))for(n=bn(e).split("\n"),e=!0,r=(n=l(n)).next();!r.done;r=n.next())r=r.value,e||(e=Kn(i.startTime,i.endTime),t.nestedCues.push(e)),0<r.length&&((e=i.clone()).payload=Ge(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),e=(t=l(r)).next();!e.done;e=t.next())Zn(e.value,i,n)}function Jn(e,t){return e&&0<e.length?e:t}zn.prototype.clone=function(){var e,t=new zn(0,0,"");for(e in this)t[e]=this[e],Array.isArray(t[e])&&(t[e]=t[e].slice());return t},H("shaka.text.Cue",zn),zn.parseCuePayload=Yn,zn.equal=Xn,zn.prototype.clone=zn.prototype.clone;var Qn="auto";zn.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Qn};var $n="center",ei={LEFT:"left",RIGHT:"right",CENTER:$n,START:"start",END:"end"};zn.textAlign=ei;var ti="after",ni={BEFORE:"before",CENTER:"center",AFTER:ti};zn.displayAlign=ni;var ii="ltr";zn.direction={HORIZONTAL_LEFT_TO_RIGHT:ii,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var ri="horizontal-tb";zn.writingMode={HORIZONTAL_TOP_TO_BOTTOM:ri,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var ai=0;zn.lineInterpretation={LINE_NUMBER:ai,PERCENTAGE:1};var oi="start",si={CENTER:"center",START:oi,END:"end"};zn.lineAlign=si;var ui={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};zn.defaultTextColor=ui;var li={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};zn.defaultTextBackgroundColor=li;var hi=400,ci=700;zn.fontWeight={NORMAL:hi,BOLD:ci};var di="normal",pi="italic",fi={NORMAL:di,ITALIC:pi,OBLIQUE:"oblique"};zn.fontStyle=fi;var gi="underline";zn.textDecoration={UNDERLINE:gi,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var mi=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function vi(){}function yi(e,t,n){_i.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,Sf:t})}function bi(e,t){for(var n=e.toLowerCase().split(";")[0],i=l([Ai,Ti,Si,wi]),r=i.next();!r.done;r=i.next())if(r=_i.get(n+"-"+r.value)){var a=r.Sf(),o=a.isSupported(e,t);if(a.destroy(),o)return r.Sf}return null}vi.prototype.destroy=function(){},H("shaka.transmuxer.TransmuxerEngine",vi),vi.findTransmuxer=bi,vi.unregisterTransmuxer=function(e,t){_i.delete(e.toLowerCase().split(";")[0]+"-"+t)},vi.registerTransmuxer=yi,vi.prototype.destroy=vi.prototype.destroy;var _i=new Map,wi=1,Si=2,Ti=3,Ai=4;function Ei(){}function xi(e,t){var n=e;return t&&!Oi.includes(e)&&(n+='; codecs="'+t+'"'),n}function Ci(e,t){return t&&(e+='; codecs="'+t+'"'),e}function ki(e,t,n){var i=xi(e,t);return bi(t=Ci(e,t))?(e=bi(t))?(n=(e=e()).convertCodecs(n,t),e.destroy()):n=t:n="video/mp2t"!=e&&"audio"==n?i.replace("video","audio"):i,n}function Ii(e){return e.split(";")[0].split("/")[1]}function Mi(e){var t=Ni(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case"mp4a"===e&&"69"===t:case"mp4a"===e&&"6b"===t:case"mp4a"===e&&"40.34"===t:return"mp3";case"mp4a"===e&&"66"===t:case"mp4a"===e&&"67"===t:case"mp4a"===e&&"68"===t:case"mp4a"===e&&"40.2"===t:case"mp4a"===e&&"40.02"===t:case"mp4a"===e&&"40.5"===t:case"mp4a"===e&&"40.05"===t:case"mp4a"===e&&"40.29"===t:case"mp4a"===e&&"40.42"===t:return"aac";case"mp4a"===e&&"a5"===t:case"ac3"===e:case"ac-3"===e:return"ac-3";case"mp4a"===e&&"a6"===t:case"eac3"===e:case"ec-3"===e:return"ec-3";case"ac-4"===e:return"ac-4";case"mp4a"===e&&"b2"===t:return"dtsx";case"mp4a"===e&&"a9"===t:return"dtsc";case"vp09"===e:case"vp9"===e:return"vp9";case"avc1"===e:case"avc3"===e:return"avc";case"hvc1"===e:case"hev1"===e:return"hevc";case"vvc1"===e:case"vvi1"===e:return"vvc";case"dvh1"===e:case"dvhe"===e:return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case"dvav"===e:case"dva1"===e:return"dovi-avc";case"dav1"===e:return"dovi-av1";case"dvc1"===e:case"dvi1"===e:return"dovi-vvc"}return e}function Pi(e){for(var t=[],n=(e=l(e.split(","))).next();!n.done;n=e.next())n=Ni(n.value),t.push(n[0]);return t.sort().join(",")}function Li(e){return e.split(";")[0]}function Di(e){return(e=e.split(/ *; */)).shift(),(e=e.find(function(e){return e.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Ri(e){return"application/x-mpegurl"===e||"application/vnd.apple.mpegurl"===e}function Ni(e){var t=(e=e.split("."))[0];return e.shift(),[t,e.join(".")]}vi.PluginPriority={FALLBACK:wi,PREFERRED_SECONDARY:Si,PREFERRED:Ti,APPLICATION:Ai},H("shaka.util.MimeUtils",Ei),Ei.getFullTypeWithAllCodecs=Ci,Ei.getFullType=xi,(new Map).set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var Oi=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Ui(e){this.i=null,this.j=e,this.C=!1,this.l=this.u=0,this.m=1/0,this.h=this.g=null,this.D="",this.B=function(){},this.s=new Map}function Bi(e,t){Vi.set(e,t)}function Fi(e){return Vi.get(e)}function ji(e){return!!Vi.has(e)||("application/cea-608"==e||"application/cea-708"==e)&&!!Xt}function Gi(e,t,n){if(e.D=t,t=e.s.get(t))for(var i=l(t.keys()),r=i.next();!r.done;r=i.next())(r=t.get(r.value).filter(function(e){return e.endTime<=n}))&&e.j.append(r)}function Hi(e,t,n){t.startTime+=n,t.endTime+=n;for(var i=(t=l(t.nestedCues)).next();!i.done;i=t.next())Hi(e,i.value,n)}Ui.prototype.destroy=function(){return this.j=this.i=null,this.s.clear(),Promise.resolve()},Ui.prototype.remove=function(e,t){var n=this;return L(function(i){if(1==i.g)return _(i,Promise.resolve(),2);!n.j||!n.j.remove(e,t)||null==n.g||t<=n.g||e>=n.h||(e<=n.g&&t>=n.h?n.g=n.h=null:e<=n.g&&t<n.h?n.g=t:e>n.g&&t>=n.h&&(n.h=e)),w(i)})},H("shaka.text.TextEngine",Ui),Ui.prototype.destroy=Ui.prototype.destroy,Ui.findParser=Fi,Ui.unregisterParser=function(e){Vi.delete(e)},Ui.registerParser=Bi;var Vi=new Map;function Wi(e){this.h=e,this.g=null}function zi(e){this.h=e,this.g=null}function Ki(e,t){return e.concat(t)}function Xi(){}function Yi(e){return null!=e}function qi(e,t){return Promise.race([t,new Promise(function(t,n){new zi(n).X(e)})])}function Zi(){}function Ji(e,t,n,i,r){function a(e){var t=String(e.width||"")+String(e.height||"")+String(Math.round(e.frameRate||0))+(e.hdr||"")+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}function o(e){var t=e.language+(e.channelsCount||0)+(e.audioSamplingRate||0)+e.roles.join(",")+e.label+e.groupId+e.fastSwitching;return e.dependencyStream&&(t+=e.dependencyStream.baseOriginalId||""),t}if(r.length){for(var s=e.textStreams,u=(r=l(r)).next(),c={};!u.done;c={ni:void 0},u=r.next())if(c.ni=u.value,(u=s.filter(function(e){return function(t){return!(!t.codecs.startsWith(e.ni)&&!t.mimeType.startsWith(e.ni))}}(c))).length){s=u;break}e.textStreams=s}if(s=e.variants,(t.length||n.length)&&(s=function(e,t,n){for(var i=(t=l(t)).next(),r={};!i.done;r={videoCodec:void 0},i=t.next())if(r.videoCodec=i.value,i=e.filter(function(e){return function(t){return t.video&&t.video.codecs.startsWith(e.videoCodec)}}(r)),i.length){e=i;break}for(t=(n=l(n)).next(),i={};!t.done;i={audioCodec:void 0},t=n.next())if(i.audioCodec=t.value,t=e.filter(function(e){return function(t){return t.audio&&t.audio.codecs.startsWith(e.audioCodec)}}(i)),t.length){e=t;break}return e}(s,t,n)),i.length){for(t=new Q,s=(n=l(s)).next();!s.done;s=n.next())s=s.value,t.push(String(s.video.width||0),s);var d=[];t.forEach(function(e,t){e=0;for(var n=[],r=(t=l(t)).next(),a={};!r.done;a={ug:void 0},r=t.next())a.ug=r.value,(r=i.filter(function(e){return function(t){return e.ug.decodingInfos[0][t]}}(a)).length)>e?(e=r,n=[a.ug]):r==e&&n.push(a.ug);d.push.apply(d,h(n))}),s=d}for(n=new Set,t=new Set,r=(s=l(s)).next();!r.done;r=s.next())(r=r.value).audio&&n.add(r.audio),r.video&&t.add(r.video);s=Array.from(n).sort(function(e,t){return e.bandwidth-t.bandwidth});var p=[];for(n=new Map,r=(s=l(s)).next();!r.done;r=s.next()){if(u=o(r=r.value),(c=n.get(u)||[]).length){var f=c[c.length-1],g=Mi(f.codecs),m=Mi(r.codecs);g!=m||r.bandwidth&&f.bandwidth&&!(r.bandwidth>f.bandwidth)||(c.push(r),p.push(r.id))}else c.push(r),p.push(r.id);n.set(u,c)}var v={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};s=Array.from(t).sort(function(e,t){if(!e.bandwidth||!t.bandwidth||e.bandwidth==t.bandwidth){if(e.codecs&&t.codecs&&e.codecs!=t.codecs&&e.width==t.width){var n=Mi(e.codecs),i=Mi(t.codecs);if(n!=i)return(v[n]||1)-(v[i]||1)}return e.width-t.width}return e.bandwidth-t.bandwidth}),t=Ut();var y=[];for(n=new Map,r=(s=l(s)).next();!r.done;r=s.next()){if(u=a(r=r.value),(c=n.get(u)||[]).length){if(f=c[c.length-1],!t&&(g=Mi(f.codecs))!==(m=Mi(r.codecs)))continue;(g=Mi(f.codecs))!=(m=Mi(r.codecs))||r.bandwidth&&f.bandwidth&&!(r.bandwidth>f.bandwidth)||(c.push(r),y.push(r.id))}else c.push(r),y.push(r.id);n.set(u,c)}e.variants=e.variants.filter(function(e){var t=e.audio;return e=e.video,!(t&&!p.includes(t.id)||e&&!y.includes(e.id))})}function Qi(e,t,n){function i(e,t,n){return e>=t&&e<=n}var r=e.video;if(r&&r.width&&r.height){var a=r.width,o=r.height;if(o>a&&(a=(o=l([o,a])).next().value,o=o.next().value),!i(a,t.minWidth,Math.min(t.maxWidth,n.width))||!i(o,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r.width*r.height,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function $i(e,t,n,i,r){var a,o;return L(function(s){if(1==s.g)return Me().Lj()&&function(e){for(var t=(new Map).set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set,i=(e=l(e)).next();!i.done;i=e.next())(i=i.value).video&&n.add(i.video);for(e=(n=l(n)).next();!e.done;e=n.next()){e=e.value;for(var r=(i=l(t)).next();!r.done;r=i.next()){var a=l(r.value);if(r=a.next().value,a=a.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,a);break}}}}(t.variants),_(s,nr(t.variants,n,!1,i),2);a=null,e&&(o=e.g)&&(a=o.keySystem),t.variants=t.variants.filter(function(e){var t=function(e,t,n){if(!e.decodingInfos.some(function(e){return!(!e.supported||t&&(e=e.keySystemAccess)&&(n[e.keySystem]||e.keySystem)!=t)}))return!1;var i=Me(),r="Xbox"===i.Sb();i="MOBILE"===i.Ja()&&"GECKO"===i.Fa();var a=e.video,o=a&&a.width||0,s=a&&a.height||0;return!(r&&a&&(1920<o||1080<s)&&(a.codecs.includes("avc1.")||a.codecs.includes("avc3."))||(r=a&&a.dependencyStream)&&!Nt(r)||(e=e.audio,i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}(e,a,r);if(!t){var n=[];e.audio&&n.push(vr(e.audio)),e.video&&n.push(vr(e.video))}return t}),w(s)})}function er(e,t){var n,i,r,a,o,s,u;return L(function(h){if(1==h.g){for(n=function(e,t){if(e){var n=cn(e);return n.supported=e.supported&&t.supported,n.powerEfficient=e.powerEfficient&&t.powerEfficient,n.smooth=e.smooth&&t.smooth,t.keySystemAccess&&!n.keySystemAccess&&(n.keySystemAccess=t.keySystemAccess),n}return t},i=null,r=[],a=l(t),o=a.next(),s={};!o.done;s={cache:void 0,df:void 0},o=a.next())u=o.value,s.df=dn(u),s.cache=_r,s.cache.has(s.df)?i=n(i,s.cache.get(s.df)):r.push(tr(u).then(function(e){return function(t){for(var r=null,a=(t=l(t||[])).next();!a.done;a=t.next())r=n(r,a.value);r&&(e.cache.set(e.df,r),i=n(i,r))}}(s)));return _(h,Promise.all(r),2)}i&&e.decodingInfos.push(i),w(h)})}function tr(e){var t=[""];e.video&&(t=Di(e.video.contentType).split(","));var n=[""];e.audio&&(n=Di(e.audio.contentType).split(","));for(var i=[],r=(t=l(t)).next();!r.done;r=t.next()){r=r.value;for(var a=l(n),o=a.next(),s={};!o.done;s={Zc:void 0},o=a.next())o=o.value,s.Zc=hn(e),e.video&&(s.Zc.video.contentType=xi(Li(s.Zc.video.contentType),r)),e.audio&&(s.Zc.audio.contentType=xi(Li(s.Zc.audio.contentType),o)),i.push(new Promise(function(e){return function(t,n){("MOBILE"==Me().Ja()?qi(5,navigator.mediaCapabilities.decodingInfo(e.Zc)):navigator.mediaCapabilities.decodingInfo(e.Zc)).then(function(e){t(e)}).catch(n)}}(s)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function nr(e,t,n,i){var r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w,S,T;return L(function(A){switch(A.g){case 1:if(e.some(function(e){return e.decodingInfos.length}))return A.return();r=l(i),a=r.next(),o={};case 2:if(a.done){A.A(4);break}o.pj=a.value,s=!1,u=l(e),h=u.next();case 5:if(h.done){A.A(7);break}c=h.value,d=ir(c,t,n).filter((E=o,function(e){return((e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)===E.pj})),p=l(d),f=p.next();case 8:if(f.done){A.A(10);break}return g=f.value,_(A,er(c,g),9);case 9:f=p.next(),A.A(8);break;case 10:c.decodingInfos.some(function(e){return e.supported})&&(s=!0),h=u.next(),A.A(5);break;case 7:if(s)return A.return();o={pj:void 0},a=r.next(),A.A(2);break;case 4:m=l(e),v=m.next();case 12:if(v.done){A.A(0);break}y=v.value,b=ir(y,t,n).filter(function(e){return!(e=(e=e[0]).keySystemConfiguration&&e.keySystemConfiguration.keySystem)||!i.includes(e)}),w=l(b),S=w.next();case 15:if(S.done){v=m.next(),A.A(12);break}return T=S.value,_(A,er(y,T),16);case 16:S=w.next(),A.A(15)}var E})}function ir(e,t,n){var i=e.audio,r=e.video,a=[],o=[];if(r)for(var s=l(r.fullMimeTypes),u=s.next();!u.done;u=s.next()){var h=Di(u=u.value);if(h.includes(",")&&!i){var c=h.split(","),d=Li(u);h=$e("video",c),d=ki(d,c=rr(c=$e("audio",c),d),"audio"),o.push({contentType:d,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(h=ar(h),u={contentType:ki(Li(u),h,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||30},r.hdr)switch(r.hdr){case"PQ":u.transferFunction="pq";break;case"HLG":u.transferFunction="hlg"}r.colorGamut&&(u.colorGamut=r.colorGamut),a.push(u)}if(i)for(u=(s=l(i.fullMimeTypes)).next();!u.done;u=s.next())u=ki(u=Li(h=u.value),h=rr(Di(h),u),"audio"),o.push({contentType:u,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(s=[],0==a.length&&a.push(null),0==o.length&&o.push(null),u=(a=l(a)).next();!u.done;u=a.next())for(u=u.value,d=(h=l(o)).next();!d.done;d=h.next())d=d.value,c={type:n?"file":"media-source"},u&&(c.video=u),d&&(c.audio=d),s.push(c);if(!(o=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])).length)return[s];for(e=[],n=new Map,a=(o=l(o)).next();!a.done;a=o.next())a=a.value,n.get(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);for(o=t?"required":"optional",t=t?["persistent-license"]:["temporary"],u=(a=l(n.keys())).next();!u.done;u=a.next()){for(u=u.value,d=n.get(u),h=new Map,c=(d=l(d)).next();!c.done;c=d.next()){var p=(c=c.value).videoRobustness+","+c.audioRobustness;h.get(p)||h.set(p,[]),h.get(p).push(c)}for(d=(h=l(h.values())).next();!d.done;d=h.next()){d=d.value,c=[];for(var f=(p=l(s)).next();!f.done;f=p.next()){f=Object.assign({},f.value);for(var g={keySystem:u,initDataType:"cenc",persistentState:o,distinctiveIdentifier:"optional",sessionTypes:t},m=l(d),v=m.next();!v.done;v=m.next()){if((v=v.value).initData&&v.initData.length){for(var y=new Set,b=l(v.initData),_=b.next();!_.done;_=b.next())y.add(_.value.initDataType);g.initDataType=v.initData[0].initDataType}v.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),v.persistentStateRequired&&(g.persistentState="required"),v.sessionType&&(g.sessionTypes=[v.sessionType]),i&&(g.audio?(v.encryptionScheme&&(g.audio.encryptionScheme=g.audio.encryptionScheme||v.encryptionScheme),g.audio.robustness=g.audio.robustness||v.audioRobustness):(g.audio={robustness:v.audioRobustness},v.encryptionScheme&&(g.audio.encryptionScheme=v.encryptionScheme)),""==g.audio.robustness&&delete g.audio.robustness),r&&(g.video?(v.encryptionScheme&&(g.video.encryptionScheme=g.video.encryptionScheme||v.encryptionScheme),g.video.robustness=g.video.robustness||v.videoRobustness):(g.video={robustness:v.videoRobustness},v.encryptionScheme&&(g.video.encryptionScheme=v.encryptionScheme)),""==g.video.robustness&&delete g.video.robustness)}f.keySystemConfiguration=g,c.push(f)}e.push(c)}}return e}function rr(e,t){var n=Me();return"flac"==e.toLowerCase()?"WEBKIT"!=n.Fa()?"flac":"fLaC":"opus"===e.toLowerCase()?"WEBKIT"!=n.Fa()?"opus":"mp4"==Ii(t)?"Opus":"opus":"ac-3"==e.toLowerCase()&&n.ye()?"ec-3":e}function ar(e){if(e.includes("avc1")){var t=e.split(".");if(3==t.length)return e=t.shift()+".",(e+=parseInt(t.shift(),10).toString(16))+("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if("vp9"==e)return"vp09.00.41.08";return e}function or(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,a=t?t.codecs:null,o=n?n.codecs:null,s=t?t.groupId:null,u=[];n&&u.push(n.mimeType),t&&u.push(t.mimeType),u=u[0]||null;var h=[];t&&h.push(t.kind),n&&h.push(n.kind),h=h[0]||null;var c=new Set;if(t)for(var d=l(t.roles),p=d.next();!p.done;p=d.next())c.add(p.value);if(n)for(p=(d=l(n.roles)).next();!p.done;p=d.next())c.add(p.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,kind:h,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:u,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:a,videoCodec:o,primary:e.primary,roles:Array.from(c),audioRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec),o.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,n=o.split(",");try{e.videoCodec=$e("video",n),e.audioCodec=$e("audio",n)}catch(e){}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,t=t.dependencyStream)&&(e.audioCodec=t.codecs||e.audioCodec),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function sr(e){return{id:e.id,active:!1,type:nt,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function ur(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=Hu(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&null!=t&&(t/=Number(r.split("x")[0])),r&&null!=n&&(n/=Number(r.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:r||null,originalImageId:e.originalId}}function lr(e){return e.__shaka_id||(e.__shaka_id=wr++),e.__shaka_id}function hr(e){var t={id:lr(e),active:"disabled"!=e.mode,type:nt,bandwidth:0,language:ht(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:"forced"==e.kind,originalTextId:e.id,originalLanguage:e.language};return"captions"==e.kind&&(t.mimeType="unknown"),"subtitles"==e.kind&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function cr(e,t){var n=e?e.language:null;if(n={id:lr(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:ht(n||"und"),label:e?e.label:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!!e&&"main"==e.kind,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+","+n.videoCodec:n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function dr(e){return e.allowedByApplication&&e.allowedByKeySystem&&0==e.disabledUntilTime}function pr(e){return e.filter(function(e){return dr(e)})}function fr(e,t,n,i){var r=e,a=e.filter(function(e){return e.primary});a.length&&(r=a);var o=r.length?r[0].language:"";if(r=r.filter(function(e){return e.language==o}),t){var s=gt(ht(t),e.map(function(e){return e.language}));s&&(r=e.filter(function(e){return ht(e.language)==s}))}if(r=r.filter(function(e){return e.forced==i}),n){if((e=gr(r,n)).length)return e}else if(e=r.filter(function(e){return 0==e.roles.length}),e.length)return e;return e=r.map(function(e){return e.roles}).reduce(Ki,[]),e.length?gr(r,e[0]):r}function gr(e,t){return e.filter(function(e){return e.roles.includes(t)})}function mr(e,t){t.length&&(t=t.filter(function(t){return Mi(e.codecs)==Mi(t.codecs)}).sort(function(e,t){return e.bandwidth&&t.bandwidth&&e.bandwidth!=t.bandwidth?e.bandwidth-t.bandwidth:(e.width||0)-(t.width||0)}),e.trickModeVideo=t[0],1<t.length&&(t=t.find(function(t){return e.width==t.width&&e.height==t.height})))&&(e.trickModeVideo=t)}function vr(e){return"audio"==e.type?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:"video"==e.type?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function yr(e,t,n){if(0==n.autoShowText)return!1;if(1==n.autoShowText)return!0;var i=ht(n.preferredTextLanguage);return t=ht(t.language),2==n.autoShowText?st(t,i):3==n.autoShowText?!!e&&(e=ht(e.language),st(t,i)&&!st(e,t)):(Y("Invalid autoShowText setting!"),!1)}function br(e){for(var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},n=(e=l(e)).next();!n.done;n=e.next()){var i={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:(n=n.value)?Li(n):"",codecs:n?Di(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};i.fullMimeTypes.add(xi(i.mimeType,i.codecs)),n.startsWith("audio/")?(i.type="audio",t.audio=i):t.video=i}return t}Wi.prototype.X=function(t){var n=this;this.stop();var i=!0,r=null;return this.g=function(){e.clearTimeout(r),i=!1},r=e.setTimeout(function(){i&&n.h()},1e3*t),this},Wi.prototype.stop=function(){this.g&&(this.g(),this.g=null)},zi.prototype.Ka=function(){return this.stop(),this.h(),this},zi.prototype.X=function(e){var t=this;return this.stop(),this.g=new Wi(function(){t.h()}).X(e),this},zi.prototype.ya=function(e){var t=this;return this.stop(),this.g=new Wi(function(){t.g.X(e),t.h()}).X(e),this},zi.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},H("shaka.util.Timer",zi),zi.prototype.stop=zi.prototype.stop,zi.prototype.tickEvery=zi.prototype.ya,zi.prototype.tickAfter=zi.prototype.X,zi.prototype.tickNow=zi.prototype.Ka,H("shaka.util.StreamUtils",Zi),Zi.meetsRestrictions=Qi;var _r=new Map,wr=0,Sr=(new Map).set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),Tr=(new Map).set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ar(){var t=this;this.G=null,this.l=!1,this.s=new Tt,this.j=new At,navigator.connection&&navigator.connection.addEventListener&&this.j.o(navigator.connection,"change",function(){if(t.l&&t.g.useNetworkInformation){t.s=new Tt,t.g&&t.s.configure(t.g.advanced);var e=t.chooseVariant();e&&navigator.onLine&&t.G(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.F=[],this.H=1,this.I=!1,this.h=this.m=this.g=this.u=null,this.B=new zi(function(){if(t.l&&(t.g.restrictToElementSize||t.g.restrictToScreenSize)){var e=t.chooseVariant();e&&t.G(e,t.g.clearBufferSwitch,t.g.safeMarginSwitch)}}),this.C=e,"documentPictureInPicture"in e&&this.j.o(e.documentPictureInPicture,"enter",function(){t.C=e.documentPictureInPicture.window,t.B&&t.B.Ka(),t.j.ra(t.C,"pagehide",function(){t.C=e,t.B&&t.B.Ka()})}),this.D=this.i=null}function Er(e){if(!e.I){var t=e.s;if(!(t.g>=t.i))return;e.I=!0,e.u-=1e3*(e.g.switchInterval-e.g.minTimeToSwitch)}Date.now()-e.u<1e3*e.g.switchInterval||(t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch))}function xr(e,t,n,i,r){if(e.D){var a=e.D.Ti();a&&(n=n.filter(function(e){return!e.bandwidth||!a||e.bandwidth<=a}))}return t&&(n=n.filter(function(e){return Qi(e,t,{width:r,height:i})})),n.sort(function(e,t){return e.bandwidth-t.bandwidth})}(i=Ar.prototype).stop=function(){this.G=null,this.l=!1,this.F=[],this.H=1,this.m=this.u=null,this.h&&(this.h.disconnect(),this.h=null),this.B.stop(),this.D=this.i=null},i.release=function(){this.j.release(),this.B=null},i.init=function(e){this.G=e},i.chooseVariant=function(){var e=1/0,t=1/0;if(this.g.restrictToScreenSize){var n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio;e=this.C.screen.height*n,t=this.C.screen.width*n}if(this.h&&this.g.restrictToElementSize){n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio;var i=this.m.clientHeight,r=this.m.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.m&&(i=this.i.height,r=this.i.width),e=Math.min(e,i*n),t=Math.min(t,r*n)}if((n=this.F.filter(function(e){return e&&!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})).length||(n=this.F),i=n,n.length!=this.F.length&&(i=this.F.filter(function(e){return e&&!!(e.audio&&e.audio.fastSwitching||e.video&&e.video.fastSwitching)})),n=xr(this,this.g.restrictions,i,1/0,1/0),1/0!=e||1/0!=t){for(n=function(e){for(var t=[],n=(e=l(e)).next();!n.done;n=e.next())(n=n.value.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(e,t){return e.width-t.width})}(n),r=(n=l(n)).next();!r.done;r=n.next())if((r=r.value).height>=e&&r.width>=t){e=r.height,t=r.width;break}n=xr(this,this.g.restrictions,i,e,t)}for(e=this.getBandwidthEstimate(),i.length&&!n.length&&(n=[(n=xr(this,null,i,1/0,1/0))[0]]),t=n[0]||null,i=0;i<n.length;i++){r=n[i];for(var a=isNaN(this.H)?1:Math.abs(this.H),o=a*r.bandwidth/this.g.bandwidthDowngradeTarget,s={bandwidth:1/0},u=i+1;u<n.length;u++)if(r.bandwidth!=n[u].bandwidth){s=n[u];break}a=a*s.bandwidth/this.g.bandwidthUpgradeTarget,e>=o&&e<=a&&(t.bandwidth!=r.bandwidth||t.bandwidth==r.bandwidth&&t.video&&r.video&&(t.video.width<r.video.width||t.video.height<r.video.height))&&(t=r)}return this.u=Date.now(),t},i.enable=function(){this.l=!0},i.disable=function(){this.l=!1},i.segmentDownloaded=function(e,t,n,i){var r=e;this.g.removeLatencyFromFirstPacketTime&&i&&1===i.packetNumber&&i.timeToFirstByte&&(r=e-i.timeToFirstByte),r>=this.g.cacheLoadThreshold&&this.s.sample(r,t),n&&null!=this.u&&this.l&&Er(this)},i.trySuggestStreams=function(){null!=this.u&&this.l&&Er(this)},i.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=1e6*navigator.connection.downlink),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.s.getBandwidthEstimate(e),this.D?this.D.getBandwidthEstimate(e):e)},i.setVariants=function(e){this.F=e},i.playbackRateChanged=function(e){this.H=e},i.setMediaElement=function(t){function n(){i.B.X(Cr)}var i=this;this.m=t,this.h&&(this.h.disconnect(),this.h=null),this.m&&"ResizeObserver"in e&&(this.h=new ResizeObserver(n),this.h.observe(this.m)),this.j.o(t,"enterpictureinpicture",function(e){e.pictureInPictureWindow&&(i.i=e.pictureInPictureWindow,i.j.o(i.i,"resize",n))}),this.j.o(t,"leavepictureinpicture",function(){i.i&&i.j.Da(i.i,"resize",n),i.i=null})},i.setCmsdManager=function(e){this.D=e},i.configure=function(e){this.g=e,this.s&&this.g&&this.s.configure(this.g.advanced)},H("shaka.abr.SimpleAbrManager",Ar),Ar.prototype.configure=Ar.prototype.configure,Ar.prototype.setCmsdManager=Ar.prototype.setCmsdManager,Ar.prototype.setMediaElement=Ar.prototype.setMediaElement,Ar.prototype.playbackRateChanged=Ar.prototype.playbackRateChanged,Ar.prototype.setVariants=Ar.prototype.setVariants,Ar.prototype.getBandwidthEstimate=Ar.prototype.getBandwidthEstimate,Ar.prototype.trySuggestStreams=Ar.prototype.trySuggestStreams,Ar.prototype.segmentDownloaded=Ar.prototype.segmentDownloaded,Ar.prototype.disable=Ar.prototype.disable,Ar.prototype.enable=Ar.prototype.enable,Ar.prototype.chooseVariant=Ar.prototype.chooseVariant,Ar.prototype.init=Ar.prototype.init,Ar.prototype.release=Ar.prototype.release,Ar.prototype.stop=Ar.prototype.stop;var Cr=1;function kr(e,t){if(e===t||!e.length||!t.length)return!0;for(var n=(e=l(e)).next();!n.done;n=e.next()){if(Lr(n=n.value))return!0;for(var i=l(t),r=i.next();!r.done;r=i.next())if(r=r.value,n.keySystem===r.keySystem||Lr(r))return!0}return!1}function Ir(e,t){if(!e.length)return t;if(!t.length)return e;for(var n=[],i=(e=l(e)).next();!i.done;i=e.next()){i=i.value;for(var r=l(t),a=r.next();!a.done;a=r.next()){if(a=a.value,i.keySystem==a.keySystem){r=new Map;for(var o=l((i.initData||[]).concat(a.initData||[])),s=o.next();!s.done;s=o.next())s=s.value,r.set(s.keyId,s);r=Array.from(r.values()),o=i.keyIds&&a.keyIds?new Set([].concat(h(i.keyIds),h(a.keyIds))):i.keyIds||a.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||a.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||a.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||a.persistentStateRequired,videoRobustness:i.videoRobustness||a.videoRobustness,audioRobustness:i.audioRobustness||a.audioRobustness,serverCertificate:i.serverCertificate||a.serverCertificate,serverCertificateUri:i.serverCertificateUri||a.serverCertificateUri,initData:r,keyIds:o});break}Lr(i)?n.push(i):Lr(a)&&n.push(a)}}return n}function Mr(e){return!!e&&!!e.match(/^com\.(microsoft|chromecast)\.playready/)}function Pr(e){return!!e&&!!e.match(/^com\.apple\.fps/)}function Lr(e){return!!(e=e.licenseServerUri)&&e.startsWith("data:application/json;base64,")}H("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});var Dr=new Ie(function(){return Se(new Uint8Array([0]))}),Rr=new Map;function Nr(e,t){var n=2,i=1e3,r=2,a=.5;this.l=null==e.maxAttempts?n:e.maxAttempts,this.j=null==e.baseDelay?i:e.baseDelay,this.s=null==e.fuzzFactor?a:e.fuzzFactor,this.m=null==e.backoffFactor?r:e.backoffFactor,this.g=0,this.h=this.j,(this.i=void 0!==t&&t)&&(this.g=1)}function Or(e){var t,n;return L(function(i){if(1==i.g){if(e.g>=e.l){if(!e.i)throw new Ce(2,7,1010);e.g=1,e.h=e.j}return t=e.g,e.g++,0==t?i.return():(n=e.h*(1+(2*Math.random()-1)*e.s),_(i,new Promise(function(e){new zi(e).X(n/1e3)}),2))}e.h*=e.m,w(i)})}function Ur(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Br(){var e,t,n=new Promise(function(n,i){e=n,t=i});return n.resolve=e,n.reject=t,n}function Fr(e,t){this.promise=e,this.i=t,this.g=null}function jr(e){return new Fr(Promise.reject(e),function(){return Promise.resolve()})}function Gr(){var e=Promise.reject(new Ce(2,7,7001));return e.catch(function(){}),new Fr(e,function(){return Promise.resolve()})}function Hr(e){return new Fr(Promise.resolve(e),function(){return Promise.resolve()})}function Vr(e){return new Fr(e,function(){return e.catch(function(){})})}function Wr(e){return new Fr(Promise.all(e.map(function(e){return e.promise})),function(){return Promise.all(e.map(function(e){return e.abort()}))})}function zr(){this.g=[]}function Kr(e,t){e.g.push(t.finally(function(){Qt(e.g,t)}))}function Xr(e,t,n,i,r,a,o){$.call(this),this.i=null,this.j=!1,this.u=new zr,this.g=new Set,this.h=new Set,this.s=e||null,this.m=t||null,this.B=n||null,this.C=i||null,this.D=r||null,this.G=a||null,this.F=o||null,this.l=new Map}function Yr(e,t,n,i){i=void 0!==i&&i,n=n||na;var r=ia.get(e);(!r||n>=r.priority)&&ia.set(e,{priority:n,Sf:t,Rl:i})}function qr(e,t){for(var n=l(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(n=(e=l(e.h)).next();!n.done;n=e.next())t.h.add(n.value)}function Zr(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:void 0===n?null:n}}function Jr(e,t,n,i,r,a,o,s){e.i.forceHTTP&&(n.uris[a]=n.uris[a].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[a]=n.uris[a].replace("http://","https://")),0<a&&e.G&&e.G(t,i,n.uris[a],n.uris[a-1]);var u=new re(n.uris[a]),l=u.jc,h=!1;l||(ae(u,l=(l=location.protocol).slice(0,-1)),n.uris[a]=u.toString()),l=l.toLowerCase();var c=(l=ia.get(l))?l.Sf:null;if(!c)return jr(new Ce(2,1,1e3,u));var d=l.Rl;(u=e.l.get(u.Gb))&&(n.headers["common-access-token"]=u);var p,f=null,g=null,m=!1,v=!1;return Vr(Or(r)).bb(function(){if(e.j)return Gr();p=Date.now();var r=0;n.requestStartTime=Date.now();var o=c(n.uris[a],n,t,function(a,o,u){f&&f.stop(),g&&g.X(l/1e3),e.s&&t==ta&&(r++,n.packetNumber=r,e.s(a,o,Qr(i),n,i),h=!0,s.g=u)},function(i){v=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(i,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!d)return o;var u=n.retryParameters.connectionTimeout;u&&(f=new zi(function(){m=!0,o.abort()})).X(u/1e3);var l=n.retryParameters.stallTimeout;return l&&(g=new zi(function(){m=!0,o.abort()})),o}).bb(function(i){f&&f.stop(),g&&g.stop(),null==i.timeMs&&(i.timeMs=Date.now()-p);var r=i.headers["common-access-token"];if(r){var a=new re(i.uri);e.l.set(a.Gb,r)}return r={response:i,ul:h},!v&&e.m&&e.m(i.headers,n,t),e.B&&e.B(n,i),r},function(u){if(f&&f.stop(),g&&g.stop(),e.C){var l=null,h=0;u instanceof Ce&&(l=u,1001==u.code&&(h=u.data[1])),e.C(n,l,h,m)}if(e.j)return Gr();if(m&&(u=new Ce(1,1,1003,n.uris[a],t)),u instanceof Ce){if(7001==u.code)throw u;if(1010==u.code)throw o;if(1==u.severity){if((l=new V("retry",l=(new Map).set("error",u))).cancelable=!0,e.dispatchEvent(l),l.defaultPrevented)throw u;return a=(a+1)%n.uris.length,Jr(e,t,n,i,r,a,u,s)}}throw u})}function Qr(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.s)return!1}return!0}function $r(){this.g=0}function ea(e,t,n){Fr.call(this,e,t),this.h=n}Br.prototype.resolve=function(){},Br.prototype.reject=function(){},Fr.prototype.abort=function(){return this.g||(this.g=this.i()),this.g},Fr.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Fr.prototype.bb=function(e,t){function n(n){return function(s){if(r.g&&n)a.reject(o);else{var u=n?e:t;u?i=function(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(e){return n.reject(e),function(){return Promise.resolve()}}}(u,s,a):(n?a.resolve:a.reject)(s)}}}function i(){return a.reject(o),r.abort()}var r=this,a=new Br;a.catch(function(){});var o=new Ce(2,7,7001);return this.promise.then(n(!0),n(!1)),new Fr(a,function(){return i()})},o.Object.defineProperties(Fr.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return null!==this.g}}}),H("shaka.util.AbortableOperation",Fr),Fr.prototype.chain=Fr.prototype.bb,Fr.prototype.finally=Fr.prototype.finally,Fr.all=Wr,Fr.prototype.abort=Fr.prototype.abort,Fr.notAbortable=Vr,Fr.completed=Hr,Fr.aborted=Gr,Fr.failed=jr,zr.prototype.destroy=function(){for(var e=[],t=l(this.g),n=t.next();!n.done;n=t.next())(n=n.value).promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)},m(Xr,$),(i=Xr.prototype).configure=function(e){this.i=e},i.Ul=function(e){this.g.add(e)},i.rm=function(e){this.g.delete(e)},i.jk=function(){this.g.clear()},i.Vl=function(e){this.h.add(e)},i.sm=function(e){this.h.delete(e)},i.kk=function(){this.h.clear()},i.Ii=function(){this.l.clear()},i.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),$.prototype.release.call(this),this.u.destroy()},i.request=function(e,t,n){var i=this,r=new $r;if(this.j){var a=Promise.reject(new Ce(2,7,7001));return a.catch(function(){}),new ea(a,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?hn(t.retryParameters):{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},t.uris=hn(t.uris),a=function(e,t,n,i){function r(e){a=a.bb(function(){return n.body&&(n.body=Se(n.body)),e(t,n,i)})}var a=Hr(void 0);e.D&&r(e.D);for(var o=(e=l(e.g)).next();!o.done;o=e.next())r(o.value);return a.bb(void 0,function(e){if(e instanceof Ce&&7001==e.code)throw e;throw new Ce(2,1,1006,e)})}(this,e,t,n);var o=a.bb(function(){return Jr(i,e,t,n,new Nr(t.retryParameters,!1),0,null,r)}),s=o.bb(function(t){return function(e,t,n,i){for(var r=Hr(void 0),a=(e=l(e.h)).next(),o={};!a.done;o={wj:void 0},a=e.next())o.wj=a.value,r=r.bb(function(e){return function(){var r=n.response;return r.data&&(r.data=Se(r.data)),(0,e.wj)(t,r,i)}}(o));return r.bb(function(){return n},function(e){var t=2;if(e instanceof Ce){if(7001==e.code)throw e;t=e.severity}throw new Ce(t,1,1007,e)})}(i,e,t,n)}),u=Date.now(),h=0;a.promise.then(function(){h=Date.now()-u},function(){});var c=0;o.promise.then(function(){c=Date.now()},function(){});var d=s.bb(function(r){var a=Date.now()-c,o=r.response;return o.timeMs+=h,o.timeMs+=a,r.ul||!i.s||o.fromCache||"HEAD"==t.method||e!=ta||i.s(o.timeMs,o.data.byteLength,Qr(n),t,n),i.F&&i.F(e,o,n),o},function(e){throw e&&(e.severity=2),e});return a=new ea(d.promise,function(){return d.abort()},r),Kr(this.u,a),a},H("shaka.net.NetworkingEngine",Xr),Xr.prototype.request=Xr.prototype.request,Xr.prototype.destroy=Xr.prototype.destroy,Xr.makeRequest=Zr,Xr.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},Xr.prototype.clearCommonAccessTokenMap=Xr.prototype.Ii,Xr.prototype.clearAllResponseFilters=Xr.prototype.kk,Xr.prototype.unregisterResponseFilter=Xr.prototype.sm,Xr.prototype.registerResponseFilter=Xr.prototype.Vl,Xr.prototype.clearAllRequestFilters=Xr.prototype.jk,Xr.prototype.unregisterRequestFilter=Xr.prototype.rm,Xr.prototype.registerRequestFilter=Xr.prototype.Ul,Xr.unregisterScheme=function(e){ia.delete(e)},Xr.registerScheme=Yr,Xr.prototype.configure=Xr.prototype.configure,Xr.NumBytesRemainingClass=$r,m(ea,Fr),Xr.PendingRequest=ea;var ta=1;Xr.RequestType={MANIFEST:0,SEGMENT:ta,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8},Xr.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var na=3;Xr.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:na};var ia=new Map;function ra(e){this.g=!1,this.h=new Br,this.i=e}function aa(e,t){if(e.g){if(t instanceof Ce&&7003==t.code)throw t;throw new Ce(2,7,7003,t)}}function oa(e){for(var t=new Map,n=l(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function sa(e){var t={};return e.forEach(function(e,n){t[n]=e}),t}function ua(e,t){this.h=Ee(e),this.i=t==ha,this.g=0}function la(){return new Ce(2,3,3e3)}ra.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))},(i=ua.prototype).Oa=function(){return this.g<this.h.byteLength},i.Ua=function(){return this.g},i.getLength=function(){return this.h.byteLength},i.aa=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch(e){throw la()}},i.Ga=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch(e){throw la()}},i.W=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch(e){throw la()}},i.Oh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch(e){throw la()}},i.Pd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch(e){throw la()}if(2097151<t)throw new Ce(2,3,3001);return this.g+=8,t*Math.pow(2,32)+e},i.Yb=function(e){if(this.g+e>this.h.byteLength)throw la();var t=Te(this.h,this.g,e);return this.g+=e,t},i.skip=function(e){if(this.g+e>this.h.byteLength)throw la();this.g+=e},i.xj=function(e){if(this.g<e)throw la();this.g-=e},i.seek=function(e){if(0>e||e>this.h.byteLength)throw la();this.g=e},i.ld=function(){for(var e=this.g;this.Oa()&&0!=this.h.getUint8(this.g);)this.g+=1;return e=Te(this.h,e,this.g-e),this.g+=1,Ne(e)},H("shaka.util.DataViewReader",ua),ua.prototype.readTerminatedString=ua.prototype.ld,ua.prototype.seek=ua.prototype.seek,ua.prototype.rewind=ua.prototype.xj,ua.prototype.skip=ua.prototype.skip,ua.prototype.readBytes=ua.prototype.Yb,ua.prototype.readUint64=ua.prototype.Pd,ua.prototype.readInt32=ua.prototype.Oh,ua.prototype.readUint32=ua.prototype.W,ua.prototype.readUint16=ua.prototype.Ga,ua.prototype.readUint8=ua.prototype.aa,ua.prototype.getLength=ua.prototype.getLength,ua.prototype.getPosition=ua.prototype.Ua,ua.prototype.hasMoreData=ua.prototype.Oa;var ha=1;function ca(){this.i=new Map,this.h=new Map,this.g=!1}function da(e){for(var t=ba(e);e.reader.Oa()&&!e.parser.g;)e.parser.Kd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function pa(e){for(var t=ba(e),n=e.reader.W(),i=0;i<n&&(e.parser.Kd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);i++);}function fa(e){var t=ba(e);for(e.reader.skip(78);e.reader.Oa()&&!e.parser.g;)e.parser.Kd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function ga(e){var t=ba(e);e.reader.skip(8);var n=e.reader.Ga();for(e.reader.skip(6),2==n?e.reader.skip(48):e.reader.skip(12),1==n&&e.reader.skip(16);e.reader.Oa()&&!e.parser.g;)e.parser.Kd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function ma(e){return function(t){e(t.reader.Yb(t.reader.getLength()-t.reader.Ua()))}}function va(e){for(var t=0,n=(e=l(e)).next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function ya(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}function ba(e){return 8+(e.has64BitSize?8:0)+(null!=e.flags?4:0)}ua.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:ha},(i=ca.prototype).box=function(e,t){return e=va(e),this.i.set(e,_a),this.h.set(e,t),this},i.V=function(e,t){return e=va(e),this.i.set(e,wa),this.h.set(e,t),this},i.stop=function(){this.g=!0},i.parse=function(e,t,n){for(e=new ua(e,0),this.g=!1;e.Oa()&&!this.g;)this.Kd(0,e,t,n)},i.Kd=function(e,t,n,i){var r=t.Ua();if(i&&r+8>t.getLength())this.g=!0;else{var a=t.W(),o=t.W(),s=ya(o),u=!1;switch(a){case 0:a=t.getLength()-r;break;case 1:if(i&&t.Ua()+8>t.getLength())return void(this.g=!0);a=t.Pd(),u=!0}var l=this.h.get(o);if(l){var h=null,c=null;if(this.i.get(o)==wa){if(i&&t.Ua()+4>t.getLength())return void(this.g=!0);h=(c=t.W())>>>24,c&=16777215}o=r+a,n&&o>t.getLength()&&(o=t.getLength()),i&&o>t.getLength()?this.g=!0:(o-=t.Ua(),l({name:s,parser:this,partialOkay:n||!1,stopOnPartial:i||!1,version:h,flags:c,reader:t=new ua(t=0<o?t.Yb(o):new Uint8Array(0),0),size:a,start:r+e,has64BitSize:u}))}else t.skip(Math.min(r+a-t.Ua(),t.getLength()-t.Ua()))}},H("shaka.util.Mp4Parser",ca),ca.headerSize=ba,ca.typeToString=ya,ca.allData=ma,ca.audioSampleEntry=ga,ca.visualSampleEntry=fa,ca.sampleDescription=pa,ca.children=da,ca.prototype.parseNext=ca.prototype.Kd,ca.prototype.parse=ca.prototype.parse,ca.prototype.stop=ca.prototype.stop,ca.prototype.fullBox=ca.prototype.V,ca.prototype.box=ca.prototype.box;var _a=0,wa=1;function Sa(e){var t=this;this.g=[],this.h=[],this.data=[],(new ca).box("moov",da).box("moof",da).V("pssh",function(e){if(!(1<e.version)){var n=Te(e.reader.h,-12,e.size);if(t.data.push(n),t.g.push(Ye(e.reader.Yb(16))),0<e.version){n=e.reader.W();for(var i=0;i<n;i++){var r=Ye(e.reader.Yb(16));t.h.push(r)}}}}).parse(e)}function Ta(e,t,n,i){var r=e.length,a=t.length+16+r;0<i&&(a+=4+16*n.size);var o=new Uint8Array(a),s=Ee(o),u=0;if(s.setUint32(u,a),u+=4,s.setUint32(u,1886614376),u+=4,1>i?s.setUint32(u,0):s.setUint32(u,16777216),u+=4,o.set(t,u),u+=t.length,0<i)for(s.setUint32(u,n.size),u+=4,n=(t=l(n)).next();!n.done;n=t.next())n=Xe(n.value),o.set(n,u),u+=n.length;return s.setUint32(u,r),o.set(e,u+4),o}function Aa(e){var t=this;this.D=e,this.j=this.B=null,this.ba=this.P=!1,this.I=0,this.g=null,this.s=new At,this.i=new Map,this.U=[],this.C=new Map,this.J=!1,this.m=new Br,this.h=null,this.u=function(n){2==n.severity&&t.m.reject(n),e.onError(n)},this.Z=new Map,this.$=new Map,this.K=new zi(function(){return function(e){var t=e.Z,n=e.$;n.clear(),t.forEach(function(e,t){return n.set(t,e)}),(t=Array.from(n.values())).length&&t.every(function(e){return"expired"==e})&&e.u(new Ce(2,6,6014)),e.D.Of(sa(n))}(t)}),this.O=!1,this.L=[],this.Y=!1,this.F=new zi(function(){!function(e){e.i.forEach(function(t,n){var i=t.Jh,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.D.onExpirationUpdated(n.sessionId,r),t.Jh=r)})}(t)}),this.m.catch(function(){}),this.l=new ra(function(){return function(e){return L(function(t){switch(t.g){case 1:return e.s.release(),e.s=null,e.m.reject(),e.F.stop(),e.F=null,e.K.stop(),e.K=null,_(t,Ba(e),2);case 2:if(!e.j){t.A(3);break}return S(t,4),_(t,e.j.setMediaKeys(null),6);case 6:A(t,5);break;case 4:E(t);case 5:e.j=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.D=null,e.N=!1,e.H=null,w(t)}})}(t)}),this.N=!1,this.G=this.H=null,this.R=function(){return!1}}function Ea(e,t,n,i){i=void 0===i||i,e.C=new Map;for(var r=(n=l(n)).next();!r.done;r=n.next())e.C.set(r.value,{initData:null,initDataType:null});for(r=(n=l(e.h.persistentSessionsMetadata)).next();!r.done;r=n.next())r=r.value,e.C.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.O=0<e.C.size,xa(e,t,i)}function xa(e,t,n){var i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w;return L(function(S){if(1==S.g){for(Ha(e.h.clearKeys,t),i=t.some(function(e){return!!(e.video&&e.video.drmInfos.length||e.audio&&e.audio.drmInfos.length)}),r=oa(e.h.servers),a=oa(e.h.advanced||{}),!i&&n&&function(e,t){var n=[];for(t.forEach(function(e,t){n.push({keySystem:t,licenseServerUri:e,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),t=(e=l(e)).next();!t.done;t=e.next())(t=t.value).video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}(t,r),o=new WeakSet,s=l(t),u=s.next();!u.done;u=s.next())for(h=u.value,c=Fa(h),d=l(c),p=d.next();!p.done;p=d.next())f=p.value,o.has(f)||(o.add(f),Ga(f,r,a,e.h.keySystemsMapping));for(g=function(t,n){for(var i=[],r=(t=l(t)).next();!r.done;r=t.next()){var o,s=(r=r.value)[n]||a.has(r.keySystem)&&a.get(r.keySystem)[n]||"";if((o=""==s)&&(o=!!(o=r.keySystem)&&!!o.match(/^com\.widevine\.alpha/)),o&&("audioRobustness"==n?s=[e.h.defaultAudioRobustnessForWidevine]:"videoRobustness"==n&&(s=[e.h.defaultVideoRobustnessForWidevine])),"string"==typeof s)i.push(r);else if(Array.isArray(s))for(0===s.length&&(s=[""]),o=(s=l(s)).next();!o.done;o=s.next()){var u={};i.push(Object.assign({},r,(u[n]=o.value,u)))}}return i},m=new WeakSet,v=l(t),y=v.next();!y.done;y=v.next())(b=y.value).video&&!m.has(b.video)&&(b.video.drmInfos=g(b.video.drmInfos,"videoRobustness"),b.video.drmInfos=g(b.video.drmInfos,"audioRobustness"),m.add(b.video)),b.audio&&!m.has(b.audio)&&(b.audio.drmInfos=g(b.audio.drmInfos,"videoRobustness"),b.audio.drmInfos=g(b.audio.drmInfos,"audioRobustness"),m.add(b.audio));return _(S,nr(t,e.O,e.N,e.h.preferredKeySystems),2)}return aa(e.l),i||0<r.size?(w=Pa(e,t),S.return(i?w:w.catch(function(){}))):(e.P=!0,S.return(Promise.resolve()))})}function Ca(e){var t;return L(function(n){switch(n.g){case 1:if(e.j.mediaKeys)return n.return();if(!e.H){n.A(2);break}return _(n,e.H,3);case 3:return aa(e.l),n.return();case 2:return S(n,4),e.H=e.j.setMediaKeys(e.B),_(n,e.H,6);case 6:A(n,5);break;case 4:t=E(n),e.u(new Ce(2,6,6003,t.message));case 5:aa(e.l),w(n)}})}function ka(e){var t,n,i,r;return L(function(a){if(1==a.g)return e.C.size?(e.C.forEach(function(t,n){Ra(e,n,t)}),_(a,e.m,3)):a.A(2);if(2!=a.g){if(0<(e.g&&e.g.keyIds||new Set([])).size&&function(e){for(var t=l(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if("usable"!==e.Z.get(n.value))return!1;return!0}(e))return a.return(e.m);e.J=!1,e.m=new Br,e.m.catch(function(){})}for(t=(e.g?e.g.initData:[])||[],n=l(t),i=n.next();!i.done;i=n.next())r=i.value,Ia(e,r.initDataType,r.initData);return ja(e)&&e.m.resolve(),a.return(e.m)})}function Ia(e,t,n){if(n.length){if(e.h.ignoreDuplicateInitData){for(var i=e.i.values(),r=(i=l(i)).next();!r.done;r=i.next())if(we(n,r.value.initData))return;var a=!1;if(e.C.forEach(function(e){!a&&we(n,e.initData)&&(a=!0)}),a)return}e.J=!0,0<e.i.size&&ja(e)&&(e.m.resolve(),e.J=!1,e.m=new Br,e.m.catch(function(){})),function(e,t,n,i){try{var r=e.B.createSession(i)}catch(t){return void e.u(new Ce(2,6,6005,t.message))}e.s.o(r,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.Y?e.L.push(t):Na(e,t)}),e.s.o(r,"keystatuseschange",function(t){return Oa(e,t)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Jh:1/0,Pb:null,type:i});try{n=e.h.initDataTransform(n,t,e.g)}catch(n){return t=n,n instanceof Ce||(t=new Ce(2,6,6016,n)),void e.u(t)}e.h.logLicenseExchange&&ze(n),r.generateRequest(t,n).catch(function(t){if(!e.l.g){e.i.delete(r);var n=t.errorCode;if(n&&n.systemCode){var i=n.systemCode;0>i&&(i+=Math.pow(2,32)),i="0x"+i.toString(16)}e.u(new Ce(2,6,6006,t.message,t,i))}})}(e,t,n,e.g.sessionType)}}function Ma(e){return e=ee(e=e.i.keys(),function(e){return e.sessionId}),Array.from(e)}function Pa(t,n){var i,r,a,o,s,u;return L(function(c){switch(c.g){case 1:if(i=new Map,r=function(e,t,n){for(var i=l(t),r=i.next();!r.done;r=i.next())for(var a=(r=l(Fa(r.value))).next();!a.done;a=r.next())a=a.value,n.has(a.keySystem)||n.set(a.keySystem,[]),n.get(a.keySystem).push(a);if(1==n.size&&n.has(""))throw new Ce(2,6,6e3);(i=e.h.preferredKeySystems).length||1==(r=oa(e.h.servers)).size&&(i=Array.from(r.keys()));var o=(r=l(i)).next();for(a={};!o.done;a={qj:void 0},o=r.next()){a.qj=o.value;for(var s=(o=l(t)).next();!s.done;s=o.next())if(s=s.value.decodingInfos.find(function(e){return function(t){return t.supported&&null!=t.keySystemAccess&&t.keySystemAccess.keySystem==e.qj}}(a)))return s.keySystemAccess}for(a=(r=l([!0,!1])).next();!a.done;a=r.next())for(a=a.value,s=(o=l(t)).next();!s.done;s=o.next())for(var u=(s=l(s.value.decodingInfos)).next();!u.done;u=s.next())if((u=u.value).supported&&u.keySystemAccess){var h=u.keySystemAccess.keySystem;if(!i.includes(h)){var c=n.get(h);for(!c&&e.h.keySystemsMapping[h]&&(c=n.get(e.h.keySystemsMapping[h])),c=(h=l(c)).next();!c.done;c=h.next())if(!!c.value.licenseServerUri==a)return u.keySystemAccess}}return null}(t,n,i),!r){if(!navigator.requestMediaKeySystemAccess)throw new Ce(2,6,6020);throw new Ce(2,6,6001)}aa(t.l),S(c,2),r.getConfiguration();var d=a=t.h.keySystemsMapping[r.keySystem]||r.keySystem,p=i.get(a),f=[],g=[],m=[],v=[],y=[],b=new Set,w=new Set;!function(t,n,i,r,a,o,s,u){for(var c=[],d=(t=l(t)).next(),p={};!d.done;p={Qa:void 0},d=t.next()){if(p.Qa=d.value,n.includes(p.Qa.encryptionScheme)||n.push(p.Qa.encryptionScheme),"org.w3.clearkey"==p.Qa.keySystem&&p.Qa.licenseServerUri.startsWith("data:application/json;base64,")?c.includes(p.Qa.licenseServerUri)||c.push(p.Qa.licenseServerUri):i.includes(p.Qa.licenseServerUri)||i.push(p.Qa.licenseServerUri),a.includes(p.Qa.serverCertificateUri)||a.push(p.Qa.serverCertificateUri),p.Qa.serverCertificate&&(r.some(function(e){return function(t){return we(t,e.Qa.serverCertificate)}}(p))||r.push(p.Qa.serverCertificate)),p.Qa.initData)for(var f=(d=l(p.Qa.initData)).next(),g={};!f.done;g={yh:void 0},f=d.next())g.yh=f.value,o.some(function(e){return function(t){var n=e.yh;return!(!t.keyId||t.keyId!=n.keyId)||t.initDataType==n.initDataType&&we(t.initData,n.initData)}}(g))||o.push(g.yh);if(p.Qa.keyIds)for(f=(d=l(p.Qa.keyIds)).next();!f.done;f=d.next())s.add(f.value);if(p.Qa.keySystemUris&&u)for(d=(p=l(p.Qa.keySystemUris)).next();!d.done;d=p.next())u.add(d.value)}if(1==c.length)i.push(c[0]);else if(0<c.length){for(n=[],r=(c=l(c)).next();!r.done;r=c.next())r=e.atob(r.value.split("data:application/json;base64,").pop()),r=JSON.parse(r),n.push.apply(n,h(r.keys));c=JSON.stringify({keys:n}),i.push("data:application/json;base64,"+e.btoa(c))}}(p,f,g,v,m,y,b,w);var T=t.O?"persistent-license":"temporary";for(d={keySystem:d,encryptionScheme:f[0],licenseServerUri:g[0],distinctiveIdentifierRequired:p[0].distinctiveIdentifierRequired,persistentStateRequired:p[0].persistentStateRequired,sessionType:p[0].sessionType||T,audioRobustness:p[0].audioRobustness||"",videoRobustness:p[0].videoRobustness||"",serverCertificate:v[0],serverCertificateUri:m[0],initData:y,keyIds:b},0<w.size&&(d.keySystemUris=w),w=(p=l(p)).next();!w.done;w=p.next())(w=w.value).distinctiveIdentifierRequired&&(d.distinctiveIdentifierRequired=w.distinctiveIdentifierRequired),w.persistentStateRequired&&(d.persistentStateRequired=w.persistentStateRequired);if(t.g=d,!t.g.licenseServerUri)throw new Ce(2,6,6012,t.g.keySystem);return _(c,r.createMediaKeys(),4);case 4:if(o=c.h,aa(t.l),t.B=o,""==t.h.minHdcpVersion||!("getStatusForPolicy"in t.B)){c.A(5);break}return S(c,6),_(c,t.B.getStatusForPolicy({minHdcpVersion:t.h.minHdcpVersion}),8);case 8:if("usable"!=c.h)throw new Ce(2,6,6018);aa(t.l),A(c,5,2);break;case 6:if((s=E(c,2))instanceof Ce)throw s;throw new Ce(2,6,6019,s.message);case 5:return t.P=!0,t.F.ya(t.h.updateExpirationTime),_(c,function(e){var t,n;return L(function(i){switch(i.g){case 1:if(!e.B||!e.g)return i.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){i.A(2);break}return t=Zr([e.g.serverCertificateUri],e.h.retryParameters),S(i,3),_(i,e.D.yc.request(5,t,{isPreload:e.R()}).promise,5);case 5:n=i.h,e.g.serverCertificate=Te(n.data),A(i,4);break;case 3:throw new Ce(2,6,6017,E(i));case 4:if(e.l.g)return i.return();case 2:return e.g.serverCertificate&&e.g.serverCertificate.length?(S(i,6),_(i,e.B.setServerCertificate(e.g.serverCertificate),8)):i.return();case 8:A(i,0);break;case 6:throw new Ce(2,6,6004,E(i).message)}})}(t),9);case 9:aa(t.l),A(c,0);break;case 2:if(u=E(c),aa(t.l,u),t.g=null,u instanceof Ce)throw u;throw new Ce(2,6,6002,u.message)}})}function La(e){ja(e)&&e.m.resolve()}function Da(e,t){new zi(function(){t.loaded=!0,La(e)}).X(Wa)}function Ra(e,t,n){var i,r,a,o,s,u,l;return L(function(h){switch(h.g){case 1:try{i=e.B.createSession("persistent-license")}catch(t){return r=new Ce(2,6,6005,t.message),e.u(r),h.return(Promise.reject(r))}return e.s.o(i,"message",function(t){e.j&&e.h.delayLicenseRequestUntilPlayed&&e.j.paused&&!e.Y?e.L.push(t):Na(e,t)}),e.s.o(i,"keystatuseschange",function(t){return Oa(e,t)}),a={initData:n.initData,initDataType:n.initDataType,loaded:!1,Jh:1/0,Pb:null,type:"persistent-license"},e.i.set(i,a),S(h,2),_(h,i.load(t),4);case 4:return o=h.h,aa(e.l),o||(e.i.delete(i),s=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Ce(s,6,6013)),a.loaded=!0),Da(e,a),La(e),h.return(i);case 2:u=E(h),aa(e.l,u),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.u(new Ce(l,6,6005,u.message)),a.loaded=!0,La(e);case 3:return h.return(Promise.resolve())}})}function Na(e,t){var n,i,r,a,o,s,u,h,c,d,p,f,g,m,v;L(function(y){switch(y.g){case 1:if(n=t.target,e.h.logLicenseExchange&&ze(t.message),i=e.i.get(n),r=e.g.licenseServerUri,a=e.h.advanced[e.g.keySystem],"individualization-request"==t.messageType&&a&&a.individualizationServer&&(r=a.individualizationServer),(o=Zr([r],e.h.retryParameters)).body=t.message,o.method="POST",o.licenseRequestType=t.messageType,o.sessionId=n.sessionId,o.drmInfo=e.g,i&&(o.initData=i.initData,o.initDataType=i.initDataType),a&&a.headers)for(s in a.headers)o.headers[s]=a.headers[s];if("org.w3.clearkey"===e.g.keySystem){var b=o,T=e.g;try{var x=Ue(b.body);if(x){var C=JSON.parse(x);C.type||(C.type=T.sessionType,b.body=Be(JSON.stringify(C)))}}catch(e){}}if(Mr(e.g.keySystem))if((b=Oe(o.body,!0,!0)).includes("PlayReadyKeyMessage")){for(x=(T=l(T=wn(b=fn(b,"PlayReadyKeyMessage"),"HttpHeader"))).next();!x.done;x=T.next())x=wn(C=x.value,"name")[0],C=wn(C,"value")[0],o.headers[bn(x)]=bn(C);b=wn(b,"Challenge")[0],o.body=Ke(bn(b))}else o.headers["Content-Type"]="text/xml; charset=utf-8";return u=Date.now(),S(y,2),c=e.D.yc.request(2,o,{isPreload:e.R()}),e.U.push(c),_(y,c.promise,4);case 4:h=y.h,Qt(e.U,c),A(y,3);break;case 2:return d=E(y),e.l.g||(p=new Ce(2,6,6007,d),1==e.i.size?(e.u(p),i&&i.Pb&&i.Pb.reject(p)):(i&&i.Pb&&i.Pb.reject(p),e.i.delete(n),ja(e)&&(e.m.resolve(),e.K.X(.1)))),y.return();case 3:return e.l.g?y.return():(e.I+=(Date.now()-u)/1e3,e.h.logLicenseExchange&&ze(h.data),S(y,5),_(y,n.update(h.data),7));case 7:A(y,6);break;case 5:return g=(f=E(y))&&f.message||String(f),m=new Ce(2,6,6008,g),e.u(m),i&&i.Pb&&i.Pb.reject(m),y.return();case 6:if(e.l.g)return y.return();v=new V("drmsessionupdate"),e.D.onEvent(v),i&&(i.Pb&&i.Pb.resolve(),Da(e,i)),w(y)}})}function Oa(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(t,r){if("string"==typeof r){var a=r;r=t,t=a}if(a=Me(),Mr(e.g.keySystem)&&16==r.byteLength&&a.Uh()){var o=(a=Ee(r)).getUint32(0,!0),s=a.getUint16(4,!0),u=a.getUint16(6,!0);a.setUint32(0,o,!1),a.setUint16(4,s,!1),a.setUint16(6,u,!1)}"status-pending"!=t&&(n.loaded=!0),"expired"==t&&(i=!0),r=Ye(r).slice(0,32),e.Z.set(r,t)});var r=t.expiration-Date.now();(0>r||i&&1e3>r)&&n&&!n.Pb&&(e.i.delete(t),Ua(t)),ja(e)&&(e.m.resolve(),e.K.X(za))}function Ua(e){return L(function(t){return 1==t.g?(S(t,2),_(t,qi(Va,Promise.all([e.close().catch(function(){}),e.closed])),4)):2!=t.g?A(t,0):(E(t),void w(t))})}function Ba(e){var t;return L(function(n){return t=Array.from(e.i.entries()),e.i.clear(),_(n,Promise.all(t.map(function(t){var n=(t=l(t)).next().value,i=t.next().value;return L(function(t){return 1==t.g?(S(t,2),e.ba||e.C.has(n.sessionId)||"persistent-license"!==i.type||e.h.persistentSessionOnlinePlayback?_(t,Ua(n),5):_(t,n.remove(),5)):2!=t.g?A(t,0):(E(t),void w(t))})})),0)})}function Fa(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function ja(e){return function(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}(e=e.i.values(),function(e){return e.loaded})}function Ga(t,n,i,r){var a=t.keySystem;!a||"org.w3.clearkey"==a&&t.licenseServerUri||(n.size&&n.get(a)&&(n=n.get(a),t.licenseServerUri=n),t.keyIds||(t.keyIds=new Set),(i=i.get(a))&&(t.distinctiveIdentifierRequired||(t.distinctiveIdentifierRequired=i.distinctiveIdentifierRequired),t.persistentStateRequired||(t.persistentStateRequired=i.persistentStateRequired),t.serverCertificate||(t.serverCertificate=i.serverCertificate),i.sessionType&&(t.sessionType=i.sessionType),t.serverCertificateUri||(t.serverCertificateUri=i.serverCertificateUri)),r[a]&&(t.keySystem=r[a]),e.cast&&e.cast.__platform__&&"com.microsoft.playready"==a&&(t.keySystem="com.chromecast.playready"))}function Ha(e,t){if(0!=(e=oa(e)).size){e=Qe(e);for(var n=(t=l(t)).next();!n.done;n=t.next())(n=n.value).video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}(i=Aa.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e,t){this.h=e,t&&(this.R=t),this.F&&this.P&&this.g&&this.F.ya(this.h.updateExpirationTime)},i.ac=function(e){var t,n=this;return L(function(i){if(1==i.g)return n.j===e?i.return():n.B?(n.j=e,n.s.ra(n.j,"play",function(){for(var e=l(n.L),t=e.next();!t.done;t=e.next())Na(n,t.value);n.Y=!0,n.L=[]}),n.j.remote?(n.s.o(n.j.remote,"connect",function(){return Ba(n)}),n.s.o(n.j.remote,"connecting",function(){return Ba(n)}),n.s.o(n.j.remote,"disconnect",function(){return Ba(n)})):"webkitCurrentPlaybackTargetIsWireless"in n.j&&n.s.o(n.j,"webkitcurrentplaybacktargetiswirelesschanged",function(){return Ba(n)}),n.G=n.g&&n.g.initData.find(function(e){return 0<e.initData.length})||null,t=n.g.keySystem,Me().Gh(t)||!(n.G||n.C.size||n.h.parseInbandPsshEnabled)?(n.s.o(n.j,"encrypted",function(e){return function(e,t){return L(function(n){if(1==n.g)return _(n,Ca(e),2);Ia(e,t.initDataType,Te(t.initData)),w(n)})}(n,e)}),i.A(2)):_(i,Ca(n),2)):(n.s.ra(e,"encrypted",function(){n.u(new Ce(2,6,6010))}),i.return());ka(n).catch(function(){}),w(i)})},i.jh=function(){var e=this,t=this.i.keys();return t=ee(t,function(t){var n=e.i.get(t);return{sessionId:t.sessionId,sessionType:n.type,initData:n.initData,initDataType:n.initDataType}}),Array.from(t)},i.fe=function(){for(var e=1/0,t=this.i.keys(),n=(t=l(t)).next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e},i.qf=function(){return sa(this.$)};var Va=1,Wa=5,za=.5;function Ka(e,t,n){for(n=void 0===n||n,this.h=e,this.g=new Set([e]),t=(e=l(t=t||[])).next();!t.done;t=e.next())this.add(t.value,n)}function Xa(e,t){if(e.mimeType!=t.mimeType)return!1;if(e=e.codecs.split(",").map(function(e){return Pi(e)}),t=t.codecs.split(",").map(function(e){return Pi(e)}),e.length!=t.length)return!1;e.sort(),t.sort();for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Ya(e,t){if(e=new Set(e),t=new Set(t),e.delete("main"),t.delete("main"),e.size!=t.size)return!1;for(var n=(e=l(e)).next();!n.done;n=e.next())if(!t.has(n.value))return!1;return!0}function qa(){}function Za(){this.g=Qa,this.i=(new Map).set(Qa,2).set(Ja,1),this.h=0}Ka.prototype.add=function(e,t){var n,i=this.h;if(t=void 0===t||t,!(n=!!i.audio!=!!e.audio||!!i.video!=!!e.video||i.language!=e.language)&&(n=i.audio&&e.audio)){n=i.audio;var r=e.audio;n=!(!((!n.channelsCount||!r.channelsCount||2<n.channelsCount||2<r.channelsCount)&&n.channelsCount!=r.channelsCount||n.spatialAudio!==r.spatialAudio||t&&!Xa(n,r))&&Ya(n.roles,r.roles)&&n.groupId===r.groupId)}return!n&&(n=i.video&&e.video)&&(i=i.video,n=e.video,n=!((!t||Xa(i,n))&&Ya(i.roles,n.roles))),!n&&(this.g.add(e),!0)},Ka.prototype.values=function(){return this.g.values()},H("shaka.media.AdaptationSet",Ka),H("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"}),qa.prototype.create=function(){},qa.prototype.configure=function(){},qa.prototype.getConfiguration=function(){},H("shaka.media.AdaptationSetCriteria",qa);var Ja=0,Qa=1;function $a(e,t,n){this.g=e,this.i=t,this.h=n}function eo(e,t){return L(function(n){if(1==n.g)return _(n,function(e,t,n,i){return n=void 0===n?[]:n,i=void 0===i?{}:i,L(function(r){return 1==r.g?_(r,$i(e,t,0<t.offlineSessionIds.length,n,i),2):(function(e){e.textStreams=e.textStreams.filter(function(e){return ji(e=xi(e.mimeType,e.codecs))})}(t),_(r,function(e){var t,n,i,r,a,o,s;return L(function(u){switch(u.g){case 1:t=[],n=l(e.imageStreams),i=n.next();case 2:if(i.done){u.A(4);break}if(r=i.value,"application/mp4"==(a=r.mimeType)&&"mjpg"==r.codecs&&(a="image/jpg"),Sr.has(a)){u.A(5);break}if(!(o=Tr.get(a))){Sr.set(a,!1),u.A(5);break}return _(u,function(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(2===n.height)}})}(o),7);case 7:s=u.h,Sr.set(a,s);case 5:Sr.get(a)&&t.push(r),i=n.next(),u.A(2);break;case 4:e.imageStreams=t,w(u)}})}(t),0))})}(e.h,t,e.g.drm.preferredKeySystems,e.g.drm.keySystemsMapping),2);if(e.g.streaming.dontChooseCodecs||Ji(t,e.g.preferredVideoCodecs,e.g.preferredAudioCodecs,e.g.preferredDecodingAttributes,e.g.preferredTextFormats),!t.variants.some(dr))throw new Ce(2,4,4032);return n.return(no(e,t))})}function to(e,t){var n=e.g.restrictions;e=e.i;for(var i=!1,r=(t=l(t.variants)).next();!r.done;r=t.next()){var a=(r=r.value).allowedByApplication;r.allowedByApplication=Qi(r,n,e),a!=r.allowedByApplication&&(i=!0)}return i}function no(e,t){var n=to(e,t);if(t){var i=e.h?e.h.g:null;if(i&&e.h.B){for(var r=new Set,a=l(t.variants),o=a.next();!o.done;o=a.next())(o=o.value).audio&&r.add(o.audio),o.video&&r.add(o.video);for(a=(r=l(r)).next();!a.done;a=r.next())io(e,i.keySystem,a.value)}ro(e,t)}return n}function io(e,t,n){for(var i=(n=l(n.drmInfos)).next();!i.done;i=n.next())if((i=i.value).keySystem==t)for(var r=(i=l(i.initData||[])).next();!r.done;r=i.next())r=r.value,Ia(e.h,r.initDataType,r.initData)}function ro(e,t){e=e.h?e.h.qf():{};var n=Object.keys(e);n=n.length&&"00"==n[0];for(var i=!1,r=!1,a=new Set,o=new Set,s=new Set,u=(t=l(t.variants)).next();!u.done;u=t.next())(u=u.value).audio&&s.add(u.audio),u.video&&s.add(u.video),u.allowedByApplication?u.allowedByKeySystem&&(i=!0):r=!0;for(t=(s=l(s)).next();!t.done;t=s.next())if((t=t.value).keyIds.size)for(u=(t=l(t.keyIds)).next();!u.done;u=t.next()){u=u.value;var h=e[n?"00":u];h?ao.includes(h)&&o.add(h):a.add(u)}if(!i)throw new Ce(2,4,4012,e={hasAppRestrictions:r,missingKeys:Array.from(a),restrictedKeyStatuses:Array.from(o)})}var ao=["output-restricted","internal-error"];function oo(){}function so(e,t){lo.set(e,t)}function uo(e,t){if(t){var n=lo.get(t.toLowerCase());if(n)return n}throw new Ce(2,4,4e3,e,t)}H("shaka.media.ManifestParser",oo),oo.unregisterParserByMime=function(e){lo.delete(e)},oo.registerParserByMime=so,oo.registerParserByExtension=function(){kt("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},oo.AccessibilityPurpose={Gn:"visually impaired",Qm:"hard of hearing",pn:"spoken subtitles"};var lo=new Map;function ho(e,t){var n=null,i=null,r=null,a=null,o=e.W();return 1&t&&(r=e.Pd()),2&t&&(a=e.W()),8&t&&(n=e.W()),16&t&&(i=e.W()),{trackId:o,be:n,ce:i,hk:r,yj:a}}function co(e,t){return 1==t?(t=e.W(),e=e.W(),{baseMediaDecodeTime:t*Math.pow(2,32)+e}):{baseMediaDecodeTime:e.W()}}function po(e,t){return 1==t?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.W(),e.skip(4),e=e.Ga(),{timescale:t,language:String.fromCharCode(96+(e>>10))+String.fromCharCode(96+((960&e)>>5))+String.fromCharCode(96+(31&e))}}function fo(e,t,n){var i=e.W(),r=[],a=null;1&n&&(a=e.Oh()),4&n&&e.skip(4);for(var o=0;o<i;o++){var s={Wh:null,sampleSize:null,$f:null};256&n&&(s.Wh=e.W()),512&n&&(s.sampleSize=e.W()),1024&n&&e.skip(4),2048&n&&(s.$f=0==t?e.W():e.Oh()),r.push(s)}return{Ln:i,Vh:r,Sg:a}}function go(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ga();return e.skip(2),e.skip(2),e.skip(2),{channelCount:t,sampleRate:e=e.Ga()+e.Ga()/65536}}function mo(e){return{codec:ya(e=e.W())}}function vo(e,t){return t=void 0!==t&&t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function yo(e){return(10>e?"0":"")+e}function bo(e){this.g=e}function _o(e){for(var t=[],n=l(e.g),i=n.next();!i.done;i=n.next()){var r=t,a=r.push,o=i.value;i=Mo;var s=o.id+1,u=o.stream.width||0,c=o.stream.height||0;"audio"==o.type&&(c=u=0);var d=o.duration*o.timescale,p=Math.floor(d/(Po+1));switch(d=Math.floor(d%(Po+1)),s=Mo("tkhd",s=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(h(Co(s,4)),[0,0,0,0],h(Co(p,4)),h(Co(d,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],h(Co(u,2)),[0,0],h(Co(c,2)),[0,0]))),u=Mo,p=o.duration*o.timescale,c=Math.floor(p/(Po+1)),p=Math.floor(p%(Po+1)),d=(d=o.stream.language).charCodeAt(0)-96<<10|d.charCodeAt(1)-96<<5|d.charCodeAt(2)-96,c=Mo("mdhd",c=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(h(Co(o.timescale,4)),h(Co(c,4)),h(Co(p,4)),h(Co(d,2)),[0,0]))),p=o,d=new Uint8Array([]),p.type){case"video":d=Do.value();break;case"audio":d=Ro.value()}p=Mo("hdlr",d);e:{switch(o.type){case"video":o=Mo("minf",Mo("vmhd",Fo.value()),Vo.value(),wo(o));break e;case"audio":o=Mo("minf",Mo("smhd",jo.value()),Vo.value(),wo(o));break e}o=new Uint8Array([])}i=i("trak",s,o=u("mdia",c,p,o)),a.call(r,i)}for(t=qe.apply(Ve,h(t)),n=Mo,i=(a=e.g[0]).duration*a.timescale,r=Math.floor(i/(Po+1)),i=Math.floor(i%(Po+1)),r=Mo("mvhd",r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(h(Co(a.timescale,4)),h(Co(r,4)),h(Co(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))),i=[],u=(e=l(e.g)).next();!u.done;u=e.next())s=(o=i).push,u=Mo("trex",u=new Uint8Array([0,0,0,0].concat(h(Co(u.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),s.call(o,u);if(e=Mo("mvex",e=qe.apply(Ve,h(i))),i=[],a.encrypted){for(o=(a=l(a.stream.drmInfos)).next();!o.done;o=a.next())if((o=o.value).initData)for(s=(o=l(o.initData)).next();!s.done;s=o.next())i.push(s.value.initData);a=qe.apply(Ve,h(i))}else a=new Uint8Array([]);return e=n("moov",r,t,e,a),t=Ho.value(),(n=new Uint8Array(t.byteLength+e.byteLength)).set(t),n.set(e,t.byteLength),n}function wo(e){var t=Mo,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=Me().ye()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,0<e.Wa.byteLength)var r=Mo("avcC",e.Wa);else{r=Mo;for(var a=7,o=[],s=[],u=0,l=0,c=0,d=0;d<e.Eb.length;d++){var p=ko(e.Eb[d]);switch(31&p[0]){case 7:o.push(p),a+=p.length+2;break;case 8:s.push(p),a+=p.length+2}}for(0<o.length&&(u=o[0][1],c=o[0][2],l=o[0][3]),d=0,(a=new Uint8Array(a))[d++]=1,a[d++]=u,a[d++]=c,a[d++]=l,a[d++]=255,a[d++]=224|o.length,u=0;u<o.length;u++)a[d++]=(65280&o[u].length)>>8,a[d++]=255&o[u].length,a.set(o[u],d),d+=o[u].length;for(a[d++]=s.length,o=0;o<s.length;o++)a[d++]=(65280&s[o].length)>>8,a[d++]=255&s[o].length,a.set(s[o],d),d+=s[o].length;r=r("avcC",a)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(h(Co(n,2)),h(Co(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",s=So(e),o=new Uint8Array([]),e.encrypted&&(o=Ao(e.stream,e.codecs),i="encv"),i=Mo(i,n,r,s,o)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),0<e.Wa.byteLength&&(n=Mo("hvcC",e.Wa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(h(Co(i,2)),h(Co(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",s=So(e),o=new Uint8Array([]),e.encrypted&&(o=Ao(e.stream,e.codecs),r="encv"),i=Mo(r,i,n,s,o));break;case"audio":"mp3"==n?e=Mo(".mp3",To(e)):"ac-3"==n?(n=Mo("dac3",e.Ma),i="ac-3",r=new Uint8Array([]),e.encrypted&&(r=Ao(e.stream,e.codecs),i="enca"),e=Mo(i,To(e),n,r)):"ec-3"==n?(n=Mo("dec3",e.Ma),i="ec-3",r=new Uint8Array([]),e.encrypted&&(r=Ao(e.stream,e.codecs),i="enca"),e=Mo(i,To(e),n,r)):"opus"==n?(n=Mo("dOps",e.Ma),i="Opus",r=new Uint8Array([]),e.encrypted&&(r=Ao(e.stream,e.codecs),i="enca"),e=Mo(i,To(e),n,r)):(0<e.Ma.byteLength?n=Mo("esds",e.Ma):(n=Mo,i=e.id+1,r=e.stream.channelsCount||2,o=e.stream.audioSamplingRate||44100,u=$e("audio",e.codecs.split(",")),s=(l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12})[o],"mp4a.40.5"!==u&&"mp4a.40.29"!==u||(s=l[2*o]),o=parseInt(u.split(".").pop(),10),n=n("esds",i=new Uint8Array([0,0,0,0,3,25].concat(h(Co(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,o<<3|s>>>1,s<<7|r<<3,6,1,2])))),i="mp4a",r=new Uint8Array([]),e.encrypted&&(r=Ao(e.stream,e.codecs),i="enca"),e=Mo(i,To(e),n,r)),i=e}return t("stbl",e=Mo("stsd",Go.value(),i),Mo("stts",No.value()),Mo("stsc",Oo.value()),Mo("stsz",Bo.value()),Mo("stco",Uo.value()))}function So(e){if(!e.cb&&!e.fb)return new Uint8Array([]);var t=e.fb;return Mo("pasp",e=new Uint8Array([].concat(h(Co(e.cb,4)),h(Co(t,4)))))}function To(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(h(Co(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Ao(e,t){var n=Mo;t=Mo("frma",t=new Uint8Array([].concat(h(Co(Io(t.split(".")[0]),4)))));var i="cenc",r=e.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=Mo("schm",i=new Uint8Array([0,0,0,0].concat(h(Co(Io(i),4)),[0,1,0,0]))),r=Mo;for(var a=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),o=(e=l(e.drmInfos)).next();!o.done;o=e.next())if((o=o.value)&&o.keyIds&&o.keyIds.size)for(var s=(o=l(o.keyIds)).next();!s.done;s=o.next())a=ko(s.value);return n("sinf",t,i,r("schi",a=Mo("tenc",e=new Uint8Array([0,0,0,0,0,0,1,8]),a)))}function Eo(e){for(var t=[],n=(e=l(e.g)).next();!n.done;n=e.next()){n=n.value;var i,r=t.push,a=r.apply,o=Mo,s=new Uint8Array([0,0,0,0].concat(h(Co(n.data?n.data.Zb:0,4))));s=Mo("mfhd",s);var u=n.data?n.data.Cb:[],c=new Uint8Array(4+u.length);for(i=0;i<u.length;i++){var d=u[i].flags;c[i+4]=d.pb<<4|d.sb<<2|d.rb}var p=(u=Mo("sdtp",c)).length+92;c=Mo,i=Mo("tfhd",i=new Uint8Array([0,0,0,58].concat(h(Co(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]))),d=n.data?n.data.baseMediaDecodeTime:0;var f=Math.floor(d%(Po+1));d=Mo("tfdt",d=new Uint8Array([1,0,0,0].concat(h(Co(Math.floor(d/(Po+1)),4)),h(Co(f,4)))));var g=p,m=12+16*(f=(p=n.data?n.data.Cb:[]).length),v=new Uint8Array(m);for(g+=8+m,v.set(["video"===n.type?1:0,0,15,1].concat(h(Co(f,4)),h(Co(g,4))),0),g=0;g<f;g++){var y=p[g];m=Co(y.duration,4);var b=Co(y.size,4),_=y.flags;y=Co(y.yb,4),v.set([].concat(h(m),h(b),[_.Ab<<2|_.pb,_.sb<<6|_.rb<<4|_.Bb,61440&_.ob,15&_.ob],h(y)),12+16*g)}o=o("moof",s,u=c("traf",i,d,p=Mo("trun",v),u)),a.call(r,t,[o,xo(n)])}return qe.apply(Ve,h(t))}function xo(e){return e=(e.data?e.data.Cb:[]).map(function(e){return e.data}),Mo("mdat",e=qe.apply(Ve,h(e)))}function Co(e,t){var n=[];for(--t;0<=t;t--)n.push(e>>8*t&255);return n}function ko(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[2*n]+e[2*n+1]),16);return t}function Io(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<8*(e.length-n-1);return t}function Mo(e){var t=D.apply(1,arguments),n=Lo.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Lo.set(e,n));for(var i=8,r=t.length-1;0<=r;r--)i+=t[r].byteLength;for((r=new Uint8Array(i))[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=255&i,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}var Po=Math.pow(2,32)-1,Lo=new Map,Do=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),Ro=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),No=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Oo=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Uo=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Bo=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),Fo=new Ie(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),jo=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),Go=new Ie(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),Ho=new Ie(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]);return Mo("ftyp",e,new Uint8Array([0,0,0,1]),e,t)}),Vo=new Ie(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=Mo("dref",e),Mo("dinf",e)});function Wo(e){function t(e){o.push(e),da(e)}var n,i,r,a,o=[];if((new ca).box("moof",t).box("traf",t).V("tfhd",function(e){n=e,r=ho(e.reader,e.flags)}).V("trun",function(e){i=e,a=fo(e.reader,e.version,e.flags)}).parse(e),r&&2!==r.yj){var s=n.start+ba(n)+4+(null!==r.hk?8:0),u=Ee(e);if(null!==r.yj)u.setUint32(s,2);else{Ko(e,n.start,n.size+4);var h=u.getUint32(n.start+8);u.setUint32(n.start+8,2|h),a&&null!==a.Sg&&u.setInt32(i.start+ba(i)+4,a.Sg+4),h=e.subarray(0,s),u=e.subarray(s),(e=new Uint8Array(e.byteLength+4)).set(h),h=[];for(var c=3;0<=c;c--)h.push(2>>8*c&255);for(e.set(new Uint8Array(h),s),e.set(u,s+4),u=(s=l(o)).next();!u.done;u=s.next())Ko(e,(u=u.value).start,u.size+4)}}return e}function zo(e,t,n,i,r,a){var o=Ao(e,i.name),s=t.subarray(i.start,i.start+i.size);for((e=new Uint8Array(i.size+o.byteLength)).set(s,0),Ee(e).setUint32(4,a),e.set(o,i.size),Ko(e,0,e.byteLength),a=new Uint8Array(t.byteLength+e.byteLength),i=Me().yf()?i.start:i.start+i.size,o=t.subarray(i),a.set(t.subarray(0,i)),a.set(e,i),a.set(o,i+e.byteLength),r=(t=l(r)).next();!r.done;r=t.next())Ko(a,(r=r.value).start,r.size+e.byteLength);return e=Ee(a,n.start),n=ba(n),t=e.getUint32(n),e.setUint32(n,t+1),a}function Ko(e,t,n){0!=(t=(e=Ee(e,t)).getUint32(0))&&(1==t?(e.setUint32(8,n>>32),e.setUint32(12,4294967295&n)):e.setUint32(0,n))}function Xo(e,t,n,i,r,a,o,s){this.S=e,this.startByte=t,this.endByte=n,this.Id=void 0===i?null:i,this.timescale=void 0===r?null:r,this.h=void 0===a?null:a,this.aesKey=void 0===o?null:o,this.g=this.mimeType=this.codecs=null,this.encrypted=void 0!==s&&s}function Yo(e,t){return e===t||(e&&t?e.Kc()==t.Kc()&&e.Ic()==t.Ic()&&en(e.S().sort(),t.S().sort())&&we(e.ec(),t.ec()):e==t)}function qo(e,t,n,i,r,a,o,s,u,h,c,d,p,f,g,m){for(h=void 0===h?[]:h,f=void 0===f?Jo:f,this.startTime=e,this.j=this.endTime=t,this.D=n,this.startByte=i,this.endByte=r,this.ea=a,this.timestampOffset=o,this.appendWindowStart=s,this.appendWindowEnd=u,this.g=h,this.tilesLayout=void 0===c?"":c,this.C=void 0===d?null:d,this.h=void 0===p?null:p,this.status=f,this.preload=!1,this.l=!0,this.m=!1,this.aesKey=void 0===g?null:g,this.thumbnailSprite=null,this.i=-1,this.B=void 0!==m&&m,this.F=this.s=!1,t=(e=l(this.g)).next();!t.done;t=e.next())t.value.gj();this.B&&this.g.length&&this.g[this.g.length-1].fj(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.G=!1}function Zo(e,t){e.ea=t;for(var n=(e=l(e.g)).next();!n.done;n=e.next())Zo(n.value,t)}Xo.prototype.Kc=function(){return this.startByte},Xo.prototype.Ic=function(){return this.endByte},Xo.prototype.Be=function(e){this.h=e},Xo.prototype.ec=function(){return this.h},H("shaka.media.InitSegmentReference",Xo),Xo.prototype.getEndByte=Xo.prototype.Ic,Xo.prototype.getStartByte=Xo.prototype.Kc,(i=qo.prototype).S=function(){return this.D()},i.getStartTime=function(){return this.startTime},i.Hk=function(){return this.endTime},i.Kc=function(){return this.startByte},i.Ic=function(){return this.endByte},i.il=function(){return this.tilesLayout},i.hl=function(){return this.C},i.Lc=function(){return this.status},i.Jl=function(){this.status=Qo},i.Fh=function(){this.preload=!0},i.isPreload=function(){return this.preload},i.Hd=function(){this.l=!1},i.zl=function(){return this.l},i.gj=function(){this.s=!0},i.Bl=function(){return this.s},i.fj=function(){this.F=!0},i.Al=function(){return this.F},i.ej=function(){this.m=!0},i.vl=function(){return this.m},i.hg=function(e){this.thumbnailSprite=e},i.fl=function(){return this.thumbnailSprite},i.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=l(this.g),n=t.next();!n.done;n=t.next())(n=n.value).startTime+=e,n.endTime+=e,n.j+=e},i.li=function(e){null==this.h?X("Sync attempted without sync time!"):(e=this.h-e-this.startTime,.001<=Math.abs(e)&&this.offset(e))},i.Be=function(e,t){this.u=e,this.G=void 0!==t&&t},i.ec=function(e){var t=this.u;return(void 0===e||e)&&this.G&&(this.u=null),t},H("shaka.media.SegmentReference",qo),qo.prototype.getSegmentData=qo.prototype.ec,qo.prototype.setSegmentData=qo.prototype.Be,qo.prototype.syncAgainst=qo.prototype.li,qo.prototype.offset=qo.prototype.offset,qo.prototype.getThumbnailSprite=qo.prototype.fl,qo.prototype.setThumbnailSprite=qo.prototype.hg,qo.prototype.hasByterangeOptimization=qo.prototype.vl,qo.prototype.markAsByterangeOptimization=qo.prototype.ej,qo.prototype.isLastPartial=qo.prototype.Al,qo.prototype.markAsLastPartial=qo.prototype.fj,qo.prototype.isPartial=qo.prototype.Bl,qo.prototype.markAsPartial=qo.prototype.gj,qo.prototype.isIndependent=qo.prototype.zl,qo.prototype.markAsNonIndependent=qo.prototype.Hd,qo.prototype.isPreload=qo.prototype.isPreload,qo.prototype.markAsPreload=qo.prototype.Fh,qo.prototype.markAsUnavailable=qo.prototype.Jl,qo.prototype.getStatus=qo.prototype.Lc,qo.prototype.getTileDuration=qo.prototype.hl,qo.prototype.getTilesLayout=qo.prototype.il,qo.prototype.getEndByte=qo.prototype.Ic,qo.prototype.getStartByte=qo.prototype.Kc,qo.prototype.getEndTime=qo.prototype.Hk,qo.prototype.getStartTime=qo.prototype.getStartTime,qo.prototype.getUris=qo.prototype.S;var Jo=0,Qo=1;function $o(e){return 1==e.length&&1e-4>e.end(0)-e.start(0)}function es(e){return!e||$o(e)?null:1==e.length&&0>e.start(0)?0:e.length?e.start(0):null}function ts(e){return!e||$o(e)?null:e.length?e.end(e.length-1):null}function ns(e,t){return!(!e||!e.length||$o(e)||t>e.end(e.length-1))&&t>=e.start(0)}function is(e,t){if(!e||!e.length||$o(e))return 0;for(var n=0,i=(e=l(rs(e))).next();!i.done;i=e.next()){var r=i.value;i=r.start,(r=r.end)>t&&(n+=r-Math.max(i,t))}return n}function rs(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function as(){}function os(e){return document.createElement(e)}function ss(){var e=document.createElement("button");return e.setAttribute("type","button"),e}function us(e,t){var n=document.createElement("source");return n.src=e,n.type=void 0===t?"":t,n}function ls(e){for(var t=!1,n=e.getElementsByTagName("source"),i=n.length-1;0<=i;--i)e.removeChild(n[i]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function hs(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function cs(){return ps||(ds||(ds=new zi(function(){ps=null})),(ps=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ps=document.createElement("video")),ds.X(1),ps)}qo.Status={xm:Jo,En:Qo,$m:2},H("shaka.util.Dom",as),as.removeAllChildren=hs,as.clearSourceFromVideo=ls;var ds=null,ps=null;function fs(){}function gs(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function ms(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&255>e[t+3]&&255>e[t+4]&&128>e[t+6]&&128>e[t+7]&&128>e[t+8]&&128>e[t+9]}function vs(e,t){var n=(127&e[t])<<21;return n|=(127&e[t+1])<<14,(n|=(127&e[t+2])<<7)|127&e[t+3]}function ys(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if("APIC"===e.type){if(2>e.size||3!==e.data[0])return null;var n=e.data.subarray(1).indexOf(0);if(-1===n)return null;var i=Ne(Te(e.data,1,n)),r=e.data[2+n],a=e.data.subarray(3+n).indexOf(0);if(-1===a)return null;var o,s=Ne(Te(e.data,3+n,a));return o="--\x3e"===i?Ne(Te(e.data,4+n+a)):Se(e.data.subarray(4+n+a)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=o,t}return"TXXX"===e.type||"WXXX"===e.type?2>e.size||3!==e.data[0]||-1===(i=e.data.subarray(1).indexOf(0))?null:(n=Ne(Te(e.data,1,i)),e=Ne(Te(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):"PRIV"===e.type?2>e.size||-1===(n=e.data.indexOf(0))?null:(n=Ne(Te(e.data,0,n)),t.description=n,"com.apple.streaming.transportStreamTimestamp"==n?(n=e.data.subarray(n.length+1),e=1&n[3],n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=47721858.84),t.data=n):(e=Se(e.data.subarray(n.length+1)),t.data=e),t):"T"===e.type[0]?2>e.size||3!==e.data[0]?null:(e=Ne(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):"W"===e.type[0]?(e=Ne(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=Se(e.data),t):null}function bs(e){for(var t=0,n=[];gs(e,t);){var i=vs(e,t+6);for(e[t+5]>>6&1&&(t+=10),i=(t+=10)+i;t+10<i;){var r=e.subarray(t),a=vs(r,4);(a=ys(r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:a,data:r.subarray(10,10+a)}))&&n.push(a),t+=r.size+10}ms(e,t)&&(t+=10)}return n}function _s(e,t){for(var n=t=void 0===t?0:t,i=0;gs(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=vs(e,t+6),ms(e,t+10)&&(i+=10),t+=i;return 0<i?e.subarray(n,n+i):new Uint8Array([])}function ws(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function Ss(e,t){if(this.j=e,void 0!==t&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)2<=i&&3==e[i]&&0==e[i-1]&&0==e[i-2]||(t[n]=e[i],n++);this.j=Te(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Ts(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);0!==i&&(n.set(e.j.subarray(t,t+i)),e.h=new ua(n,0).W(),e.g=8*i,e.i-=i)}function As(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=8*n,e.g-=n,Ts(e)}e.h<<=t,e.g-=t}function Es(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,0<e.g?e.h<<=n:0<e.i&&Ts(e),0<(n=t-n)?i<<n|Es(e,n):i}function xs(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Ts(e),t+xs(e)}function Cs(e){As(e,1+xs(e))}function ks(e){return Es(e,xs(e)+1)-1}function Is(e){return 1&(e=ks(e))?1+e>>>1:-1*(e>>>1)}function Ms(e){return 1===Es(e,1)}function Ps(e){return Es(e,8)}function Ls(e,t){for(var n=8,i=8,r=0;r<t;r++)0!==i&&(i=(n+(i=Is(e))+256)%256),n=0===i?n:i}function Ds(e){return Ps(e),ks(e),ks(e)}function Rs(){this.H=null,this.I=!1,this.m=this.J=null,this.j=[],this.g=[],this.C=this.D=null,this.i=[],this.h=[],this.F=null,this.l=[],this.B=this.G=this.s=this.u=null}function Ns(e,t){if(1!=(t[0]<<16|t[1]<<8|t[2]))return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(192&i){var r=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2;null==e.u&&(e.u=r),n.pts=Us(r,e.u),e.u=n.pts,n.dts=n.pts,64&i&&(i=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,null==e.s&&(e.s=i),n.dts=n.pts!=r?Us(i,e.s):i),e.s=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}function Os(e){var t=e.fd();return 1<t.length&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(1/(t-e)*9e4):null}function Us(e,t){var n=1;for(e>t&&(n=-1);4294967296<Math.abs(t-e);)e+=8589934592*n;return e}function Bs(e){return!(0>Fs(e))}function Fs(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(71==e[n]&&71==e[n+188]&&71==e[n+376])return n;n++}return-1}H("shaka.util.Id3Utils",fs),fs.getID3Data=_s,fs.getID3Frames=bs,H("shaka.util.ExpGolomb",Ss),(i=Rs.prototype).clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},i.eg=function(e){null!=this.B&&this.B!=e&&(this.s=this.u=null),this.B=e},i.parse=function(e){if(564>e.length)return this;for(var t=Math.max(0,Fs(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(71==e[r]){var a=!!(64&e[r+1]),o=((31&e[r+1])<<8)+e[r+2];if(1<(48&e[r+3])>>4){var s=r+5+e[r+4];if(s==r+188)continue}else s=r+4;switch(o){case 0:a&&(s+=e[s]+1),this.H=(31&e[s+10])<<8|e[s+11];break;case 17:case 8191:break;case this.H:a&&(s+=e[s]+1),o={audio:-1,video:-1,wf:-1,audioCodec:"",videoCodec:""};var u=s+3+((15&(a=e)[s+1])<<8|a[s+2])-4;for(s+=12+((15&a[s+10])<<8|a[s+11]);s<u;){var l=(31&a[s+1])<<8|a[s+2],h=(15&a[s+3])<<8|a[s+4];switch(a[s]){case 6:if(0<h)for(var c=s+5,d=h;2<d;){var p=a[c+1]+2;switch(a[c]){case 5:var f=je(a.subarray(c+2,c+p));-1==o.audio&&"Opus"===f?(o.audio=l,o.audioCodec="opus"):-1==o.video&&"AV01"===f&&(o.video=l,o.videoCodec="av1");break;case 106:-1==o.audio&&(o.audio=l,o.audioCodec="ac3");break;case 122:-1==o.audio&&(o.audio=l,o.audioCodec="ec3");break;case 124:-1==o.audio&&(o.audio=l,o.audioCodec="aac");break;case 127:"opus"==o.audioCodec&&(f=null,128===a[c+2]&&(f=a[c+3]),null!=f&&(this.G={channelCount:15&f?15&f:2,ik:f,sampleRate:48e3}))}c+=p,d-=p}break;case 15:-1==o.audio&&(o.audio=l,o.audioCodec="aac");break;case 17:-1==o.audio&&(o.audio=l,o.audioCodec="aac-loas");break;case 21:-1==o.wf&&(o.wf=l);break;case 27:-1==o.video&&(o.video=l,o.videoCodec="avc");break;case 3:case 4:-1==o.audio&&(o.audio=l,o.audioCodec="mp3");break;case 36:-1==o.video&&(o.video=l,o.videoCodec="hvc");break;case 129:-1==o.audio&&(o.audio=l,o.audioCodec="ac3");break;case 132:case 135:-1==o.audio&&(o.audio=l,o.audioCodec="ec3")}s+=h+5}-1!=(a=o).video&&(this.J=a.video,this.m=a.videoCodec),-1!=a.audio&&(this.D=a.audio,this.C=a.audioCodec),-1!=a.wf&&(this.F=a.wf),i&&!this.I&&(i=!1,r=t-188),this.I=!0;break;case this.J:s=e.subarray(s,r+188),a?this.j.push([s]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(s);break;case this.D:s=e.subarray(s,r+188),a?this.i.push([s]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(s);break;case this.F:s=e.subarray(s,r+188),a?this.l.push([s]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(s);break;default:i=!0}}return this},i.Ql=function(e){return kt("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.Lh(e,{se:null,state:null})},i.Lh=function(e,t){var n=e.pts?e.pts/9e4:null,i=(e=e.data).byteLength,r=1;"hvc"==this.m&&(r=2);var a=t.state||0,o=a,s=0,u=[],l=-1,h=0;for(-1==a&&(l=0,h="hvc"==this.m?e[0]>>1&63:31&e[0],a=0,s=1);s<i;){var c=e[s++];a?1===a?a=c?0:2:c?1==c?(c=s-a-1,0<=l?u.push({data:e.subarray(l+r,c),fullData:e.subarray(l,c),type:h,time:n,state:null}):(a=u.length?u[u.length-1]:t.se)&&(o&&s<=4-o&&a.state&&(a.data=a.data.subarray(0,a.data.byteLength-o),a.fullData=a.fullData.subarray(0,a.fullData.byteLength-o)),0<c&&(c=e.subarray(0,c),a.data=qe(a.data,c),a.fullData=qe(a.fullData,c),a.state=0)),s<i?(h="hvc"==this.m?e[s]>>1&63:31&e[s],l=s,a=0):a=-1):a=0:a=3:a=c?0:1}return 0<=l&&0<=a&&u.push({data:e.subarray(l+r,i),fullData:e.subarray(l,i),type:h,time:n,state:a}),!u.length&&t.se&&(n=u.length?u[u.length-1]:t.se)&&(n.data=qe(n.data,e),n.fullData=qe(n.fullData,e)),t.state=a,u},i.getMetadata=function(){for(var e=[],t=l(this.l),n=t.next();!n.done;n=t.next())(n=Ns(this,n=qe.apply(Ve,h(n.value))))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:bs(n.data),dts:n.dts,pts:n.pts});return e},i.zb=function(){if(this.i.length&&!this.h.length)for(var e=l(this.i),t=e.next();!t.done;t=e.next()){var n=qe.apply(Ve,h(t.value)),i=Ns(this,n);t=this.h.length?this.h[this.h.length-1]:null,i&&null!=i.pts&&null!=i.dts&&(!t||t.pts!=i.pts&&t.dts!=i.dts)?this.h.push(i):this.h.length&&(n=i?i.data:n)&&((t=this.h.pop()).data=qe(t.data,n),this.h.push(t))}return this.h},i.fd=function(e){if(e=void 0===e||e,this.j.length&&!this.g.length){for(var t=l(this.j),n=t.next();!n.done;n=t.next()){var i=qe.apply(Ve,h(n.value)),r=Ns(this,i);n=this.g.length?this.g[this.g.length-1]:null,r&&null!=r.pts&&null!=r.dts&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?this.g.push(r):this.g.length&&(i=r?r.data:i)&&((n=this.g.pop()).data=qe(n.data,i),this.g.push(n))}if(e){for(t={se:null,state:null},n=[],r=(i=l(this.g)).next();!r.done;r=i.next())(r=r.value).nalus=this.Lh(r,t),r.nalus.length&&(n.push(r),t.se=r.nalus[r.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},i.getStartTime=function(e){if("audio"==e){e=null;var t=this.zb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return"video"==e?(e=null,(t=this.fd(!1)).length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},i.ee=function(){return{audio:this.C,video:this.m}},i.vf=function(){for(var e=[],t=l(this.fd()),n=t.next();!n.done;n=t.next())e.push.apply(e,h(n.value.nalus));return e},i.ql=function(){kt("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.sh();return{height:e.height,width:e.width}},i.sh=function(){return"hvc"==this.m?function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.vf();if(!n.length)return t;if(!(n=n.find(function(e){return 33==e.type})))return t;var i=new Ss(n.fullData,!0);Ps(i),Ps(i),Es(i,4);var r=Es(i,3);Ms(i);var a=Es(i,2),o=Es(i,1),s=Es(i,5),u=Es(i,32);n=Ps(i);for(var l=Ps(i),h=Ps(i),c=Ps(i),d=Ps(i),p=Ps(i),f=Ps(i),g=[],m=[],v=0;v<r;v++)g.push(Ms(i)),m.push(Ms(i));if(0<r)for(v=r;8>v;v++)Es(i,2);for(v=0;v<r;v++)g[v]&&Es(i,88),m[v]&&Ps(i);ks(i),3==(r=ks(i))&&Es(i,1),g=ks(i),m=ks(i);var y=v=0,b=0,_=0;return Ms(i)&&(v+=ks(i),y+=ks(i),b+=ks(i),_+=ks(i)),t.width=String(g-(v+y)*(1===r||2===r?2:1)),t.height=String(m-(b+_)*(1===r?2:1)),i=function(e){for(var t=0,n=0;32>n;n++)t|=(e>>n&1)<<31-n;return t>>>0}(u),o=1==o?"H":"L",a="hvc1."+["","A","B","C"][a]+s,a+="."+i.toString(16).toUpperCase(),a+="."+o+f,p&&(a+="."+p.toString(16).toUpperCase()),d&&(a+="."+d.toString(16).toUpperCase()),c&&(a+="."+c.toString(16).toUpperCase()),h&&(a+="."+h.toString(16).toUpperCase()),l&&(a+="."+l.toString(16).toUpperCase()),n&&(a+="."+n.toString(16).toUpperCase()),t.codec=a,t.frameRate=Os(e),t}(this):function(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.vf();if(!n.length)return t;if(!(n=n.find(function(e){return 7==e.type})))return t;var i=Ps(n=new Ss(n.data)),r=Ps(n),a=Ps(n);if(Cs(n),js.includes(i)){var o=ks(n);if(3===o&&As(n,1),Cs(n),Cs(n),As(n,1),Ms(n)){o=3!==o?8:12;for(var s=0;s<o;s++)Ms(n)&&Ls(n,6>s?16:64)}}if(Cs(n),0===(o=ks(n)))ks(n);else if(1===o)for(As(n,1),Cs(n),Cs(n),o=ks(n),s=0;s<o;s++)Cs(n);Cs(n),As(n,1),o=ks(n),s=ks(n);var u=Es(n,1);0===u&&As(n,1),As(n,1);var l=0,h=0,c=0,d=0;return Ms(n)&&(l=ks(n),h=ks(n),c=ks(n),d=ks(n)),t.height=String((2-u)*(s+1)*16-2*c-2*d),t.width=String(16*(o+1)-2*l-2*h),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+a.toString(16).toUpperCase()).slice(-2),t.frameRate=Os(e),t}(this)},H("shaka.util.TsParser",Rs),Rs.syncOffset=Fs,Rs.probe=Bs,Rs.prototype.getVideoInfo=Rs.prototype.sh,Rs.prototype.getVideoResolution=Rs.prototype.ql,Rs.prototype.getVideoNalus=Rs.prototype.vf,Rs.prototype.getCodecs=Rs.prototype.ee,Rs.prototype.getStartTime=Rs.prototype.getStartTime,Rs.prototype.getVideoData=Rs.prototype.fd,Rs.prototype.getAudioData=Rs.prototype.zb,Rs.prototype.getMetadata=Rs.prototype.getMetadata,Rs.prototype.parseNalus=Rs.prototype.Lh,Rs.prototype.parseAvcNalus=Rs.prototype.Ql,Rs.prototype.parse=Rs.prototype.parse,Rs.prototype.setDiscontinuitySequence=Rs.prototype.eg,Rs.prototype.clearData=Rs.prototype.clearData,Rs.Timescale=9e4;var js=[100,110,122,244,44,83,86,118,128,138,139,134];function Gs(e,t,n,i,r){var a=this;this.g=e,this.N=n,this.B=i,this.Z=t,this.l=new Map,this.D=new Map,this.La=new Map,this.h=null,this.Ia=!1,this.L=r||null,this.s=new Map,this.u=new At,this.j=new Map,this.I=null,this.J=new Br,this.ua="",this.eb=!1,this.sa=!0,this.K=!1,this.C=this.O=null,this.i=Hs(this,this.J),this.gb=this.F=!1,this.H=new ra(function(){return function(e){var t,n,i,r,a,o,s,u,h,c,d,p,f;return L(function(g){if(1==g.g){for(t=[],n=l(e.s),i=n.next();!i.done;i=n.next())for(r=i.value,a=l(r),o=a.next().value,s=a.next().value,u=s[0],h=o,e.s.set(h,s.slice(0,1)),u&&t.push(u.p.catch(Xi)),c=l(s.slice(1)),d=c.next();!d.done;d=c.next())d.value.p.reject(new Ce(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),_(g,Promise.all(t),2)}for(p=l(e.j.values()),f=p.next();!f.done;f=p.next())f.value.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.C&&e.g.removeChild(e.C),e.g&&e.O&&(e.g.removeChild(e.O),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.O=null,e.C=null,e.B=null,e.i=null,e.h=null,e.Z=null,e.l.clear(),e.La.clear(),e.j.clear(),e.I=null,e.s.clear(),e.L=null,e.Y.clear(),e.N=null,w(g)})}(a)}),this.G=!1,this.U="UNKNOWN",this.Ta=this.Ya=!1,this.Na=new Br,this.m=!1,this.qa=null,this.Y=new Map,this.ba=this.P=this.na=this.R=null,this.$=new Br,this.g.remote&&(this.K="disconnected"!=this.g.remote.state,this.u.o(this.g.remote,"connect",function(){a.K="disconnected"!=a.g.remote.state}),this.u.o(this.g.remote,"connecting",function(){a.K="disconnected"!=a.g.remote.state}),this.u.o(this.g.remote,"disconnect",function(){a.K="disconnected"!=a.g.remote.state}))}function Hs(t,n){if(t.sa=!0,e.ManagedMediaSource){t.C||(t.g.disableRemotePlayback=!0);var i=new ManagedMediaSource;t.u.o(i,"startstreaming",function(){t.sa=!0}),t.u.o(i,"endstreaming",function(){t.sa=!1})}else i=new MediaSource;return t.u.ra(i,"sourceopen",function(){URL.revokeObjectURL(t.ua),n.resolve()}),t.u.ra(t.g,"playing",function(){t.eb=!0}),t.ua=pu(i),t.B.useSourceElements?(t.g.removeAttribute("src"),t.O&&t.g.removeChild(t.O),t.C&&t.g.removeChild(t.C),t.O=us(t.ua),t.g.appendChild(t.O),t.C&&t.g.appendChild(t.C),t.g.load()):t.g.src=t.ua,i}function Vs(e,t,n,i){"audio"==t&&i&&(i=rr(i,n.mimeType));var r=xi(n.mimeType,i);if(t==nt)zs(e,r,e.G,n.external);else{var a=e.B.forceTransmux;(!Ot(r)||!e.G&&Oi.includes(r))&&(a=!0);var o=Ci(n.mimeType,i);if(a){if(a=et("audio",(i||"").split(",")),i=et("video",(i||"").split(",")),a&&i)return e.m=!0,Vs(e,"audio",n,a),void Vs(e,"video",n,i);(i=bi(o))&&(r=i(),e.j.set(t,r),r=r.convertCodecs(t,o))}o=r+e.B.addExtraFeaturesToSourceBuffer(r),aa(e.H);try{var s=e.i.addSourceBuffer(o)}catch(t){throw new Ce(2,3,3015,t,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.G&&(s.mode=fu),e.u.o(s,"error",function(){var n=e.s.get(t)[0];n.p.reject(new Ce(2,3,3014,e.g.error?e.g.error.code:0,n.uri))}),e.u.o(s,"updateend",function(){return au(e,t)}),e.l.set(t,s),e.D.set(t,r),e.La.set(t,!!n.drmInfos.length)}}function Ws(e){return e.sa&&!e.K&&!e.F}function zs(e,t,n,i){e.h||(e.h=new Ui(e.Z),e.h&&(e.h.B=e.B.modifyCueCallback));var r=e.h;i=i||e.Ia,e=e.U,"application/cea-608"==t||"application/cea-708"==t?r.i=null:(r.i=Vi.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):kt("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):kt("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.C=i)}function Ks(e){return!(e.F||e.i&&"ended"!=e.i.readyState)}function Xs(e){return!(e.F||e.i&&"closed"!=e.i.readyState)}function Ys(e,t){return e.l.size?t==nt?e.h.g:es(Zs(e,t)):null}function qs(e,t){return e.l.size?t==nt?e.h.h:ts(Zs(e,t)):null}function Zs(e,t){if(e.F||e.K)return null;try{return e.l.get(t).buffered}catch(n){return e.l.has(t),null}}function Js(e,t,n,i,r,a,o,s,u,c,d){var p,f,g,m,v,y,b,S,T,A,E,x,C,k,I,M;return o=void 0!==o&&o,s=void 0!==s&&s,u=void 0!==u&&u,c=void 0!==c&&c,L(function(P){switch(P.g){case 1:if(t!=(p=it).$a){P.A(2);break}if("HLS"!=e.U){P.A(3);break}return _(P,e.Na,4);case 4:f=P.h,e.h.u=f;case 3:return _(P,function(e,t,n,i,r){var a,o,s,u,h,c,d;return L(function(p){if(1==p.g)return _(p,Promise.resolve(),2);if(!e.i||!e.j)return p.return();if(null==n||null==i)return e.i.parseInit(Te(t)),p.return();for(a=e.C?n:e.u,o={periodStart:e.u,segmentStart:n,segmentEnd:i,vttOffset:a},s=e.i.parseMedia(Te(t),o,r,[]),u=l(s),h=u.next();!h.done;h=u.next())c=h.value,e.B(c,r||null,o);d=s.filter(function(t){return t.startTime>=e.l&&t.startTime<e.m}),e.j.append(d),null==e.g&&(e.g=Math.max(n,e.l)),e.h=Math.min(i,e.m),w(p)})}(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.S()[0]:null),5);case 5:return P.return();case 2:if(c||!e.m){P.A(6);break}return _(P,Js(e,p.ma,n,i,r,a,o,s,u,!0),7);case 7:return _(P,Js(e,p.Ha,n,i,r,a,o,s,u,!0),8);case 8:return P.return();case 6:if(!e.l.has(t))return P.return();if(g=e.l.get(t).timestampOffset,m=e.D.get(t),e.j.has(t)&&(m=e.j.get(t).getOriginalMimeType()),i&&(v=function(e,t,n,i,r,a){var o=null,s=[],u=Te(n);if(Oi.includes(a))(t=bs(u)).length&&i&&((n=t.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&"number"==typeof n.data&&(o=Math.round(n.data)/1e3),e.N.onMetadata([{cueTime:i.startTime,data:u,frames:t,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(a.includes("/mp4")&&i&&i.ea&&i.ea.timescale){var l=i.ea.timescale;if(!isNaN(l)){var h=null!=r.emsgSchemeIdUris&&0<r.emsgSchemeIdUris.length||e.B.dispatchAllEmsgBoxes,c=0,d=!1;u=new ca,h&&u.V("emsg",function(t){var n=r.emsgSchemeIdUris;if(0===t.version)var a=t.reader.ld(),o=t.reader.ld(),s=t.reader.W(),u=t.reader.W(),l=t.reader.W(),h=t.reader.W(),c=i.startTime+u/s;else s=t.reader.W(),u=(c=t.reader.Pd()/s+i.timestampOffset)-i.startTime,l=t.reader.W(),h=t.reader.W(),a=t.reader.ld(),o=t.reader.ld();t=t.reader.Yb(t.reader.getLength()-t.reader.Ua()),(n&&n.includes(a)||e.B.dispatchAllEmsgBoxes)&&("urn:mpeg:dash:event:2012"==a?e.N.Pl():(n=c+l/s,e.N.Nl({startTime:c,endTime:n,schemeIdUri:a,value:o,timescale:s,presentationTimeDelta:u,eventDuration:l,id:h,messageData:t}),("https://aomedia.org/emsg/ID3"==a||"https://developer.apple.com/streaming/emsg-id3"==a)&&(s=bs(t)).length&&e.N.onMetadata([{cueTime:c,data:t,frames:s,dts:c,pts:c}],0,n)))}),u.V("prft",function(t){var n=t.reader,i=t.version;n.W(),t=1e3*(t=n.W())+n.W()/Math.pow(2,32)*1e3,0===i?n=n.W():(i=n.W(),n=n.W(),n=i*Math.pow(2,32)+n),t=ws(t),n=new V("prft",n=(new Map).set("detail",{wallClockTime:t,programStartDate:new Date(t-n/l*1e3)})),e.N.onEvent(n)}).box("moof",da).box("traf",da).V("tfdt",function(e){d||(c=co(e.reader,e.version).baseMediaDecodeTime/l,d=!0,h||e.parser.stop())}).parse(n,!0),d&&0==i.timestampOffset&&(o=c)}}else a.includes("/mp4")||a.includes("/webm")||!Bs(u)||(e.Y.has(t)||e.Y.set(t,new Rs),(s=e.Y.get(t)).clearData(),s.eg(i.i),s.parse(u),null!=(u=s.getStartTime(t))&&(o=u),s=s.getMetadata());return{timestamp:o,metadata:s}}(e,t,n,i,r,m),y=v.timestamp,b=v.metadata,null!=y&&(null==e.R&&t==p.Ha&&(e.R=y,e.na=i.startTime,null!=e.P&&(S=0,e.na==e.ba&&(S=e.R-e.P),e.$.resolve(S))),null==e.P&&t==p.ma&&(e.P=y,e.ba=i.startTime,null!=e.R&&(T=0,e.na==e.ba&&(T=e.R-e.P),e.$.resolve(T))),A=y,E=Oi,!e.G&&E.includes(e.D.get(t))&&(A=0),x=i.startTime-A,(.001<=Math.abs(g-x)||o||s)&&(!u||0<x||!g)&&(g=x,e.Ta&&(ou(e,t,function(){return nu(e,t)},null),ou(e,t,function(){return iu(e,t,g)},null))),(t==p.Ha||!e.l.has(p.Ha))&&e.Na.resolve(g)),b.length)&&e.N.onMetadata(b,g,i?i.endTime:null),a&&t==p.Ha&&(e.h||zs(e,"application/cea-608",e.G,!1),e.I||(C=m.split(";",1)[0],e.I=new Vt(C)),i?(k=e.I.Rf(n)).length&&function(e,t,n,i,r){for(var a=n+" "+i,o=new Map,s=(t=l(t)).next();!s.done;s=t.next()){var u=s.value;s=u.stream,u=u.cue,o.has(s)||o.set(s,new Map),o.get(s).has(a)||o.get(s).set(a,[]),Hi(e,u,r),u.startTime>=e.l&&u.startTime<e.m&&(o.get(s).get(a).push(u),s==e.D&&e.j.append([u]))}for(a=(r=l(o.keys())).next();!a.done;a=r.next())for(a=a.value,e.s.has(a)||e.s.set(a,new Map),s=(t=l(o.get(a).keys())).next();!s.done;s=t.next())s=s.value,u=o.get(a).get(s),e.s.get(a).set(s,u);e.g=null==e.g?Math.max(n,e.l):Math.min(e.g,Math.max(n,e.l)),e.h=Math.max(e.h,Math.min(i,e.m))}(e.h,k,i.startTime,i.endTime,g):e.I.init(n,s,d)),!e.j.has(t)){P.A(9);break}return _(P,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:n=P.h;case 9:if(n=function(e,t,n,i,r){if("mp4"!=Ii(e.D.get(r)))return n;var a=null===i,o=e.La.get(r),s=e.N.Lk(),u=!1;i&&i.ea&&(u=i.ea.encrypted),i=i?i.S()[0]:null;var c=Me();return e.B.correctEc3Enca&&a&&"audio"===r&&(n=function(e){e=Te(e);var t=null;return(new ca).box("moov",da).box("trak",da).box("mdia",da).box("minf",da).box("stbl",da).V("stsd",pa).box("enca",function(e){return t=e.reader.h,ga(e)}).box("sinf",da).box("frma",function(e){e.parser.stop(),"ec-3"===mo(e.reader).codec&&t&&2!==t.getUint16(16)&&t.setUint16(16,2)}).parse(e),e}(n)),e.B.insertFakeEncryptionInInit&&o&&c.ze(s,r)&&(a?n=function(e,t,n){function i(e){d.push({box:e,kj:1701733217})}function r(e){d.push({box:e,kj:1701733238})}function a(e){h=!0,e.parser.stop()}function o(e){c.push(e),da(e)}var s,u=t=Te(t),h=!1,c=[],d=[];if((new ca).box("moov",o).box("trak",o).box("mdia",o).box("minf",o).box("stbl",o).V("stsd",function(e){s=e,c.push(e),pa(e)}).V("encv",a).V("enca",a).V("dvav",r).V("dva1",r).V("dvh1",r).V("dvhe",r).V("dvc1",r).V("dvi1",r).V("hev1",r).V("hvc1",r).V("avc1",r).V("avc3",r).V("ac-3",i).V("ec-3",i).V("ac-4",i).V("Opus",i).V("fLaC",i).V("mp4a",i).parse(t),h)return t;if(0==d.length||!s)throw Ye(t),new Ce(2,3,3019,n);d.reverse();for(var p=(n=l(d)).next();!p.done;p=n.next())p=p.value,u=zo(e,u,s,p.box,c,p.kj);return Me().tj()?((e=new Uint8Array(t.byteLength+u.byteLength)).set(u),e.set(t,u.byteLength),e):u}(t,n,i):!u&&c.uj(r)&&(n=function(e){e=Te(e);var t=[];(new ca).box("mdat",function(e){t.push(e)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],a=t[i];n.push(Wo(e.subarray(r?r.start+r.size:0,a.start+a.size)))}return qe.apply(Ve,h(n))}(n))),a&&c.ye()&&(n=function(e){function t(e){i.push({start:e.start,size:e.size}),da(e)}var n=Te(e),i=[];return(new ca).box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(e){i.push({start:e.start,size:e.size});for(var t=Ee(n,e.start),r=0;r<e.size-3;r++){var a=t.getUint32(r);1633889587==a?t.setUint32(r,1700998451):1684103987==a&&t.setUint32(r,1684366131)}}).parse(n),n}(n)),n}(e,r,n,i,t),!i||!e.G||t==p.$a){P.A(11);break}if(!o&&!s){P.A(11);break}if(I=i.startTime,"HLS"!=e.U||e.m||t!=p.ma||!e.l.has(p.Ha)){P.A(13);break}return _(P,e.$,14);case 14:M=P.h,.15<Math.abs(M)&&(I-=M);case 13:ou(e,t,function(){return nu(e,t)},null),ou(e,t,function(){return iu(e,t,I)},null);case 11:return _(P,ou(e,t,function(){var i=n;e.L&&Dt(e.L,i,g,r),e.l.get(t).appendBuffer(i)},i?i.S()[0]:null),15);case 15:w(P)}})}function Qs(e,t){var n;return L(function(i){return 1==i.g?t==(n=it).$a?e.h?_(i,e.h.remove(0,1/0),0):i.return():_(i,ou(e,t,function(){return tu(e,t,0,e.i.duration)},null),4):e.m?_(i,ou(e,n.ma,function(){return tu(e,n.ma,0,e.i.duration)},null),0):i.A(0)})}function $s(e,t,n,i,r,a,o,s,u){var l,h;return L(function(c){return 1==c.g?t==(l=it).$a?(a||(e.h.u=n),function(e,t,n){e.l=t,e.m=n}(e.h,i,r),c.return()):(h=[],_(c,function(e,t,n,i,r){var a,o,s,u,l,h;return L(function(c){return 1==c.g?(a=it,o=du(e,t,n,i,r),s=o.type,u=o.mc,l=o.Lf,(h=r.get(a.ma))&&(e.m=h.isAudioMuxedInVideo),s==gu?(e.j.has(t)&&!u?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&u?e.j.set(t,u):u&&(e.j.has(t)&&e.j.get(t).transmux!==u.transmux?(e.j.get(t).destroy(),e.j.set(t,u)):u.destroy()),c.return(!1)):s==vu?_(c,function(e,t,n,i){return ou(e,t,function(){if(t!==nt){if(e.D.get(t),Ut()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.D.set(t,n)}au(e,t)}},null)}(e,t,l,u),3):s!=mu?c.A(3):(u&&u.destroy(),_(c,hu(e,r),3))):c.return(!0)})}(e,t,o,s,u),2)):(c.h||(h.push(ou(e,t,function(){return nu(e,t)},null)),e.m&&h.push(ou(e,l.ma,function(){return nu(e,l.ma)},null))),a||(h.push(ou(e,t,function(){return iu(e,t,n)},null)),e.m&&h.push(ou(e,l.ma,function(){return iu(e,l.ma,n)},null))),0==i&&1/0==r||(h.push(ou(e,t,function(){return ru(e,t,i,r)},null)),e.m&&h.push(ou(e,l.ma,function(){return ru(e,l.ma,i,r)},null))),h.length?_(c,Promise.all(h),0):c.A(0))})}function eu(e){L(function(t){return e.H.g||e.g.error||e.K||e.F||Ks(e)||Xs(e)?t.return():_(t,su(e,function(){Ks(e)||Xs(e)||e.i.clearLiveSeekableRange()}),0)})}function tu(e,t,n,i){i<=n?au(e,t):e.l.get(t).remove(n,i)}function nu(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,au(e,t)}function iu(e,t,n){0>n&&(n+=.001),e.l.get(t).timestampOffset=n,au(e,t)}function ru(e,t,n,i){var r=e.l.get(t);r.appendWindowEnd===i&&r.appendWindowStart===n||(r.appendWindowStart=0,r.appendWindowEnd=i,r.appendWindowStart=n),au(e,t)}function au(e,t){if(e.F||e.H.g){var n=e.s.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.s.set(t,[]))}else(n=e.s.get(t)[0])&&(n.p.resolve(),uu(e,t))}function ou(e,t,n,i){return aa(e.H),n={start:n,p:new Br,uri:i},e.s.get(t).push(n),1==e.s.get(t).length&&lu(e,t),n.p}function su(e,t){var n,i,r,a,o,s,u,h,c,d,p;return L(function(f){switch(f.g){case 1:for(aa(e.H),n=[],i=Array.from(e.l.keys()),r=l(i),a=r.next(),o={};!a.done;o={ready:void 0},a=r.next())s=a.value,o.ready=new Br,u={start:function(e){return function(){return e.ready.resolve()}}(o),p:o.ready,uri:null},(h=e.s.get(s)).push(u),n.push(o.ready),1==h.length&&u.start();return S(f,2),_(f,Promise.all(n),4);case 4:A(f,3);break;case 2:throw E(f);case 3:return S(f,5,6),_(f,t(),6);case 6:for(x(f),c=l(i),d=c.next();!d.done;d=c.next())p=d.value,uu(e,p);C(f,0);break;case 5:throw new Ce(2,3,3015,E(f),e.g.error||"No error in the media element",null)}})}function uu(e,t){e.s.get(t).shift(),lu(e,t)}function lu(e,t){var n=e.s.get(t)[0];if(n)try{n.start()}catch(i){"QuotaExceededError"==i.name?n.p.reject(new Ce(2,3,3017,t)):Ws(e)?n.p.reject(new Ce(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new Ce(2,3,3024,t)),uu(e,t)}}function hu(e,t){return su(e,function(){return function(e,t){var n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w,S;return L(function(A){if(1==A.g){if(e.F||e.K)return A.return();for(n=it,e.F=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.gb=!0),e.eb&&(e.g.autoplay=!1),T(A,2),e.u.Sa(),a=l(e.j.values()),o=a.next();!o.done;o=a.next())o.value.destroy();for(s=l(e.l.values()),u=s.next();!u.done;u=s.next()){h=u.value;try{e.i.removeSourceBuffer(h)}catch(e){}}return e.j.clear(),e.l.clear(),c=e.i.duration,e.J=new Br,e.i=Hs(e,e.J),_(A,e.J,4)}if(2!=A.g){for(!isNaN(c)&&c?e.i.duration=c:!isNaN(e.qa)&&e.qa&&(e.i.duration=e.qa),d=new Br,p=e.i.sourceBuffers,f=t.size,g=0,m=function(){++g===f&&(d.resolve(),e.u.Da(p,"addsourcebuffer",m))},e.u.o(p,"addsourcebuffer",m),v=l(t.keys()),y=v.next();!y.done;y=v.next())b=y.value,w=t.get(b),Vs(e,b,w,w.codecs);return(S=t.get(n.ma))&&S.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.s.has(n.ma)&&e.s.set(n.ma,[]),e.g.currentTime=i,_(A,d,2)}return x(A),e.F=!1,aa(e.H),e.u.ra(e.g,"canplaythrough",function(){e.H.g||(e.g.autoplay=r,e.gb&&(e.gb=!1,e.g.play()))}),C(A,0)})}(e,t)})}function cu(e,t,n,i){var r=!1,a=et("audio",(i||"").split(",")),o=et("video",(i||"").split(",")),s=o;"audio"==t&&(s=a),s||(s=i),i=xi(n,s);var u=Li(e.D.get(t)),l=e.B.forceTransmux;if(!Ot(i)||!e.G&&Oi.includes(i)?l=!0:l||n==u||(l="WEBKIT"===Me().Fa()&&Oi.includes(n)),l&&(n=bi(e=Ci(n,s)))){var h=n();a&&o&&(r=!0),i=h.convertCodecs(t,e)}return t=Mi(Di(i)),{mc:h,pm:r,Di:Li(i),codec:t,mimeType:i}}function du(e,t,n,i,r){if(t==nt)return{type:gu,Lf:n,mc:null};var a=Mi(Di(e.D.get(t))),o=Li(e.D.get(t)),s=cu(e,t,n,i),u=s.mc,l=s.pm,h=s.Di,c=s.codec;s=s.mimeType;var d=!0;return l&&e.D.has("audio")&&(n=cu(e,"audio",n,i),i=Mi(Di(e.D.get("audio"))),d=Li(e.D.get("audio")),d=i==n.codec&&d==n.Di,n.mc&&n.mc.destroy()),a===c&&o===h&&d?{type:gu,Lf:s,mc:u}:(a=!0,(e.m&&!r.has("audio")||l&&u&&!e.j.has(t))&&(a=!1),a&&"smooth"===e.B.codecSwitchingStrategy&&Ut()?{type:vu,Lf:s,mc:u}:(u&&u.destroy(),{type:mu,Lf:s,mc:null}))}(i=Gs.prototype).destroy=function(){return this.H.destroy()},i.init=function(e,t,n,i){t=void 0!==t&&t,n=void 0===n?"UNKNOWN":n,i=void 0!==i&&i;var r,a,o,s,u,h,c=this;return L(function(d){if(1==d.g)return r=it,_(d,c.J,2);if(3!=d.g)return Ks(c)||Xs(c)?(X("Expected MediaSource to be open during init(); reopening the media source."),c.J=new Br,c.i=Hs(c,c.J),_(d,c.J,3)):d.A(3);for(c.G=t,c.U=n,c.Ya=i,c.Ta=!c.G&&"HLS"==c.U&&!c.Ya,c.Y.clear(),c.R=null,c.na=null,c.P=null,c.ba=null,c.$=new Br,a=l(e.keys()),o=a.next();!o.done;o=a.next())s=o.value,u=e.get(s),Vs(c,s,u,u.codecs),c.m?(c.s.set(r.ma,[]),c.s.set(r.Ha,[])):c.s.set(s,[]);(h=e.get(r.ma))&&h.isAudioMuxedInVideo&&(c.m=!0),w(d)})},i.configure=function(e){this.B=e,this.h&&(this.h.B=e.modifyCueCallback)},i.bc=function(){var e={total:this.F?[]:rs(this.g.buffered),audio:rs(Zs(this,"audio")),video:rs(Zs(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;null!=t&&null!=n&&e.text.push({start:t,end:n})}return e},i.remove=function(e,t,n,i){var r,a=this;return L(function(o){return 1==o.g?(e==(r=it).Ha&&a.I&&a.I.remove(i),e==r.$a?_(o,a.h.remove(t,n),0):n>t?_(o,ou(a,e,function(){return tu(a,e,t,n)},null),5):o.A(0)):a.m?_(o,ou(a,r.ma,function(){return tu(a,r.ma,t,n)},null),0):o.A(0)})},i.flush=function(e){var t,n=this;return L(function(i){return 1==i.g?e==(t=it).$a?i.return():_(i,ou(n,e,function(){n.g.currentTime-=.001,au(n,e)},null),2):n.m?_(i,ou(n,t.ma,function(){var e=t.ma;n.g.currentTime-=.001,au(n,e)},null),0):i.A(0)})},i.endOfStream=function(e){var t=this;return L(function(n){return _(n,su(t,function(){Ks(t)||Xs(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},i.wb=function(e){var t=this;return L(function(n){return _(n,su(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var n=l(t.l.keys()),i=n.next();!i.done;i=n.next()){i=i.value;var r={start:function(){},p:new Br,uri:null};t.s.get(i).unshift(r)}t.i.duration=e,t.qa=e}),0)})},i.getDuration=function(){return this.i.duration};var pu=e.URL.createObjectURL,fu="sequence",gu="none",mu="reset",vu="changeType";function yu(e,t,n){this.i=e,this.D=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.I=!1,this.H=0,this.F=void 0===n||n,this.G=0,this.s=!1,this.m=e}function bu(e,t,n,i){var r=this;this.u=i,this.g=e,this.C=t,this.h=n,this.s=new At,this.l=!1,this.F=e.readyState,this.G=this.D=this.j=0,this.m=function(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new wu(new Su(e.g),t,function(){return L(function(t){if(1==t.g)return rs(e.g.buffered).length?n?(e.g.currentTime+=n,t.A(2)):_(t,e.g.play(),3):t.return();if(2!=t.g){if(!e.g)return t.return();e.g.pause(),e.g.play()}e.G++,e.u(new V("stalldetected")),w(t)})})}(this),this.B=!1,this.s.o(e,"waiting",function(){return _u(r)}),this.i=new zi(function(){_u(r)}).ya(this.h.gapJumpTimerTime)}function _u(e){if(0!=e.g.readyState){if(e.g.seeking){if(!e.l)return}else e.l=!1;if(!e.g.paused||e.g.currentTime==e.j&&(e.g.autoplay||e.g.currentTime!=e.j)){var t;if(e.g.readyState!=e.F&&(e.F=e.g.readyState),!(t=!e.m)){var n=(t=e.m).h,i=Tu(n),r=n.g.currentTime,a=Date.now()/1e3;t.g==r&&t.m==i||(t.l=a,t.g=r,t.m=i,t.i=!1),(i=(r=a-t.l)>=t.s&&i&&!t.i)&&(t.j&&t.j(t.g,r),t.i=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,i=function(e,t,n){return e&&e.length&&!$o(e)&&0<=(e=rs(e).findIndex(function(e,i,r){return e.start>t&&(0==i||r[i-1].end-t<=n)}))?e:null}(n=e.g.buffered,t,e.h.gapDetectionThreshold),null==i||0==i&&!e.B||(r=n.start(i),(a=e.h.gapPadding)&&(r=Math.ceil(100*(r+a))/100),r>=e.C.Kb()||.001>r-t||(0!=i&&n.end(i-1),e.g.currentTime=r,t==e.j&&(e.j=r),e.D++,e.u(new V("gapjumped")))))}}}function wu(e,t,n){this.h=e,this.m=Tu(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.s=t,this.j=n}function Su(e){var t=this;this.g=e,this.h=new At,this.i=!1,this.h.o(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.o(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.o(this.g,"audiofocuslost",function(){t.i=!0})}function Tu(e){if(e.g.paused||0==e.g.playbackRate||e.i||0==e.g.buffered.length)var t=!1;else e:{t=e.g.currentTime;for(var n=(e=l(rs(e.g.buffered))).next();!n.done;n=e.next())if(!(t<(n=n.value).start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}function Au(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=Eu.value().get(t),n.ra(e,t,i))}(i=yu.prototype).getDuration=function(){return this.l},i.Rk=function(){return this.h},i.Ij=function(e){this.i=e},i.wb=function(e){this.l=e},i.Xk=function(){return this.i},i.Fj=function(e){this.B=e},i.pd=function(e){e&&!this.C&&(this.I=!0),this.C=e},i.fg=function(e){this.u=e},i.uf=function(){return this.u},i.Zh=function(e){this.D=e},i.Gk=function(){return this.D},i.nj=function(e,t){if(0!=e.length){var n=(Date.now()+this.B)/1e3;if(0!=(e=e.filter(function(e){return e.start+t<n})).length){var i=e[e.length-1].end+t;this.Mf(e[0].start+t),this.h=e.reduce(function(e,t){return Math.max(e,t.end-t.start)},this.h),this.g=Math.max(this.g,i),null!=this.i&&this.F&&!this.s&&(this.i=n-this.g-this.h)}}},i.ue=function(e){if(0!=e.length){for(var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.B)/1e3,r=(e=l(e)).next();!r.done;r=e.next())i<(r=r.value).startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.Mf(t),this.g=Math.max(this.g,n),null!=this.i&&this.F&&!this.s&&(this.i=i-this.g-this.h)}},i.mj=function(e,t){this.Mf(e),1/0==t||this.T()||(this.g=Math.max(this.g,t))},i.Sk=function(){return this.g},i.Gf=function(){this.s=!0},i.Dl=function(){return this.s},i.ai=function(e){this.m=e},i.Kk=function(){return this.m},i.Mf=function(e){null==this.j?this.j=e:this.I||(this.j=Math.min(this.j,e))},i.Hh=function(e){this.h=Math.max(this.h,e)},i.offset=function(e){null!=this.j&&(this.j+=e),null!=this.g&&(this.g+=e)},i.T=function(){return 1/0==this.l&&!this.C},i.hd=function(){return 1/0!=this.l&&!this.C},i.Lb=function(){return Math.max(this.H,this.Jc()-this.u)},i.Kj=function(e){this.H=e},i.Jc=function(){return this.T()||this.hd()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.G,this.l):this.g?Math.min(this.g,this.l):this.l},i.ge=function(e){var t=Math.max(this.j,this.H);return 1/0==this.u?Math.ceil(1e3*t)/1e3:Math.max(t,Math.min(this.Jc()-this.u+e,this.Kb()))},i.dc=function(){return this.ge(0)},i.Kb=function(){return Math.max(0,this.Jc()-(this.T()||this.hd()?this.D:0))},i.Xj=function(){return!(null==this.i||null!=this.g&&this.F)},i.Ej=function(e){this.G=e},i.wk=function(){return this.G},H("shaka.media.PresentationTimeline",yu),yu.prototype.getAvailabilityTimeOffset=yu.prototype.wk,yu.prototype.setAvailabilityTimeOffset=yu.prototype.Ej,yu.prototype.usingPresentationStartTime=yu.prototype.Xj,yu.prototype.getSeekRangeEnd=yu.prototype.Kb,yu.prototype.getSeekRangeStart=yu.prototype.dc,yu.prototype.getSafeSeekRangeStart=yu.prototype.ge,yu.prototype.getSegmentAvailabilityEnd=yu.prototype.Jc,yu.prototype.setUserSeekStart=yu.prototype.Kj,yu.prototype.getSegmentAvailabilityStart=yu.prototype.Lb,yu.prototype.isInProgress=yu.prototype.hd,yu.prototype.isLive=yu.prototype.T,yu.prototype.offset=yu.prototype.offset,yu.prototype.notifyMaxSegmentDuration=yu.prototype.Hh,yu.prototype.notifyMinSegmentStartTime=yu.prototype.Mf,yu.prototype.getInitialProgramDateTime=yu.prototype.Kk,yu.prototype.setInitialProgramDateTime=yu.prototype.ai,yu.prototype.isStartTimeLocked=yu.prototype.Dl,yu.prototype.lockStartTime=yu.prototype.Gf,yu.prototype.getMaxSegmentEndTime=yu.prototype.Sk,yu.prototype.notifyPeriodDuration=yu.prototype.mj,yu.prototype.notifySegments=yu.prototype.ue,yu.prototype.notifyTimeRange=yu.prototype.nj,yu.prototype.getDelay=yu.prototype.Gk,yu.prototype.setDelay=yu.prototype.Zh,yu.prototype.getSegmentAvailabilityDuration=yu.prototype.uf,yu.prototype.setSegmentAvailabilityDuration=yu.prototype.fg,yu.prototype.setStatic=yu.prototype.pd,yu.prototype.setClockOffset=yu.prototype.Fj,yu.prototype.getPresentationStartTime=yu.prototype.Xk,yu.prototype.setDuration=yu.prototype.wb,yu.prototype.setPresentationStartTime=yu.prototype.Ij,yu.prototype.getMaxSegmentDuration=yu.prototype.Rk,yu.prototype.getDuration=yu.prototype.getDuration,bu.prototype.release=function(){this.s&&(this.s.release(),this.s=null),null!=this.i&&(this.i.stop(),this.i=null),this.m&&(this.m.release(),this.m=null),this.g=this.C=this.u=null},bu.prototype.Pf=function(){this.B=!0,this.i&&this.i.ya(this.h.gapJumpTimerTime),_u(this)},wu.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null},Su.prototype.release=function(){this.h&&this.h.release(),this.h=null};var Eu=new Ie(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function xu(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return null==r.l&&(r.l=i()),r.l},this.s=!1,this.h=new At,this.i=new Pu(e),Au(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Iu(r,r.j())})}function Cu(e){return e.s?e.g.currentTime:e.j()}function ku(e,t){0<e.g.readyState?Lu(e.i,t):Au(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){Iu(e,e.j())})}function Iu(e,t){.001>Math.abs(e.g.currentTime-t)?Mu(e):(e.h.ra(e.g,"seeking",function(){Mu(e)}),Lu(e.i,e.g.currentTime&&0!=e.g.currentTime?e.g.currentTime:t))}function Mu(e){e.s=!0,e.h.o(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Pu(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new zi(function(){0>=t.i||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}function Lu(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.ya(.1)}function Du(e){this.g=e,this.i=!1,this.h=null,this.j=new At}function Ru(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function Nu(e,t){return 0<(e=e.g.seekable).length&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function Ou(e,t,n,i,r,a){var o=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.s=null,this.j=new bu(e,t.presentationTimeline,n,a),this.i=new xu(e,function(){e:{var e=o.j;e.l=!0,e.B=!1,e.i&&e.i.ya(e.h.gapJumpTimerTime),_u(e);var t=Cu(o.i);if(e=Fu(o,t),!Bt()&&.001<Math.abs(e-t)){t=!1;var n=Me().zj();if(n){var i=Date.now()/1e3;(!o.s||o.s<i-n)&&(o.s=i,t=!0)}else t=!0;if(t){ku(o.i,e),e=void 0;break e}}o.u(),e=void 0}return e},function(e){var t=o.j;t.g.seeking&&!t.l&&(t.l=!0,t.j=e),t.i&&t.i.ya(t.h.gapJumpTimerTime),_u(t)},function(){return Uu(o,i)}),this.m=new zi(function(){if(0!=o.h.readyState&&!o.h.paused){var e=Cu(o.i),t=o.g.dc(),n=o.g.Kb();3>n-t&&(t=n-3),e<t&&(e=Fu(o,e),o.h.currentTime=e)}})}function Uu(e,t){return null==t?t=1/0>e.g.getDuration()?e.g.dc():e.g.Kb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):0>t&&(t=e.g.Kb()+t),Bu(e,ju(e,t))}function Bu(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function Fu(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.dc(),a=e.g.Kb(),o=e.g.getDuration();3>a-r&&(r=a-3);var s=e.g.ge(n),u=e.g.ge(i);return n=e.g.ge(n+i),t>=o?Bu(e,t):t>a?a-e.l.safeSeekEndOffset:t<r?e.g.T()&&e.l.returnToEndOfLiveWindowWhenOutside?a-e.l.safeSeekEndOffset:ns(e.h.buffered,u)?u:n:t>=s||ns(e.h.buffered,t)?t:n}function ju(e,t){var n=e.g.dc();return t<n?n:t>(e=e.g.Kb())?e:t}function Gu(e){this.g=e,this.m=null,this.i=0,this.s=!1}function Hu(e){return e.g[0]||null}function Vu(e,t,n){return new Gu([e=new qo(e,e+t,function(){return n},0,null,null,e,e,e+t)])}function Wu(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}function zu(){Gu.call(this,[]),this.h=[]}function Ku(e){var t=this;this.g=e,this.j=!1,this.i=this.g.tf(),this.h=new zi(function(){t.g.jj(.25*t.i)})}function Xu(e){e.h.stop();var t=e.j?0:e.i;if(0<=t)try{return void(e.g.tf()!=t&&e.g.bi(t))}catch(e){}e.h.ya(.25),0!=e.g.tf()&&e.g.bi(0)}function Yu(e){var t=this;this.j=e,this.h=new At,this.g=new Set,this.i=new zi(function(){qu(t,!1)}).Ka(),e.paused||this.i.ya(.25),this.h.o(e,"playing",function(){t.i.Ka().ya(.25)}),this.h.o(e,"pause",function(){t.i.stop()})}function qu(e,t){for(var n=e.j.currentTime,i=(e=l(e.g)).next();!i.done;i=e.next())i.value.j(n,t)}function Zu(e){$.call(this),this.g=new Map,this.h=e}function Ju(e,t,n){return!!((e=e.h()[n])&&0<e.length&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function Qu(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return"video"==e.type&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),"audio"==e.type&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function $u(e){$.call(this),this.h=new Map,this.i=e,this.g=null}function el(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1);e.h.has(n)||(e.h.set(n,t),t=new V("regionadd",new Map([["region",t]])),e.dispatchEvent(t),function(e){e.g||(e.g=new zi(function(){for(var t=e.i(),n=l(e.h),i=n.next();!i.done;i=n.next()){var r=l(i.value);i=r.next().value,(r=r.next().value).endTime<t.start&&(e.h.delete(i),i=new V("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).ya(2))}(e))}function tl(e,t,n,i){this.m=e,this.i=t,this.l=n,this.h=new Map,this.j=new Map,this.g=null,this.s=i}function nl(e,t){e.l=t;for(var n=(e=l(e.h.values())).next();!n.done;n=e.next())n.value.g=t}function il(e,t,n){if(n=void 0!==n&&n,!e.i.segmentIndex)return Promise.resolve();if(e.g||(e.g=e.i.segmentIndex.cc(t,!0,e.s)),!e.g)return Promise.resolve();for(n&&e.g.next(),t=[];e.h.size<e.m&&(n=e.g.next().value);){var i=!0;n.isPreload()&&null!=n.endByte&&(i=!1),2==n.Lc()&&(i=!1),n.ec(!1)&&(i=!1),i&&n.ea&&t.push(rl(e,n.ea)),i&&!e.h.has(n)&&(i=new hl(e.l),t.push(cl(i,n,e.i)),e.h.set(n,i))}return sl(e),Promise.all(t)}function rl(e,t){if(!e.i.segmentIndex||t.ec()||Array.from(e.j.keys()).some(function(e){return Yo(e,t)}))return Promise.resolve();var n=new hl(e.l),i=cl(n,t,e.i);return e.j.set(t,n),i}function al(e,t){for(var n=(t=l(t.keys())).next();!n.done;n=t.next())(n=n.value)&&ll(e,n)}function ol(e){al(e,e.h),al(e,e.j),e.g=null}function sl(e){for(var t=Array.from(e.h.keys()),n=l(e.j.keys()),i=n.next(),r={};!i.done;r={Ah:void 0},i=n.next())r.Ah=i.value,t.some(function(e){return function(t){return Yo(t.ea,e.Ah)}}(r))||ll(e,r.Ah)}function ul(e,t){e.m=t;for(var n=Array.from(e.h.keys());n.length>t;){var i=n.pop();i&&ll(e,i)}sl(e)}function ll(e,t){var n=e.h;t instanceof Xo&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function hl(e){this.g=e,this.ve=this.ji=null}function cl(e,t,n){var i=new Uint8Array(0);return e.ve=e.g(t,n,function(t){return L(function(n){if(1==n.g)return i=0<i.byteLength?qe(i,t):t,e.ji?_(n,e.ji(i),3):n.A(0);i=new Uint8Array(0),w(n)})}),e.ve.promise.catch(function(e){return e instanceof Ce&&7001==e.code?Promise.resolve():Promise.reject(e)})}function dl(e){var t=Li(e);return{type:t.split("/")[0],mimeType:t,codecs:e=Di(e),language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,Ie:null,colorGamut:null,frameRate:null}}function pl(e){for(var t=new Set,n=[],i=(e=l(e)).next();!i.done;i=e.next()){var r=Pi(i=i.value);t.has(r)||(n.push(i),t.add(r))}return t=tt("audio",n),i=tt("video",n),e=tt(nt,n),i=function(e){if(1>=e.length)return e;var t=e.find(function(e){return e.startsWith("dvav.")||e.startsWith("dva1.")||e.startsWith("dvh1.")||e.startsWith("dvhe.")||e.startsWith("dav1.")||e.startsWith("dvc1.")||e.startsWith("dvi1.")});return t?Ot('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(e){return e!=t}):e}(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function fl(t,n,i){var r,a,o,s,u;return L(function(l){if(1==l.g)return(r=n).cryptoKey?l.A(2):_(l,r.fetchKey(),3);if(!(a=r.iv))for(a=Te(new ArrayBuffer(16)),o=r.firstMediaSequenceNumber+i,s=a.byteLength-1;0<=s;s--)a[s]=255&o,o>>=8;return u="CBC"==n.blockCipherMode?{name:"AES-CBC",iv:a}:{name:"AES-CTR",counter:a,length:64},l.return(e.crypto.subtle.decrypt(u,r.cryptoKey,t))})}function gl(e,t,n,i,r){return e=Zr(e,i,r),0==t&&null==n||(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}function ml(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.J=new Map,this.D=1,this.B=this.s=null,this.O=0,this.h=new Map,this.I=!1,this.P=null,this.C=!1,this.l=new ra(function(){return function(e){var t,n,i,r,a,o;return L(function(s){if(1==s.g){for(e.u&&e.u.stop(),e.u=null,e.H&&e.H.stop(),e.H=null,t=[],n=l(e.h.values()),i=n.next();!i.done;i=n.next())Nl(r=i.value),t.push(Ol(r)),r.ia&&(ol(r.ia),r.ia=null);for(a=l(e.m.values()),o=a.next();!o.done;o=a.next())ol(o.value);return _(s,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.G=null,w(s)})}(n)}),this.L=Date.now()/1e3,this.m=new Map,this.N={projection:null,hfov:null},this.U=0,this.R=1/0,this.F=null,this.K=[],this.u=new zi(function(){if(n.j&&n.g)if(n.j.presentationTimeline.T()){var e=n.j.presentationTimeline.dc(),t=n.j.presentationTimeline.Kb();1<t-e?function(e,t,n){L(function(i){return e.H.g||e.g.error||e.K||e.F||Ks(e)||Xs(e)?i.return():_(i,su(e,function(){Ks(e)||Xs(e)||e.i.setLiveSeekableRange(t,n)}),0)})}(n.g.ha,e,t):eu(n.g.ha)}else eu(n.g.ha),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.G=null,this.H=new zi(function(){var e=n.g.video;!e.ended&&n.G&&(e.currentTime=n.G,n.G=null)})}function vl(e,t){for(var n=0>e.g.Xa(),i=l(e.h.values()),r=i.next();!r.done;r=i.next())(r=r.value).Aa&&r.Aa.Td(n),r.ia&&r.ia.Td(n);for(r=(i=l(e.m.values())).next();!r.done;r=i.next())r.value.Td(n);(n=e.h.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Pc&&(_l(e,t,!1,0,!1),n.Pc=i):(t=n.Pc)&&(n.Pc=null,_l(e,t,!0,0,!1)))}function yl(e,t,n,i,r,a){n=void 0!==n&&n,i=void 0===i?0:i,r=void 0!==r&&r,a=void 0!==a&&a,e.s=t,e.I&&(t.video&&_l(e,t.video,n,i,r,a),t.audio&&_l(e,t.audio,n,i,r,a))}function bl(e,t){L(function(n){if(1==n.g)return e.F=null,e.B=t,e.I?t.segmentIndex?n.A(2):_(n,t.createSegmentIndex(),2):n.return();_l(e,t,!0,0,!1),w(n)})}function _l(e,t,n,i,r,a){var o=e.h.get(t.type);o||t.type!=nt?o&&(o.Pc&&(t.trickModeVideo?(o.Pc=t,t=t.trickModeVideo):o.Pc=null),o.stream!=t||r)&&(e.m.has(t)?o.ia=e.m.get(t):o.ia&&function(e,t){t&&t!==e.i&&(ol(e),e.i=t)}(o.ia,t),t.type==nt&&o.stream!=t&&(r=xi(t.mimeType,t.codecs),zs(e.g.ha,r,e.j.sequenceMode,t.external)),!e.m.has(o.stream)&&o.stream.closeSegmentIndex&&(o.Za?(r="("+o.type+":"+o.stream.id+")",e.J.has(r)||e.J.set(r,o.stream.closeSegmentIndex)):o.stream.closeSegmentIndex()),r=o.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,o.stream=t,o.Aa=null,o.Eg=!!a,t.dependencyStream?o.Hc=Tl(e,t.dependencyStream):o.Hc=null,r&&(o.ub=null,o.vc=null,o.uc=null,t.isAudioMuxedInVideo&&(t=null,"video"===o.type?t=e.h.get("audio"):"audio"===o.type&&(t=e.h.get("video")),t&&(Ol(t).catch(function(){}),t.ub=null,t.vc=null,t.uc=null,Sl(e,t),wl(e,t).catch(function(t){e.g&&e.g.onError(t)})))),n?o.Xc?o.vg=!0:o.Za?(o.Vc=!0,o.jf=i,o.vg=!0):(Nl(o),Dl(e,o,!0,i).catch(function(t){e.g&&e.g.onError(t)})):o.Za||o.Db||Rl(e,o,0),wl(e,o).catch(function(t){e.g&&e.g.onError(t)})):function(e,t){var n,i,r,a,o;L(function(s){switch(s.g){case 1:return n=it,e.O++,i=e.O,S(s,2),_(s,Qs(e.g.ha,n.$a),4);case 4:A(s,3);break;case 2:r=E(s),e.g&&e.g.onError(r);case 3:a=xi(t.mimeType,t.codecs),zs(e.g.ha,a,e.j.sequenceMode,t.external),(e.g.ha.Z.isTextVisible()||e.i.alwaysStreamText)&&e.O==i&&(o=Tl(e,t),e.h.set(n.$a,o),Rl(e,o,0)),w(s)}})}(e,t)}function wl(e,t){var n,i,r;return L(function(a){if(1==a.g)return t.Nb?(n=t.stream,i=t.Nb,n.segmentIndex?a.A(2):_(a,n.createSegmentIndex(),2)):a.return();if(4!=a.g)return!(r=n.dependencyStream)||r.segmentIndex?a.A(4):_(a,r.createSegmentIndex(),4);if(t.Nb!=i||t.stream!=n)return a.return();var o=e.g.ed(),s=qs(e.g.ha,t.type),u=t.stream.segmentIndex.find(t.Ra?t.Ra.endTime:o),l=null==u?null:t.stream.segmentIndex.get(u);u=l&&l.endByte?l.endByte-l.startByte:null,l&&!u&&(u=(l.endTime-l.getStartTime())*(t.stream.bandwidth||0)/8),u?((l=l.ea)&&(u+=(l.endByte?l.endByte-l.startByte:null)||0),o=8*u/(l=e.g.getBandwidthEstimate())<(s||0)-o-e.i.rebufferingGoal||t.Nb.h.g>u):o=!1,o&&t.Nb.abort(),w(a)})}function Sl(e,t){t.Xc||t.Vc||(t.Za?(t.Vc=!0,t.jf=0):null==Ys(e.g.ha,t.type)?null==t.Db&&Rl(e,t,0):(Nl(t),Dl(e,t,!1,0).catch(function(t){e.g&&e.g.onError(t)})))}function Tl(e,t){var n={stream:t,type:t.type,Aa:null,ia:Al(e,t),Ra:null,ub:null,Ff:null,vc:null,uc:null,Df:null,Ef:null,Pc:null,endOfStream:!1,Za:!1,Db:null,Vc:!1,jf:0,vg:!1,Xc:!1,od:!0,Eg:!1,Ph:!1,je:!1,Nb:null,Hc:null};return t.dependencyStream&&(n.Hc=Tl(e,t.dependencyStream)),n}function Al(e,t){if("video"===t.type&&e.i.disableVideoPrefetch||"audio"===t.type&&e.i.disableAudioPrefetch||t.type===nt&&("application/cea-608"==t.mimeType||"application/cea-708"==t.mimeType)||t.type===nt&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ia)&&t===n.i?n:0<e.i.segmentPrefetchLimit?new tl(e.i.segmentPrefetchLimit,t,function(t,n,i){return Ll(t,n,i||null,e.i.retryParameters,e.g.yc)},0>e.g.Xa()):null}function El(t,n){var i,r,a,o,s,u,h,c,d;return L(function(p){switch(p.g){case 1:if(aa(t.l),i=it,n.Za||null==n.Db||n.Xc)return p.return();if(n.Db=null,!n.Vc){p.A(2);break}return _(p,Dl(t,n,n.vg,n.jf),3);case 3:return p.return();case 2:if(function(e,t){for(var n=l(e.J.entries()),i=n.next();!i.done;i=n.next()){var r=l(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.J.delete(i))}}(t,n),n.stream.segmentIndex){p.A(4);break}return r=n.stream,S(p,5),_(p,n.stream.createSegmentIndex(),7);case 7:A(p,6);break;case 5:return a=E(p),_(p,Ul(t,n,a),8);case 8:return p.return();case 6:if(r!=n.stream)return r.closeSegmentIndex&&r.closeSegmentIndex(),n.Za||n.Db||Rl(t,n,0),p.return();case 4:if(!n.Hc){p.A(9);break}if(n.Hc.stream.segmentIndex){p.A(9);break}return S(p,11),_(p,n.Hc.stream.createSegmentIndex(),13);case 13:A(p,9);break;case 11:E(p);case 9:S(p,14),o=function(t,n){if(Ml(n))return function(e,t){var n=qs(e,"video")||0;Gi(e.h,t,n)}(t.g.ha,n.stream.originalId||""),null;if(n.type==nt&&function(e){e.h&&Gi(e.h,"",0)}(t.g.ha),n.stream.isAudioMuxedInVideo&&"audio"==n.type)return null;var i=t.i.updateIntervalSeconds/Math.max(1,Math.abs(t.g.Xa()));if(!Ws(t.g.ha)&&n.type!=nt)return i/2;var r=t.g.ed();if("audio"===n.type)for(var a=l(t.m.keys()),o=a.next();!o.done;o=a.next())(o=t.m.get(o.value)).hb(r,!0),il(o,r);a=n.Ra?n.Ra.endTime:r;var s=function(e,t,n){return t==nt?null==(e=e.h).h||e.h<n?0:e.h-Math.max(n,e.g):is(e=Zs(e,t),n)}(t.g.ha,n.type,r);o=Math.max(1,Math.max(t.i.rebufferingGoal,t.i.bufferingGoal)*t.D);var u=t.j.presentationTimeline.getDuration()-a,h=qs(t.g.ha,n.type);if(1e-6>u&&h)return n.endOfStream=!0,"video"==n.type&&(t=t.h.get(nt))&&Ml(t)&&(t.endOfStream=!0),null;if(n.endOfStream=!1,s>=o)return i/2;if(u=!n.Aa,h=function(e,t,n,i){if(t.Aa)return(n=t.Aa.current())&&t.Ra&&.001>Math.abs(t.Ra.startTime-n.startTime)&&(n=t.Aa.next().value),n;if(t.Ra||i)return n=t.Ra?t.Ra.endTime:i,e=0>e.g.Xa(),t.stream.segmentIndex&&(t.Aa=t.stream.segmentIndex.cc(n,!1,e)),t.Aa&&t.Aa.next().value;i=e.j.sequenceMode||Fl(e)?0:e.i.inaccurateManifestTolerance;var r=Math.max(n-i,0);e=0>e.g.Xa();var a=null;return i&&(t.stream.segmentIndex&&(t.Aa=t.stream.segmentIndex.cc(r,!1,e)),a=t.Aa&&t.Aa.next().value),a||(t.stream.segmentIndex&&(t.Aa=t.stream.segmentIndex.cc(n,!1,e)),a=t.Aa&&t.Aa.next().value),a}(t,n,r,h),!h)return i;s=n.ub;var c=h.ea;s&&c&&Yo(c,s)&&(s.g=c.g),s=!1,u&&n.Eg&&(s=!0,n.Eg=!1),u=1/0;for(var d=(c=l(c=Array.from(t.h.values()))).next();!d.done;d=c.next())Ml(d=d.value)||d.Aa&&!d.Aa.current()||(u=Math.min(u,d.Ra?d.Ra.endTime:r));return a>=u+t.j.presentationTimeline.h?i:(n.ia&&n.Aa&&!t.m.has(n.stream)&&(n.ia.hb(h.startTime+.001),il(n.ia,h.startTime).catch(function(){})),Fl(t)&&function(e,t,n){if(t.type===nt)return!1;var i=t.ub;if(!i)return!1;var r=n.ea;if(n=i.g!==r.g,"reset_to_encrypted"===e.i.crossBoundaryStrategy&&(i.encrypted||r.encrypted||(n=!1),i.encrypted&&(e.i.crossBoundaryStrategy="keep")),"RESET_ON_ENCRYPTION_CHANGE"===e.i.crossBoundaryStrategy&&i.encrypted==r.encrypted&&(n=!1),n&&t.od){var a=e.g.video,o=a.paused;Bl(e,!0).then(function(){var t=(new Map).set("oldEncrypted",i.encrypted).set("newEncrypted",r.encrypted);e.g.onEvent(new V("boundarycrossed",t)),o||a.play()})}return n}(t,n,h)||(function(t,n,i,r,a){var o,s,u,h,c,d,p,f,g,m,v,y,b,T,x,C;return L(function(k){switch(k.g){case 1:if(o=it,s=n.stream,u=n.Aa,n.Za=!0,S(k,2),2==r.Lc())throw new Ce(1,1,1011);return _(k,function(e,t,n,i){var r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w;return L(function(T){switch(T.g){case 1:if(r=it,a=null==t.Ra,o=[],s=Math.max(0,Math.max(n.appendWindowStart,e.U)-.1),u=Math.min(n.appendWindowEnd,e.R)+.1,h=n.codecs||t.stream.codecs,c=Pi(h),d=Li(n.mimeType||t.stream.mimeType),(p=n.timestampOffset)==t.Ff&&s==t.vc&&u==t.uc&&c==t.Df&&d==t.Ef){T.A(2);break}if(f=t.Df&&t.Ef&&function(e,t,n,i,r){return(e=du(e,t,n,i,r)).mc&&e.mc.destroy(),e.type==mu}(e.g.ha,t.type,d,h,Gl(e)),!f){T.A(3);break}if(g=null,t.type===r.Ha?g=e.h.get(r.ma):t.type===r.ma&&(g=e.h.get(r.Ha)),!g){T.A(3);break}return _(T,Ol(g).catch(function(){}),5);case 5:g.ub=null,g.vc=null,g.uc=null,Sl(e,g);case 3:return _(T,Cl(e,t,p,s,u,n,c,d),2);case 2:return Yo(n.ea,t.ub)||(t.ub=n.ea,n.l&&n.ea&&(m=Pl(e,t,n.ea),v=function(){var a,o,s,u,h,c,d,p,f;return L(function(g){switch(g.g){case 1:return S(g,2),_(g,m,4);case 4:return a=g.h,aa(e.l),o=null,s=new Map,u={projection:null,hfov:null},(h=new ca).box("moov",da).box("trak",da).box("mdia",da).V("mdhd",function(e){o=po(e.reader,e.version).timescale}).box("hdlr",function(e){switch((e=e.reader).skip(8),e.ld()){case"soun":s.set(r.ma,o);break;case"vide":s.set(r.Ha,o)}o=null}),t.type===r.Ha&&h.box("minf",da).box("stbl",da).V("stsd",pa).box("encv",fa).box("avc1",fa).box("avc3",fa).box("hev1",fa).box("hvc1",fa).box("dvav",fa).box("dva1",fa).box("dvh1",fa).box("dvhe",fa).box("dvc1",fa).box("dvi1",fa).box("vexu",da).box("proj",da).V("prji",function(e){e=e.reader.ld(),u.projection=e}).box("hfov",function(e){e=e.reader.W()/1e3,u.hfov=e}),h.parse(a,!0,!0),t.type===r.Ha&&function(e,t){if(e.N.projection!=t.projection||e.N.hfov!=t.hfov){if(null!=t.projection||null!=t.hfov){var n=(new Map).set("detail",t);n=new V("spatialvideoinfo",n)}else n=new V("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.N=t}}(e,u),s.has(t.type)?n.ea.timescale=s.get(t.type):null!=o&&(n.ea.timescale=o),(c=t.stream.segmentIndex)instanceof zu&&(d=function(e,t){for(var n=(e=l(e.h)).next();!n.done;n=e.next())if(null!=(n=n.value).find(t))return n.kf();return-1}(c,n.startTime)),p=t.stream.closedCaptions&&0<t.stream.closedCaptions.size,_(g,e.g.Ei(t.type,a),5);case 5:return _(g,Js(e.g.ha,t.type,a,null,t.stream,p,t.od,i,!1,!1,d),6);case 6:A(g,0);break;case 2:throw f=E(g),t.ub=null,f}})},y=n.startTime,a&&null!=(b=qs(e.g.ha,t.type))&&(y=b),e.g.Ol(y,n.ea),o.push(v()))),w=t.Ra?t.Ra.i:-1,n.i!=w&&o.push(function(e,t,n){var i,r;return L(function(a){return 1==a.g?t==(i=it).$a?a.return():(t==i.Ha&&(e.Na=new Br),!e.G||(r=qs(e,t))&&.15>Math.abs(r-n)?a.return():(ou(e,t,function(){return nu(e,t)},null),e.m&&ou(e,i.ma,function(){return nu(e,i.ma)},null),_(a,ou(e,t,function(){return iu(e,t,n)},null),2))):e.m?_(a,ou(e,i.ma,function(){return iu(e,i.ma,n)},null),0):a.A(0)})}(e.g.ha,t.type,n.startTime)),_(T,Promise.all(o),0)}})}(t,n,r,a),4);case 4:return aa(t.l),t.C?k.return():(h="video/mp4"==s.mimeType||"audio/mp4"==s.mimeType,c=e.ReadableStream,t.i.lowLatencyMode&&t.j.isLowLatency&&c&&h&&("HLS"!=t.j.type||r.m)?(p=new Uint8Array(0),g=f=!1,v=function(e){var o,u,l;return L(function(h){switch(h.g){case 1:if(f)return h.return();if(g=!0,aa(t.l),t.C)return h.return();if(S(h,2),p=qe(p,e),o=!1,u=0,(new ca).box("mdat",function(e){u=e.size+e.start,o=!0}).parse(p,!1,!0),!o){h.A(4);break}return l=p.subarray(0,u),p=p.subarray(u),_(h,kl(t,n,i,s,r,l,!0,a),5);case 5:n.ia&&n.Aa&&il(n.ia,r.startTime,!0);case 4:A(h,0);break;case 2:m=E(h),w(h)}})},_(k,Pl(t,n,r,v),9)):_(k,Pl(t,n,r),7));case 7:return d=k.h,aa(t.l),t.C?k.return():(aa(t.l),n.Vc?(n.Za=!1,Rl(t,n,0),k.return()):_(k,kl(t,n,i,s,r,d,!1,a),6));case 9:if(y=k.h,m)throw m;if(g){k.A(10);break}return f=!0,aa(t.l),t.C?k.return():n.Vc?(n.Za=!1,Rl(t,n,0),k.return()):_(k,kl(t,n,i,s,r,y,!1,a),10);case 10:n.ia&&n.Aa&&il(n.ia,r.startTime,!0);case 6:if(aa(t.l),t.C)return k.return();n.Ra=r,u.next(),n.Za=!1,n.Ph=!1,b=t.g.ha.bc(),T=b[n.type],JSON.stringify(T),n.Vc||(x=null,n.type===o.Ha?x=t.h.get(o.ma):n.type===o.ma&&(x=t.h.get(o.Ha)),x&&x.type==o.ma?t.g.Pf(r,n.stream,x.stream.isAudioMuxedInVideo):t.g.Pf(r,n.stream,n.stream.codecs.includes(","))),Nl(n),Rl(t,n,0),A(k,0);break;case 2:if(C=E(k),aa(t.l,C),t.C)return k.return();if(n.Za=!1,7001==C.code)n.Za=!1,Nl(n),Rl(t,n,0),k.A(0);else{if(n.type!=o.$a||!t.i.ignoreTextStreamFailures)return 3017==C.code?_(k,function(e,t,n){var i,r,a;return L(function(o){if(1==o.g){if(Array.from(e.h.values()).some(function(e){return e!=t&&e.Ph}))return o.A(2);if(i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,e.g.disableStream(t.stream,i))return o.return();if(e.i.avoidEvictionOnQuotaExceededError)return Rl(e,t,4),o.return();if(20<(r=Math.round(100*e.D)))e.D-=.2;else{if(!(4<r))return t.je=!0,e.C=!0,e.g.onError(n),o.return();e.D-=.04}return t.Ph=!0,a=e.g.ed(),_(o,Il(e,t,a),2)}Rl(e,t,4),w(o)})}(t,n,C),0):(n.je=!0,1==C.category&&n.ia&&ll(n.ia,r),C.severity=2,_(k,Ul(t,n,C),0));t.h.delete(o.$a),k.A(0)}}})}(t,n,r,h,s).catch(function(){}),n.Hc&&xl(t,n.Hc,r,o)),null)}(t,n),null!=o&&(Rl(t,n,o),n.je=!1),A(p,15);break;case 14:return s=E(p),_(p,Ul(t,n,s),16);case 16:return p.return();case 15:if(n.type===i.$a)return p.return();if(u=[n],h=n.type===i.ma?i.Ha:i.ma,(c=t.h.get(h))&&u.push(c),!t.I||!u.every(function(e){return e.endOfStream})){p.A(0);break}return _(p,t.g.ha.endOfStream(),18);case 18:aa(t.l),0!=(d=t.g.ha.getDuration())&&d<t.j.presentationTimeline.getDuration()&&t.j.presentationTimeline.wb(d),w(p)}})}function xl(e,t,n,i){var r,a,o,s,u,l,c,d,p,f;return L(function(g){switch(g.g){case 1:for(r=t.stream,s=(o=(a=r.segmentIndex)&&a.cc(n))&&o.next().value;s&&e.K.includes(s.startTime);)s=o&&o.next().value;if(!s){g.A(0);break}if(!(u=s.ea)||Yo(u,t.ub)){g.A(3);break}return t.ub=u,S(g,4),_(g,Pl(e,t,u),6);case 6:l=g.h;var m=e.g.ha;m.L&&Dt(m.L,l,0,r),e.K=[],A(g,3);break;case 4:throw c=E(g),t.ub=null,c;case 3:if(t.Ra&&t.Ra==s){g.A(0);break}return t.Ra=s,S(g,8),_(g,Pl(e,t,s),10);case 10:d=g.h,(m=e.g.ha).L&&Dt(m.L,d,0,r),e.K.push(s.startTime),A(g,9);break;case 8:throw p=E(g),t.Ra=null,p;case 9:if(f=Math.max.apply(Math,[0].concat(h(e.K))),e.g.ed()+i>f)return _(g,xl(e,t,s.startTime,i),0);g.A(0)}})}function Cl(e,t,n,i,r,a,o,s){var u,l,h,c,d;return L(function(p){switch(p.g){case 1:if(u=it,l=Gl(e),S(p,2),t.vc=i,t.uc=r,o&&(t.Df=o),s&&(t.Ef=s),t.Ff=n,h=e.j.sequenceMode||"HLS"==e.j.type,c=null,t.type===u.Ha?c=e.h.get(u.ma):t.type===u.ma&&(c=e.h.get(u.Ha)),!(c&&c.stream&&c.stream.isAudioMuxedInVideo)){p.A(4);break}return _(p,$s(e.g.ha,c.type,n,i,r,h,c.stream.mimeType,c.stream.codecs,l),4);case 4:return _(p,$s(e.g.ha,t.type,n,i,r,h,a.mimeType||t.stream.mimeType,a.codecs||t.stream.codecs,l),6);case 6:A(p,0);break;case 2:throw d=E(p),t.vc=null,t.uc=null,t.Df=null,t.Ef=null,t.Ff=null,d}})}function kl(e,t,n,i,r,a,o,s){var u,l,h,c;return o=void 0!==o&&o,s=void 0!==s&&s,L(function(d){switch(d.g){case 1:return u=i.closedCaptions&&0<i.closedCaptions.size,e.i.shouldFixTimestampOffset&&(l="video/mp4"==i.mimeType||"audio/mp4"==i.mimeType,h=null,r.ea&&(h=r.ea.timescale),l&&h&&"video"===i.type&&"DASH"==e.j.type&&(new ca).box("moof",da).box("traf",da).V("tfdt",function(n){var i,a,o,s,u;return L(function(l){return i=co(n.reader,n.version),(a=i.baseMediaDecodeTime)?(o=-a/h,(Number(t.Ff)||0)<o?(s=t.vc,u=t.uc,_(l,Cl(e,t,o,s,u,r),0)):l.A(0)):l.return()})}).parse(a,!1,o)),_(d,Il(e,t,n),2);case 2:return aa(e.l),c=t.od,t.od=!1,_(d,e.g.Ei(t.type,a),3);case 3:return _(d,Js(e.g.ha,t.type,a,r,i,u,c,s,o),4);case 4:aa(e.l),w(d)}})}function Il(e,t,n){var i,r,a,o,s,u,h,c,d;return L(function(p){return 1==p.g?((i=t.stream.segmentIndex)instanceof zu&&(i.hb(e.j.presentationTimeline.Lb()),r=[],function(e,t){for(var n=(e=l(e.h)).next();!n.done;n=e.next())t(n.value)}(i,function(e){r.push(e.kf())})),a=Math.max(e.i.bufferBehind*e.D,e.j.presentationTimeline.h),null==(o=Ys(e.g.ha,t.type))?(e.F==t&&(e.F=null),p.return()):(s=n-o,u=e.i.evictionGoal,h=e.j.presentationTimeline.dc(),c=e.j.presentationTimeline.Kb(),d=s-a,c-h>u&&(d=Math.max(s-a,h-u-o)),d<=u?p.return():_(p,e.g.ha.remove(t.type,o,o+d,r),2))):4!=p.g?(aa(e.l),e.F?_(p,Il(e,e.F,n),4):p.A(0)):(aa(e.l),void w(p))})}function Ml(e){return e&&e.type==nt&&("application/cea-608"==e.stream.mimeType||"application/cea-708"==e.stream.mimeType)}function Pl(e,t,n,i){var r,a,o,s,u;return L(function(l){switch(l.g){case 1:if(r=n.ec())return l.return(r);if(a=null,t.ia){var h=t.ia,c=h.h;n instanceof Xo&&(c=h.j),c.has(n)?(h=c.get(n),i&&(h.ji=i),a=h.ve):a=null}return a||(a=Ll(n,t.stream,i||null,e.i.retryParameters,e.g.yc)),o=0,t.Aa&&(o=t.Aa.h),t.Nb=a,_(l,a.promise,2);case 2:if(s=l.h,t.Nb=null,u=s.data,!n.aesKey){l.A(3);break}return _(l,fl(u,n.aesKey,o),4);case 4:u=l.h;case 3:return l.return(u)}})}function Ll(e,t,n,i,r,a){a=void 0!==a&&a;var o=e instanceof qo?e:void 0,s=o?1:0;return(e=gl(e.S(),e.startByte,e.endByte,i,n)).contentType=t.type,r.request(ta,e,{type:s,stream:t,segment:o,isPreload:a})}function Dl(e,t,n,i){var r,a;return L(function(o){return 1==o.g?(t.Vc=!1,t.vg=!1,t.jf=0,t.Xc=!0,t.Ra=null,t.Aa=null,t.ia&&!e.m.has(t.stream)&&ol(t.ia),i?(r=e.g.ed(),a=e.g.ha.getDuration(),_(o,e.g.ha.remove(t.type,r+i,a),3)):_(o,Qs(e.g.ha,t.type),4)):3!=o.g?(aa(e.l),n?_(o,e.g.ha.flush(t.type),3):o.A(3)):(aa(e.l),t.Xc=!1,t.endOfStream=!1,t.Za||t.Db||Rl(e,t,0),void w(o))})}function Rl(e,t,n){var i=t.type;(i!=nt||e.h.has(i))&&(t.Db=new Wi(function(){var n;return L(function(i){return 1==i.g?(S(i,2),_(i,El(e,t),4)):2!=i.g?A(i,0):(n=E(i),e.g&&e.g.onError(n),void w(i))})}).X(n))}function Nl(e){null!=e.Db&&(e.Db.stop(),e.Db=null)}function Ol(e){return L(function(t){return e.Nb?_(t,e.Nb.abort(),0):t.A(0)})}function Ul(e,t,n){var i;return L(function(r){if(1==r.g)return 3024==n.code?(t.Za=!1,Nl(t),Rl(e,t,0),r.return()):_(r,Or(e.P),2);if(aa(e.l),1===n.category&&1003!=n.code){if(t.Pc)return vl(e,!1),r.return();i=0===e.i.maxDisabledTime&&1011==n.code?1:e.i.maxDisabledTime,n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}n.handled&&1011==n.code||e.g.onError(n),n.handled||e.i.failureCallback(n),w(r)})}function Bl(e,t){t=void 0!==t&&t;var n,i,r,a,o,s=void 0===s||s;return L(function(u){if(1==u.g){if(n=Date.now()/1e3,i=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.L<i)return u.return(!1);e.L=n}return r=it,(a=e.h.get(r.ma))&&(a.ub=null,a.vc=null,a.uc=null,s&&Sl(e,a),Ol(a).catch(function(){}),a.Aa&&a.Aa.Sh(),Nl(a)),(o=e.h.get(r.Ha))&&(o.ub=null,o.vc=null,o.uc=null,s&&Sl(e,o),Ol(o).catch(function(){}),o.Aa&&o.Aa.Sh(),Nl(o)),_(u,hu(e.g.ha,Gl(e)),2)}return!o||o.Xc||o.Za||o.Db||Rl(e,o,0),!a||a.Xc||a.Za||a.Db||Rl(e,a,0),u.return(!0)})}function Fl(e){return"keep"!==e.i.crossBoundaryStrategy}function jl(e){if(Fl(e)){e.H.stop();var t=e.g.ed(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.ub)&&null!==n.g&&(0>(t=n.g-t)||1<t||(e.G=n.g+.1,e.H.X(t)))}}function Gl(e,t){t=void 0!==t&&t;var n=new Map;return e.s.audio&&n.set("audio",e.s.audio),e.s.video&&n.set("video",e.s.video),t&&e.B&&n.set(nt,e.B),n}function Hl(){}function Vl(e,t,n,i,r){var a,o=r in i,s=o?n.constructor==Object&&0==Object.keys(i).length:n.constructor==Object&&0==Object.keys(n).length,u=o||s,l=!0;for(a in t){var h=r+"."+a,c=o?i[r]:n[a];u||a in n?void 0===t[a]?void 0===c||u?delete e[a]:e[a]=hn(c):s?e[a]=t[a]:c.constructor==Object&&t[a]&&t[a].constructor==Object?(e[a]||(e[a]=hn(c)),h=Vl(e[a],t[a],c,i,h),l=l&&h):typeof t[a]!=typeof c||null==t[a]||"function"!=typeof t[a]&&t[a].constructor!=c.constructor?(X("Invalid config, wrong type for "+h),l=!1):"function"==typeof n[a]&&n[a].length!=t[a].length?(Y("Unexpected number of arguments for "+h),e[a]=t[a]):e[a]=Array.isArray(e[a])?t[a].slice():t[a]:(X("Invalid config, unrecognized key "+h),l=!1)}return l}function Wl(e,t){for(var n={},i=n,r=0,a=0;!(0>(r=e.indexOf(".",r)));)0!=r&&"\\"==e[r-1]||(i[a=e.substring(a,r).replace(/\\\./g,".")]={},i=i[a],a=r+1),r+=1;return i[e.substring(a).replace(/\\\./g,".")]=t,n}function zl(e,t){return e&&t}function Kl(e,t){function n(e){return e&&"object"==typeof e&&!Array.isArray(e)}return e=function e(t,i){return Object.keys(t).reduce(function(r,a){var o=t[a];return i.hasOwnProperty(a)?o instanceof HTMLElement&&i[a]instanceof HTMLElement?o.isEqualNode(i[a])||(r[a]=o):n(o)&&n(i[a])?(o=e(o,i[a]),(0<Object.keys(o).length||!n(o))&&(r[a]=o)):Array.isArray(o)&&Array.isArray(i[a])?$t(o,i[a])||(r[a]=o):Number.isNaN(o)&&Number.isNaN(i[a])||o!==i[a]&&(r[a]=o):r[a]=o,r},{})}(e,t),function e(t){for(var i=l(Object.keys(t)),r=i.next();!r.done;r=i.next())if(!(t[r=r.value]instanceof HTMLElement))if(n(t[r])&&0===Object.keys(t[r]).length)delete t[r];else{var a=t[r];Array.isArray(a)&&0===a.length||"function"==typeof t[r]?delete t[r]:n(t[r])&&(e(t[r]),0===Object.keys(t[r]).length&&delete t[r])}}(e),e}function Xl(){}function Yl(e){return new re(e=Ue(e)).Gb}function ql(e,t,n){function i(e){Ee(a).setUint32(o,e.byteLength,!0),o+=4,a.set(Te(e),o),o+=e.byteLength}if(!n||!n.byteLength)throw new Ce(2,6,6015);var r;r="string"==typeof t?Fe(t,!0):t,e=Fe(e=Ue(e),!0);var a=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),o=0;return i(e),i(r),i(n),a}function Zl(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,ql(e,n=Ue(e).split("skd://").pop(),t))}function Jl(e,t){2===e&&(e=t.drmInfo)&&Pr(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}function Ql(){this.g=null}function $l(e,t){return e.filter(function(e){return!(e.audio&&e.audio.channelsCount&&e.audio.channelsCount>t)}).sort(function(e,t){return e.audio||t.audio?e.audio?t.audio?(t.audio.channelsCount||0)-(e.audio.channelsCount||0):1:-1:0})}function eh(e,t){return e.filter(function(e){return!e.audio||e.audio.codecs==t})}function th(){}function nh(){var t=1/0,n=Me();navigator.connection&&navigator.connection.saveData&&(t=360);var i={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(t,n,i){return"apple"===e.shakaMediaKeysPolyfill&&"skd"==n&&(n=i.serverCertificate,t=ql(t,i=Yl(t),n)),t},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},r="reload",a=!1;Ut()&&n.sd()&&(r="smooth",a=!0);var o={trackSelectionCallback:function(e){return L(function(t){return t.return(e)})},downloadSizeCallback:function(e){var t;return L(function(n){return 1==n.g?navigator.storage&&navigator.storage.estimate?_(n,navigator.storage.estimate(),3):n.return(!0):(t=n.h,n.return(t.usage+e<.95*t.quota))})},progressCallback:function(e,t){return zl([e,t])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:i,manifest:a={retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:rh,manifestPreprocessorTXml:ah,sequenceMode:!1,multiTypeVariantsAllowed:a,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:n.rd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:rh,manifestPreprocessorTXml:ah,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},streaming:{retryParameters:{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4},failureCallback:function(e){return zl([e])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:r,addExtraFeaturesToSourceBuffer:function(e){return zl([e],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(e,t){return zl([e,t])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:o,abrFactory:function(){return new Ar},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(Ql,[null].concat(h(D.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:t,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!0},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:30,repeatMode:0}};return o.trackSelectionCallback=function(e){return L(function(t){return t.return(function(e,t,n){var i=n;"AUTO"==i&&(n=e.some(function(e){return!(!e.hdr||"HLG"!=e.hdr)}),i=pv(n));var r=e.filter(function(e){return!("variant"!=e.type||e.hdr&&e.hdr!=i)});n=[];var a=gt(t,r.map(function(e){return e.language}));a&&(n=r.filter(function(e){return ht(e.language)==a})),0==n.length&&(n=r.filter(function(e){return e.primary})),0==n.length&&(r.map(function(e){return e.language}),n=r);var o=n.filter(function(e){return e.height&&480>=e.height});for(o.length&&(o.sort(function(e,t){return t.height-e.height}),n=o.filter(function(e){return e.height==o[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(e,t){return e.bandwidth-t.bandwidth}),t.push(n[r])),n=(e=l(e)).next();!n.done;n=e.next())(n=n.value).type!=nt&&"image"!=n.type||t.push(n);return t}(e,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},n.ab(s)}function ih(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return Vl(e,t,n||nh(),i,"")}function rh(e){return zl([e],e)}function ah(e){return zl([e],e)}function oh(){this.g=null,this.h=[]}function sh(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration);for(var i=(e=l(e.h)).next();!i.done;i=e.next())n+=(i=i.value).state==t?i.duration:0;return n}function uh(){this.i=this.h=null,this.g=[]}function lh(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function hh(){this.C=this.U=NaN,this.l="",this.j=this.dj=this.u=this.B=this.J=this.D=this.s=this.m=this.I=this.F=this.i=this.P=this.R=this.L=this.N=this.O=NaN,this.K=0,this.G=this.H=NaN,this.g=new oh,this.h=new uh}function ch(e,t,n){e.U=t,e.C=n}function dh(e,t){e.j=isNaN(e.j)?t:e.j+t}function ph(e,t,n,i){$.call(this),this.N=e,this.U=t,this.La=i.networkingEngine,this.m=n,this.C=null,this.Ia=0,this.Ya=i.yd,this.G=i.Hl,this.eb=i.Il,this.g=i.config,this.l=this.H=this.h=null,this.qa=!1,this.I=i.Tl,this.sa=!1,this.i=null,this.ba=!1,this.j=this.F=null,this.Z=!1,this.L=new Map,this.ua=!1,this.Na=i.Sl,this.Y=new hh,this.na=new Br,this.B=new Br,this.O=null,this.u=!1,this.$=i.gk,this.R=this.s=null,this.Ta=i.fk,this.P=!1,this.K=[],this.J=[],this.D=!0}function fh(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function gh(e,t){if(e.O=t,e.P=!0,e.K)for(var n=(t=l(e.K)).next();!n.done;n=t.next())(n=n.value)();e.K=null}function mh(e){if(e.u)throw new Ce(2,7,7003)}function vh(e,t){e.dispatchEvent(new V("onstatechange",(new Map).set("state",t)))}function yh(e,t){var n,i,r;return L(function(a){switch(a.g){case 1:return!e.h||e.i?a.return():(vh(e,"drm-engine"),e.Ia=Date.now()/1e3,e.i=e.Ya(),e.G.h=e.i,e.i.configure(e.g.drm,function(){return e.D}),n=pr(e.h.variants),i=!0,e.h&&e.h.presentationTimeline&&(i=e.h.presentationTimeline.T()),_(a,Ea(e.i,n,e.h.offlineSessionIds,i),2));case 2:if(mh(e),!t){a.A(3);break}return _(a,e.i.ac(t),4);case 4:mh(e);case 3:return _(a,eo(e.G,e.h),5);case 5:if(!a.h){a.A(0);break}return r=new V("trackschanged",void 0),_(a,Promise.resolve(),7);case 7:e.dispatchEvent(r),w(a)}})}function bh(e){var t=pr(e.h.variants);return t=e.C.create(t),e.j.configure(e.g.abr),e.j.setVariants(Array.from(t.values())),e.j.chooseVariant()}function _h(e,t,n){var i,r,a,o,s;return L(function(u){return 1==u.g?(i=e.g.streaming.segmentPrefetchLimit||2,r=new tl(i,t,function(t,n,i){return Ll(t,n,i||null,e.g.streaming.retryParameters,e.La,e.D)},!1),e.L.set(t.id,r),t.segmentIndex?u.A(2):_(u,t.createSegmentIndex(),2)):(a="number"==typeof e.m?e.m:0,o=t.segmentIndex.cc(a),s=null,o&&((s=o.current())||(s=o.next().value)),s||(s=Hu(t.segmentIndex)),s?n?s.ea?_(u,rl(r,s.ea),0):u.A(0):_(u,il(r,s.startTime),0):u.A(0))})}function wh(e,t){$.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{wd:null,vd:Ah,gd:function(e,t){return Sh(n,"enter",e,t)}},{wd:Th,vd:Ah,gd:function(e,t){return Sh(n,"enter",e,t)}},{wd:Eh,vd:Ah,gd:function(e,t){return Sh(n,"enter",e,t)}},{wd:Ah,vd:Th,gd:function(e,t){return Sh(n,"exit",e,t)}},{wd:Ah,vd:Eh,gd:function(e,t){return Sh(n,"exit",e,t)}},{wd:Th,vd:Eh,gd:function(e,t){t?Sh(n,"skip",e,t):(Sh(n,"enter",e,t),Sh(n,"exit",e,t))}},{wd:Eh,vd:Th,gd:function(e,t){return Sh(n,"skip",e,t)}}],this.h=new At,this.h.o(this.i,"regionremove",function(e){n.g.delete(e.region)})}function Sh(e,t,n,i){t=new V(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}xu.prototype.release=function(){this.h&&(this.h.release(),this.h=null),null!=this.i&&(this.i.release(),this.i=null),this.m=function(){},this.g=null},Pu.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},(i=Du.prototype).ready=function(){var e=this;Au(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){!function(){if(null==e.h||0==e.h&&1/0!=e.g.duration)e.i=!0;else{var t=e.g.currentTime,n=null;if("number"==typeof e.h)n=e.h;else if(e.h instanceof Date){var i=Ru(e);null!==i&&(n=e.h.getTime()/1e3-i,n=Nu(e,n))}null==n?e.i=!0:(0>n&&(n=Math.max(0,t+n)),t!=n?(e.j.ra(e.g,"seeking",function(){e.i=!0}),e.g.currentTime=n):e.i=!0)}}()})},i.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},i.yg=function(e){this.h=this.i?this.h:e},i.We=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=Nu(this,e=e.getTime()/1e3-(Ru(this)||0))),e||0},i.wi=function(){return 0},i.ti=function(){return 0},i.lj=function(){},i.$i=function(){var e=ts(this.g.buffered);return null!=e&&e>=this.g.duration-1},(i=Ou.prototype).ready=function(){this.m.ya(.25)},i.release=function(){this.i&&(this.i.release(),this.i=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.h=this.i=this.g=this.l=null,this.u=function(){}},i.yg=function(e){ku(this.i,Uu(this,e))},i.We=function(){var e=Cu(this.i);return 0<this.h.readyState&&!this.h.paused?ju(this,e):e},i.wi=function(){return this.j.G},i.ti=function(){return this.j.D},i.lj=function(){this.j.Pf()},i.$i=function(){if(this.g.T()){var e=this.g.Jc(),t=ts(this.h.buffered);if(null!=t&&t>=e)return!0}return!1},(i=Gu.prototype).getNumReferences=function(){return this.g.length},i.getNumEvicted=function(){return this.i},i.release=function(){this.s||(this.g=[],this.m&&this.m.stop(),this.m=null)},i.Kl=function(){this.s=!0},i.Ib=function(e){for(var t=l(this.g),n=t.next();!n.done;n=t.next())e(n.value)},i.find=function(e){for(var t=this.g.length-1,n=t;0<=n;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},i.get=function(e){return 0==this.g.length||0>(e-=this.i)||e>=this.g.length?null:this.g[e]},i.offset=function(e){if(!this.s)for(var t=l(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},i.If=function(e){if(!this.s&&e.length){var t=Math.round(1e3*e[0].startTime)/1e3;this.g=this.g.filter(function(e){return Math.round(1e3*e.startTime)/1e3<t}),this.g.push.apply(this.g,h(e))}},i.re=function(e,t){var n=this;e=e.filter(function(e){return e.endTime>t&&(0==n.g.length||e.endTime>n.g[0].startTime)}),this.If(e),this.hb(t)},i.hb=function(e){if(!this.s){var t=this.g.length;this.g=this.g.filter(function(t){return t.endTime>e}),this.i+=t-this.g.length}},i.Cd=function(e,t,n){if(n=void 0!==n&&n,!this.s){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;0!=this.g.length&&((t=new qo((e=this.g[this.g.length-1]).startTime,t,e.D,e.startByte,e.endByte,e.ea,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.C,e.h,e.status,e.aesKey)).mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},i.ng=function(e,t){var n=this;this.s||(this.m&&this.m.stop(),this.m=new zi(function(){var e=t();e?n.g.push.apply(n.g,h(e)):(n.m.stop(),n.m=null)}),this.m.ya(e))},Gu.prototype[Symbol.iterator]=function(){return this.cc(0)},Gu.prototype.cc=function(e,t,n){t=void 0!==t&&t,n=void 0!==n&&n;var i=this.find(e);if(null==i)return null;var r=this.get(i);n?i++:i--;var a=-1;if(r&&0<r.g.length)for(var o=r.g.length-1;0<=o;--o){var s=r.g[o];if(e>=s.startTime&&e<s.endTime){if(!t){for(;o&&!s.l;)o--,s=r.g[o];if(!s.l)return X("No independent partial segment found!"),null}n?i--:i++,a=o-1;break}}return new Wu(this,i,a,n)},Gu.prototype.kf=function(){return-1},H("shaka.media.SegmentIndex",Gu),Gu.forSingleSegment=Vu,Gu.prototype.getIteratorForTime=Gu.prototype.cc,Gu.prototype.updateEvery=Gu.prototype.ng,Gu.prototype.fit=Gu.prototype.Cd,Gu.prototype.evict=Gu.prototype.hb,Gu.prototype.mergeAndEvict=Gu.prototype.re,Gu.prototype.offset=Gu.prototype.offset,Gu.prototype.get=Gu.prototype.get,Gu.prototype.find=Gu.prototype.find,Gu.prototype.markImmutable=Gu.prototype.Kl,Gu.prototype.release=Gu.prototype.release,Gu.prototype.getNumEvicted=Gu.prototype.getNumEvicted,Gu.prototype.getNumReferences=Gu.prototype.getNumReferences,(i=Wu.prototype).Td=function(e){this.reverse=e},i.pk=function(){return this.h},i.current=function(){var e=this.i.get(this.h);return e&&0<e.g.length&&e.B&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&0<e.g.length?e.g[this.g]:e},i.next=function(){var e=this.i.get(this.h);return this.reverse?e&&0<e.g.length?(this.g--,0>this.g&&(this.h--,this.g=(e=this.i.get(this.h))&&0<e.g.length?e.g.length-1:0)):(this.h--,this.g=0):e&&0<e.g.length?(this.g++,e.B&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),{value:e=this.current(),done:!e}},i.Sh=function(){var e=this.current();if(e.s&&!e.l&&(e=this.i.get(this.h))&&0<e.g.length)for(var t=e.g[this.g];t.l&&!(0>=this.g);)this.g--,t=e.g[this.g]},H("shaka.media.SegmentIterator",Wu),Wu.prototype.resetToLastIndependent=Wu.prototype.Sh,Wu.prototype.next=Wu.prototype.next,Wu.prototype.current=Wu.prototype.current,Wu.prototype.currentPosition=Wu.prototype.pk,Wu.prototype.setReverse=Wu.prototype.Td,m(zu,Gu),(i=zu.prototype).clone=function(){var e=new zu;return e.h=this.h.slice(),e.i=this.i,e},i.release=function(){for(var e=l(this.h),t=e.next();!t.done;t=e.next())t.value.release();this.h=[]},i.Ib=function(e){for(var t=l(this.h),n=t.next();!n.done;n=t.next())n.value.Ib(e)},i.find=function(e){for(var t=this.i,n=l(this.h),i=n.next();!i.done;i=n.next()){var r=(i=i.value).find(e);if(null!=r)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null},i.get=function(e){for(var t=this.i,n=l(this.h),i=n.next();!i.done;i=n.next()){var r=(i=i.value).get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},i.offset=function(){},i.If=function(){},i.hb=function(e){for(var t=l(this.h),n=t.next();!n.done;n=t.next())n.value.hb(e);for(;1<this.h.length&&0==this.h[0].getNumReferences();)e=this.h.shift(),this.i+=e.getNumEvicted(),e.release()},i.re=function(){},i.Cd=function(){},i.ng=function(){},H("shaka.media.MetaSegmentIndex",zu),zu.prototype.updateEvery=zu.prototype.ng,zu.prototype.fit=zu.prototype.Cd,zu.prototype.mergeAndEvict=zu.prototype.re,zu.prototype.evict=zu.prototype.hb,zu.prototype.merge=zu.prototype.If,zu.prototype.offset=zu.prototype.offset,zu.prototype.get=zu.prototype.get,zu.prototype.find=zu.prototype.find,zu.prototype.forEachTopLevelReference=zu.prototype.Ib,zu.prototype.release=zu.prototype.release,Ku.prototype.release=function(){this.set(this.dd()),this.h&&(this.h.stop(),this.h=null),this.g=null},Ku.prototype.set=function(e){this.i=e,Xu(this)},Ku.prototype.dd=function(){return this.g.dd()},Yu.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=l(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()},m(Zu,$),Zu.prototype.release=function(){this.g.clear(),$.prototype.release.call(this)},Zu.prototype.j=function(e){for(var t=l(this.g.values()),n=t.next();!n.done;n=t.next()){var i=(n=n.value).Rg;e:{for(var r=n.xe,a=r.length-1;0<=a;a--){var o=r[a];if(o.position<=e){r=o.Id;break e}}r=null}a=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),o=r&&i&&r.label&&i.label&&i.label!==r.label;var s=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!en(i.roles,r.roles),(o||s||i)&&Ju(this,e,r.contentType)&&(n.Rg=r,i=new V("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),a&&Ju(this,e,r.contentType)&&(n.Rg=r,JSON.stringify(r),n=new V("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}},m($u,$),$u.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),$.prototype.release.call(this)},tl.prototype.hb=function(e,t){t=void 0!==t&&t;for(var n=l(this.h.keys()),i=n.next();!i.done;i=n.next())e>(i=i.value).endTime&&ll(this,i);t&&sl(this)},tl.prototype.Td=function(e){this.s=e,this.g&&this.g.Td(e)},hl.prototype.abort=function(){this.ve&&this.ve.abort()},(i=ml.prototype).destroy=function(){return this.l.destroy()},i.configure=function(e){if(this.i=e,this.P=new Nr({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ia&&(ol(t.ia),t.ia=null);for(var n=(t=l(this.m.keys())).next();!n.done;n=t.next())n=n.value,ol(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(nt))&&t.ia&&(ol(t.ia),t.ia=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ia&&(ol(t.ia),t.ia=null),n=(t=l(this.h.keys())).next();!n.done;n=t.next())(n=this.h.get(n.value)).ia?(ul(n.ia,e.segmentPrefetchLimit),0<e.segmentPrefetchLimit||(ol(n.ia),n.ia=null)):0<e.segmentPrefetchLimit&&(n.ia=Al(this,n.stream));e.disableAudioPrefetch||function(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,i=l(e.j.variants),r=i.next(),a={};!r.done;a={Rb:void 0},r=i.next())if(a.Rb=r.value,a.Rb.audio)if(e.m.has(a.Rb.audio)){if(ul(r=e.m.get(a.Rb.audio),t),!(0<t&&n.some(function(e){return function(t){return st(e.Rb.audio.language,t)}}(a)))){var o=e.h.get(a.Rb.audio.type);r!==(o&&o.ia)&&ol(r),e.m.delete(a.Rb.audio)}}else 0>=t||!n.some(function(e){return function(t){return st(e.Rb.audio.language,t)}}(a))||!(r=Al(e,a.Rb.audio))||(a.Rb.audio.segmentIndex||a.Rb.audio.createSegmentIndex(),e.m.set(a.Rb.audio,r))}(this)},i.start=function(e){var t=this;return L(function(n){if(1==n.g)return _(n,function(e,t){var n,i,r,a,o,s,u;return L(function(h){if(1==h.g){if(!e.s)throw new Ce(2,5,5006);return n=Gl(e,!0),_(h,e.g.ha.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(aa(e.l),e.updateDuration(),i=l(n.keys()),r=i.next();!r.done;r=i.next())a=r.value,o=n.get(a),e.h.has(a)||(s=Tl(e,o),t.has(o.id)&&(nl(u=t.get(o.id),function(t,n,i){return Ll(t,n,i||null,e.i.retryParameters,e.g.yc)}),s.ia=u),e.h.set(a,s),Rl(e,s,0));w(h)})}(t,e||new Map),2);aa(t.l),t.I=!0,w(n)})},i.od=function(){if(this.g){for(var e=this.g.ed(),t=l(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r=this.g.ha;if(!(r=i==nt?null!=(r=r.h).g&&null!=r.h&&e>=r.g&&e<r.h:ns(r=Zs(r,i),e))){if(this.L=0,n.ia&&(n.ia.g=null),"audio"===n.type)for(var a=(r=l(this.m.values())).next();!a.done;a=r.next())a.value.g=null;n.Aa=null,(null!=qs(this.g.ha,i)||n.Za)&&Sl(this,n),n.Nb&&(n.Nb.abort(),n.Nb=null),i===nt&&(i=this.g.ha).I&&i.I.Wd(),n.od=!0}}Fl(this)&&jl(this)}},i.updateDuration=function(){var e=Bt(),t=this.j.presentationTimeline.getDuration();1/0>t?(e&&(this.u&&this.u.stop(),eu(this.g.ha)),this.g.ha.wb(t)):e?(this.u&&this.u.ya(.5),this.g.ha.wb(1/0)):this.g.ha.wb(Math.pow(2,32))},H("shaka.util.ConfigUtils",Hl),Hl.getDifferenceFromConfigObjects=Kl,Hl.convertToConfigObject=Wl,Hl.mergeConfigObjects=Vl,H("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2}),H("shaka.drm.FairPlay",Xl),Xl.commonFairPlayResponse=function(e,t){if(2===e&&(e=t.originalRequest.drmInfo)&&Pr(e.keySystem)){try{var n=Ne(t.data)}catch(e){return}if(e=!1,"<ckc>"===(n=n.trim()).substr(0,5)&&"</ckc>"===n.substr(-6)&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch(e){}e&&(t.data=Se(Ke(n)))}},Xl.muxFairPlayRequest=function(e,t){Jl(e,t)},Xl.expressplayFairPlayRequest=function(e,t){if(2===e){var n=t.drmInfo;n&&Pr(n.keySystem)&&Jl(e,t)}},Xl.conaxFairPlayRequest=function(e,t){Jl(e,t)},Xl.ezdrmFairPlayRequest=function(e,t){Jl(e,t)},Xl.verimatrixFairPlayRequest=function(e,t){2===e&&(e=t.drmInfo)&&Pr(e.keySystem)&&(e=ze(e=Te(t.body)),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Be("spc="+e))},Xl.muxInitDataTransform=function(e,t,n){return Zl(e,t,n)},Xl.expressplayInitDataTransform=function(e,t,n){return Zl(e,t,n)},Xl.conaxInitDataTransform=function(t,n,i){if("skd"!==n)return t;n=i.serverCertificate,i=Ue(t).split("skd://").pop().split("?").shift(),i=e.atob(i);var r=new ArrayBuffer(2*i.length);r=Ae(r);for(var a=0,o=i.length;a<o;a++)r[a]=i.charCodeAt(a);return ql(t,r,n)},Xl.ezdrmInitDataTransform=function(e,t,n){return"skd"!==t?e:(t=n.serverCertificate,ql(e,n=Ue(e).split(";").pop(),t))},Xl.verimatrixInitDataTransform=function(e,t,n){return Zl(e,t,n)},Xl.initDataTransform=ql,Xl.defaultGetContentId=Yl,Xl.isFairPlaySupported=function(){var e;return L(function(t){return 1==t.g?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},S(t,2),_(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):2!=t.g?t.return(!0):(E(t),t.return(!1))})},Ql.prototype.configure=function(e){this.g=e},Ql.prototype.getConfiguration=function(){return this.g},Ql.prototype.create=function(e){var t;if(this.g.language){var n=function(e,t){var n=gt(t=ht(t),e.map(function(e){return ft(e)}));return n?e.filter(function(e){return n==ft(e)}):[]}(e,this.g.language);n.length&&(t=n)}t||(t=(t=e.filter(function(e){return e.primary})).length?t:e),e=function(e,t){return e.filter(function(e){return!!e.audio&&(t?e.audio.roles.includes(t):0==e.audio.roles.length)})}(t,this.g.role),e.length&&(t=e),this.g.videoLayout&&(e=function(e,t){return e.filter(function(e){return!e.video||!e.video.videoLayout||e.video.videoLayout==t})}(t,this.g.videoLayout),e.length&&(t=e)),this.g.Nc&&(e=function(e,t){if("AUTO"==t){var n=e.some(function(e){return!(!e.video||!e.video.hdr||"HLG"!=e.video.hdr)});t=pv(n)}return e.filter(function(e){return!e.video||!e.video.hdr||e.video.hdr==t})}(t,this.g.Nc),e.length&&(t=e));var i=[this.g.channelCount,this.g.preferredAudioChannelCount];if((e=i.filter(function(e,t){return e&&i.indexOf(e)===t})).length)for(n=(e=l(e)).next();!n.done;n=e.next())if((n=$l(t,n.value)).length){t=n;break}this.g.Wc&&(e=function(e,t){return e.filter(function(e){return!(!e.audio||!e.audio.label)&&e.audio.label.toLowerCase()==t.toLowerCase()})}(t,this.g.Wc),e.length&&(t=e)),this.g.Vd&&(e=function(e,t){return e.filter(function(e){return!(!e.video||!e.video.label)&&e.video.label.toLowerCase()==t.toLowerCase()})}(t,this.g.Vd),e.length&&(t=e)),e=function(e,t){return e.filter(function(e){return!e.audio||e.audio.spatialAudio==t})}(t,this.g.spatialAudio),e.length&&(t=e);var r=[this.g.audioCodec,this.g.Xd].concat(h(this.g.preferredAudioCodecs));if((e=r.filter(function(e,t){return e&&r.indexOf(e)===t})).length)for(n=(e=l(e)).next();!n.done;n=e.next())if((n=eh(t,n.value)).length){t=n;break}return new Ka(t[0],t,!("smooth"==this.g.codecSwitchingStrategy&&Ut()))},H("shaka.util.PlayerConfiguration",th),th.mergeConfigObjects=ih,th.createDefaultForLL=function(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}},th.createDefault=nh,m(ph,$),(i=ph.prototype).getStartTime=function(){return this.m},i.cd=function(){return this.N},i.nh=function(){return this.h},i.getStats=function(){return this.Y},i.Wk=function(){return this.s?or(this.s):null},i.Vk=function(){return this.R?sr(this.R):null},i.start=function(){var t,n=this;L(function(i){switch(i.g){case 1:return _(i,Promise.resolve(),2);case 2:return S(i,3),_(i,function(e){var t,n,i,r,a;return L(function(o){switch(o.g){case 1:if(vh(e,"manifest-parser"),e.l||(e.H=uo(e.N,e.U),e.l=e.H(),e.l.configure(e.g.manifest,function(){return e.D})),t=Date.now()/1e3,vh(e,"manifest"),e.h){o.A(2);break}return _(o,e.l.start(e.N,e.eb),3);case 3:return e.h=o.h,_(o,function(e){var t,n,i,r,a,o;return L(function(s){if(e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredVariantRole,channelCount:e.g.preferredAudioChannelCount,Nc:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,Wc:e.g.preferredAudioLabel,Vd:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Xd:"",Ye:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.Ta&&(t=e.g.abrFactory,e.F=t,e.j=t(),e.j.configure(e.g.abr)),!(n=bh(e))||1!=e.h.variants.length&&"HLS"!=e.h.type)return s.A(0);for(i=[],r=l([n.video,n.audio]),a=r.next();!a.done;a=r.next())(o=a.value)&&!o.segmentIndex&&i.push(o.createSegmentIndex());return 0<i.length?_(s,Promise.all(i),0):s.A(0)})}(e),2);case 2:return e.na.resolve(),n=new V("manifestparsed",void 0),_(o,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),0==e.h.variants.length)throw new Ce(2,4,4036);if(function(e){function t(e){return e.video&&e.audio||e.video&&e.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}(e.h),!to(e.G,e.h)){o.A(6);break}return i=new V("trackschanged",void 0),_(o,Promise.resolve(),7);case 7:mh(e),e.dispatchEvent(i);case 6:r=Date.now()/1e3,a=r-t,e.Y.I=a,w(o)}})}(n),5);case 5:if(mh(n),"webkit"===e.shakaMediaKeysPolyfill){i.A(6);break}return _(i,yh(n),7);case 7:mh(n);case 6:if(!n.$){i.A(8);break}return _(i,function(e){var t,n,i,r,a;return L(function(o){return!e.s&&(t=bh(e))&&(e.s=t),e.s?(n=e.h.presentationTimeline.T(),i=[],(r=e.s).video&&i.push(_h(e,r.video,n)),r.audio&&i.push(_h(e,r.audio,n)),(a=fr(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&yr(r.audio,a,e.g)&&(i.push(_h(e,a,n)),e.R=a),_(o,Promise.all(i),0)):o.A(0)})}(n),9);case 9:mh(n);case 8:if(!n.$||!n.i){i.A(10);break}return _(i,function(e){return L(function(t){return 1==t.g?e.J?_(t,e.m,3):t.A(0):_(t,Promise.all(e.U.map(function(e){return e.promise})),0)})}(n.i),11);case 11:mh(n);case 10:n.B.resolve(),A(i,0);break;case 3:(t=E(i))instanceof Ce&&(7001==t.code||7003==t.code)||n.B.reject(t),w(i)}})},i.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):$.prototype.dispatchEvent.call(this,e)},i.onError=function(e){2===e.severity&&(this.B.reject(e),this.destroy());var t=(new Map).set("detail",e);t=new V("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)},i.configure=function(e,t){e=Wl(e,t),ih(this.g,e)},i.getConfiguration=function(){return hn(this.g)},i.vm=function(){return this.B},i.destroy=function(){var e,t,n=this;return L(function(i){switch(i.g){case 1:if(n.u=!0,!n.l||n.qa){i.A(2);break}return _(i,n.l.stop(),2);case 2:if(!n.j||n.Z){i.A(4);break}return _(i,n.j.stop(),4);case 4:if(n.I&&!n.sa&&n.I.release(),!n.i||n.ba){i.A(6);break}return _(i,n.i.destroy(),6);case 6:if(0<n.L.size&&!n.ua)for(e=l(n.L.values()),t=e.next();!t.done;t=e.next())ol(t.value);w(i)}})},H("shaka.media.PreloadManager",ph),ph.prototype.destroy=ph.prototype.destroy,ph.prototype.waitForFinish=ph.prototype.vm,ph.prototype.getPrefetchedTextTrack=ph.prototype.Vk,ph.prototype.getPrefetchedVariantTrack=ph.prototype.Wk,m(wh,$),wh.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,$.prototype.release.call(this)},wh.prototype.j=function(e,t){if(!this.l||0!=e){this.l=!1;for(var n=l(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),a=e<i.startTime?Th:e>i.endTime?Eh:Ah;this.g.set(i,a);for(var o=l(this.m),s=o.next();!s.done;s=o.next())(s=s.value).wd==r&&s.vd==a&&s.gd(i,t)}}};var Th=1,Ah=2,Eh=3;function xh(e,t,n){var i,r,a,o,s,u,l;return L(function(h){switch(h.g){case 1:var c=new re(e).vb.split("/").pop().split(".");return i=1==c.length?"":c.pop().toLowerCase(),(r=Ch.get(i))?h.return(r):(a=0,o=Zr([e],n),S(h,2),o.method="HEAD",_(h,t.request(a,o).promise,4));case 4:s=h.h,r=s.headers["content-type"],A(h,3);break;case 2:if(!(u=E(h))||1002!=u.code&&1001!=u.code){h.A(3);break}return o.method="GET",_(h,t.request(a,o).promise,6);case 6:l=h.h,r=l.headers["content-type"];case 3:return h.return(r?r.toLowerCase().split(";").shift():"")}})}for(var Ch=(new Map).set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html"),kh={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Ih=l(Object.keys(kh)),Mh=Ih.next();!Mh.done;Mh=Ih.next()){var Ph=Mh.value;kh[Ph.toLowerCase()]=kh[Ph]}function Lh(e,t){if(e.lineBreak)return"\n";if(e.nestedCues.length)return e.nestedCues.map(function(t){return Lh(t,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=ci,r=e.fontStyle==pi,a=e.textDecoration.includes(gi);return i&&n.push(["b"]),r&&n.push(["i"]),a&&n.push(["u"]),""==(r=e.color)&&t&&(r=t.color),i="",(r=Dh(r))&&(i+="."+r),""==(r=e.backgroundColor)&&t&&(r=t.backgroundColor),(t=Dh(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(e,t){var n=l(t);return"<"+(t=n.next().value)+(void 0===(n=n.next().value)?"":n)+">"+e+"</"+t+">"},e.payload)}function Dh(e){var t=(e=e.toLowerCase()).replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(256|parseInt(t[1],10)).toString(16).slice(1)+(256|parseInt(t[2],10)).toString(16).slice(1)+(256|parseInt(t[3],10)).toString(16).slice(1):e.startsWith("#")&&7<e.length&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Rh(e,t){for(var n=[],i=(e=l(Nh(e))).next();!i.done;i=e.next())if((i=i.value).isContainer)n.push.apply(n,h(Rh(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=Lh(i,t),n.push(r)}return n}function Nh(e){for(var t=[],n=(e=l(e)).next(),i={};!n.done;i={Og:void 0},n=e.next())i.Og=n.value,t.some(function(e){return function(t){return Xn(e.Og,t)}}(i))||t.push(i.Og);return t}function Oh(e){function t(e){for(var t=5381,n=e.length;n;)t=33*t^e.charCodeAt(--n);return(t>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch(e){}return"center"==e.textAlign&&"center"!=n.align&&(n.align="middle"),"vertical-lr"==e.writingMode?n.vertical="lr":"vertical-rl"==e.writingMode&&(n.vertical="rl"),1==e.lineInterpretation&&(n.snapToLines=!1),null!=e.line&&(n.line=e.line),null!=e.position&&(n.position=e.position),n}function Uh(e,t){var n=Rh(t),i=[];t=e.cues?Array.from(e.cues):[];for(var r=(n=l(n)).next(),a={};!r.done;a={Ed:void 0},r=n.next())a.Ed=r.value,!t.some(function(e){return function(t){return t.startTime==e.Ed.startTime&&t.endTime==e.Ed.endTime&&t.text==e.Ed.payload}}(a))&&a.Ed.payload&&(r=Oh(a.Ed))&&i.push(r);for(n=(t=l(t=i.slice().sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime!=t.endTime?e.endTime-t.startTime:"line"in VTTCue.prototype?i.indexOf(t)-i.indexOf(e):i.indexOf(e)-i.indexOf(t)}))).next();!n.done;n=t.next())e.addCue(n.value)}function Bh(e,t){var n=!1;"disabled"===e.mode&&(n=!0,e.mode="hidden");for(var i=0;i<e.cues.length;){var r=e.cues[i];t(r)?e.removeCue(r):i++}n&&(e.mode="disabled")}function Fh(e){var t=this;this.i=e,this.l=new At,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.s=null,this.C=function(){t.l.Da(t.i,"textchanged",t.m),t.l.Da(t.j.textTracks,"change",t.B);for(var e=l(t.h.values()),n=e.next();!n.done;n=e.next())n.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){for(var e=new Map,n=t.i.sc(),i=(n=l(n)).next();!i.done;i=n.next()){if(i=i.value,t.h.has(i.id)){var r=t.h.get(i.id);i.active||"disabled"===r.track.mode||(r.track.mode="disabled"),t.h.delete(i.id)}else{(r=t.j.ownerDocument.createElement("track")).kind=jh(i);var a=r,o=void 0;if(i.label)o=i.label;else if(i.language)if(i.language in kh)o=kh[i.language];else{var s=pt(i.language);s in kh&&(o=kh[s]+" ("+i.language+")")}o||(o=i.originalTextId,i.language&&i.language!==i.originalTextId&&(o+=" ("+i.language+")")),a.label=o,i.language in kh&&(r.srclang=i.language),"CHROMIUM"===Me().Fa()&&(r.src="data:,WEBVTT"),r.track.mode="disabled",t.j.appendChild(r)}e.set(i.id,r),i.active&&(t.g=i.id)}for(i=(n=l(t.h.values())).next();!i.done;i=n.next())i.value.remove();-1<t.g&&(e.has(t.g)?"disabled"===(n=e.get(t.g).track).mode&&(n.mode=t.u?"showing":"hidden"):t.g=-1),t.h=e},this.B=function(){if(!t.s){var e=t.j;t.s=new zi(function(){if(t.s=null,t.j===e){var n=-1,i=!1;if(t.h.has(t.g)){var r=t.h.get(t.g);"showing"===r.track.mode?(n=t.g,i=!0):"hidden"===r.track.mode&&(n=t.g)}if(!i)for(r=(i=l(t.h)).next();!r.done;r=i.next()){var a=l(r.value);if(r=a.next().value,"showing"===(a=a.next().value).track.mode){n=r;break}0>n&&"hidden"===a.track.mode&&(n=r)}for(r=(i=l(t.h)).next();!r.done;r=i.next())r=(a=l(r.value)).next().value,a=a.next().value,r!==n&&"disabled"!==a.track.mode&&(a.track.mode="disabled");t.g!==n&&(t.g=n,-1<n&&t.i.dg({id:n})),t.i.Ce(-1<n&&"showing"===t.h.get(n).track.mode)}}).X(0)}},this.l.o(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}function jh(e){var t=Me();return e.forced&&"WEBKIT"===t.Fa()?"forced":"caption"===e.kind||e.roles&&e.roles.some(function(e){return e.includes("transcribes-spoken-dialog")})&&e.roles.some(function(e){return e.includes("describes-music-and-sound")})?"captions":"subtitles"}function Gh(e,t){for(kt("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,t=(e=l(Array.from(this.h.textTracks))).next();!t.done;t=e.next())"metadata"!==(t=t.value).kind&&"chapters"!==t.kind&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}function Hh(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}function Vh(){}function Wh(t,n){var i=this;this.m=!1,this.h=[],this.j=t,this.s=n,this.C=this.u=null,this.g=os("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new zi(function(){i.j.paused||Yh(i)}),zh(this),this.l=new Map,this.i=new At,this.i.o(document,"fullscreenchange",function(){Yh(i,!0)}),this.i.o(this.j,"seeking",function(){Yh(i,!0)}),this.i.o(this.j,"ratechange",function(){zh(i)}),this.i.o(this.j,"resize",function(){var e=i.j,t=e.videoWidth;e=e.videoHeight,i.u=t&&e?t/e:null}),this.D=null,"ResizeObserver"in e&&(this.D=new ResizeObserver(function(){Yh(i,!0)}),this.D.observe(this.g)),this.F=new Map}function zh(e){e.B&&(e.h.length?e.B.ya((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function Kh(e,t){for(;null!=t;){if(t==e.g)return!0;t=t.parentElement}return!1}function Xh(e,t,n,i,r){for(var a=!1,o=[],s=[],u=(t=l(t)).next();!u.done;u=t.next()){u=u.value,r.push(u);var h=e.l.get(u),c=u.startTime<=i&&u.endTime>i,d=h?h.bk:null;h&&(o.push(h.Qg),h.nd&&o.push(h.nd),c||(a=!0,e.l.delete(u),h=null)),c&&(s.push(u),h?Kh(e,d)||(a=!0):(qh(e,u,r),d=(h=e.l.get(u)).bk,a=!0)),0<u.nestedCues.length&&d&&Xh(e,u.nestedCues,d,i,r),r.pop()}if(a){for(r=(i=l(o)).next();!r.done;r=i.next())(r=r.value).parentElement&&r.parentElement.removeChild(r);for(s.sort(function(e,t){return e.startTime!=t.startTime?e.startTime-t.startTime:e.endTime-t.endTime}),i=(s=l(s)).next();!i.done;i=s.next())(i=e.l.get(i.value)).nd?(i.nd.contains(n)&&i.nd.removeChild(n),n.appendChild(i.nd),i.nd.appendChild(i.Qg)):n.appendChild(i.Qg)}}function Yh(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||void 0!==t&&t){for(var i=(t=l(e.F.values())).next();!i.done;i=t.next())hs(i.value);hs(e.g),e.l.clear(),e.F.clear()}e.m&&Xh(e,e.h,e.g,n,[])}}function qh(e,t,n){var i=1<n.length,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&0<t.nestedCues.length;var a=os(r);if("br"!=r&&function(e,t,n,i,r){var a=t.style,o=0==n.nestedCues.length,s=1<i.length;a.whiteSpace="pre-wrap";var u=n.payload.replace(/\s+$/g,function(e){return" ".repeat(e.length)});if(a.webkitTextStrokeColor=n.textStrokeColor,a.webkitTextStrokeWidth=n.textStrokeWidth,a.color=n.color,a.direction=n.direction,a.opacity=n.opacity,a.paddingLeft=Zh(n.linePadding,n,e.s),a.paddingRight=Zh(n.linePadding,n,e.s),a.textCombineUpright=n.textCombineUpright,a.textShadow=n.textShadow,n.backgroundImage)a.backgroundImage="url('"+n.backgroundImage+"')",a.backgroundRepeat="no-repeat",a.backgroundSize="contain",a.backgroundPosition="center",n.backgroundColor&&(a.backgroundColor=n.backgroundColor),a.width="100%",a.height="100%";else{if(n.nestedCues.length)var l=t;else l=os("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=function(e,t){for(var n=e.length-1;0<=n;n--){var i=t(e[n]);if(i||0===i)return i}return null}(i,function(e){return e.backgroundColor}))?l.style.backgroundColor=t:u&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),u&&(l.setAttribute("translate","no"),l.textContent=u)}s&&!i[i.length-1].isContainer?a.display="inline":(a.display="flex",a.flexDirection="column",a.alignItems="center","left"==n.textAlign||"start"==n.textAlign?(a.width="100%",a.alignItems="start"):"right"!=n.textAlign&&"end"!=n.textAlign||(a.width="100%",a.alignItems="end"),a.justifyContent="before"==n.displayAlign?"flex-start":"center"==n.displayAlign?"center":"flex-end"),o||(a.margin="0"),a.fontFamily=n.fontFamily,a.fontWeight=n.fontWeight.toString(),a.fontStyle=n.fontStyle,a.letterSpacing=n.letterSpacing,a.fontSize=Zh(n.fontSize,n,e.s,e.C?e.C.fontScaleFactor:1),null!=(i=n.line)&&((o=n.lineInterpretation)==ai&&(o=1,s=16,e.u&&1>e.u&&(s=32),i=0>i?100+i/s*100:i/s*100),1==o&&(a.position="absolute",n.writingMode==ri?(a.width="100%",n.lineAlign==oi?a.top=i+"%":"end"==n.lineAlign&&(a.bottom=100-i+"%")):"vertical-lr"==n.writingMode?(a.height="100%",n.lineAlign==oi?a.left=i+"%":"end"==n.lineAlign&&(a.right=100-i+"%")):(a.height="100%",n.lineAlign==oi?a.right=i+"%":"end"==n.lineAlign&&(a.left=100-i+"%")))),a.lineHeight=n.lineHeight,e=function(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Qn?n:"left"===e||"start"===e&&t===ii||"end"===e&&"rtl"===t?"line-left":"right"===e||"start"===e&&"rtl"===t||"end"===e&&t===ii?"line-right":"center"}(n),"line-left"==e?(a.cssFloat="left",null!==n.position&&(a.position="absolute",n.writingMode==ri?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%")):"line-right"==e?(a.cssFloat="right",null!==n.position&&(a.position="absolute",n.writingMode==ri?(a.right=100-n.position+"%",a.width="auto"):a.bottom=n.position+"%")):null!==n.position&&50!=n.position&&(a.position="absolute",n.writingMode==ri?(a.left=n.position+"%",a.width="auto"):a.top=n.position+"%"),a.textAlign=n.textAlign,a.textDecoration=n.textDecoration.join(" "),a.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&a.writingMode==n.writingMode||(a.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==ri?a.width=n.size+"%":a.height=n.size+"%")}(e,a,t,n,i),n=null,t.region&&t.region.id){var o=t.region,s=e.u===4/3?2.5:1.9;if(n=o.id+"_"+o.width+"x"+o.height+(o.heightUnits==qt?"%":"px")+"-"+o.viewportAnchorX+"x"+o.viewportAnchorY+(o.viewportAnchorUnits==qt?"%":"px"),e.F.has(n))n=e.F.get(n);else{r=os("span");var u=o.heightUnits==qt?"%":"px",l=o.widthUnits==qt?"%":"px",h=o.viewportAnchorUnits==qt?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var c=o.height,d=o.width;2===o.heightUnits&&(c=5.33*o.height,u="%"),2===o.widthUnits&&(d=o.width*s,l="%"),r.style.height=c+u,r.style.width=d+l,2===o.viewportAnchorUnits?(s=o.viewportAnchorY/75*100,u=o.viewportAnchorX/(e.u===4/3?160:210)*100,s-=o.regionAnchorY*c/100,u-=o.regionAnchorX*d/100,r.style.top=s+"%",r.style.left=u+"%"):(r.style.top=o.viewportAnchorY-o.regionAnchorY*c/100+h,r.style.left=o.viewportAnchorX-o.regionAnchorX*d/100+h),0!==o.heightUnits&&0!==o.widthUnits&&0!==o.viewportAnchorUnits&&(o=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=o+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent="before"==t.displayAlign?"flex-start":"center"==t.displayAlign?"center":"flex-end",e.F.set(n,r),n=r}}r=a,i&&((r=os("span")).classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",a.appendChild(r)),e.l.set(t,{Qg:a,bk:r,nd:n})}function Zh(e,t,n,i){i=void 0===i?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function Jh(e,t){this.h=e,this.g=t,this.i=void 0,this.u=!1,this.F=!0,this.l=this.C=!1,this.s=this.m=void 0,this.B=0,this.G=!1,this.D=new At,this.j=null}function Qh(t){return t.g.sessionId||(t.g.sessionId=e.crypto.randomUUID()),{v:t.g.version,sf:t.i,sid:t.g.sessionId,cid:t.g.contentId,mtp:t.h.getBandwidthEstimate()/1e3}}function $h(e,t,n){n=void 0===n?{}:n;var i=void 0===i?e.g.useHeaders:i;if(e.g.enabled)if(e=function(e,t){t=void 0===t?{}:t,Object.assign(t,Qh(e)),t.pr=e.h.Xa();var n=t.ot===rc||t.ot===ac;return e.C&&n&&(t.bs=!0,t.su=!0,e.C=!1),null==t.su&&(t.su=e.F),t.v===sc&&(e.h.T()&&(t.ltc=e.h.rf()),null!=(n=!e.G&&e.s&&e.m?e.s-(e.B||e.m):void 0)&&(t.msd=n,e.G=!0)),function(e,t){var n=e.g.includeKeys;return n.length?Object.keys(t).reduce(function(e,i){return n.includes(i)&&(e[i]=t[i]),e},{}):t}(e,t)}(e,n),i)i=function(e){for(var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],a={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3},o=(t=l(t)).next();!o.done;o=t.next())r[null!=a[o=o.value]?a[o]:1][o]=e[o];for(e=0;e<r.length;e++)(a=tc(r[e]))&&(n["CMCD-"+i[e]]=a);return n}(e),Object.keys(i).length&&Object.assign(t.headers,i);else{var r=tc(e);r&&(t.uris=t.uris.map(function(e){return nc(e,r)}))}}function ec(e,t){if(!(t=e.h.bc()[t]).length)return 0;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):0}function tc(e){function t(e){return 100*n(e/100)}function n(e){return Math.round(e)}function i(e){return!Number.isNaN(e)&&null!=e&&""!==e&&!1!==e}for(var r=[],a={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(e){return encodeURIComponent(e)},rtp:t,tb:n},o=Object.keys(e||{}).sort(),s=(o=l(o)).next();!s.done;s=o.next()){var u=e[s=s.value];if(i(u)&&("v"!==s||1!==u)&&("pr"!=s||1!==u)){var h,c=a[s];c&&(u=c(u)),h="string"==(c=typeof u)&&"ot"!==s&&"sf"!==s&&"st"!==s?s+"="+JSON.stringify(u):"boolean"===c?s:"symbol"===c?s+"="+u.description:s+"="+u,r.push(h)}}return r.join(",")}function nc(e,t){return!t||e.includes("offline:")?e:((e=new re(e)).g.set("CMCD",t),e.toString())}(i=Fh.prototype).configure=function(){},i.remove=function(e,t){return!!this.i&&(this.h.has(this.g)&&Bh(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){this.h.has(this.g)&&Uh(this.h.get(this.g).track,e)},i.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},i.isTextVisible=function(){return this.u},i.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;"disabled"!==t.mode&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&3===this.i.m)if(t=Array.from(this.i.h.textTracks).filter(function(e){return["captions","subtitles","forced"].includes(e.kind)}),e){e=null;for(var n=(t=l(t)).next();!n.done;n=t.next()){if("showing"===(n=n.value).mode){e=null;break}e||"hidden"!==n.mode||(e=n)}e&&(e.mode="showing")}else for(t=(e=l(t)).next();!t.done;t=e.next())"showing"===(t=t.value).mode&&(t.mode="hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){!this.j&&this.i&&2===this.i.m&&(this.j=this.i.h,this.l.ra(this.i,"unloading",this.C),this.l.o(this.i,"textchanged",this.m),this.l.o(this.j.textTracks,"change",this.B),this.m())},H("shaka.text.NativeTextDisplayer",Fh),Fh.prototype.enableTextDisplayer=Fh.prototype.enableTextDisplayer,Fh.prototype.setTextLanguage=Fh.prototype.setTextLanguage,Fh.prototype.setTextVisibility=Fh.prototype.setTextVisibility,Fh.prototype.isTextVisible=Fh.prototype.isTextVisible,Fh.prototype.destroy=Fh.prototype.destroy,Fh.prototype.append=Fh.prototype.append,Fh.prototype.remove=Fh.prototype.remove,Fh.prototype.configure=Fh.prototype.configure,(i=Gh.prototype).configure=function(){},i.remove=function(e,t){return!!this.g&&(Bh(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0)},i.append=function(e){this.g&&Uh(this.g,e)},i.destroy=function(){return this.g&&(Bh(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},i.isTextVisible=function(){return!!this.g&&"showing"==this.g.mode},i.setTextVisibility=function(e){e&&!this.g&&Hh(this),this.g&&(this.g.mode=e?"showing":"hidden")},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){Hh(this)},H("shaka.text.SimpleTextDisplayer",Gh),Gh.prototype.enableTextDisplayer=Gh.prototype.enableTextDisplayer,Gh.prototype.setTextLanguage=Gh.prototype.setTextLanguage,Gh.prototype.setTextVisibility=Gh.prototype.setTextVisibility,Gh.prototype.isTextVisible=Gh.prototype.isTextVisible,Gh.prototype.destroy=Gh.prototype.destroy,Gh.prototype.append=Gh.prototype.append,Gh.prototype.remove=Gh.prototype.remove,Gh.prototype.configure=Gh.prototype.configure,(i=Vh.prototype).configure=function(){},i.remove=function(){},i.append=function(){},i.destroy=function(){},i.isTextVisible=function(){return!1},i.setTextVisibility=function(){},i.setTextLanguage=function(){},i.enableTextDisplayer=function(){},H("shaka.text.StubTextDisplayer",Vh),Vh.prototype.enableTextDisplayer=Vh.prototype.enableTextDisplayer,Vh.prototype.setTextLanguage=Vh.prototype.setTextLanguage,Vh.prototype.setTextVisibility=Vh.prototype.setTextVisibility,Vh.prototype.isTextVisible=Vh.prototype.isTextVisible,Vh.prototype.destroy=Vh.prototype.destroy,Vh.prototype.append=Vh.prototype.append,Vh.prototype.remove=Vh.prototype.remove,Vh.prototype.configure=Vh.prototype.configure,(i=Wh.prototype).configure=function(e){this.C=e,zh(this),Yh(this,!0)},i.append=function(e){for(var t=[].concat(h(this.h)),n=(e=l(Nh(e))).next(),i={};!n.done;i={Pg:void 0},n=e.next())i.Pg=n.value,t.some(function(e){return function(t){return Xn(t,e.Pg)}}(i))||this.h.push(i.Pg);this.h.length&&zh(this),Yh(this)},i.destroy=function(){return this.g?(this.g.parentElement&&this.s.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.D&&(this.D.disconnect(),this.D=null),Promise.resolve()):Promise.resolve()},i.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(n){return n.startTime<e||n.endTime>=t}),Yh(this,n>this.h.length),this.h.length||zh(this),!0},i.isTextVisible=function(){return this.m},i.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.s.appendChild(this.g),Yh(this,!0)):this.g.parentElement&&this.s.removeChild(this.g)},i.setTextLanguage=function(e){e&&"und"!=e?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},i.enableTextDisplayer=function(){},H("shaka.text.UITextDisplayer",Wh),Wh.prototype.enableTextDisplayer=Wh.prototype.enableTextDisplayer,Wh.prototype.setTextLanguage=Wh.prototype.setTextLanguage,Wh.prototype.setTextVisibility=Wh.prototype.setTextVisibility,Wh.prototype.isTextVisible=Wh.prototype.isTextVisible,Wh.prototype.remove=Wh.prototype.remove,Wh.prototype.destroy=Wh.prototype.destroy,Wh.prototype.append=Wh.prototype.append,Wh.prototype.configure=Wh.prototype.configure,H("shaka.text.WebVttGenerator",function(){}),Jh.prototype.setMediaElement=function(e){this.j=e,function(e){e.D.ra(e.j,"play",function(){e.m||(e.m=Date.now())}),e.D.ra(e.j,"playing",function(){e.s||(e.s=Date.now())})}(this)},Jh.prototype.configure=function(e){this.g=e};var ic="a",rc="v",ac="av",oc="tt",sc=2,uc="d",lc="ld",hc="h",cc="lh";function dc(e){this.h=e,this.g=null}function pc(e){return!e||"false"!==e.toLowerCase()&&(/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""))}H("shaka.util.CmcdManager.StreamingFormat",{DASH:uc,Wm:lc,HLS:hc,Xm:cc,on:"s",OTHER:"o"}),(i=dc.prototype).configure=function(e){this.h=e},i.Ti=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(gc)?1e3*this.g.get(gc):null},i.Si=function(){return this.h.enabled&&this.g&&this.g.has(fc)?1e3*this.g.get(fc):null},i.Yk=function(){return this.h.enabled&&this.g&&this.g.has(mc)?this.g.get(mc):null},i.Zk=function(){return this.h.enabled&&this.g&&this.g.has(vc)?this.g.get(vc):null},i.getBandwidthEstimate=function(e){var t=this.Si();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return 0<n&&1>=n?e*(1-n)+t*n:e},H("shaka.util.CmsdManager",dc),dc.prototype.getBandwidthEstimate=dc.prototype.getBandwidthEstimate,dc.prototype.getRoundTripTime=dc.prototype.Zk,dc.prototype.getResponseDelay=dc.prototype.Yk,dc.prototype.getEstimatedThroughput=dc.prototype.Si,dc.prototype.getMaxBitrate=dc.prototype.Ti;var fc="etp",gc="mb",mc="rd",vc="rtt";function yc(){this.g=null,this.h=[]}function bc(e,t){return L(function(n){if(1==n.g)return e.g?_(n,new Promise(function(t){return e.h.push(t)}),2):n.A(2);e.g=t,w(n)})}function _c(t,n,i){n=void 0===n?null:n,$.call(this);var r=this;this.m=Ad,this.h=null,this.Pe=n,this.Y=!1,this.Ue=new At,this.Je=new At,this.j=new At,this.ic=new At,this.Nd=new At,this.F=this.G=this.D=this.I=null,this.Ve=0,this.ba=new yc,this.N=this.Z=this.U=this.i=this.zc=this.H=this.l=this.Ge=this.P=this.zi=this.qa=this.K=this.Ya=this.Ia=this.He=this.O=this.La=this.J=this.Mb=null,this.$=!1,this.Ta=this.u=null,this.Oe=1e9,this.Te=[],this.eb=[],this.zg=-1,this.g=qc(this),this.Bg={streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}},this.R=null,this.Xe=-1,this.fc=null,this.sa={width:1/0,height:1/0},this.Ne=new $a(this.g,this.sa,null),this.Re=[],this.B=null,this.L=this.g.adaptationSetCriteriaFactory(),this.L.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredVariantRole,channelCount:0,Nc:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,Wc:this.g.preferredAudioLabel,Vd:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Xd:"",Ye:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Od=this.g.preferredTextLanguage,this.Me=this.g.preferredTextRole,this.Le=this.g.preferForcedSubs,this.Ke=[],i&&i(this),this.K=function(e){return new Jh({getBandwidthEstimate:function(){return e.u?e.u.getBandwidthEstimate():NaN},bc:function(){return e.bc()},getCurrentTime:function(){return e.h?e.h.currentTime:0},Xa:function(){return e.Xa()},Jb:function(){return e.Jb()},qb:function(){return e.qb()},T:function(){return e.T()},rf:function(){return e.rf()}},e.g.cmcd)}(this),this.qa=new dc(this.g.cmsd),this.I=Oc(this),this.Qd=this.na=this.ua=this.C=null,this.Dg=!1,this.Ag=[],this.Cg=new zi(function(){return L(function(e){return 1==e.g?r.na?_(e,r.ac(r.Qd,!0),3):e.A(0):4!=e.g?_(e,r.load(r.na),4):(r.Dg?r.Qd.pause():r.Qd.play(),r.na=null,r.Dg=!1,void w(e))})}),Id&&(this.C=Id(),this.C.configure(this.g.ads),this.Nd.o(this.C,"ad-content-pause-requested",function(e){var t;return L(function(n){if(1==n.g)return r.Cg.stop(),r.na?n.A(0):(r.Qd=r.h,r.Dg=r.isEnded(),t=e.saveLivePosition||!1,_(n,r.Ni(!0,t),3));r.na=n.h,w(n)})}),this.Nd.o(this.C,"ad-content-resume-requested",function(e){if(e=e.offset||0,r.na){var t=r.na;t.m&&e&&("number"==typeof t.m?t.m+=e:t.m.setTime(t.m.getTime()+1e3*e))}r.Cg.X(.1)}),this.Nd.o(this.C,"ad-content-attach-requested",function(){return L(function(e){return r.h||!r.Qd?e.A(0):_(e,r.ac(r.Qd,!0),0)})})),Md&&(this.ua=Md(this),this.ua.configure(this.g.queue)),this.Ue.o(e,"online",function(){fd(r),r.Th()}),this.Qe=new zi(function(){for(var e=Date.now()/1e3,t=!1,n=!0,i=l(r.i.variants),a=i.next();!a.done;a=i.next())0<(a=a.value).disabledUntilTime&&a.disabledUntilTime<=e&&(a.disabledUntilTime=0,t=!0),0<a.disabledUntilTime&&(n=!1);n&&r.Qe.stop(),t&&nd(r,!1,void 0,!1,!1)}),this.Na=null,t&&(kt("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.ac(t,!0)),this.s=null}function wc(e){null!=e.P&&(Rt(e.P),e.P.release(),e.P=null)}function Sc(e,t){return new V(e,t)}function Tc(e,t){kd.set(e,t)}function Ac(){return e.Promise||Y("A Promise implementation or polyfill is required"),!(!(e.Promise&&e.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")||(Me(),!dv()&&""==cs().canPlayType("application/x-mpegurl")))}function Ec(e,t){e.dispatchEvent(Sc("onstatechange",(new Map).set("state",t)))}function xc(e,t){var n;return L(function(i){return 1==i.g?(n=++e.Ve,_(i,bc(e.ba,t),2)):n!=e.Ve?(e.ba.release(),i.return(!0)):i.return(!1)})}function Cc(e,t){var n,i,r;return t=void 0!==t&&t,L(function(a){if(1==a.g)return n=null,e.i&&e.H&&e.zc&&e.U&&e.g?(i=e.h.currentTime,e.T()&&!t&&(i=null),_(a,Ic(e,e.U,i,e.Z,e.g,!0,!1,!1),3)):a.A(2);if(2!=a.g){n=a.h,e.Re.push(n),e.H&&e.H.setMediaElement&&e.H.setMediaElement(null),(r=e.l?e.l.s:null)&&(n.s=r);var o=n,s=e.H,u=e.zc;o.h=e.i,o.l=s,o.H=u,n.C=e.L,n.start(),e.i=null,e.H=null,e.zc=null,e.u=null,e.Ta=null}return a.return(n)})}function kc(e,t,n,i,r,a){var o,s,u,l;return r=void 0!==r&&r,L(function(h){return 1==h.g?i?h.A(2):_(h,Mc(e,t),3):(2!=h.g&&(i=h.h),function(e,t){if(!dv(Me()))return!0;if(t){if(""==(e.h||cs()).canPlayType(t))return!1;if(!dv(Me())||!lo.has(t))return!0;if(Ri(t))return"WEBKIT"===Me().Fa()&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if("application/dash+xml"===t||"video/vnd.mpeg.dash.mpd"===t)return e.g.streaming.preferNativeDash}return!1}(e,i)?h.return(null):(o=a||e.g,s=!1,u=!0,r&&(e.u&&e.Ta==o.abrFactory&&(u=!1),e.h&&"AUDIO"===e.h.nodeName&&(s=!0)),l=Ic(e,t,n,i||null,o,!r,s,u),l=r?l.then(function(e){return e.D=!1,e}):l.then(function(t){return e.Re.push(t),t}),h.return(l)))})}function Ic(e,t,n,i,r,a,o,s){var u,h,c,d,p,f,g,m,v,y,b,S;return a=void 0===a||a,o=void 0!==o&&o,s=void 0===s||s,L(function(T){return 1==T.g?(u=null,h=hn(r),o&&(h.manifest.disableVideo=!0),c=function(){return u.P&&u.u?null:u},d=function(){return c()?c().getConfiguration():e.g},1/0!=e.sa.width||1/0!=e.sa.height||e.g.ignoreHardwareResolution?T.A(2):_(T,Me().qc(),3)):(2!=T.g&&(p=T.h,e.sa.width=p.width,e.sa.height=p.height),f=new $a(h,e.sa,null),g={networkingEngine:e.I,filter:function(e){var t;return L(function(n){return 1==n.g?_(n,eo(f,e),2):4!=n.g?n.h?(t=Sc("trackschanged"),_(n,Promise.resolve(),4)):n.A(0):(u.dispatchEvent(t),void w(n))})},makeTextStreamsForClosedCaptions:function(t){return function(e,t){for(var n=new Set,i=l(t.textStreams),r=i.next();!r.done;r=i.next())"application/cea-608"!=(r=r.value).mimeType&&"application/cea-708"!=r.mimeType||n.add(r.originalId);for(r=(i=l(t.variants)).next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions)for(var a=l(r.closedCaptions.keys()),o=a.next();!o.done;o=a.next())if(o=o.value,!n.has(o)){var s=o.startsWith("CC")?"application/cea-608":"application/cea-708",u=new zu,h=r.closedCaptions.get(o);s={id:e.Oe++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:u,mimeType:s,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:h,originalLanguage:h,label:null,type:nt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([xi(s,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(s),n.add(o)}}(e,t)},onTimelineRegionAdded:function(e){el(u.I,e)},onEvent:function(e){return u.dispatchEvent(e)},onError:function(e){return u.onError(e)},isLowLatencyMode:function(){return d().streaming.lowLatencyMode},updateDuration:function(){e.l&&u.P&&e.l.updateDuration()},newDrmInfo:function(e){var t=u.i,n=t?t.g:null;n&&t.B&&io(f,n.keySystem,e)},onManifestUpdated:function(){var t=(new Map).set("isLive",e.T());u.dispatchEvent(Sc("manifestupdated",t)),fh(u,!1,function(){e.C&&e.C.onManifestUpdated(e.T())})},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},onMetadata:function(t,n,i,r){var a=t;"com.apple.hls.interstitial"==t&&(a="com.apple.quicktime.HLS",t={startTime:n,endTime:i,values:r},e.C)&&e.C.onHLSInterstitialMetadata(e,e.h,t),t=(r=l(r)).next();for(var o={};!t.done;o={Nh:void 0},t=r.next())o.Nh=t.value,"ID"!=o.Nh.name&&fh(u,!1,function(t){return function(){Nc(e,n,i,a,t.Nh)}}(o))},disableStream:function(t){return e.disableStream(t,e.g.streaming.maxDisabledTime)},addFont:function(t,n){return e.addFont(t,n)}},(m=new $u(function(){return e.xa()})).addEventListener("regionadd",function(t){var n=t.region;md(e,"timelineregionadded",n,u),fh(u,!1,function(){e.C&&(e.C.onDashTimedMetadata(n),e.C.onDASHInterstitialMetadata(e,e.h,n))})}),v=null,h.streaming.observeQualityChanges&&((v=new Zu(function(){return e.bc()})).addEventListener("qualitychange",function(t){vd(e,t.quality,t.position)}),v.addEventListener("audiotrackchange",function(t){vd(e,t.quality,t.position,!0)})),y=!0,b={yc:e.I,onError:function(e){return u.onError(e)},Of:function(t){fh(u,!0,function(){if(e.D){var n=t,i=Sc("keystatuschanged");e.dispatchEvent(i);var r=Object.keys(n);1==r.length&&""==r[0]&&(r=["00"],n={"00":n[""]}),i=1==r.length&&"00"==r[0];var a=!1;if(r.length){r=e.keySystem();for(var o=oa(e.g.drm.clearKeys),s=l(e.i.variants),u=s.next();!u.done;u=s.next()){var h=[];(u=u.value).audio&&h.push(u.audio),u.video&&h.push(u.video);for(var c=(h=l(h)).next();!c.done;c=h.next()){var d=c.value;if(c=u.allowedByKeySystem,d.keyIds.size)if(d.drmInfos.length&&!o.size){for(var p=(d=l(d.drmInfos)).next();!p.done;p=d.next())if((p=p.value).keyIds.size&&p.keySystem==r){u.allowedByKeySystem=!0;for(var f=(p=l(p.keyIds)).next();!f.done;f=p.next())f=f.value,((f=n[i?"00":f])||e.D.G)&&(u.allowedByKeySystem=u.allowedByKeySystem&&!!f&&!ao.includes(f))}}else for(u.allowedByKeySystem=!0,p=(d=l(d.keyIds)).next();!p.done;p=d.next())p=p.value,((p=n[i?"00":p])||e.D.G)&&(u.allowedByKeySystem=u.allowedByKeySystem&&!!p&&!ao.includes(p));c!=u.allowedByKeySystem&&(a=!0)}}}a&&(od(e),!td(e))||(n=e.l.s)&&!n.allowedByKeySystem&&nd(e)}})},onExpirationUpdated:function(e,t){var n=Sc("expirationupdated");u.dispatchEvent(n),(n=u.l)&&n.onExpirationUpdated&&n.onExpirationUpdated(e,t)},onEvent:function(t){u.dispatchEvent(t),"drmsessionupdate"==t.type&&y&&(y=!1,t=Date.now()/1e3-u.Ia,(e.B||u.getStats()).m=t,e.P&&Rt(e.P))}},S=Oc(e,c),qr(e.I,S),u=new ph(t,i,n,{config:h,Il:g,Tl:m,Sl:v,yd:function(){return e.yd(b)},Hl:f,networkingEngine:S,gk:a,fk:s}),s||function(e,t,n){e.j=t,e.F=n}(u,e.u,e.Ta),T.return(u))})}function Mc(e,t){var n,i;return L(function(r){return 1==r.g?(n=e.g.manifest.retryParameters,_(r,xh(t,e.I,n),2)):("application/x-mpegurl"==(i=r.h)&&"WEBKIT"===Me().Fa()&&(i="application/vnd.apple.mpegurl"),r.return(i))})}function Pc(e){var t=e.g.textDisplayFactory;if(e.xi!==t){var n=e.s;e.s=t(),e.s.configure?e.s.configure(e.g.textDisplayer):kt("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.s.setTextLanguage||kt("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),n?(e.s.setTextVisibility(n.isTextVisible()),n.destroy().catch(function(){})):e.s.setTextVisibility(e.Y),e.G&&function(e,t){e.Z=t,e.h&&(e.h.j=t)}(e.G,e.s),e.xi=t,e.l&&function(e){var t=e.h.get(nt);t&&_l(e,t.stream,!0,0,!0)}(e.l)}else e.s&&e.s.configure&&e.s.configure(e.g.textDisplayer)}function Lc(e){var t,n,i;return L(function(r){if(1==r.g)return Me(),Ec(e,"media-source"),e.g.mediaSource.useSourceElements&&ls(e.h),Pc(e),t=function(e,t,n,i,r){return new Gs(e,t,n,r,i)}(e.h,e.s,{Lk:function(){return e.keySystem()},onMetadata:function(t,n,i){for(var r=(t=l(t)).next();!r.done;r=t.next())if((r=r.value).data&&"number"==typeof r.cueTime&&r.frames){var a=r.cueTime+n,o=i;o&&a>o&&(o=a);for(var s=l(r.frames),u=s.next();!u.done;u=s.next())Nc(e,a,o,"org.id3",u.value);e.C&&e.C.onHlsTimedMetadata(r,a)}},Nl:function(t){e.Ya&&el(e.Ya,{schemeIdUri:t.schemeIdUri,startTime:t.startTime,endTime:t.endTime,id:String(t.id),emsg:t})},onEvent:function(t){return e.dispatchEvent(t)},Pl:function(){e.H&&e.H.update&&e.H.update()}},e.P,e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ia=i,_(r,t.J,2);e.G=t,w(r)})}function Dc(e,t,n){function i(){return Qc(e)}if(e.j.o(t,"playing",i),e.j.o(t,"pause",i),e.j.o(t,"ended",i),e.j.o(t,"ratechange",function(){var t=e.h.playbackRate;0!=t&&(e.J&&(e.J.set(t),e.m==Ed&&e.u.playbackRateChanged(t),Jc(e,t)),t=Sc("ratechange"),e.dispatchEvent(t))}),t.remote&&(e.j.o(t.remote,"connect",function(){e.l&&"connected"==t.remote.state&&hd(e),od(e)}),e.j.o(t.remote,"connecting",function(){return od(e)}),e.j.o(t.remote,"disconnect",function(){return L(function(n){if(1==n.g)return e.l&&"disconnected"==t.remote.state?_(n,Bl(e.l),3):n.A(2);2!=n.g&&hd(e),od(e),w(n)})})),t.audioTracks&&(e.j.o(t.audioTracks,"addtrack",function(){return od(e)}),e.j.o(t.audioTracks,"removetrack",function(){return od(e)}),e.j.o(t.audioTracks,"change",function(){return od(e)})),t.videoTracks&&(e.j.o(t.videoTracks,"addtrack",function(){return od(e)}),e.j.o(t.videoTracks,"removetrack",function(){return od(e)}),e.j.o(t.videoTracks,"change",function(){return od(e)})),t.textTracks){var r=function(){e.m===xd&&e.s instanceof Fh&&hd(e),od(e)};e.j.o(t.textTracks,"addtrack",function(t){if(t.track)switch(t=t.track,t.kind){case"metadata":!function(e,t){if("metadata"==t.kind){t.mode="hidden",e.j.o(t,"cuechange",function(){if(t.activeCues)for(var n=l(t.activeCues),i=n.next();!i.done;i=n.next())i=i.value,Nc(e,i.startTime,i.endTime,i.type,i.value),e.C&&e.C.onCueMetadataChange(i.value);if(t.cues){n=[];for(var r=(i=l(t.cues)).next(),a={};!r.done;a={Gc:void 0},r=i.next())a.Gc=r.value,"com.apple.quicktime.HLS"==a.Gc.type&&null!=a.Gc.startTime&&(r=n.find(function(e){return function(t){return t.startTime==e.Gc.startTime&&t.endTime==e.Gc.endTime}}(a)),r||(r={startTime:a.Gc.startTime,endTime:a.Gc.endTime,values:[]},n.push(r)),r.values.push(a.Gc.value));for(i=(n=l(n)).next();!i.done;i=n.next())(i=i.value).values.some(function(e){return"X-ASSET-URI"==e.key||"X-ASSET-LIST"==e.key})&&e.C&&(i.values.push({key:"CUE",description:"",data:0!=i.startTime||e.T()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,i))}});var n=new zi(function(){for(var t=function(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"==e.kind})}(e),n=(t=l(t)).next();!n.done;n=t.next())n.value.mode="hidden"}).Ka().X(.5);e.Ke.push(function(){n.stop()})}}(e,t);break;case"chapters":!function(e,t){if(t&&"chapters"==t.kind){t.mode="hidden";var n=new zi(function(){t.mode="hidden"}).Ka().X(.5);e.Ke.push(function(){n.stop()})}}(e,t);break;default:r()}}),e.j.o(t.textTracks,"removetrack",r),e.j.o(t.textTracks,"change",r),"keep"!==e.g.streaming.crossBoundaryStrategy&&(e.j.o(t,"waiting",function(){e.l&&jl(e.l)}),e.j.o(t,"timeupdate",function(){e.l&&jl(e.l)}))}"none"!=t.preload&&e.j.ra(t,"loadedmetadata",function(){e.B.F=Date.now()/1e3-n})}function Rc(e,t,n){t=(new Map).set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Sc(n,t))}function Nc(e,t,n,i,r){e.Ia&&((t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r}).id=JSON.stringify(t),el(e.Ia,t))}function Oc(e,t){function n(n){t()?t().dispatchEvent(n):e.dispatchEvent(n)}function i(e){t()?fh(t(),!0,e):e()}t||(t=function(){return null});var r=new Xr(function(n,i,r,a,o){var s=t()?t().j:e.u;s&&s.segmentDownloaded(n,i,r,a,o)},function(t,r,a){n(Sc("downloadheadersreceived",r=(new Map).set("headers",t).set("request",r).set("requestType",a))),i(function(){if(e.qa){var n=e.qa;if(n.h.enabled){var i=t["cmsd-static"];if(i)try{var r=new Map,a=i.split(",");for(i=0;i<a.length;i++){var o=a[i].split("=");r.set(o[0],pc(o[1]))}}catch(e){}if(r=t["cmsd-dynamic"]){try{var s=new Map,u=r.split(";");for(r=1;r<u.length;r++){var l=u[r].split("=");s.set(l[0],pc(l[1]))}var h=s}catch(e){h=null}h&&(n.g=h)}}}})},function(e,t){n(Sc("downloadcompleted",e=(new Map).set("request",e).set("response",t)))},function(e,t,i,r){n(Sc("downloadfailed",e=(new Map).set("request",e).set("error",t).set("httpResponseCode",i).set("aborted",r)))},function(t,n,r){i(function(){var i=e.K,a=r;if(a=void 0===a?{}:a,i.g.enabled)if("HEAD"===n.method)$h(i,n);else switch(t){case 0:try{if(i.g.enabled){if(a.type){e:{switch(a.type){case 4:var o=i.l?lc:uc;break e;case 3:case 2:o=i.l?cc:hc;break e;case 5:o="s";break e}o=void 0}i.i=o}$h(i,n,{ot:"m",su:!i.u})}}catch(e){q("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",e)}break;case ta:try{if(i.g.enabled){var s=n.uris[0],u=a.segment;o=0,u&&(o=u.endTime-u.startTime);var h={d:1e3*o,st:i.h.T()?"l":"v"};h.ot=function(e){if(0===e.type)return"i";if(e=e.stream){var t=e.type;if("video"==t)return e.codecs&&e.codecs.includes(",")?ac:rc;if("audio"==t)return ic;if("text"==t)return"application/mp4"===e.mimeType?oc:"c"}}(a);var c=h.ot===rc||h.ot===ic||h.ot===ac||h.ot===oc,d=a.stream;if(d){var p=i.h.Xa();if(c&&(h.bl=function(e,t){if(!(t=e.h.bc()[t]).length)return NaN;var n=e.h.getCurrentTime();return(e=t.find(function(e){return e.start<=n&&e.end>=n}))?1e3*(e.end-n):NaN}(i,d.type),h.ot!==oc)){var f=ec(i,d.type);h.dl=p?f/Math.abs(p):f}if(d.bandwidth&&(h.br=d.bandwidth/1e3),d.segmentIndex&&u){var g=d.segmentIndex.cc(u.endTime,!0,0>p);if(g){var m=g.next().value;if(m&&m!=u){if(s&&!en(u.S(),m.S())){var v=m.S()[0],y=new URL(v),b=new URL(s);if(y.origin!==b.origin)var _=v;else{for(var w=y.pathname.split("/").slice(1),S=b.pathname.split("/").slice(1,-1);w[0]===S[0];)w.shift(),S.shift();for(;S.length;)S.shift(),w.unshift("..");_=w.join("/")}h.nor=_}if((m.startByte||m.endByte)&&(u.startByte!=m.startByte||u.endByte!=m.endByte)){var T=m.startByte+"-";m.endByte&&(T+=m.endByte),h.nrr=T}}}var A=i.h.Xa()||1,E=ec(i,d.type)||500,x=d.bandwidth,C=x?x*(u.endTime-u.startTime)/1e3/(E/A/1e3)*i.g.rtpSafetyFactor:NaN;isNaN(C)||(h.rtp=C)}}c&&h.ot!==oc&&(h.tb=function(e,t){var n=e.h.qb();if(!n.length)return NaN;e=n[0];for(var i=(n=l(n)).next();!i.done;i=n.next())"variant"===(i=i.value).type&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case rc:return e.videoBandwidth||NaN;case ic:return e.audioBandwidth||NaN;default:return e.bandwidth}}(i,h.ot)/1e3),$h(i,n,h)}}catch(e){q("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",e)}break;case 2:case 5:case 6:$h(i,n,{ot:"k"});break;case 4:$h(i,n,{ot:"o"})}})},function(n,i,r,a){(n=t()?t().l:e.H)&&n.banLocation&&n.banLocation(a)},function(n,i){if(i.data){i=i.data.byteLength;var r=t()?t().getStats():e.B;r&&(dh(r,i),0===n&&(r.dj=i))}});return r.configure(e.g.networking),r}function Uc(e,t,n){e.O=new Za,e.O.g=Ja,Bc(e),Zc(e),e.La=new zi(function(){Fc(e)}),e.g.streaming.rebufferingGoal&&e.La.ya(.25),e.j.o(t,"waiting",function(){return Fc(e)}),e.j.o(t,"canplaythrough",function(){return Fc(e)}),e.j.o(t,"playing",function(){return Fc(e)}),e.j.o(t,"seeked",function(){return Fc(e)}),n&&(e.j.o(t,"stalled",function(){return Fc(e)}),e.j.o(t,"progress",function(){return Fc(e)}),e.j.o(t,"timeupdate",function(){return Fc(e)}))}function Bc(e){var t=e.g.streaming.rebufferingGoal;e.O.i.set(Qa,Math.min(.5,t/2)).set(Ja,t)}function Fc(e){var t=!!e.G&&Ks(e.G),n=e.isEnded()||t||e.F.$i(),i=is(e.h.buffered,e.h.currentTime),r=(t=e.O).i.get(t.g),a=t.g;n=n||i>=r&&0<i?Qa:Ja,t.g=n,(a=a!=n)&&n===Qa&&(t.h=Date.now()),a&&Zc(e)}function jc(e){if(e.Ne=new $a(e.g,e.sa,e.D),e.H){var t=hn(e.g.manifest);e.h&&"AUDIO"===e.h.nodeName&&(t.disableVideo=!0),e.H.configure(t)}if(e.D&&e.D.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=Td&&no(e.Ne,e.i)&&od(e)}catch(t){gd(e,t)}e.u&&td(e),!(t=e.l.s)||t.allowedByApplication&&t.allowedByKeySystem||nd(e)}e.I&&e.I.configure(e.g.networking),e.G&&(e.G.configure(e.g.mediaSource),e.G.Ia=e.g.manifest.segmentRelativeVttTiming),e.s&&Pc(e),e.u&&(e.u.configure(e.g.abr),e.g.abr.enabled?e.u.enable():e.u.disable(),dd(e)),e.O&&Bc(e),e.La&&(e.g.streaming.rebufferingGoal?e.La.ya(.25):e.La.stop()),e.i&&bd(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.qa&&e.qa.configure(e.g.cmsd),e.ua&&e.ua.configure(e.g.queue)}function Gc(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{Yc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}function Hc(e,t){var n,i;return L(function(r){return 1==r.g?e.m!=Ed&&e.m!=xd?r.return(null):(n=e.Te,e.i&&(n=e.i.imageStreams),(i=n[0])?(null!=t&&(i=n.find(function(e){return e.id==t})),i?i.segmentIndex?r.A(2):_(r,i.createSegmentIndex(),2):r.return(null)):r.return(null)):r.return(i)})}function Vc(e,t,n,i){var r=t.width||0,a=t.height||0,o=r/i.Yc,s=a/i.rows,u=i.Yc*i.rows,l=e.j-e.startTime;l=e.C||l/u;var h=e.startTime,c=0,d=0;return 1<u&&(d=Math.floor((n-e.startTime)/l),h=e.startTime+d*l,c=d%i.Yc*o,d=Math.floor(d/i.Yc)*s),i=!1,(n=e.thumbnailSprite)&&(i=!0,s=n.height,c=n.positionX,d=n.positionY,o=n.width),{segment:e,imageHeight:a,imageWidth:r,height:s,positionX:c,positionY:d,startTime:h,duration:l,uris:e.S(),startByte:e.Kc(),endByte:e.Ic(),width:o,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs}}function Wc(e,t){e.j.o(t,"cuechange",function(){e.s.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));for(var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]),a=(r=l(r)).next();!a.done;a=r.next()){if(1/0===(a=a.value).endTime||a.endTime<a.startTime)a=null;else{var o=new zn(a.startTime,a.endTime,a.text);o.line="number"==typeof a.line?a.line:null,a.lineAlign&&(o.lineAlign=a.lineAlign),o.lineInterpretation=a.snapToLines?ai:1,o.position="number"==typeof a.position?a.position:null,a.positionAlign&&(o.positionAlign=a.positionAlign),o.size=a.size,o.textAlign=a.align,"lr"===a.vertical?o.writingMode="vertical-lr":"rl"===a.vertical&&(o.writingMode="vertical-rl"),a.region&&(o.region.id=a.region.id,o.region.height=a.region.lines,o.region.heightUnits=2,o.region.regionAnchorX=a.region.regionAnchorX,o.region.regionAnchorY=a.region.regionAnchorY,o.region.scroll=a.region.scroll,o.region.viewportAnchorX=a.region.viewportAnchorX,o.region.viewportAnchorY=a.region.viewportAnchorY,o.region.viewportAnchorUnits=qt,o.region.width=a.region.width,o.region.widthUnits=qt),Yn(o),a=o}a&&((o=e.g.mediaSource.modifyCueCallback)&&o(a,null,n),i.push(a))}e.s.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}function zc(e){return Array.from(e.h.textTracks).filter(function(e){return"metadata"!=e.kind&&"chapters"!=e.kind&&"Shaka Player TextTrack"!=e.label})}function Kc(e,t){var n;return L(function(i){switch(i.g){case 1:return S(i,2),_(i,xh(t,e.I,e.g.streaming.retryParameters),4);case 4:n=i.h,A(i,3);break;case 2:E(i);case 3:if(n)return i.return(n);throw new Ce(1,2,2011,t)}})}function Xc(e,t,n,i){var r,a,o;return L(function(s){if(1==s.g){r=ta,(a=Zr([t],i)).method="GET";var u=e.K;try{u.g.enabled&&$h(u,a,{ot:"c",su:!0})}catch(e){q("CMCD_TEXT_ERROR","Could not generate text CMCD data.",e)}return _(s,n.request(r,a).promise,2)}return o=s.h,s.return(o.data)})}function Yc(e,t,n,i){var r=Fi(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=Te(t),function(e,t){function n(e){for(var n=e,i=l(t),r=i.next();!r.done;r=i.next())(r=r.value).end&&r.start<e&&(n+=r.end-r.start);return(10>(e=Math.floor(n/3600))?"0":"")+e+":"+(10>(i=Math.floor(n/60%60))?"0":"")+i+":"+(10>(r=Math.floor(n%60))?"0":"")+r+"."+(100>(n=Math.floor(1e3*n%1e3))?10>n?"00":"0":"")+n}var i=Rh(e);e="WEBVTT\n\n";for(var r=(i=l(i)).next();!r.done;r=i.next())e+=n((r=r.value).startTime)+" --\x3e "+n(r.endTime)+function(e){var t=[];switch(e.textAlign){case"left":t.push("align:left");break;case"right":t.push("align:right");break;case $n:t.push("align:middle");break;case"start":t.push("align:start");break;case"end":t.push("align:end")}switch(e.writingMode){case"vertical-lr":t.push("vertical:lr");break;case"vertical-rl":t.push("vertical:rl")}return t.length?" "+t.join(" "):""}(r)+"\n",e+=r.payload+"\n\n";return e}(t=n.parseMedia(t,e,null,[]),i);throw new Ce(2,2,2014,n)}function qc(e){var t=nh();return t.streaming.failureCallback=function(t){if(e.T()){var n=null;1001==t.code||1002==t.code?(n=1,e.g.streaming.lowLatencyMode&&(n=.1)):1003==t.code&&(n=.1),null!=n&&(t.severity=1,e.Th(n))}},t.textDisplayFactory=function(){var t=Me();return e.Pe&&(document.fullscreenEnabled||"WEBKIT"!==t.Fa())?new Wh(e.h,e.Pe):"track"in document.createElement("track")?new Fh(e):new Vh},t}function Zc(e){var t=e.zf();if(e.B&&e.O&&e.F){if(0==e.g.streaming.rebufferingGoal){var n=e.J;n.j=!1,Xu(n)}else(n=e.J).j=t,Xu(n);if(e.K&&(n=e.K,t||n.u||(n.u=!0),n.u&&t&&(n.C=!0),n.F=t),Qc(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Xe<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.R&&(e.R=Math.min(e.R+ ++e.Xe*r,n-i))}}t=(new Map).set("buffering",t),e.dispatchEvent(Sc("buffering",t))}function Jc(e,t){e.ic.Sa(),e.ic.o(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.xa(),r=e.T(),a=r?e.g.streaming.safeSeekOffset:0;0<t?(!r||1<=t)&&Math.floor(n)>=Math.floor(i.end)&&e.xd():Math.floor(n)<=Math.floor(i.start+a)&&e.xd()})}function Qc(e){if(e.B&&e.O){var t=e.B.g,n="playing";e.O.g==Ja?n="buffering":e.isEnded()?n="ended":e.h.paused&&(n="paused");var i=n;if(null==t.g)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=(new Map).set("newstate",n),e.dispatchEvent(Sc("statechanged",n)))}}function $c(e){var t=e.h.playbackRate,n=e.T();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.Ri();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.Uc(i,!1):1==r&&t!==e.J.dd()&&e.xd()}if(n&&(n=e.xa(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var a=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var o=e.g.streaming.liveSync.targetLatency,s=o+i,u=Math.max(0,o-i),l=e.g.streaming.liveSync.maxPlaybackRate,h=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(o=e.i.serviceDescription.targetLatency,null!=e.i.serviceDescription.targetLatency?s=e.i.serviceDescription.targetLatency+i:null!=e.i.serviceDescription.maxLatency&&(s=e.i.serviceDescription.maxLatency),null!=e.i.serviceDescription.targetLatency?u=Math.max(0,e.i.serviceDescription.targetLatency-i):null!=e.i.serviceDescription.minLatency&&(u=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,h=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.R||"number"!=typeof o||(e.R=o);var c=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.fc&&null!==e.R&&"number"==typeof o&&e.Xe<c&&Date.now()-e.fc>1e3*a&&(a=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.R=Math.max(e.R-(o-a)/2,a+i),e.fc=Date.now()),r&&null!==e.R&&(s=e.R+i,u=e.R-i),o=n.end-e.h.currentTime,i=0,e.m==xd&&0<(r=e.h.buffered).length&&(i=r.end(r.length-1),i=Math.max(l,i-n.end)),n=e.g.streaming.liveSync.panicMode,r=1e3*e.g.streaming.liveSync.panicThreshold,a=Date.now()-e.O.h,n&&!h&&(h=e.g.streaming.liveSync.minPlaybackRate),n&&h&&a<=r?t!=h&&e.Uc(h,!1):null!=s&&l&&o-i>s?(t!=l&&e.Uc(l,!1),e.fc=null):null!=u&&h&&o-i<u?(t!=h&&e.Uc(h,!1),e.fc=null):t!==e.J.dd()&&(e.xd(),e.fc=Date.now())}}function ed(e){if(e.h){var t=function(t,n){var i=void 0===i?Number.EPSILON:i;if(t===n)i=!0;else{var r=Math.abs(t-n);i=r<=i||i!==Number.EPSILON&&Math.abs(r-i)<=Number.EPSILON}return!!((i||n>t)&&e.zg<t)&&(e.zg=t,!0)},n=e.xa();if(n=0<(n=n.end-n.start)?e.h.currentTime/n:0,!isNaN(n)){if(t(0,n*=100))var i=Sc("started");else t(25,n)?i=Sc("firstquartile"):t(50,n)?i=Sc("midpoint"):t(75,n)?i=Sc("thirdquartile"):((t(100,n)||100<n)&&(i=Sc("complete")),e.g&&1/0!=e.g.playRangeEnd&&e.isEnded()&&e.h.pause());i&&e.dispatchEvent(i)}}}function td(e){try{ro(e.Ne,e.i)}catch(t){return gd(e,t),!1}var t=pr(e.i.variants);return t=e.L.create(t),e.u.setVariants(Array.from(t.values())),!0}function nd(e,t,n,i,r){var a;t=void 0===t||t,n=void 0===n?0:n,i=void 0!==i&&i,r=void 0===r||r,(a=td(e)?e.u.chooseVariant():null)&&id(e,a,r,t,n,i)}function id(e,t,n,i,r,a){a=void 0!==a&&a;var o=e.l.s;if(t==o)i&&yl(e.l,t,i,r,!0);else{var s=e.B.h;if(s.h!=t&&(s.h=t,s.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),yl(e.l,t,i,r,a,n),i=null,o&&(i=or(o)),(o=or(t)).active=!0,e.P&&(r=e.P,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),a=0,s=-1,t.mimeType){case"video/webm":a=1;break;case"video/mp4":a=2}switch(e.oh()){case"DASH":s=1;break;case"HLS":s=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(a),r.j||r.g.setStreamingFormat(s))}n?_d(e,n=Sc("adaptation",n=(new Map).set("oldTrack",i).set("newTrack",o))):sd(e,i,o),ud(e,i,o)}}function rd(e,t){var n=Array.from(e.h.audioTracks).find(function(e){return e.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var i=ad(e);sd(e,n=cr(n,i),t=cr(t,i)),ud(e,n,t)}}function ad(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(e){return e.selected}):null}function od(e){_d(e,Sc("trackschanged")),ld(e)}function sd(e,t,n){_d(e,t=Sc("variantchanged",t=(new Map).set("oldTrack",t).set("newTrack",n)))}function ud(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&ld(e)}function ld(e){_d(e,Sc("audiotrackschanged"))}function hd(e){_d(e,Sc("textchanged"))}function cd(e){_d(e,Sc("texttrackvisibility"))}function dd(e){e.g.abr.enabled||fd(e),_d(e,Sc("abrstatuschanged",(new Map).set("newStatus",e.g.abr.enabled)))}function pd(e){var t=e.sc().find(function(e){return e.active});t&&e.s&&e.s.setTextLanguage&&e.s.setTextLanguage(t.language)}function fd(e,t){if(t=void 0===t||t,e.m==Ed){e.Qe.stop();for(var n=l(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&td(e)}}function gd(e,t){var n,i,r,a;return L(function(o){switch(o.g){case 1:if(e.m==Td)return o.return();if(1===t.severity&&e.B.K++,n=!0,!(e.$&&e.i&&e.l)||3016!=t.code&&3014!=t.code&&3015!=t.code&&3024!=t.code&&3018!=t.code){o.A(2);break}return"WEBKIT"===Me().Fa()&&3016==t.code?o.return():(S(o,3),_(o,Bl(e.l),5));case 5:i=o.h,n=!i,i&&(r=Sc("mediasourcerecovered"),e.dispatchEvent(r)),A(o,2);break;case 3:E(o),n=!0;case 2:if(!n)return o.return();2===t.severity&&fd(e,!1),a=Sc("error",(new Map).set("detail",t)),e.dispatchEvent(a),a.defaultPrevented&&(t.handled=!0),w(o)}})}function md(e,t,n,i){i=void 0===i?e:i,e=(new Map).set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Sc(t,e))}function vd(e,t,n,i){i=void 0!==i&&i,t=(new Map).set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Sc(i?"audiotrackchanged":"mediaqualitychanged",t))}function yd(e,t){if(t=void 0===t||t,!e.h.error)return t?new Ce(2,3,3016):null;var n=e.h.error.code;return t||1!=n?((t=e.h.error.msExtendedCode)&&(0>t&&(t+=Math.pow(2,32)),t=t.toString(16)),new Ce(2,3,3016,n,t,e.h.error.message)):null}function bd(e,t,n){0<t&&(e.T()||e.Kj(t)),n<(t=e.getDuration())&&(e.T()||e.wb(n))}function _d(e,t){L(function(n){if(1==n.g)return _(n,Promise.resolve(),2);e.m!=Td&&e.dispatchEvent(t),w(n)})}function wd(e){for(var t=new Set,n=(e=l(e)).next();!n.done;n=e.next())(n=n.value).language?t.add(ht(n.language)):t.add("und");return t}function Sd(e){for(var t=new Map,n=new Map,i=0;i<e.length;i++){var r=e[i],a="und",o=[];r.language&&(a=ht(r.language)),(o="variant"==r.type?r.audioRoles:r.roles)&&o.length||(o=[""]),t.has(a)||t.set(a,new Set);for(var s=(o=l(o)).next();!s.done;s=o.next())s=s.value,t.get(a).add(s),r.label&&(n.has(a)||n.set(a,new Map),n.get(a).set(s,r.label))}var u=[];return t.forEach(function(e,t){for(var i=(e=l(e)).next();!i.done;i=e.next()){i=i.value;var r=null;n.has(t)&&n.get(t).has(i)&&(r=n.get(t).get(i)),u.push({language:t,role:i,label:r})}}),u}yc.prototype.release=function(){0<this.h.length?this.h.shift()():this.g=null},m(_c,$),(i=_c.prototype).destroy=function(){var e,t=this;return L(function(n){switch(n.g){case 1:return t.m==Td?n.return():(wc(t),e=t.detach(),t.m=Td,_(n,e,2));case 2:return _(n,t.Tg(),3);case 3:if(t.Ue&&(t.Ue.release(),t.Ue=null),t.Je&&(t.Je.release(),t.Je=null),t.j&&(t.j.release(),t.j=null),t.ic&&(t.ic.release(),t.ic=null),t.Nd&&(t.Nd.release(),t.Nd=null),t.Ta=null,t.g=null,t.B=null,t.Pe=null,t.K=null,t.qa=null,!t.I){n.A(4);break}return _(n,t.I.destroy(),5);case 5:t.I=null;case 4:t.u&&(t.u.release(),t.u=null),t.ua&&(t.ua.destroy(),t.ua=null),$.prototype.release.call(t),w(n)}})},i.ac=function(e,t){t=void 0===t||t;var n,i,r,a=this;return L(function(o){switch(o.g){case 1:if(a.m==Td)throw new Ce(2,7,7e3);if(n=a.h&&a.h==e,!a.h||a.h==e){o.A(2);break}return _(o,a.detach(),2);case 2:return _(o,xc(a,"attach"),4);case 4:if(o.h)return o.return();if(S(o,5,6),n||(Ec(a,"attach"),i=function(){var e=yd(a,!1);e&&gd(a,e)},a.Je.o(e,"error",i),a.h=e,a.K&&a.K.setMediaElement(e)),Me(),!t||!dv()||a.G){o.A(6);break}return _(o,Lc(a),6);case 6:x(o),a.ba.release(),C(o,0);break;case 5:return r=E(o),_(o,a.detach(),10);case 10:throw r}})},i.Bi=function(e){this.zi=e},i.detach=function(e){e=void 0!==e&&e;var t=this;return L(function(n){if(1==n.g){if(t.m==Td)throw new Ce(2,7,7e3);return _(n,t.nc(!1,e),2)}if(3!=n.g)return _(n,xc(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.Je.Sa(),t.h=null),Ec(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ba.release()}w(n)})},i.nc=function(t,n){t=void 0===t||t,n=void 0!==n&&n;var i,r,a,o,s,u,h,c,d,p,f,g,m,v=this;return L(function(y){switch(y.g){case 1:return v.m!=Td&&(v.m=Ad),_(y,xc(v,"unload"),2);case 2:return y.h?y.return():(T(y,3),v.$=!1,Ec(v,"unload"),wc(v),i=v.Ke.map(function(e){return e()}),v.Ke=[],_(y,Promise.all(i),5));case 5:if(v.dispatchEvent(Sc("unloading")),v.He&&(v.He.release(),v.He=null),v.Ia&&(v.Ia.release(),v.Ia=null),v.Ya&&(v.Ya.release(),v.Ya=null),v.h&&(v.j.Sa(),v.ic.Sa()),v.Qe.stop(),v.Mb&&(v.Mb.release(),v.Mb=null),v.La&&(v.La.stop(),v.La=null),!v.H){y.A(6);break}return _(y,v.H.stop(),7);case 7:v.H=null,v.zc=null;case 6:if(!v.u){y.A(8);break}return _(y,v.u.stop(),8);case 8:if(!v.l){y.A(10);break}return _(y,v.l.destroy(),11);case 11:v.l=null;case 10:if(v.J&&(v.J.release(),v.J=null),v.F&&(v.F.release(),v.F=null),"webkit"!==e.shakaMediaKeysPolyfill||!v.D){y.A(12);break}return _(y,v.D.destroy(),13);case 13:v.D=null;case 12:if(!v.G){y.A(14);break}return _(y,v.G.destroy(),15);case 15:v.G=null;case 14:if(v.C&&!n&&v.C.onAssetUnload(),v.na&&!n&&(v.na.destroy(),v.na=null),n||v.Cg.stop(),v.K&&function(e){e.u=!1,e.F=!0,e.C=!1,e.l=!1,e.m=0,e.s=0,e.B=0,e.G=!1,e.j=null,e.D.Sa()}(v.K),v.qa&&(v.qa.g=null),!v.s){y.A(16);break}return _(y,v.s.destroy(),17);case 17:v.s=null;case 16:if(v.Y=!1,v.h){for(r=l(v.Ag),a=r.next();!a.done;a=r.next())(o=a.value).src.startsWith("blob:")&&URL.revokeObjectURL(o.src),o.remove();v.Ag=[],ls(v.h)&&v.h.load()}if(!v.D){y.A(18);break}return _(y,v.D.destroy(),19);case 19:v.D=null;case 18:if(v.Na&&v.U!=v.Na.cd()&&(v.Na.u||v.Na.destroy(),v.Na=null),v.U=null,v.Z=null,v.O=null,v.i){for(s=l(v.i.variants),u=s.next();!u.done;u=s.next())for(h=u.value,c=l([h.audio,h.video]),d=c.next();!d.done;d=c.next())(p=d.value)&&p.segmentIndex&&p.segmentIndex.release();for(f=l(v.i.textStreams),g=f.next();!g.done;g=f.next())(m=g.value).segmentIndex&&m.segmentIndex.release()}v.g&&v.g.streaming.clearDecodingCache&&(_r.clear(),Rr.clear()),v.i=null,v.B=new hh,v.xi=null,v.fc=null,v.R=null,v.Xe=-1,v.Te=[],v.eb=[],v.zg=-1,v.I&&v.I.Ii(),Zc(v);case 3:x(y),v.ba.release(),C(y,4);break;case 4:if(Me(),t&&dv()&&!v.G&&v.h)return _(y,Lc(v),0);y.A(0)}})},i.um=function(e){this.N=e},i.load=function(t,n,i){n=void 0===n?null:n;var r,a,o,s,u,h,c,d,p,f,g,m,v,y,b=this;return L(function(A){switch(A.g){case 1:if(b.m==Td)throw new Ce(2,7,7e3);if(r=null,a="",t instanceof ph){if(t.u)throw new Ce(2,7,7006);a=(r=t).cd()||""}else a=t||"";return _(A,bc(b.ba,"load"),2);case 2:if(b.ba.release(),!b.h)throw new Ce(2,7,7002);if(!b.U){A.A(3);break}return b.U=a,_(A,b.nc(!1),3);case 3:if(o=++b.Ve,s=function(){return L(function(e){if(1==e.g)return b.Ve==o?e.A(0):r?_(e,r.destroy(),3):e.A(3);throw new Ce(2,7,7e3)})},u=function(e,t){return L(function(n){switch(n.g){case 1:return T(n,2),_(n,bc(b.ba,t),4);case 4:return _(n,s(),5);case 5:return _(n,e(),6);case 6:return _(n,s(),7);case 7:r&&b.g&&(r.g=b.g);case 2:x(n),b.ba.release(),C(n,0)}})},S(A,5,6),null==n&&r&&(n=r.getStartTime()),b.N=n,b.$=!1,b.dispatchEvent(Sc("loading")),r){i=r.U,A.A(8);break}if(i){A.A(8);break}return _(A,u(function(){return L(function(e){if(1==e.g)return _(e,Mc(b,a),2);i=e.h,w(e)})},"guessMimeType_"),8);case 8:if(h=!!r,r){gh(r,b),b.B=r.getStats(),A.A(11);break}return _(A,kc(b,a,n,i,!0,b.g),12);case 12:(r=A.h)?(r.D=!1,gh(r,b),b.B=r.getStats(),r.start(),r.B.catch(function(){})):b.B=new hh;case 11:return c=!r,d=Date.now()/1e3,b.B=r?r.getStats():new hh,b.U=a,b.Z=i||null,Zc(b),p=function(){var e=b.h?b.h.buffered:null;return{start:es(e)||0,end:ts(e)||0}},b.Ia=new $u(p),b.Ia.addEventListener("regionadd",function(e){Rc(b,e.region,"metadataadded")}),c?_(A,u(function(){return L(function(e){return _(e,function(e,t){var n,i,r;return L(function(a){return 1==a.g?(n=Date.now()/1e3,i=!0,e.D=e.yd({yc:e.I,onError:function(t){gd(e,t)},Of:function(){},onExpirationUpdated:function(){var t=Sc("expirationupdated");e.dispatchEvent(t)},onEvent:function(t){e.dispatchEvent(t),"drmsessionupdate"==t.type&&i&&(i=!1,e.B.m=Date.now()/1e3-n)}}),e.D.configure(e.g.drm),r=br([t]),e.D.N=!0,_(a,Ea(e.D,[r],[]),2)):_(a,e.D.ac(e.h),0)})}(b,i),0)})},"initializeSrcEqualsDrmInner_"),23):(b.Ya=new $u(p),_(A,u(function(){return L(function(e){if(1==e.g)return _(e,Promise.race([r.na,r.B]),2);b.zc=r.H;var t=r;t.qa=!0,b.H=t.l,b.i=r.nh(),w(e)})},"waitForFinish"),15));case 15:if(b.G){A.A(16);break}return _(A,u(function(){return L(function(e){return _(e,Lc(b),0)})},"initializeMediaSourceEngineInner_"),16);case 16:return b.i&&b.i.textStreams.length&&(b.s.enableTextDisplayer?b.s.enableTextDisplayer():kt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),_(A,u(function(){return L(function(e){return _(e,r.B,0)})},"waitForFinish"),18);case 18:if(b.g=r.getConfiguration(),b.Ne=r.G,b.H&&b.H.setMediaElement&&b.h&&b.H.setMediaElement(b.h),b.He=function(e){return e.sa=!0,e.I}(r),b.Ge=r.Na,(f=r.C)&&(b.L=f),h&&b.h&&"AUDIO"===b.h.nodeName&&(function(e){for(var t=l(e.i.variants),n=t.next();!n.done;n=t.next())(n=n.value).video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(e){return e.audio})}(b),b.configure("manifest.disableVideo",!0)),r.i){A.A(19);break}return _(A,u(function(){return L(function(e){return _(e,yh(r,b.h),0)})},"drmEngine_.init"),19);case 19:return b.D=function(e){return e.ba=!0,e.i}(r),_(A,u(function(){return L(function(e){return _(e,b.D.ac(b.h),0)})},"drmEngine_.attach"),21);case 21:return!(g=r.F)||b.Ta&&b.Ta==g||(b.u=function(e){return e.Z=!0,e.j}(r),b.Ta=r.F,"function"!=typeof b.u.setMediaElement&&(kt("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),b.u.setMediaElement=function(){}),"function"!=typeof b.u.setCmsdManager&&(kt("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),b.u.setCmsdManager=function(){}),"function"!=typeof b.u.trySuggestStreams&&(kt("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),b.u.trySuggestStreams=function(){})),m=function(e){return e.ua=!0,e.L}(r),v=r.s,_(A,u(function(){return L(function(t){return _(t,function(t,n,i,r){var a,o,s,u,h,c,d,p,f,g,m,v,y,b,S,T,A,E,x,C,k,I,M,P,D,R,N;return L(function(O){switch(O.g){case 1:Ec(t,"load"),a=t.h,t.J=new Ku({tf:function(){return a.playbackRate},dd:function(){return a.defaultPlaybackRate},bi:function(e){a.playbackRate=e},jj:function(e){a.currentTime+=e}}),Dc(t,a,n),"onchange"in e.screen&&t.j.o(e.screen,"change",function(){if(t.L.getConfiguration){var e=t.L.getConfiguration();"AUTO"==e.Nc?td(t):"AUTO"==t.g.preferredVideoHdrLevel&&t.g.abr.enabled&&(e.Nc="AUTO",t.L.configure(e),td(t))}}),o=!1,s=l(t.i.variants);for(u=s.next();!u.done;u=s.next())h=u.value,(c=h.video&&h.video.dependencyStream)&&(o=Nt(c));!function(e,t,n){n||t.lcevc.enabled?(wc(e),null==e.P&&(e.P=new Lt(e.h,e.zi,t.lcevc,n),e.G&&(e.G.L=e.P))):wc(e)}(t,t.g,o),t.Od=t.g.preferredTextLanguage,t.Me=t.g.preferredTextRole,t.Le=t.g.preferForcedSubs,bd(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),t.u.init(function(e,n,i){t.i&&t.l&&e!=t.l.s&&id(t,e,!0,void 0!==n&&n,void 0===i?0:i)}),t.u.setMediaElement(a),t.u.setCmsdManager(t.qa),t.l=function(e){return new ml(e.i,{ed:function(){return e.F?e.F.We():0},getBandwidthEstimate:function(){return e.u.getBandwidthEstimate()},Xa:function(){return e.Xa()},video:e.h,ha:e.G,yc:e.I,onError:function(t){return gd(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Pf:function(t,n,i){var r=t.startTime;if(t=t.endTime,(n=n.type)!=nt){if(e.F){e.F.lj();var a=Ys(e.G,n);!e.T()&&e.h.paused&&!e.h.seeking&&null!=a&&0<a&&e.F.We()<a&&e.F.yg(a)}Fc(e)}i=(new Map).set("start",r).set("end",t).set("contentType",n).set("isMuxed",i),e.dispatchEvent(Sc("segmentappended",i))},Ol:function(t,n){(n=n.Id)&&e.Ge&&function(e,t,n){var i=function(e,t){var n=e.g.get(t);return n||(n={xe:[],Rg:null,contentType:t},e.g.set(t,n)),n}(e,t.contentType);!function(e,t){if((e=e.h()[t.contentType])&&0<e.length){var n=e[0].start,i=e[e.length-1].end,r=t.xe;t.xe=r.filter(function(e,t){return!(e.position<=n&&t+1<r.length&&r[t+1].position<=n||e.position>=i)})}else t.xe=[]}(e,i),e={Id:t,position:n},0<=(t=(i=i.xe).findIndex(function(e){return e.position>=n}))?i.splice(t,i[t].position==n?1:0,e):i.push(e)}(e.Ge,n,t)},Ei:function(t,n){var i=e.D;if(i.h.parseInbandPsshEnabled&&!i.G&&["audio","video"].includes(t)){t=new Sa(Te(n)),n=0;for(var r=l(t.data),a=r.next();!a.done;a=r.next())n+=a.value.length;if(0==n)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,a=(t=l(t.data)).next();!a.done;a=t.next())a=a.value,n.set(a,r),r+=a.length;Ia(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)}})}(t),t.l.configure(t.g.streaming),t.m=Ed,t.dispatchEvent(Sc("streaming")),d=i;case 2:for((f=t.l.s)||d||(d=td(t)?t.u.chooseVariant():null),g=[],m=l([(p=f||d).video,p.audio]),v=m.next();!v.done;v=m.next())(y=v.value)&&!y.segmentIndex&&(g.push(y.createSegmentIndex()),y.dependencyStream&&g.push(y.dependencyStream.createSegmentIndex()));if(!(0<g.length)){O.A(4);break}return _(O,Promise.all(g),4);case 4:if(!p||0!=p.disabledUntilTime){O.A(2);break}if(t.H&&t.H.onInitialVariantChosen&&t.H.onInitialVariantChosen(p),t.i.isLowLatency&&(t.g.streaming.lowLatencyMode?t.configure(t.Bg):Y("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),t.K&&(function(e,t){e.l=t,e.l?e.i==uc?e.i=lc:e.i==hc&&(e.i=cc):e.i==lc?e.i=uc:e.i==cc&&(e.i=hc)}(t.K,t.i.isLowLatency&&t.g.streaming.lowLatencyMode),function(e,t){if(e.g&&e.g.enabled&&e.g.version==sc&&e.j&&e.j.autoplay){var n=e.j.play();n&&n.then(function(){e.B=t}).catch(function(){e.B=0})}}(t.K,1e3*n)),bd(t.i.presentationTimeline,t.g.playRangeStart,t.g.playRangeEnd),function(e,t,n){e.j.presentationTimeline.T()||(e.U=t,e.R=n)}(t.l,t.g.playRangeStart,t.g.playRangeEnd),t.$=!0,t.dispatchEvent(Sc("canupdatestarttime")),b=function(e){t.F=function(e,t){return new Ou(e.h,e.i,e.g.streaming,t,function(){e.Mb&&qu(e.Mb,!0),e.l&&e.l.od(),e.O&&Fc(e)},function(t){return e.dispatchEvent(t)})}(t,e),t.Mb=function(e,t){var n=e.T()||"number"==typeof t&&0<t;(t=new wh(e.He,n)).addEventListener("enter",function(t){md(e,"timelineregionenter",t.region)}),t.addEventListener("exit",function(t){md(e,"timelineregionexit",t.region)}),t.addEventListener("skip",function(t){var n=t.region;t.seeking||(md(e,"timelineregionenter",n),md(e,"timelineregionexit",n))});var i=new wh(e.Ia,n);i.addEventListener("enter",function(t){Rc(e,t.region,"metadata")}),(n=new wh(e.Ya,n)).addEventListener("enter",function(t){t=(new Map).set("detail",t.region.emsg),e.dispatchEvent(Sc("emsg",t))});var r=new Yu(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.Ge&&r.g.add(e.Ge),r}(t,e),Uc(t,a,!1)},t.g.streaming.startAtSegmentBoundary||(null==(S=t.N)&&t.i.startTime&&(S=t.i.startTime),b(S)),f){O.A(7);break}if(!t.g.streaming.startAtSegmentBoundary){O.A(8);break}return T=t.i.presentationTimeline,t.N instanceof Date&&(E=T.m||T.i,null!=(x=t.N.getTime()/1e3-E)&&(A=x)),null==A&&(A="number"==typeof t.N?t.N:t.h.currentTime),null==t.N&&t.i.startTime&&(A=t.i.startTime),C=T.dc(),k=T.Kb(),A<C?A=C:A>k&&(A=k),_(O,function(e,t){var n,i,r,a,o;return L(function(s){return 1==s.g?(n=e.audio,i=e.video,r=function(e,t){var n,i,r;return L(function(a){return 1==a.g?e?e.segmentIndex?a.A(2):_(a,e.createSegmentIndex(),2):a.return(null):(i=(n=e.segmentIndex.cc(t))?n.next().value:null)?(r=i.startTime,a.return(r)):a.return(null)})},_(s,r(n,t),2)):3!=s.g?(a=s.h,_(s,r(i,t),3)):null!=(o=s.h)&&null!=a?s.return(Math.max(o,a)):null!=o?s.return(o):null!=a?s.return(a):s.return(t)})}(d,A),9);case 9:I=O.h,b(I);case 8:id(t,d,!0,!1,0);case 7:return t.F.ready(),t.sc().find(function(e){return e.active})||((M=fr(t.i.textStreams,t.Od,t.Me,t.Le)[0]||null)&&lh(t.B.h,M,!0),d&&(M?(yr(d.audio,M,t.g)&&(t.Y=!0),t.Y&&t.s.setTextVisibility(!0)):(t.Y=!1,t.s.setTextVisibility(!1)),cd(t)),M&&(t.g.streaming.alwaysStreamText||t.jd())&&(bl(t.l,M),pd(t))),_(O,t.l.start(r),10);case 10:t.g.abr.enabled&&(t.u.enable(),dd(t)),od(t),td(t),t.i.variants.some(function(e){return e.primary}),((P=t.T())&&(t.g.streaming.liveSync&&t.g.streaming.liveSync.enabled||t.i.serviceDescription||t.g.streaming.liveSync.panicMode)||t.g.streaming.vodDynamicPlaybackRate)&&(D=function(){return $c(t)},t.j.o(a,"timeupdate",D)),P||(R=function(){return ed(t)},t.j.o(a,"timeupdate",R),ed(t),t.i.nextUrl&&(0<t.g.streaming.preloadNextUrlWindow&&(N=function(){var e;return L(function(n){if(1==n.g)return e=t.xa().end-t.h.currentTime,!isNaN(e)&&e<=t.g.streaming.preloadNextUrlWindow?(t.j.Da(a,"timeupdate",N),_(n,t.preload(t.i.nextUrl),4)):n.A(0);t.Na=n.h,w(n)})},t.j.o(a,"timeupdate",N)),t.j.o(a,"ended",function(){t.load(t.Na||t.i.nextUrl)}))),t.C&&t.C.onManifestUpdated(P),w(O)}})}(b,d,v,m),0)})},"loadInner_"),22);case 22:!function(e){if(e.J)for(var t=l(e.J),n=t.next();!n.done;n=t.next())(n=n.value)();e.J=null}(r),b.Z&&Me().ig()&&Ri(b.Z)&&function(t,n,i){t.g&&e.ManagedMediaSource&&t.i&&t.B.useSourceElements&&(t.C&&t.g.removeChild(t.C),t.C=us(n,i),t.g.appendChild(t.C),t.g.disableRemotePlayback=!1)}(b.G,b.U,b.Z),A.A(14);break;case 23:return _(A,u(function(){return L(function(e){return _(e,function(e,t,n){var i,r,a,o,s,u,h,c,d,p,f,g;return L(function(m){switch(m.g){case 1:if(Ec(e,"src-equals"),i=e.h,e.F=new Du(i),r=!1,e.Ke.push(function(){r=!0}),e.dispatchEvent(Sc("canupdatestarttime")),null!=e.N&&e.F.yg(e.N),e.Mb=function(e,t){(t=new wh(e.Ia,t instanceof Date||0<t)).addEventListener("enter",function(t){Rc(e,t.region,"metadata")});var n=new Yu(e.h);return n.g.add(t),n}(e,e.N||0),e.J=new Ku({tf:function(){return i.playbackRate},dd:function(){return i.defaultPlaybackRate},bi:function(e){i.playbackRate=e},jj:function(e){i.currentTime+=e}}),Uc(e,i,!0),i.textTracks&&(Pc(e),a=function(t){if(!(e.s instanceof Fh)){var n=zc(e).find(function(e){return"disabled"!==e.mode});n&&(n.mode=t?"showing":"hidden"),e.s instanceof Gh&&(n=function(e){return Array.from(e.h.textTracks).find(function(e){return"Shaka Player TextTrack"==e.label})}(e))&&(n.mode=!t&&e.s.isTextVisible()?"showing":"hidden")}},e.j.o(i,"enterpictureinpicture",function(){return a(!0)}),e.j.o(i,"leavepictureinpicture",function(){return a(!1)}),i.remote?(e.j.o(i.remote,"connect",function(){return a(!1)}),e.j.o(i.remote,"connecting",function(){return a(!1)}),e.j.o(i.remote,"disconnect",function(){return a(!1)})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.j.o(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return a(!1)}),(o=i).webkitSupportsFullscreen&&e.j.o(o,"webkitpresentationmodechanged",function(){return a("inline"!==o.webkitPresentationMode)})),Dc(e,i,t),s=function(e,t,n){try{if(!e.g.enabled)return t;var i=Qh(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=ic;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=ac;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r="m";break e}r=void 0}return i.ot=r,i.su=!0,nc(t,tc(i))}catch(e){return q("CMCD_SRC_ERROR","Could not generate src CMCD data.",e),t}}(e.K,e.U,n),!s.includes("#t=")&&(0<e.g.playRangeStart||isFinite(e.g.playRangeEnd))&&(s+="#t=",0<e.g.playRangeStart&&(s+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(s+=","+e.g.playRangeEnd)),!e.G){m.A(2);break}return _(m,e.G.destroy(),3);case 3:e.G=null;case 2:return ls(i),i.src=s,"TV"==(u=Me()).Ja()&&i.load(),"none"!=i.preload&&!i.autoplay&&Ri(n)&&"WEBKIT"===u.Fa()&&i.load(),e.m=xd,e.dispatchEvent(Sc("streaming")),h=new Br,Au(i,HTMLMediaElement.HAVE_METADATA,e.j,function(){e.F.ready(),e.Z&&Ri(e.Z)||h.resolve()}),c=function(){return new Promise(function(t){var n=new zi(t);e.j.o(i.textTracks,"change",function(){return n.X(.5)}),n.X(.5)})},Au(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var t,n,i,a,o;return L(function(s){if(1==s.g)return _(s,c(),2);if(r)return s.return();if(function(e){var t=e.g.preferredAudioLanguage;""!=t&&e.Aj(t,e.g.preferredVariantRole)}(e),(t=zc(e)).some(function(e){return"showing"===e.mode})&&(e.Y=!0,e.s.setTextVisibility(!0)),!(e.s instanceof Fh))for(t.length&&(e.s.enableTextDisplayer?e.s.enableTextDisplayer():kt("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),n=!1,i=l(t),a=i.next();!a.done;a=i.next())"disabled"!==(o=a.value).mode&&(n?(o.mode="disabled",Y("Found more than one enabled text track, disabling it",o)):(Wc(e,o),n=!0));!function(e){var t=e.g.preferredTextLanguage;""!=t&&e.Xh(t,e.g.preferredTextRole,e.g.preferForcedSubs)}(e),e.Z&&Ri(e.Z)&&h.resolve(),w(s)})}),i.error?h.reject(yd(e)):"none"==i.preload&&(Y('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),h.resolve()),e.j.ra(i,"error",function(){h.reject(yd(e))}),_(m,qi(e.g.streaming.loadTimeout,h),4);case 4:((d=e.T())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(p=function(){return $c(e)},e.j.o(i,"timeupdate",p)),d||(f=function(){return ed(e)},e.j.o(i,"timeupdate",f),ed(e)),e.C&&(e.C.onManifestUpdated(d),d&&(g=e.xa().end,e.j.o(i,"progress",function(){var t=e.xa().end;g!=t&&(e.C.onManifestUpdated(e.T()),g=t)}))),e.$=!0,w(m)}})}(b,d,i),0)})},"srcEqualsInner_"),14);case 14:b.dispatchEvent(Sc("loaded"));case 6:if(x(A),!r){A.A(25);break}return _(A,r.destroy(),25);case 25:b.Na=null,C(A,0);break;case 5:if(!(y=E(A))||7e3==y.code){A.A(27);break}return _(A,b.nc(!1),27);case 27:throw y}})},i.qm=function(e,t){e=void 0===e||e,t=void 0!==t&&t;var n,i=this;return L(function(r){return 1==r.g?_(r,Cc(i),2):3!=r.g?(n=r.h,_(r,i.nc(e,t),3)):r.return(n)})},i.Ni=function(e,t){e=void 0!==e&&e,t=void 0!==t&&t;var n,i=this;return L(function(r){return 1==r.g?_(r,Cc(i,t),2):3!=r.g?(n=r.h,_(r,i.detach(e),3)):r.return(n)})},i.preload=function(e,t,n,i){t=void 0===t?null:t;var r,a,o=this;return L(function(s){return 1==s.g?(ih(r=qc(o),i||o.g,qc(o)),_(s,kc(o,e,t,n,!1,r),2)):((a=s.h)?a.start():gd(o,new Ce(2,7,7005)),s.return(a))})},i.Tg=function(){var e,t,n,i,r=this;return L(function(a){for(e=[],t=l(r.Re),n=t.next();!n.done;n=t.next())(i=n.value).u||e.push(i.destroy());return r.Re=[],_(a,Promise.all(e),0)})},i.Xl=function(){for(var e=this.ba;e.g;)e.release()},i.yd=function(e){return new Aa(e)},i.configure=function(e,t){if(2==arguments.length&&"string"==typeof e&&(e=Wl(e,t)),e.streaming&&"forceTransmuxTS"in e.streaming&&(kt("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(kt("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){kt("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var n=Me();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&"WEBKIT"===n.Fa(),delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&"boolean"==typeof e.streaming.liveSync&&(kt("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),n=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=n),e.streaming&&(!e.streaming.liveSync||!("targetLatency"in e.streaming.liveSync))&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){n=e.streaming.liveSyncMinLatency||0;var i=Math.abs((e.streaming.liveSyncMaxLatency||1)-n)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=n+i,e.streaming.liveSync.targetLatencyTolerance=i}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(kt("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(kt("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(kt("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(kt("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(kt("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(kt("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(kt("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(kt("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){kt("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var r=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return r},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(kt("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(kt("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(kt("manifest.dash.enableAudioGroups configuration","It is now enabled by default and cannot be disabled."),delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(kt("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(kt("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(kt("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(kt("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(kt("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(kt("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(kt("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){for(var a in n=!1,e.drm.advanced){var o=e.drm.advanced[a];i=o.videoRobustness,o=o.audioRobustness,"videoRobustness"in e.drm.advanced[a]&&!Array.isArray(e.drm.advanced[a].videoRobustness)&&(e.drm.advanced[a].videoRobustness=[i],n=!0),"audioRobustness"in e.drm.advanced[a]&&!Array.isArray(e.drm.advanced[a].audioRobustness)&&(e.drm.advanced[a].audioRobustness=[o],n=!0)}n&&kt("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(kt("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(kt("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(kt("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),a=ih(this.g,e,qc(this)),jc(this),a},i.nk=function(e){this.Bg=e},i.getConfiguration=function(){var e=qc(this);return ih(e,this.g,qc(this)),e},i.Ck=function(){return this.Bg},i.Ui=function(){return ih(qc(this),this.g,qc(this)),Kl(this.g,qc(this))},i.Ri=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(e>=(t=Math.min(this.h.currentTime+t,this.xa().end)))return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},i.vj=function(){for(var e in this.g)delete this.g[e];ih(this.g,qc(this),qc(this)),jc(this)},i.Mk=function(){return this.m},i.oh=function(){return this.i?this.i.type:null},i.Tk=function(){return this.h},i.Jb=function(){return this.I},i.cd=function(){return this.U},i.pf=function(){return this.C?this.C:null},i.qh=function(){return this.ua?this.ua:null},i.T=function(){return this.i&&!this.Ca()?this.i.presentationTimeline.T():!(!this.h||!this.h.src&&!this.Ca())&&1/0==this.h.duration},i.hd=function(){return!!this.i&&this.i.presentationTimeline.hd()},i.Fd=function(){if(this.i&&!this.Ca()){var e=this.i.variants;return!!e.length&&!e[0].video}return!(!this.h||!this.h.src&&!this.Ca())&&(this.h.videoTracks?0==this.h.videoTracks.length:0==this.h.videoHeight)},i.Dh=function(){if(this.i&&!this.Ca()){var e=this.i.variants;return!(!e.length||(e=e[0]).audio||!e.video||e.video.codecs.includes(","))}return!(!this.h||!this.h.src&&!this.Ca()||!this.h.audioTracks)&&0==this.h.audioTracks.length},i.xa=function(){if(this.i&&!this.Ca()){if(!this.$&&"HLS"==this.i.type)return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.dc(),end:e.Kb()}}if(this.h&&(this.h.src||this.Ca())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return{start:t,end:e=Math.min(e.end(e.length-1),n)}}return{start:0,end:0}},i.rl=function(){this.T()&&(this.h.currentTime=this.xa().end)},i.xl=function(){return this.$},i.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},i.drmInfo=function(){return this.D?this.D.g:null},i.fe=function(){return this.D?this.D.fe():1/0},i.jh=function(){return this.D?this.D.jh():[]},i.qf=function(){return this.D?this.D.qf():{}},i.zf=function(){return this.O?this.O.g==Ja:!!this.U},i.Xa=function(){return this.h?this.J?this.J.i:1:0},i.si=function(e){this.m==Ed&&this.l&&vl(this.l,e)},i.Uc=function(e,t){t=void 0===t||t,0==e?Y("A trick play rate of 0 is unsupported!"):(this.J.set(e),this.m==Ed&&(this.u.playbackRateChanged(e),this.si(t&&1!=e)),Jc(this,e))},i.xd=function(){var e=this.J.dd();this.m==xd&&this.J.set(e),this.m==Ed&&(this.J.set(e),this.u.playbackRateChanged(e),this.si(!1)),this.ic.Sa()},i.qb=function(){if(this.i&&!this.Ca()){for(var e=this.l?this.l.s:null,t=[],n=0,i=l(this.i.variants),r=i.next();!r.done;r=i.next())if(dr(r=r.value)){var a=or(r);a.active=r==e,a.active||1==n||null==e||r.video!=e.video||r.audio!=e.audio||(a.active=!0),a.active&&n++,t.push(a)}return t}if(this.h&&this.h.audioTracks){var o=ad(this);return(e=Array.from(this.h.audioTracks)).length?e.map(function(e){return cr(e,o)}):o?[cr(null,o)]:[]}return[]},i.sc=function(){if(this.i){if(this.Ca())return[];for(var e=this.l?this.l.B:null,t=[],n=l(this.i.textStreams),i=n.next();!i.done;i=n.next()){var r=sr(i=i.value);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?zc(this).map(function(e){return hr(e)}):[]},i.mh=function(){var e=this.Te;return this.i&&(e=this.i.imageStreams),e.map(function(e){return ur(e)})},i.rk=function(e){var t,n,i=this;return L(function(r){return 1==r.g?_(r,Hc(i,e),2):(t=r.h)?(n=[],t.segmentIndex.Ib(function(e){var i=Gc(e.tilesLayout||t.tilesLayout);if(i)for(var r=i.rows*i.Yc,a=e.j-e.startTime,o=0;o<r;o++){var s=Vc(e,t,e.startTime+a*o/r,i);n.push(s)}}),t.closeSegmentIndex&&t.closeSegmentIndex(),r.return(n)):r.return(null)})},i.Vi=function(e,t){var n,i,r,a,o=this;return L(function(s){return 1==s.g?_(s,Hc(o,e),2):(n=s.h)?null==(i=n.segmentIndex.find(t))?s.return(null):(r=n.segmentIndex.get(i),(a=Gc(r.tilesLayout||n.tilesLayout))?s.return(Vc(r,n,t,a)):s.return(null)):s.return(null)})},i.dg=function(e){var t,n=this;this.i&&this.F&&((t=n.i.textStreams.find(function(t){return t.id==e.id}))&&t!=n.l.B&&(lh(n.B.h,t,!1),bl(n.l,t),hd(n),pd(n),n.Od=t.language),!this.Ca())||function(){if(n.h&&n.h.textTracks){var t=zc(n),i=t.find(function(t){return lr(t)===e.id});if(i){if(n.s instanceof Fh)for(var r=(t=l(t)).next();!r.done;r=t.next()){var a=(r=r.value)===i?n.Y?"showing":"hidden":"disabled";r.mode!==a&&(r.mode=a)}else(t=t.find(function(e){return"disabled"!==e.mode}))!==i&&(t&&(t.mode="disabled",n.j.Da(t,"cuechange"),n.s.remove(0,1/0)),i&&Wc(n,i));hd(n),pd(n)}}}()},i.Ae=function(e,t,n){var i=this;t=void 0!==t&&t,n=void 0===n?0:n,this.i&&this.F&&(function(){var r=i.i.variants.find(function(t){return t.id==e.id});if(r&&dr(r)){var a=i.l.s;i.g.abr.enabled&&(a.video!=r.video||a.audio&&r.audio&&a.audio.language==r.audio.language&&a.audio.channelsCount==r.audio.channelsCount&&a.audio.label==r.audio.label)&&Y("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),i.Ca()?id(i,r,!1,!1,0):id(i,r,!1,t||!1,n||0),i.L.configure({language:r.language,role:r.audio&&r.audio.roles&&r.audio.roles[0]||"",channelCount:r.audio&&r.audio.channelsCount?r.audio.channelsCount:0,Nc:r.video&&r.video.hdr?r.video.hdr:"",spatialAudio:!(!r.audio||!r.audio.spatialAudio)&&r.audio.spatialAudio,videoLayout:r.video&&r.video.videoLayout?r.video.videoLayout:"",Wc:r.audio&&r.audio.label?r.audio.label:"",Vd:"",codecSwitchingStrategy:i.g.mediaSource.codecSwitchingStrategy,audioCodec:r.audio&&r.audio.codecs?r.audio.codecs:"",Xd:a.audio&&a.audio.codecs?a.audio.codecs:"",Ye:a.audio&&a.audio.channelsCount?a.audio.channelsCount:0,preferredAudioCodecs:i.g.preferredAudioCodecs,preferredAudioChannelCount:i.g.preferredAudioChannelCount}),td(i)}}(),!this.Ca())||function(){if(e.originalAudioId&&i.h&&i.h.audioTracks)for(var t=Array.from(i.h.audioTracks),n=(t=l(t)).next();!n.done;n=t.next())if(lr(n=n.value)==e.id){rd(i,n);break}}()},i.Bj=function(e,t){var n,i=this;t=void 0===t?0:t,this.i&&this.F&&((n=i.L.getConfiguration()).audioCodec=e.codecs||"",n.Wc=e.label||"",n.channelCount=e.channelsCount||0,n.language=e.language,n.role=e.roles[0]||"",n.spatialAudio=e.spatialAudio,i.L.configure(n),nd(i,!0,t,!1,!1),!this.Ca())||function(){if(i.h&&i.h.audioTracks){for(var t=ht(e.language),n=Array.from(i.h.audioTracks),r=null,a=(n=l(n)).next();!a.done;a=n.next()){var o=(a=a.value).language||"und";if(a.label==e.label&&ht(o)==t&&a.kind==e.roles[0]){r=a;break}}r&&rd(i,r)}}()},i.getAudioTracks=function(){if(this.i&&!this.Ca()){var e=this.qb();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e;if(this.m!=Ed||this.Ca()||(n=e.filter(function(e){return e.originalVideoId===t.originalVideoId&&e.audioCodec})),!n.length)return[];e=new Map;for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=(i=i.value).originalAudioId;r||null==i.audioId||(r=String(i.audioId)),r&&e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage})}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(e){var t=e.language;return t={active:e.enabled,language:ht(t||"und"),label:e.label,mimeType:null,codecs:null,primary:"main"==e.kind,roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:t},e.kind&&t.roles.push(e.kind),e.configuration&&(e.configuration.codec&&(t.codecs=e.configuration.codec),e.configuration.sampleRate&&(t.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(t.channelsCount=e.configuration.numberOfChannels)),t}):[]},i.Cj=function(e,t,n){t=void 0!==t&&t,n=void 0===n?0:n;var i=this.qb();if(i.length){var r=i.find(function(e){return e.active});r&&(i=i.find(function(t){return t.audioId===r.audioId&&(t.videoBandwidth||t.bandwidth)==e.bandwidth&&t.width==e.width&&t.height==e.height&&t.frameRate==e.frameRate&&t.pixelAspectRatio==e.pixelAspectRatio&&t.hdr==e.hdr&&t.colorGamut==e.colorGamut&&t.videoLayout==e.videoLayout&&t.videoMimeType==e.mimeType&&t.videoCodec==e.codecs}))&&!i.active&&this.Ae(i,t,n)}},i.getVideoTracks=function(){if(this.m==xd||this.Ca())return[];var e=this.qb();if(!e.length)return[];var t=e.find(function(e){return e.active});if(!t)return[];var n=e.filter(function(e){return e.originalAudioId===t.originalAudioId&&e.audioId===t.audioId&&e.audioGroupId===t.audioGroupId&&e.videoCodec});if(!n.length)return[];e=new Map;for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=(i=i.value).originalVideoId;r||null==i.videoId||(r=String(i.videoId)),r&&e.set(r,{active:i.active,bandwidth:i.videoBandwidth||i.bandwidth,width:i.width,height:i.height,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,mimeType:i.videoMimeType,codecs:i.videoCodec})}return Array.from(e.values())},i.vk=function(){return Sd(this.qb())},i.cl=function(){return Sd(this.sc())},i.tk=function(){return Array.from(wd(this.qb()))},i.al=function(){return Array.from(wd(this.sc()))},i.Aj=function(e,t,n,i,r,a,o){var s=this;n=void 0===n?0:n,i=void 0===i?0:i,r=void 0===r?"":r,a=void 0!==a&&a,o=void 0===o?"":o,this.i&&this.F&&(function(){function u(e,t){return e.video||t.video?e.video&&t.video?Math.abs((e.video.height||0)-(t.video.height||0))+Math.abs((e.video.width||0)-(t.video.width||0)):1/0:0}var h=s.l.s;s.L=s.g.adaptationSetCriteriaFactory(),s.L.configure({language:e,role:t||"",channelCount:n||0,Nc:"",spatialAudio:a||!1,videoLayout:"",Wc:o||"",Vd:"",codecSwitchingStrategy:s.g.mediaSource.codecSwitchingStrategy,audioCodec:r||"",Xd:h.audio&&h.audio.codecs?h.audio.codecs:"",Ye:h.audio&&h.audio.channelsCount?h.audio.channelsCount:0,preferredAudioCodecs:s.g.preferredAudioCodecs,preferredAudioChannelCount:s.g.preferredAudioChannelCount});for(var c=s.L.create(s.i.variants),d=null,p=(c=l(c.values())).next();!p.done;p=c.next())dr(p=p.value)&&(!d||u(d,h)>u(p,h))&&(d=p);d!=h&&(d?(h=or(d),s.Ae(h,!0,i||0)):nd(s))}(),!this.Ca())||function(){if(s.h&&s.h.audioTracks){var n=fr(s.qb(),e,t||"",!1)[0];n&&s.Ae(n)}}()},i.Xh=function(e,t,n){var i,r=this;n=void 0!==n&&n,this.i&&this.F&&(function(){r.Od=e,r.Me=t||"",r.Le=n||!1;var i=fr(r.i.textStreams,r.Od,r.Me,r.Le)[0]||null;i&&i!=r.l.B&&(lh(r.B.h,i,!1),r.g.streaming.alwaysStreamText||r.jd())&&(bl(r.l,i),hd(r),pd(r))}(),!this.Ca())||(i=fr(r.sc(),e,t||"",n||!1)[0])&&r.dg(i)},i.fm=function(e,t,n){var i=this;t=void 0===t||t,n=void 0===n?0:n,this.i&&this.F&&(function(){for(var r=null,a=l(i.i.variants),o=a.next();!o.done;o=a.next())if((o=o.value).audio.label==e){r=o;break}null!=r&&(i.L=i.g.adaptationSetCriteriaFactory(),i.L.configure({language:r.language,role:"",channelCount:0,Nc:"",spatialAudio:!1,videoLayout:"",Vd:"",Wc:e,codecSwitchingStrategy:i.g.mediaSource.codecSwitchingStrategy,audioCodec:"",Xd:"",Ye:0,preferredAudioCodecs:i.g.preferredAudioCodecs,preferredAudioChannelCount:i.g.preferredAudioChannelCount}),nd(i,t,n))}(),!this.Ca())||function(){if(i.h&&i.h.audioTracks){for(var t=Array.from(i.h.audioTracks),n=null,r=(t=l(t)).next();!r.done;r=t.next())(r=r.value).label==e&&(n=r);n&&rd(i,n)}}()},i.jd=function(){var e=this.Y;return this.s?this.s.isTextVisible():e},i.zk=function(){return this.eb.map(function(e){return sr(e)})},i.yk=function(e){if(kt("getChapters","Please use an getChaptersAsync."),!this.eb.length)return[];var t=ht(e);if(!(e=this.eb.filter(function(e){return ht(e.language)==t})).length)return[];for(var n=[],i=new Set,r=(e=l(e)).next();!r.done;r=e.next())(r=r.value).segmentIndex&&r.segmentIndex.Ib(function(e){var t=e.S()[0],r=e.startTime+"-"+e.endTime+"-"+t;e={id:r,title:t,startTime:e.startTime,endTime:e.endTime},i.has(r)||(n.push(e),i.add(r))});return n},i.kh=function(e){var t,n,i,r,a,o,s,u=this;return L(function(h){switch(h.g){case 1:if(!u.eb.length)return h.return([]);if(t=ht(e),!(n=u.eb.filter(function(e){return ht(e.language)==t})).length)return h.return([]);i=[],r=new Set,a=l(n),o=a.next();case 2:if(o.done){h.A(4);break}if((s=o.value).segmentIndex){h.A(5);break}return _(h,s.createSegmentIndex(),5);case 5:s.segmentIndex.Ib(function(e){var t=e.S()[0],n=e.startTime+"-"+e.endTime+"-"+t;e={id:n,title:t,startTime:e.startTime,endTime:e.endTime},r.has(n)||(i.push(e),r.add(n))}),o=a.next(),h.A(2);break;case 4:return h.return(i)}})},i.Ce=function(e){e=!!e,this.Y!=e&&(this.Y=e,this.m==Ed?(this.s.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||0<(e=fr(this.i.textStreams,this.Od,this.Me,this.Le)).length&&(bl(this.l,e[0]),hd(this),pd(this)):function(e){var t=e.h.get(nt);t&&(Nl(t),Ol(t).catch(function(){}),e.F=e.h.get(nt),e.h.delete(nt),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.s.setTextVisibility(e),cd(this))},i.Uk=function(){if(this.F)var e=this.F.We();else{if(null==this.N)return new Date;if(this.N instanceof Date)return this.N;e=this.N}if(this.i&&!this.Ca()){var t=this.i.presentationTimeline;return new Date(1e3*((t.m||t.i)+e))}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+1e3*e)):null},i.ph=function(){if(this.i&&!this.Ca()){var e=this.i.presentationTimeline;return new Date(1e3*(e.m||e.i))}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},i.uf=function(){return this.T()&&this.i?this.i.presentationTimeline.uf():null},i.bc=function(){if(this.m==Ed)return this.G.bc();var e={total:[],audio:[],video:[],text:[]};return this.m==xd&&(e.total=rs(this.h.buffered)),e},i.rf=function(){if(!this.h||!this.h.currentTime)return null;var e=this.ph().getTime()+1e3*this.h.currentTime;return Math.floor(Date.now()-e)},i.getStats=function(){if(this.m!=Ed&&this.m!=xd)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Qc(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.T()||function(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}(this.B,Math.round(100*t)),this.F&&(this.B.P=this.F.ti(),this.B.R=this.F.wi()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),function(e,t,n){e.O=t,e.N=n}(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.L=Number(t.corruptedVideoFrames)),this.B.s=this.D?function(e){return e.I?e.I:NaN}(this.D):NaN,ch(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.T()&&null!=this.ph()&&(e=this.rf()||0,this.B.D=e/1e3),t=this.qb().find(function(e){return e.active}),e=this.sc().find(function(e){return e.active}),t){if(t.bandwidth){var n=this.J?this.J.i:1,i=n*t.bandwidth;e&&e.bandwidth&&(i+=n*e.bandwidth),this.B.B=i}t.width&&t.height&&ch(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=Ed||this.Ca()||(this.i&&(this.B.H=this.i.periodCount,this.B.G=this.i.gapCount,this.i.presentationTimeline&&(this.B.J=this.i.presentationTimeline.h)),e=this.u.getBandwidthEstimate(),this.B.u=e),this.m==xd&&dh(this.B,NaN),function(e){for(var t=e.U,n=e.C,i=e.l,r=e.B,a=e.N,o=e.O,s=e.L,u=e.R,h=e.P,c=e.u,d=e.i,p=e.F,f=e.I,g=e.m,m=sh(e.g,"playing"),v=sh(e.g,"paused"),y=sh(e.g,"buffering"),b=e.s,_=e.D,w=e.J,S=e.dj,T=e.j,A=e.K,E=e.H,x=e.G,C=function(e){function t(e){return{timestamp:e.timestamp,state:e.state,duration:e.duration}}for(var n=[],i=l(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}(e.g),k=[],I=(e=l(e.h.g)).next();!I.done;I=e.next())I=I.value,k.push({timestamp:I.timestamp,id:I.id,type:I.type,fromAdaptation:I.fromAdaptation,bandwidth:I.bandwidth});return{width:t,height:n,currentCodecs:i,streamBandwidth:r,decodedFrames:a,droppedFrames:o,corruptedFrames:s,stallsDetected:u,gapsJumped:h,estimatedBandwidth:c,completionPercent:d,loadLatency:p,manifestTimeSeconds:f,drmTimeSeconds:g,playTime:m,pauseTime:v,bufferingTime:y,licenseTime:b,liveLatency:_,maxSegmentDuration:w,manifestSizeBytes:S,bytesDownloaded:T,nonFatalErrorCount:A,manifestPeriodCount:E,manifestGapCount:x,stateHistory:C,switchHistory:k}}(this.B)},i.Yd=function(e,t,n,i,r,a,o){o=void 0!==o&&o;var s,u,l,h,c,d,p,f,g,m,v=this;return L(function(y){switch(y.g){case 1:if(v.m!=Ed&&v.m!=xd)throw new Ce(1,7,7004);if("subtitles"!=n&&"captions"!=n&&Y("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){y.A(2);break}return _(y,Kc(v,e),3);case 3:i=y.h;case 2:if(s=[],v.C&&(s=v.C.getCuePoints()),v.m!=xd){y.A(4);break}return u=Me(),o&&"WEBKIT"===u.Fa()&&(n="forced"),_(y,function(e,t,n,i,r,a,o){var s,u,l,h;return L(function(c){if(1==c.g)return"text/vtt"!=r||o.length?_(c,Xc(e,t,e.I,e.g.streaming.retryParameters),3):c.A(2);2!=c.g&&(s=c.h,u=Yc(e,s,r,o),l=new Blob([u],{type:"text/vtt"}),t=pu(l),r="text/vtt"),h=document.createElement("track");var d=e.K,p=t;try{if(d.g.enabled){var f=Qh(d);f.ot="c",f.su=!0;var g=nc(p,tc(f))}else g=p}catch(e){q("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",e),g=p}return h.src=g,h.label=a,h.kind=i,h.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(h),e.Ag.push(h),c.return(h)})}(v,e,t,n,i,a||"",s),5);case 5:if((l=y.h).track)return od(v),y.return(hr(l.track));throw new Ce(1,2,2012);case 4:if(h=it,c=v.xa(),d=c.end-c.start,v.i&&(d=v.i.presentationTimeline.getDuration()),1/0==d)throw new Ce(1,4,4033);if(!s.length){y.A(6);break}return _(y,Xc(v,e,v.I,v.g.streaming.retryParameters),7);case 7:p=y.h,f=Yc(v,p,i,s),g=new Blob([f],{type:"text/vtt"}),e=pu(g),i="text/vtt";case 6:if(m={id:v.Oe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Vu(0,d,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:a||null,type:h.$a,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!o,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([xi(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!ji(xi(m.mimeType,m.codecs)))throw new Ce(2,2,2014,i);return v.i.textStreams.push(m),od(v),y.return(sr(m))}})},i.$e=function(e,t){var n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w,S=this;return L(function(T){switch(T.g){case 1:if(S.m!=Ed&&S.m!=xd)throw new Ce(1,7,7004);if(t){T.A(2);break}return _(T,Kc(S,e),3);case 3:t=T.h;case 2:if("text/vtt"!=t)throw new Ce(1,2,2017,e);if(n=it,i=S.xa(),r=i.end-i.start,S.i&&(r=S.i.presentationTimeline.getDuration()),1/0==r)throw new Ce(1,4,4045);return _(T,Xc(S,e,S.I,S.g.streaming.retryParameters),4);case 4:if(a=T.h,!(o=Fi(t)))throw new Ce(2,2,2014,t);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:r,vttOffset:0},h=Te(a),c=s.parseMedia(h,u,e,[]),d=[],p=l(c),f=p.next(),g={};!f.done;g={sg:void 0,zd:void 0},f=p.next())g.zd=f.value,g.sg=null,m=function(t){return function(){return null==t.sg&&(t.sg=Ze([e],[t.zd.payload])),t.sg||[]}}(g),v=new qo(g.zd.startTime,g.zd.endTime,m,0,null,null,0,0,1/0),g.zd.payload.includes("#xywh")&&4===(y=g.zd.payload.split("#xywh=")[1].split(",")).length&&v.hg({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)}),d.push(v);if(b=t,!d.length){T.A(5);break}return _(T,xh(d[0].S()[0],S.I,S.g.manifest.retryParameters),6);case 6:b=T.h;case 5:return w={id:S.Oe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Gu(d),mimeType:b||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:n.wg,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([xi(b||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},S.m==xd?S.Te.push(w):S.i.imageStreams.push(w),od(S),T.return(ur(w))}})},i.Ze=function(e,t,n){var i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b=this;return L(function(w){switch(w.g){case 1:if(b.m!=Ed&&b.m!=xd)throw new Ce(1,7,7004);if(n){w.A(2);break}return _(w,Kc(b,e),3);case 3:n=w.h;case 2:if(i=it,r=b.xa(),a=r.end-r.start,b.i&&(a=b.i.presentationTimeline.getDuration()),1/0==a)throw new Ce(1,4,4054);return _(w,Xc(b,e,b.I,b.g.streaming.retryParameters),4);case 4:if(o=w.h,!(s=Fi(n)))throw new Ce(2,2,2014,n);for(u=s(),h={periodStart:0,segmentStart:0,segmentEnd:a,vttOffset:0},c=Te(o),d=u.parseMedia(c,h,e,[]),p=[],f=l(d),g=f.next(),m={};!g.done;m={lf:void 0},g=f.next())m.lf=g.value,v=new qo(m.lf.startTime,m.lf.endTime,function(e){return function(){return[e.lf.payload]}}(m),0,null,null,0,0,1/0),p.push(v);return y={id:b.Oe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Gu(p),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:i.$a,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([xi("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},b.eb.push(y),od(b),w.return(sr(y))}})},i.mm=function(e,t){this.sa.width=e,this.sa.height=t},i.Th=function(e){if(this.m==Ed){var t=this.l;if(e=void 0===e?.1:e,t.l.g)t=!1;else if(t.C)t=!1;else{for(var n=l(t.h.values()),i=n.next();!i.done;i=n.next())!(i=i.value).je||i.Za||i.Db||(i.je=!1,Rl(t,i,e));t=!0}}else t=!1;return t},i.nh=function(){return Y("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},i.Qk=function(){return this.zc},i.Ik=function(){var e={video:null,audio:null,text:null};if(this.m!=Ed)return e;for(var t=this.l.s,n=this.h.currentTime,i=(t=l([t.video,t.audio,this.l.B])).next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r={codecs:(r=i.segmentIndex.get(r)).codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},"video"==i.type?(r.width=i.width,r.height=i.height,e.video=r):"audio"==i.type?e.audio=r:i.type==nt&&(e.text=r)}return e},i.di=function(e){this.Pe=e},i.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===Td||!navigator.onLine||0==t||!this.i)return!1;if(this.i.variants.some(function(t){var n=t[e.type];return!(!n||n.id===e.id||t.disabledUntilTime||"audio"==e.type&&e.language!==n.language)})){for(var n=!1,i=!1,r=l(this.i.variants),a=r.next();!a.done;a=r.next()){var o=(a=a.value)[e.type];o&&(o.id===e.id?(a.disabledUntilTime=Date.now()/1e3+t,n=!0):o.trickModeVideo&&o.trickModeVideo.id==e.id&&(i=!0))}return!(!n&&i||(this.Qe.ya(1),t=this.bc().video.reduce(function(e,t){return e+t.end-t.start},0),nd(this,!1,t,!0,!1),0))}return!1},i.addFont=function(t,n){return function(t,n){var i,r,a,o,s;return L(function(u){if(1==u.g)return"fonts"in document&&"FontFace"in e?_(u,document.fonts.ready,2):u.return();if(!("entries"in document.fonts))return u.return();for(i=function(e){for(var t=[],n=(e=e.entries()).next();!1===n.done;)t.push(n.value),n=e.next();return t},r=l(i(document.fonts)),a=r.next();!a.done;a=r.next())if((o=a.value).family===t&&"swap"===o.display)return u.return();s=new FontFace(t,"url("+n+")",{display:"swap"}),document.fonts.add(s),w(u)})}(t,n)},i.Ca=function(){return!(!this.h||!this.h.remote)&&"disconnected"!=this.h.remote.state},i.isEnded=function(){return!(this.h&&!this.h.ended)||this.$&&!this.T()&&this.h.currentTime>=this.xa().end},H("shaka.Player",_c),_c.prototype.isEnded=_c.prototype.isEnded,_c.prototype.isRemotePlayback=_c.prototype.Ca,_c.prototype.addFont=_c.prototype.addFont,_c.prototype.setVideoContainer=_c.prototype.di,_c.prototype.getFetchedPlaybackInfo=_c.prototype.Ik,_c.prototype.getManifestParserFactory=_c.prototype.Qk,_c.prototype.getManifest=_c.prototype.nh,_c.prototype.retryStreaming=_c.prototype.Th,_c.prototype.setMaxHardwareResolution=_c.prototype.mm,_c.prototype.addChaptersTrack=_c.prototype.Ze,_c.prototype.addThumbnailsTrack=_c.prototype.$e,_c.prototype.addTextTrackAsync=_c.prototype.Yd,_c.prototype.getStats=_c.prototype.getStats,_c.prototype.getBufferedInfo=_c.prototype.bc,_c.prototype.getSegmentAvailabilityDuration=_c.prototype.uf,_c.prototype.getPresentationStartTimeAsDate=_c.prototype.ph,_c.prototype.getPlayheadTimeAsDate=_c.prototype.Uk,_c.prototype.setTextTrackVisibility=_c.prototype.Ce,_c.prototype.getChaptersAsync=_c.prototype.kh,_c.prototype.getChapters=_c.prototype.yk,_c.prototype.getChaptersTracks=_c.prototype.zk,_c.prototype.isTextTrackVisible=_c.prototype.jd,_c.prototype.selectVariantsByLabel=_c.prototype.fm,_c.prototype.selectTextLanguage=_c.prototype.Xh,_c.prototype.selectAudioLanguage=_c.prototype.Aj,_c.prototype.getTextLanguages=_c.prototype.al,_c.prototype.getAudioLanguages=_c.prototype.tk,_c.prototype.getTextLanguagesAndRoles=_c.prototype.cl,_c.prototype.getAudioLanguagesAndRoles=_c.prototype.vk,_c.prototype.getVideoTracks=_c.prototype.getVideoTracks,_c.prototype.selectVideoTrack=_c.prototype.Cj,_c.prototype.getAudioTracks=_c.prototype.getAudioTracks,_c.prototype.selectAudioTrack=_c.prototype.Bj,_c.prototype.selectVariantTrack=_c.prototype.Ae,_c.prototype.selectTextTrack=_c.prototype.dg,_c.prototype.getThumbnails=_c.prototype.Vi,_c.prototype.getAllThumbnails=_c.prototype.rk,_c.prototype.getImageTracks=_c.prototype.mh,_c.prototype.getTextTracks=_c.prototype.sc,_c.prototype.getVariantTracks=_c.prototype.qb,_c.prototype.cancelTrickPlay=_c.prototype.xd,_c.prototype.trickPlay=_c.prototype.Uc,_c.prototype.useTrickPlayTrackIfAvailable=_c.prototype.si,_c.prototype.getPlaybackRate=_c.prototype.Xa,_c.prototype.isBuffering=_c.prototype.zf,_c.prototype.getKeyStatuses=_c.prototype.qf,_c.prototype.getActiveSessionsMetadata=_c.prototype.jh,_c.prototype.getExpiration=_c.prototype.fe,_c.prototype.drmInfo=_c.prototype.drmInfo,_c.prototype.keySystem=_c.prototype.keySystem,_c.prototype.isFullyLoaded=_c.prototype.xl,_c.prototype.goToLive=_c.prototype.rl,_c.prototype.seekRange=_c.prototype.xa,_c.prototype.isVideoOnly=_c.prototype.Dh,_c.prototype.isAudioOnly=_c.prototype.Fd,_c.prototype.isInProgress=_c.prototype.hd,_c.prototype.isLive=_c.prototype.T,_c.prototype.getQueueManager=_c.prototype.qh,_c.prototype.getAdManager=_c.prototype.pf,_c.prototype.getAssetUri=_c.prototype.cd,_c.prototype.getNetworkingEngine=_c.prototype.Jb,_c.prototype.getMediaElement=_c.prototype.Tk,_c.prototype.getManifestType=_c.prototype.oh,_c.prototype.getLoadMode=_c.prototype.Mk,_c.prototype.resetConfiguration=_c.prototype.vj,_c.prototype.getBufferFullness=_c.prototype.Ri,_c.prototype.getNonDefaultConfiguration=_c.prototype.Ui,_c.prototype.getConfigurationForLowLatency=_c.prototype.Ck,_c.prototype.getConfiguration=_c.prototype.getConfiguration,_c.prototype.configurationForLowLatency=_c.prototype.nk,_c.prototype.configure=_c.prototype.configure,_c.prototype.releaseAllMutexes=_c.prototype.Xl,_c.prototype.destroyAllPreloads=_c.prototype.Tg,_c.prototype.preload=_c.prototype.preload,_c.prototype.detachAndSavePreload=_c.prototype.Ni,_c.prototype.unloadAndSavePreload=_c.prototype.qm,_c.prototype.load=_c.prototype.load,_c.prototype.updateStartTime=_c.prototype.um,_c.prototype.unload=_c.prototype.nc,_c.prototype.detach=_c.prototype.detach,_c.prototype.attachCanvas=_c.prototype.Bi,_c.prototype.attach=_c.prototype.ac,_c.probeSupport=function(t){var n,i,r,a,o;return t=void 0===t||t,L(function(s){switch(s.g){case 1:if(n={},!t){s.A(2);break}return _(s,function(){var t,n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,T,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G;return L(function(H){if(1==H.g){if(t="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(e.MediaKeys&&e.navigator&&e.navigator.requestMediaKeySystemAccess&&e.MediaKeySystemAccess&&e.MediaKeySystemAccess.prototype.getConfiguration)){for(n={},i=l(t),r=i.next();!r.done;r=i.next())a=r.value,n[a]=null;return H.return(n)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),u={"com.widevine.alpha":s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":["150","2000","3000"]},d={videoCapabilities:h=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],audioCapabilities:c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],initDataTypes:["cenc","sinf","skd","keyids"]},p=[null,"cenc","cbcs"],f=new Map,g=Me(),m=function(e,t){var n,i,r,a,s,u,h,c,d,p,m,v,y;return L(function(b){switch(b.g){case 1:return S(b,2),_(b,t.createMediaKeys(),5);case 5:n=b.h;case 4:A(b,3);break;case 2:return E(b),b.return();case 3:if(r=!!(i=t.getConfiguration().sessionTypes)&&i.includes("persistent-license"),g.ij()&&(r=!1),a=t.getConfiguration().videoCapabilities,s=t.getConfiguration().audioCapabilities,u={persistentState:r,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},f.has(e)&&f.get(e)?u=f.get(e):f.set(e,u),(h=a[0].encryptionScheme)&&!u.encryptionSchemes.includes(h)&&u.encryptionSchemes.push(h),(c=a[0].robustness)&&!u.videoRobustnessLevels.includes(c)&&u.videoRobustnessLevels.push(c),(d=s[0].robustness)&&!u.audioRobustnessLevels.includes(d)&&u.audioRobustnessLevels.push(d),"getStatusForPolicy"in n){for(p=[],m=l(o),v=m.next(),y={};!v.done;y={ke:void 0},v=m.next())y.ke=v.value,u.minHdcpVersions.includes(y.ke)||p.push(n.getStatusForPolicy({minHdcpVersion:y.ke}).then(function(e){return function(t){"usable"!=t||u.minHdcpVersions.includes(e.ke)||u.minHdcpVersions.push(e.ke)}}(y)));return _(b,Promise.all(p),0)}b.A(0)}})},v=function(e,t,n,i){var r,a,o,s,u,h,c,p,f,g;return L(function(v){switch(v.g){case 1:for(S(v,2),r=hn(d),a=l(r.videoCapabilities),o=a.next();!o.done;o=a.next())(s=o.value).encryptionScheme=t,s.robustness=n;for(u=l(r.audioCapabilities),h=u.next();!h.done;h=u.next())(c=h.value).encryptionScheme=t,c.robustness=i;return(p=hn(r)).persistentState="required",p.sessionTypes=["persistent-license"],f=[p,r],"MOBILE"==Me().Ja()?_(v,qi(5,navigator.requestMediaKeySystemAccess(e,f)),7):_(v,navigator.requestMediaKeySystemAccess(e,f),6);case 6:g=v.h,v.A(5);break;case 7:g=v.h;case 5:return _(v,m(e,g),8);case 8:A(v,0);break;case 2:E(v),w(v)}})},y=function(e,t,n,i){var r,a,o;return L(function(s){switch(s.g){case 1:return S(s,2),r={type:"media-source",video:{contentType:h[0].contentType,width:640,height:480,bitrate:1,framerate:1},audio:{contentType:c[0].contentType,channels:2,bitrate:1,samplerate:1},keySystemConfiguration:{keySystem:e,video:{encryptionScheme:t,robustness:n},audio:{encryptionScheme:t,robustness:i}}},"MOBILE"==Me().Ja()?_(s,qi(5,navigator.mediaCapabilities.decodingInfo(r)),7):_(s,navigator.mediaCapabilities.decodingInfo(r),6);case 6:a=s.h,s.A(5);break;case 7:a=s.h;case 5:return o=a.keySystemAccess,_(s,m(e,o),8);case 8:A(s,0);break;case 2:E(s),w(s)}})},b=l(t),T=b.next();!T.done;T=b.next())x=T.value,f.set(x,null);for(C=function(e){return"WEBKIT"!==Me().Fa()||"org.w3.clearkey"!==e},k=[],I=l(p),M=I.next();!M.done;M=I.next())for(P=M.value,D=l(t),R=D.next();!R.done;R=D.next())N=R.value,C(N)&&(k.push(v(N,P,"","")),k.push(y(N,P,"","")));for(O=l(t),U=O.next();!U.done;U=O.next())for(B=U.value,F=l(u[B]||[]),j=F.next();!j.done;j=F.next())G=j.value,C(B)&&(k.push(v(B,null,G,"")),k.push(v(B,null,"",G)),k.push(y(B,null,G,"")),k.push(y(B,null,"",G)));return _(H,Promise.all(k),2)}return H.return(sa(f))})}(),3);case 3:n=s.h;case 2:return i=function(){var e={};if(Me(),dv())for(var t=l(lo.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(n=(t=l(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"])).next();!n.done;n=t.next())e[n=n.value]=dv()?lo.has(n):""!=cs().canPlayType(n);return e}(),r=function(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.01",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(h(Oi)),t={};Me();for(var n=(e=l(e)).next();!n.done;n=e.next()){ji(n=n.value)?t[n]=!0:t[n]=dv()?Ot(n)||!!bi(n):""!=cs().canPlayType(n);var i=n.split(";")[0];t[i]=t[i]||t[n]}return t}(),_(s,Me().qc(),4);case 4:return a=s.h,o={manifest:i,media:r,drm:n,hardwareResolution:a},kd.forEach(function(e,t){o[t]=e()}),s.return(o)}})},_c.isBrowserSupported=Ac,_c.setQueueManagerFactory=function(e){Md=e},_c.setAdManagerFactory=function(e){Id=e},_c.registerSupportPlugin=Tc,_c.prototype.destroy=_c.prototype.destroy;var Td=0,Ad=1,Ed=2,xd=3;_c.LoadMode={DESTROYED:Td,NOT_LOADED:Ad,MEDIA_SOURCE:Ed,SRC_EQUALS:xd},_c.version="v4.15.9";var Cd=["4","15"];Pt=new function(e){this.g=e,this.i=It,this.h=Mt}(new Ct(Number(Cd[0]),Number(Cd[1])));var kd=new Map,Id=null,Md=null;function Pd(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function Ld(e){return e.g.length?e.g.reduce(function(e,t){return e+t},0)/e.g.length:0}function Dd(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new At,this.l.o(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.l.o(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}function Rd(){}function Nd(e,t){for(var n=[],i=(e=l(yn(e,"Ad"))).next();!i.done;i=e.next())if((i=Sn(i.value,"InLine"))&&(i=Sn(i,"Creatives")))for(var r=(i=l(yn(i,"Creative"))).next();!r.done;r=i.next()){var a=Sn(r=r.value,"Linear");if(a&&Od(n,t,a),r=Sn(r,"NonLinearAds"))for(var o=(r=l(r=yn(r,"NonLinear"))).next();!o.done;o=r.next())e:{a=n;var s=t,u=o.value,h=Sn(u,"StaticResource");if(h)o=h.attributes.creativeType;else{if(!(h=Sn(u,"HTMLResource")))break e;o="text/html"}if(h=_n(h)){"text/html"===o&&(h="data:text/html;charset=UTF-8,"+encodeURIComponent(h));var c=An(u,"width",Pn)||An(u,"expandedWidth",Pn),d=An(u,"height",Pn)||An(u,"expandedHeight",Pn);if(c||d){var p=null;(u=u.attributes.minSuggestedDuration)&&(p=sn(u)),u=0,null!=s&&(u=s),a.push({id:null,groupId:null,startTime:u,endTime:null,uri:h,mimeType:o,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:p,once:!0,pre:null==s,post:1/0==s,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:d||0}},displayOnBackground:!1,currentVideo:null,background:null})}}}}return n}function Od(e,t,n){var i=0;null!=t&&(i=t);var r=null;if(n.attributes.skipoffset&&(r=sn(n.attributes.skipoffset),isNaN(r)&&(r=null)),n=Sn(n,"MediaFiles")){var a=yn(n,"MediaFile");for(n=a,(a=a.filter(function(e){return"streaming"==e.attributes.delivery})).length&&(n=a),n=n.sort(function(e,t){return(parseInt(t.attributes.height,10)||0)-(parseInt(e.attributes.height,10)||0)}),a=(n=l(n)).next();!a.done;a=n.next())if(!(a=a.value).attributes.apiFramework){var o=_n(a);if(o){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:o,mimeType:a.attributes.type||null,isSkippable:null!=r,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:null==t,post:1/0==t,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});break}}}}function Ud(t,n,i,r,a){var o=this;this.u=t,this.i=n,this.F=!1,this.B=this.s=null,this.G=NaN,this.l=a,this.j=null,this.h=new At,google.ima.settings.setLocale(i),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.D=new google.ima.AdDisplayContainer(this.u,this.i),this.D.initialize(),this.m=new google.ima.AdsLoader(this.D),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.15.9"),this.g=null,this.C=r||new google.ima.AdsRenderingSettings,this.h.o(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(t){!function(t,n){if(t.l(new V("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-t.G))),t.s.customPlayheadTracker){var i={currentTime:t.i.currentTime};t.g=n.getAdsManager(i,t.C),t.i.muted?t.g.setVolume(0):t.g.setVolume(t.i.volume),t.h.o(t.i,"timeupdate",function(){t.i.duration&&(i.currentTime=t.i.currentTime)}),t.h.o(t.i,"volumechange",function(){t.j&&(t.j.setVolume(t.i.volume),t.i.muted&&t.j.setMuted(!0))})}else t.g=n.getAdsManager(t.i,t.C);t.l(new V("ima-ad-manager-loaded",(new Map).set("imaAdManager",t.g)));var r=t.g.getCuePoints();if(r.length){n=[];for(var a=(r=l(r)).next();!a.done;a=r.next())n.push({start:a.value,end:null});t.l(new V("ad-cue-points-changed",(new Map).set("cuepoints",n)))}!function(e){function t(t,n){t=(new Map).set("originalEvent",t),e.l(new V(n,t))}e.h.o(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(t){Bd(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(t){Fd(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.STARTED,function(t){Fd(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(e){t(e,"ad-first-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.MIDPOINT,function(e){t(e,"ad-midpoint")}),e.h.o(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(e){t(e,"ad-third-quartile")}),e.h.o(e.g,google.ima.AdEvent.Type.COMPLETE,function(e){t(e,"ad-complete")}),e.h.o(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(t){jd(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(t){jd(e,t)}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPED,function(e){t(e,"ad-skipped")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(e){t(e,"ad-volume-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(e){t(e,"ad-muted")}),e.h.o(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.o(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.o(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.CLICK,function(e){t(e,"ad-clicked")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(e){t(e,"ad-progress")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(e){t(e,"ad-buffering")}),e.h.o(e.g,google.ima.AdEvent.Type.IMPRESSION,function(e){t(e,"ad-impression")}),e.h.o(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(e){t(e,"ad-duration-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(e){t(e,"ad-closed")}),e.h.o(e.g,google.ima.AdEvent.Type.LOADED,function(e){t(e,"ad-loaded")}),e.h.o(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(e){t(e,"all-ads-completed")}),e.h.o(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(e){t(e,"ad-linear-changed")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_METADATA,function(e){t(e,"ad-metadata")}),e.h.o(e.g,google.ima.AdEvent.Type.LOG,function(e){t(e,"ad-recoverable-error")}),e.h.o(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(e){t(e,"ad-break-ready")}),e.h.o(e.g,google.ima.AdEvent.Type.INTERACTION,function(e){t(e,"ad-interaction")})}(t);try{t.g.init(t.i.offsetWidth,t.i.offsetHeight),t.h.o(t.i,"loadeddata",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),"ResizeObserver"in e?(t.B=new ResizeObserver(function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.B.observe(t.i)):t.h.o(document,"fullscreenchange",function(){t.g.resize(t.i.offsetWidth,t.i.offsetHeight)}),t.F||t.s.skipPlayDetection?t.g.start():t.h.ra(t.i,"play",function(){t.F=!0,t.g.start()})}catch(e){jd(t,null)}}(o,t)}),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(e){Bd(o,e)}),this.h.o(this.i,"ended",function(){o.m.contentComplete()}),this.h.ra(this.i,"play",function(){o.F=!0})}function Bd(e,t){t.getError(),t=(new Map).set("originalEvent",t),e.l(new V("ad-error",t)),jd(e,null),e.l(new V("ad-cue-points-changed",(new Map).set("cuepoints",[])))}function Fd(e,t){var n=t.getAd();n?(e.j=new Dd(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.s.supportsMultipleMediaElements||e.l(new V("ad-content-pause-requested")),t=(new Map).set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new V("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.s.customPlayheadTracker||e.i.pause(),e.i.muted?((t=e.j).j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):Y("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function jd(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.s.supportsMultipleMediaElements&&e.l(new V("ad-content-resume-requested")),e.l(new V("ad-stopped",(new Map).set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.s.customPlayheadTracker||e.i.ended||e.i.play())}function Gd(e,t,n,i,r,a){this.g=e,this.i=t,this.j=(this.h=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.s=i,this.m=r,this.u=a,this.C=t.overlay}function Hd(e,t,n){this.g=e,this.j=t,this.h=n,this.i=null==e.overlay}function Vd(e,t,n,i){var r=this;this.L=null,this.C=e,this.D=t,this.g=n,this.G=null,this.B=!0,this.h=this.g,this.i=i,this.R=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.j=new _c,Qd(this),this.I=new At,this.l=new At,this.J=!1,this.Z=this.s=this.u=this.m=null,this.$=!1,this.O=-1,this.Y=function(){if(!r.J&&r.m&&!r.D.Ca()){r.m=r.g.currentTime;var e=Xd(r);e&&Yd(r,e,1,1,Date.now())}},this.U=function(){if(!(r.J||r.m||r.D.Ca())){r.m=r.g.currentTime;var e=Xd(r,!0);e||(e=Xd(r)),e&&Yd(r,e,1,1,Date.now())}},this.ba=function(){if(!r.J&&r.m&&!r.D.Ca()){var e=r.g.currentTime;r.u&&!r.u.pre&&!r.u.post&&e<(r.u.endTime||r.u.startTime)&&(r.u=null)}},this.P=new zi(this.Y),this.N=new zi(function(){var e,t,n,i,a,o,s,u,h,c,d;return L(function(p){switch(p.g){case 1:if(!r.H.size||null==r.m){p.A(0);break}if((e=r.D.m)==Td||e==Ad)return p.return();t=!1,n=Array.from(r.H),i=r.D.xa(),a=l(n),o=a.next();case 3:if(o.done){p.A(5);break}if((s=o.value)==r.u){p.A(4);break}if(u=s.endTime||s.startTime,!(1<=i.start-u)){0<(h=s.startTime-r.m)&&10>=h&&(!r.F.has(s)&&ep(s)&&r.F.set(s,r.j.preload(s.uri,null,s.mimeType||void 0)),np(r,s)),p.A(4);break}if(!r.F.has(s)){p.A(7);break}return _(p,r.F.get(s),8);case 8:(c=p.h)&&c.destroy(),r.F.delete(s);case 7:ip(r,s),d=JSON.stringify(s),r.R.has(d)&&r.R.delete(d),r.H.delete(s),Wd(r),s.overlay||(t=!0);case 4:o=a.next(),p.A(3);break;case 5:t&&Jd(r),w(p)}})}),this.configure(this.D.getConfiguration().ads)}function Wd(e){e.$&&!e.H.size&&(e.I.Da(e.g,"playing",e.U),e.I.Da(e.g,"timeupdate",e.U),e.I.Da(e.g,"seeked",e.ba),e.I.Da(e.g,"ended",e.Y),-1!=e.O&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.P&&e.P.stop(),e.N&&e.N.stop(),e.$=!1)}function zd(e){if(e.C&&e.L&&!e.J){var t=e.L.supportsMultipleMediaElements,n=e.g;n.webkitPresentationMode&&"inline"!==n.webkitPresentationMode&&(t=!1),e.B==t&&(e.B=!t,e.B?(e.h=e.g,e.G&&(e.G.parentElement&&e.C.removeChild(e.G),e.G=null)):(e.G||((t=document.createElement(e.g.tagName)).autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.B=!0}function Kd(e,t){var n,i,r,a,o,s,u,h;L(function(c){switch(c.g){case 1:n=!1,i=l(t),r=i.next();case 2:if(r.done){c.A(4);break}if(!(a=r.value).uri){Y("Missing URL in interstitial",a),c.A(3);break}if(a.mimeType){c.A(5);break}return S(c,6),o=e.j.Jb(),_(c,xh(a.uri,o,e.D.getConfiguration().streaming.retryParameters),8);case 8:a.mimeType=c.h,A(c,5);break;case 6:E(c);case 5:if(s=a.id||JSON.stringify(a),e.R.has(s)){c.A(3);break}a.loop&&!a.overlay&&Y("Loop is only supported in overlay interstitials",a),a.overlay||(n=!0),e.R.add(s),e.H.add(a),u=!1,a.pre&&null==e.m?u=!0:0!=a.startTime||a.canJump?null!=e.m&&0<(h=a.startTime-e.m)&&10>=h&&(u=!0):u=!0,u&&(!e.F.has(a)&&ep(a)&&e.F.set(a,e.j.preload(a.uri,null,a.mimeType||void 0)),np(e,a));case 3:r=i.next(),c.A(2);break;case 4:n&&Jd(e),function(e){if(!e.$&&e.H.size){if(e.I.o(e.g,"playing",e.U),e.I.o(e.g,"timeupdate",e.U),e.I.o(e.g,"seeked",e.ba),e.I.o(e.g,"ended",e.Y),"requestVideoFrameCallback"in e.g&&!tp()){var t=e.g,n=function(){-1!=e.O&&(e.Y(),-1!=e.O&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.P.ya(.025);e.N&&e.N.ya(1),e.$=!0}}(e),w(c)}})}function Xd(e,t,n){t=void 0!==t&&t,n=void 0===n?null:n;var i=0,r=null;if(e.H.size&&null!=e.m){var a=e.g.ended,o=Array.from(e.H).sort(function(e,t){return t.startTime-e.startTime}),s=o;for(s=t?o.filter(function(e){return e.pre}):a?o.filter(function(e){return e.post}):o.filter(function(e){return!e.pre&&!e.post}),s=(o=l(s)).next();!s.done;s=o.next()){s=s.value;var u=!1;if(t)u=s.pre;else if(a)u=s.post;else if(!s.pre&&!s.post){var h=e.m-Math.round(1e3*s.startTime)/1e3,c=1;e.L.allowStartInMiddleOfInterstitial&&s.endTime&&1/0!=s.endTime&&(c=s.endTime-s.startTime),(0<h||0==h&&0==e.m)&&(h<=c||!s.canJump)&&(u=!(null==n&&e.u&&!e.u.pre&&!e.u.post&&e.u.startTime>=s.startTime))}u&&(!e.u||s.startTime>=e.u.startTime)&&(i==(n||0)?r=s:r&&!s.canJump&&.001<Math.round(1e3*s.startTime)/1e3-Math.round(1e3*r.startTime)/1e3&&(r=s,i=0),i++)}}return r}function Yd(e,t,n,i,r,a){a=void 0===a?0:a,e.u=t,zd(e),e.B||!e.C||e.h.parentElement||e.C.appendChild(e.h),1==i&&1==n&&(n=Array.from(e.H).filter(function(e){return t.pre?e.pre==t.pre:t.post?e.post==t.post:.001>Math.abs(e.startTime-t.startTime)}).length),t.once&&(a++,e.H.delete(t),Wd(e),t.overlay||Jd(e)),t.mimeType&&(t.mimeType.startsWith("image/")||"text/html"===t.mimeType)?t.overlay?function(e,t,n,i,r){function a(){e.s&&(e.s.stop(),e.s=null),e.C.removeChild(u),Zd(e,t),e.i(new V("ad-stopped")),e.l.Sa();var a=Xd(e,t.pre,i-r);a?Yd(e,a,n,++i,Date.now(),r):e.J=!1}e.J=!0;var o=t.overlay,s="text/html"==t.mimeType?"iframe":"img",u=document.createElement(s);u.style.objectFit="contain",u.style.position="absolute",u.style.border="none",qd(e,t),e.i(new V("ad-started",(new Map).set("ad",new Hd(t,n,i)))),"iframe"==s?u.src=t.uri:(u.src=t.uri,u.onerror=function(t){e.i(new V("ad-error",(new Map).set("originalEvent",t))),a()});var l=o.viewport,h=o.topLeft;o=o.size,0==l.x&&0==l.y?(u.width=t.overlay.size.x,u.height=t.overlay.size.y,u.style.bottom="10%",u.style.left="0",u.style.right="0",u.style.width="100%",t.overlay.size.y||"iframe"!=s||(u.style.height="auto")):(u.style.height=o.y/l.y*100+"%",u.style.left=h.x/l.x*100+"%",u.style.top=h.y/l.y*100+"%",u.style.width=o.x/l.x*100+"%"),e.C.appendChild(u);var c=Date.now();e.s&&e.s.stop(),e.s=new zi(function(){t.playoutLimit&&(Date.now()-c)/1e3>t.playoutLimit||t.endTime&&e.g.currentTime>t.endTime?(e.i(new V("ad-complete")),a()):e.g.currentTime<t.startTime&&(e.i(new V("ad-skipped")),a())}),t.playoutLimit&&!t.endTime?e.s.X(t.playoutLimit):t.endTime&&e.s.ya(.025),e.l.o(e.g,"seeked",function(){var n=e.g.currentTime;(n<t.startTime||t.endTime&&n>t.endTime)&&(e.s&&e.s.stop(),e.i(new V("ad-skipped")),a())})}(e,t,n,i,a):Y("Unsupported interstitial",t):e.B&&t.overlay?Y("Unsupported interstitial",t):function(e,t,n,i,r,a){var o,s,u,l,h,c,d,p,f,g,m,v,y,b,T,x,C,k,I,M;L(function(P){switch(P.g){case 1:if(o=Date.now(),e.J=!0,s=!1,u=function(){if(!e.B&&!t.overlay&&null==t.resumeOffset)if(t.timelineRange&&t.endTime&&1/0!=t.endTime)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var n=Date.now();e.g.currentTime+=(n-r)/1e3,r=n}},l=function(o){var s,l;return L(function(h){if(1==h.g){if(u(),s=Xd(e,t.pre,i-a),o&&t.groupId)for(;s&&s.groupId==t.groupId;)i++,s=Xd(e,t.pre,i-a);return e.s&&(!t.groupId||s&&s.groupId!=t.groupId)&&(e.s.stop(),e.s=null),Zd(e,t),s&&!s.overlay?h.A(2):(t.post&&(e.m=null,e.u=null),e.B?_(h,e.j.detach(),4):_(h,e.j.nc(),4))}2!=h.g&&(e.B&&(null==(l=t.resumeOffset)&&(l=t.timelineRange&&t.endTime&&1/0!=t.endTime?t.endTime-(e.m||0):(Date.now()-r)/1e3),e.i(new V("ad-content-resume-requested",(new Map).set("offset",l)))),e.i(new V("ad-stopped")),e.l.Sa(),e.J=!1,e.B?Jd(e):(e.h.style.display="none",u(),e.g.ended||e.g.play())),zd(e),s&&(e.i(new V("ad-stopped")),e.l.Sa(),Yd(e,s,n,++i,r,a)),w(h)})},h=function(t){return L(function(n){return s?n.return():(s=!0,e.i(new V("ad-error",(new Map).set("originalEvent",t))),_(n,l(!1),0))})},c=function(){return L(function(t){if(1==t.g)return s?t.return():(s=!0,_(t,l(!1),2));e.i(new V("ad-complete")),w(t)})},e.Z=function(){return L(function(t){return s?t.return():(s=!0,e.i(new V("ad-skipped")),_(t,l(!0),0))})},d=new Gd(e.h,t,e.Z,n,i,!e.B),e.B||(d.setMuted(e.g.muted),d.setVolume(e.g.volume)),e.i(new V("ad-started",(new Map).set("ad",d))),(p=d.canSkipNow())&&e.i(new V("ad-skip-state-changed")),e.l.ra(e.j,"error",h),e.l.o(e.h,"timeupdate",function(){if(e.h.duration){var t=d.canSkipNow();p!=t&&0<d.getRemainingTime()&&0<d.getDuration()&&e.i(new V("ad-skip-state-changed")),p=t}}),e.l.ra(e.j,"firstquartile",function(){u(),e.i(new V("ad-first-quartile"))}),e.l.ra(e.j,"midpoint",function(){u(),e.i(new V("ad-midpoint"))}),e.l.ra(e.j,"thirdquartile",function(){u(),e.i(new V("ad-third-quartile"))}),e.l.ra(e.j,"complete",c),e.l.o(e.h,"play",function(){e.i(new V("ad-resumed"))}),e.l.o(e.h,"pause",function(){var t=e.j.getConfiguration();e.h.currentTime>=t.playRangeEnd?c():e.i(new V("ad-paused"))}),e.l.o(e.h,"volumechange",function(){e.h.muted?e.i(new V("ad-muted")):e.i(new V("ad-volume-changed"))}),!e.B||1!=i){P.A(2);break}return e.i(new V("ad-content-pause-requested",(new Map).set("saveLivePosition",!0))),f=new Br,g=function(t){return L(function(n){if(1==n.g)return"detach"!=t.state?n.A(0):tp()?_(n,new Promise(function(e){return new zi(e).X(.1)}),3):n.A(3);f.resolve(),e.l.Da(e.D,"onstatechange",g),w(n)})},e.l.o(e.D,"onstatechange",g),_(P,f,2);case 2:return qd(e,t),e.B||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,m=t.overlay.viewport,v=t.overlay.topLeft,y=t.overlay.size,e.h.style.height=y.y/m.y*100+"%",e.h.style.left=v.x/m.x*100+"%",e.h.style.top=v.y/m.y*100+"%",e.h.style.width=y.x/m.x*100+"%"):(e.g.pause(),null!=t.resumeOffset&&0!=t.resumeOffset&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),S(P,4),Qd(e),t.startTime&&t.endTime&&1/0!=t.endTime&&t.startTime!=t.endTime&&0<(b=t.endTime-t.startTime)&&e.j.configure("playRangeEnd",b),t.playoutLimit&&!e.s&&(e.s=new zi(function(){e.Z()}).X(t.playoutLimit),e.j.configure("playRangeEnd",t.playoutLimit)),_(P,e.j.ac(e.h),6);case 6:return T=null,e.L.allowStartInMiddleOfInterstitial&&null!=e.m&&(x=e.m-t.startTime,.25<Math.abs(x)&&(T=x)),e.F.has(t)?_(P,e.F.get(t),10):_(P,e.j.load(t.uri,T,t.mimeType||void 0),8);case 10:return C=P.h,e.F.delete(t),_(P,C?e.j.load(C):e.j.load(t.uri,T,t.mimeType||void 0),8);case 8:e.h.play(),k=(Date.now()-o)/1e3,e.i(new V("ads-loaded",(new Map).set("loadTime",k))),e.B&&e.g.play(),t.overlay&&(I=function(){var n=e.g.currentTime-t.startTime;.1<Math.abs(n-e.h.currentTime)&&(e.h.currentTime=n)},e.l.ra(e.h,"playing",I),e.l.o(e.g,"seeking",I),e.l.o(e.g,"seeked",function(){var n=e.g.currentTime;(n<t.startTime||t.endTime&&n>t.endTime)&&e.Z()})),A(P,0);break;case 4:if(M=E(P),!e.J)return P.return();h(M),w(P)}})}(e,t,n,i,r,a)}function qd(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),null!=t.currentVideo){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],a=n.topLeft.x/n.viewport.x*100;0<a&&100>=a&&(r.push("translateX("+a+"%)"),i=!1),0<(a=n.topLeft.y/n.viewport.y*100)&&100>=a&&(r.push("translateY("+a+"%)"),i=!1),1>(a=n.size.x/n.viewport.x)&&r.push("scaleX("+a+")"),n=n.size.y/n.viewport.y,1>a&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.C&&(e.C.style.pointerEvents="none",t.background&&(e.C.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function Zd(e,t){t&&!t.displayOnBackground||(e.g.style.zIndex=""),t&&null==t.currentVideo||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.C&&(e.C.style.pointerEvents="",!t||t.background)&&(e.C.style.background=""),e.G&&(e.G.style.background="")}function Jd(e){for(var t=[],n=l(e.H),i=n.next(),r={};!i.done;r={Dc:void 0},i=n.next())(i=i.value).overlay||(r.Dc={start:i.startTime,end:null},i.pre?(r.Dc.start=0,r.Dc.end=null):i.post?(r.Dc.start=-1,r.Dc.end=null):i.timelineRange&&(r.Dc.end=i.endTime),t.find(function(e){return function(t){return e.Dc.start==t.start&&e.Dc.end==t.end}}(r))||t.push(r.Dc));e.i(new V("ad-cue-points-changed",(new Map).set("cuepoints",t)))}function Qd(e){e.j.configure(e.D.Ui()),e.j.configure("ads.disableHLSInterstitial",!0),e.j.configure("ads.disableDASHInterstitial",!0),e.j.configure("playRangeEnd",1/0),qr(e.D.Jb(),e.j.Jb())}function $d(e,t,n){var i,r;return L(function(a){return 1==a.g?(i=Zr([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),_(a,e.D.Jb().request(7,i,n).promise,2)):(r=a.h,a.return(r.data))})}function ep(e){return!(e=e.mimeType)||!e.startsWith("image/")&&"text/html"!==e}function tp(){var e=Me().Ja();return"TV"==e||"CONSOLE"==e||"CAST"==e}function np(e,t){if(!(e.K.has(t)||e.L&&!e.L.allowPreloadOnDomElements)){var n=function(e){var t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",document.head.appendChild(t),t},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.K.set(t,i)}}function ip(e,t){if(e.K.has(t)){for(var n=e.K.get(t),i=(n=l(n)).next();!i.done;i=n.next())(i=i.value).parentNode.removeChild(i);e.K.delete(t)}}function rp(e,t,n,i,r){this.h=e,this.j=sn(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.s=i,this.m=!1}function ap(e,t,n,i){this.C=e,this.J=t,this.h=n,this.l=null,this.O=NaN,this.i=i,this.I=!1,this.B=null,this.j=[],this.L=[],this.K=this.D=this.g=null,this.F=new Map,this.m=[],this.u=[],this.G="",this.N=!0,this.H="",this.s=new At}function op(e,t){var n,i,r,a,o,s,u,l;L(function(h){return 1==h.g?t.staticResource?(n=sp(t),e.F.get(n)?h.return():(i={type:9},r=Zr([t.staticResource],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),a=e.J.request(7,r,i),S(h,2),e.F.set(n,[]),_(h,a.promise,4))):h.return():2!=h.g?(o=h.h,s=Ne(o.data),u=JSON.parse(s),l=u.apps,e.F.set(n,l),A(h,0)):(E(h),e.F.delete(n),void w(h))})}function sp(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function up(e){var t=e.h.currentTime;if(0!=t&&null==e.B){for(var n,i,r=l(e.j),a=r.next();!a.done;a=r.next())for(var o=l((a=a.value).ads),s=o.next();!s.done;s=o.next())if(s=s.value,i){if(s.startTimeInSeconds<t&&s.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=s,n=a;break}}else s.startTimeInSeconds<t&&(i=s,n=a);n&&i&&!e.L.includes(i.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function lp(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.D,r=i.startTimeInSeconds+.5*i.durationInSeconds,a=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),dp(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),dp(e,"midpoint")):t>=a&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),dp(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&0<i&&0<r&&dp(e,"skipStateChanged"),0<r&&(0>=i||i>r)&&hp(e)}if(!e.g||!e.g.isLinear()){e:for(i=l(e.j),r=i.next();!r.done&&(r=r.value,!e.g||!e.g.isLinear());r=i.next())for(a=0;a<r.ads.length;a++){var o=r.ads[a],s=o.startTimeInSeconds+o.durationInSeconds;if(o.startTimeInSeconds<=t&&s>t){if(e.L.includes(o.adId)){if(e.h.ended)continue;e.h.currentTime=s;break e}hp(e),e.K=r,e.g=new rp(o,a+1,r.ads.length,!0,e.h),e.D=o,0===a&&dp(e,"breakStart"),cp(e);break}}if(!e.g)for(r=(i=l(e.j)).next();!r.done&&(r=r.value,!e.g);r=i.next())for(a=0;a<r.nonLinearAdsList.length;a++)if((o=r.nonLinearAdsList[a]).nonLinearAdList.length){s=r.startTimeInSeconds;var u=e.F.get(sp(o.nonLinearAdList[0]));if(s<=t&&u&&u.length){hp(e),s=e;for(var h=(u=l(u)).next();!h.done;h=u.next())if((h=h.value).data.source.length){var c=document.createElement("img");c.src=h.data.source[0].url,c.style.top=(h.placeholder.top||0)+"%",c.style.height=100-(h.placeholder.top||0)+"%",c.style.left=(h.placeholder.left||0)+"%",c.style.maxWidth=100-(h.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",s.C.appendChild(c)}e.K=r,e.g=new rp(o,a+1,r.ads.length,!1,e.h),e.D=o,0===a&&dp(e,"breakStart"),cp(e);break}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function hp(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.I||e.L.push(e.D.adId);var t=e.g.m;dp(e,void 0!==t&&t?"skip":"complete");for(var n=(t=l(e.m)).next();!n.done;n=t.next())n=n.value,e.s.Da(n.target,n.type,n.listener);e.m=[],e.u=[],(t=e.g.getPositionInSequence())===(n=e.g.getSequenceLength())&&dp(e,"breakEnd"),e.g=null,e.D=null,e.K=null}}function cp(e){var t=!1;e.h.paused?t=!0:(dp(e,"impression"),dp(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&dp(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||dp(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(dp(e,"impression"),dp(e,"start"),t=!1):dp(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){dp(e,"pause")}});for(var n=l(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.s.o(i.target,i.type,i.listener)}function dp(e,t){var n=e.D.trackingEvents.find(function(e){return e.eventType==t});if(n||(n=e.K.adBreakTrackingEvents.find(function(e){return e.eventType==t})),n)for(var i={type:10},r=(n=l(n.beaconUrls)).next();!r.done;r=n.next())(r=r.value)&&""!=r&&((r=Zr([r],Ur())).method="POST",e.J.request(7,r,i));switch(t){case"impression":e.i(new V("ad-impression"));break;case"start":e.i(new V("ad-started",(new Map).set("ad",e.g)));break;case"mute":e.i(new V("ad-muted"));break;case"unmute":e.i(new V("ad-volume-changed"));break;case"resume":e.i(new V("ad-resumed"));break;case"pause":e.i(new V("ad-paused"));break;case"firstQuartile":e.i(new V("ad-first-quartile"));break;case"midpoint":e.i(new V("ad-midpoint"));break;case"thirdQuartile":e.i(new V("ad-third-quartile"));break;case"complete":e.i(new V("ad-complete")),e.i(new V("ad-stopped"));break;case"skip":e.i(new V("ad-skipped")),e.i(new V("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new V("ad-skip-state-changed"))}}function pp(e,t){this.g=e,this.i=null,this.h=t}function fp(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.F=NaN,this.i=i,this.G=!1,this.B=this.m=this.s=null,this.C="",this.D=[],this.h=new At,(e=new google.ima.dai.api.UiSettings).setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new V("ima-stream-manager-loaded",(new Map).set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(e){!function(e,t){e.i(new V("ads-loaded",(new Map).set("loadTime",Date.now()/1e3-e.F))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.G||e.h.o(e.l,"seeked",function(){var t=e.l.currentTime;if(0!=t){e.g.streamTimeForContentTime(t);var n=e.g.previousCuePointForStreamTime(t);n&&!n.played&&(e.s=t,e.l.currentTime=n.start)}})}(r,e)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(e){e=e.getAd(),r.m=new pp(e,r.l),r.B&&(r.m.i=r.B),r.i(new V("ad-started",(new Map).set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var e=r.l.currentTime;r.s&&r.s>e&&(r.l.currentTime=r.s,r.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(e){r.B=e.getStreamData().adProgressData,r.m&&(r.m.i=r.B)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new V("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new V("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new V("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new V("ad-complete")),r.i(new V("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new V("ad-skipped")),r.i(new V("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(e){var t=e.getStreamData();e=[];for(var n=(t=l(t.cuepoints)).next();!n.done;n=t.next())n=n.value,e.push({start:n.start,end:n.end});r.D=e,r.i(new V("ad-cue-points-changed",(new Map).set("cuepoints",e)))})}function gp(){$.call(this),this.h=this.i=this.j=this.g=null,this.m=new Pd,this.s=navigator.language,this.l=null}function mp(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}function vp(e){return JSON.stringify(e,function(e,t){if("function"!=typeof t){if(t instanceof Event||t instanceof V){var n={};for(i in t)(e=t[i])&&"object"==typeof e?"detail"==i&&(n[i]=e):i in Event||(n[i]=e);return n}if(t instanceof Error){var i=new Set(["name","message","stack"]);for(n in t)i.add(n);for(e=(n=l(Object.getOwnPropertyNames(t))).next();!e.done;e=n.next())i.add(e.value);for(n={},e=(i=l(i)).next();!e.done;e=i.next())n[e=e.value]=t[e];t={__type__:"Error",contents:n}}else if(t instanceof TimeRanges){for(i={__type__:"TimeRanges",length:t.length,start:[],end:[]},n=(t=l(rs(t))).next();!n.done;n=t.next())e=(n=n.value).end,i.start.push(n.start),i.end.push(e);t=i}else t=ArrayBuffer.isView(t)&&1===t.BYTES_PER_ELEMENT?{__type__:"Uint8Array",entries:Array.from(t)}:"number"==typeof t?isNaN(t)?"NaN":isFinite(t)?t:0>t?"-Infinity":"Infinity":t;return t}})}function yp(e){return JSON.parse(e,function(e,t){if("NaN"==t)var n=NaN;else if("-Infinity"==t)n=-1/0;else if("Infinity"==t)n=1/0;else if(t&&"object"==typeof t&&"TimeRanges"==t.__type__)n=function(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}(t);else if(t&&"object"==typeof t&&"Uint8Array"==t.__type__)n=new Uint8Array(t.entries);else if(t&&"object"==typeof t&&"Error"==t.__type__){for(n in e=t.contents,t=Error(e.message),e)t[n]=e[n];n=t}else n=t;return n})}(i=Dd.prototype).needsSkipUI=function(){return!1},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!0},i.getDuration=function(){return this.g.getDuration()},i.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},i.getRemainingTime=function(){return this.h.getRemainingTime()},i.isPaused=function(){return this.i},i.isSkippable=function(){return 0<=this.g.getSkipTimeOffset()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return this.h.getAdSkippableState()},i.skip=function(){return this.h.skip()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.resume()},i.getVolume=function(){return this.h.getVolume()},i.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},i.isMuted=function(){return 0==this.h.getVolume()},i.isLinear=function(){return this.g.isLinear()},i.resize=function(e,t){this.h.resize(e,t)},i.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return this.g.getMediaUrl()},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.g=null},H("shaka.ads.ClientSideAd",Dd),Dd.prototype.release=Dd.prototype.release,Dd.prototype.getPodIndex=Dd.prototype.getPodIndex,Dd.prototype.getTimeOffset=Dd.prototype.getTimeOffset,Dd.prototype.getMediaUrl=Dd.prototype.getMediaUrl,Dd.prototype.getAdvertiserName=Dd.prototype.getAdvertiserName,Dd.prototype.getCreativeAdId=Dd.prototype.getCreativeAdId,Dd.prototype.getAdId=Dd.prototype.getAdId,Dd.prototype.getVastAdId=Dd.prototype.getVastAdId,Dd.prototype.getVastMediaWidth=Dd.prototype.getVastMediaWidth,Dd.prototype.getVastMediaHeight=Dd.prototype.getVastMediaHeight,Dd.prototype.getVastMediaBitrate=Dd.prototype.getVastMediaBitrate,Dd.prototype.getDescription=Dd.prototype.getDescription,Dd.prototype.getTitle=Dd.prototype.getTitle,Dd.prototype.getPositionInSequence=Dd.prototype.getPositionInSequence,Dd.prototype.getSequenceLength=Dd.prototype.getSequenceLength,Dd.prototype.setMuted=Dd.prototype.setMuted,Dd.prototype.resize=Dd.prototype.resize,Dd.prototype.isLinear=Dd.prototype.isLinear,Dd.prototype.isMuted=Dd.prototype.isMuted,Dd.prototype.setVolume=Dd.prototype.setVolume,Dd.prototype.getVolume=Dd.prototype.getVolume,Dd.prototype.play=Dd.prototype.play,Dd.prototype.pause=Dd.prototype.pause,Dd.prototype.skip=Dd.prototype.skip,Dd.prototype.canSkipNow=Dd.prototype.canSkipNow,Dd.prototype.getTimeUntilSkippable=Dd.prototype.getTimeUntilSkippable,Dd.prototype.isSkippable=Dd.prototype.isSkippable,Dd.prototype.isPaused=Dd.prototype.isPaused,Dd.prototype.getRemainingTime=Dd.prototype.getRemainingTime,Dd.prototype.getMinSuggestedDuration=Dd.prototype.getMinSuggestedDuration,Dd.prototype.getDuration=Dd.prototype.getDuration,Dd.prototype.isUsingAnotherMediaElement=Dd.prototype.isUsingAnotherMediaElement,Dd.prototype.hasCustomClick=Dd.prototype.hasCustomClick,Dd.prototype.isClientRendering=Dd.prototype.isClientRendering,Dd.prototype.needsSkipUI=Dd.prototype.needsSkipUI,H("shaka.ads.Utils",Rd),Rd.ADS_LOADED="ads-loaded",Rd.AD_STARTED="ad-started",Rd.AD_FIRST_QUARTILE="ad-first-quartile",Rd.AD_MIDPOINT="ad-midpoint",Rd.AD_THIRD_QUARTILE="ad-third-quartile",Rd.AD_COMPLETE="ad-complete",Rd.AD_STOPPED="ad-stopped",Rd.AD_SKIPPED="ad-skipped",Rd.AD_VOLUME_CHANGED="ad-volume-changed",Rd.AD_MUTED="ad-muted",Rd.AD_PAUSED="ad-paused",Rd.AD_RESUMED="ad-resumed",Rd.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Rd.CUEPOINTS_CHANGED="ad-cue-points-changed",Rd.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Rd.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Rd.AD_CLICKED="ad-clicked",Rd.AD_PROGRESS="ad-progress",Rd.AD_BUFFERING="ad-buffering",Rd.AD_IMPRESSION="ad-impression",Rd.AD_DURATION_CHANGED="ad-duration-changed",Rd.AD_CLOSED="ad-closed",Rd.AD_LOADED="ad-loaded",Rd.ALL_ADS_COMPLETED="all-ads-completed",Rd.AD_LINEAR_CHANGED="ad-linear-changed",Rd.AD_METADATA="ad-metadata",Rd.AD_RECOVERABLE_ERROR="ad-recoverable-error",Rd.AD_ERROR="ad-error",Rd.AD_BREAK_READY="ad-break-ready",Rd.AD_INTERACTION="ad-interaction",Rd.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Rd.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Rd.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Ud.prototype.configure=function(e){this.s=e},Ud.prototype.stop=function(){this.g&&this.g.stop(),this.u&&hs(this.u)},Ud.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.D.destroy()},(i=Gd.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return this.u},i.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return this.h&&null!=this.l?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.h},i.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},i.canSkipNow=function(){return this.h&&0==this.getTimeUntilSkippable()},i.skip=function(){this.canSkipNow()&&this.B()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return null==this.C},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.s},i.getPositionInSequence=function(){return this.m},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.i.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.i.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.g=null},H("shaka.ads.InterstitialAd",Gd),Gd.prototype.release=Gd.prototype.release,Gd.prototype.getPodIndex=Gd.prototype.getPodIndex,Gd.prototype.getTimeOffset=Gd.prototype.getTimeOffset,Gd.prototype.getMediaUrl=Gd.prototype.getMediaUrl,Gd.prototype.getAdvertiserName=Gd.prototype.getAdvertiserName,Gd.prototype.getCreativeAdId=Gd.prototype.getCreativeAdId,Gd.prototype.getAdId=Gd.prototype.getAdId,Gd.prototype.getVastAdId=Gd.prototype.getVastAdId,Gd.prototype.getVastMediaWidth=Gd.prototype.getVastMediaWidth,Gd.prototype.getVastMediaHeight=Gd.prototype.getVastMediaHeight,Gd.prototype.getVastMediaBitrate=Gd.prototype.getVastMediaBitrate,Gd.prototype.getDescription=Gd.prototype.getDescription,Gd.prototype.getTitle=Gd.prototype.getTitle,Gd.prototype.getPositionInSequence=Gd.prototype.getPositionInSequence,Gd.prototype.getSequenceLength=Gd.prototype.getSequenceLength,Gd.prototype.setMuted=Gd.prototype.setMuted,Gd.prototype.resize=Gd.prototype.resize,Gd.prototype.isLinear=Gd.prototype.isLinear,Gd.prototype.isMuted=Gd.prototype.isMuted,Gd.prototype.setVolume=Gd.prototype.setVolume,Gd.prototype.getVolume=Gd.prototype.getVolume,Gd.prototype.play=Gd.prototype.play,Gd.prototype.pause=Gd.prototype.pause,Gd.prototype.skip=Gd.prototype.skip,Gd.prototype.canSkipNow=Gd.prototype.canSkipNow,Gd.prototype.getTimeUntilSkippable=Gd.prototype.getTimeUntilSkippable,Gd.prototype.isSkippable=Gd.prototype.isSkippable,Gd.prototype.isPaused=Gd.prototype.isPaused,Gd.prototype.getRemainingTime=Gd.prototype.getRemainingTime,Gd.prototype.getMinSuggestedDuration=Gd.prototype.getMinSuggestedDuration,Gd.prototype.getDuration=Gd.prototype.getDuration,Gd.prototype.isUsingAnotherMediaElement=Gd.prototype.isUsingAnotherMediaElement,Gd.prototype.hasCustomClick=Gd.prototype.hasCustomClick,Gd.prototype.isClientRendering=Gd.prototype.isClientRendering,Gd.prototype.needsSkipUI=Gd.prototype.needsSkipUI,(i=Hd.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!0},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return-1},i.isPaused=function(){return!1},i.isSkippable=function(){return!1},i.getTimeUntilSkippable=function(){return 0},i.canSkipNow=function(){return!1},i.skip=function(){},i.pause=function(){},i.play=function(){},i.getVolume=function(){return 1},i.setVolume=function(){},i.isMuted=function(){return!1},i.isLinear=function(){return this.i},i.resize=function(){},i.setMuted=function(){},i.getSequenceLength=function(){return this.j},i.getPositionInSequence=function(){return this.h},i.getTitle=function(){return""},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.id||""},i.getCreativeAdId=function(){return""},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return this.g.uri},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){},H("shaka.ads.InterstitialStaticAd",Hd),Hd.prototype.release=Hd.prototype.release,Hd.prototype.getPodIndex=Hd.prototype.getPodIndex,Hd.prototype.getTimeOffset=Hd.prototype.getTimeOffset,Hd.prototype.getMediaUrl=Hd.prototype.getMediaUrl,Hd.prototype.getAdvertiserName=Hd.prototype.getAdvertiserName,Hd.prototype.getCreativeAdId=Hd.prototype.getCreativeAdId,Hd.prototype.getAdId=Hd.prototype.getAdId,Hd.prototype.getVastAdId=Hd.prototype.getVastAdId,Hd.prototype.getVastMediaWidth=Hd.prototype.getVastMediaWidth,Hd.prototype.getVastMediaHeight=Hd.prototype.getVastMediaHeight,Hd.prototype.getVastMediaBitrate=Hd.prototype.getVastMediaBitrate,Hd.prototype.getDescription=Hd.prototype.getDescription,Hd.prototype.getTitle=Hd.prototype.getTitle,Hd.prototype.getPositionInSequence=Hd.prototype.getPositionInSequence,Hd.prototype.getSequenceLength=Hd.prototype.getSequenceLength,Hd.prototype.setMuted=Hd.prototype.setMuted,Hd.prototype.resize=Hd.prototype.resize,Hd.prototype.isLinear=Hd.prototype.isLinear,Hd.prototype.isMuted=Hd.prototype.isMuted,Hd.prototype.setVolume=Hd.prototype.setVolume,Hd.prototype.getVolume=Hd.prototype.getVolume,Hd.prototype.play=Hd.prototype.play,Hd.prototype.pause=Hd.prototype.pause,Hd.prototype.skip=Hd.prototype.skip,Hd.prototype.canSkipNow=Hd.prototype.canSkipNow,Hd.prototype.getTimeUntilSkippable=Hd.prototype.getTimeUntilSkippable,Hd.prototype.isSkippable=Hd.prototype.isSkippable,Hd.prototype.isPaused=Hd.prototype.isPaused,Hd.prototype.getRemainingTime=Hd.prototype.getRemainingTime,Hd.prototype.getMinSuggestedDuration=Hd.prototype.getMinSuggestedDuration,Hd.prototype.getDuration=Hd.prototype.getDuration,Hd.prototype.isUsingAnotherMediaElement=Hd.prototype.isUsingAnotherMediaElement,Hd.prototype.hasCustomClick=Hd.prototype.hasCustomClick,Hd.prototype.isClientRendering=Hd.prototype.isClientRendering,Hd.prototype.needsSkipUI=Hd.prototype.needsSkipUI,(i=Vd.prototype).configure=function(e){this.L=e,zd(this)},i.stop=function(){if(this.l&&this.l.Sa(),this.R.clear(),this.H.clear(),this.j.Tg(),this.F.size)for(var e=Array.from(this.F.values()),t=(e=l(e)).next();!t.done;t=e.next())(t=t.value)&&t.then(function(e){e&&e.destroy()});if(this.F.clear(),this.K.size)for(t=(e=l(e=Array.from(this.K.keys()))).next();!t.done;t=e.next())ip(this,t.value);this.K.clear(),this.j.detach(),this.J=!1,this.u=this.m=null,this.B=!0,this.h=this.g,this.G=null,Zd(this),Wd(this),this.C&&hs(this.C),this.s&&(this.s.stop(),this.s=null)},i.release=function(){this.stop(),this.I&&this.I.release(),this.l&&this.l.release(),this.P&&(this.P.stop(),this.P=null),this.N&&(this.N.stop(),this.N=null),this.j.destroy()},i.Tb=function(){return this.j},i.addAdUrlInterstitial=function(e){var t,n,i,r,a,o,s,u,c,d=this;return L(function(p){if(1==p.g)return _(p,$d(d,e,t={type:12}),2);if(3!=p.g){if(n=p.h,!(i=pn(n,"VAST,vmap:VMAP")))throw new Ce(2,10,10007);if(r=[],"VAST"==i.tagName)return r=Nd(i,d.m),p.A(3);if("vmap:VMAP"!=i.tagName)return p.A(3);for(a=function(e){var n,i;return L(function(a){if(1==a.g)return _(a,$d(d,e.uri,t),2);if(n=a.h,!(i=pn(n,"VAST")))throw new Ce(2,10,10007);r.push.apply(r,h(Nd(i,e.time))),w(a)})},o=[],s=l(function(e){for(var t=[],n=(e=l(yn(e,"vmap:AdBreak"))).next();!n.done;n=e.next()){var i=n.value,r=i.attributes.timeOffset;r&&(n=null,n="start"==r?null:"end"==r?1/0:sn(r),(i=Sn(i,"vmap:AdSource"))&&(i=Sn(i,"vmap:AdTagURI"))&&(i=bn(i))&&t.push({time:n,uri:i}))}return t}(i)),u=s.next();!u.done;u=s.next())c=u.value,o.push(a(c));return o.length?_(p,Promise.all(o),3):p.A(3)}Kd(d,r),w(p)})},(i=rp.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!1},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.h.durationInSeconds},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},i.isPaused=function(){return this.g.paused},i.isSkippable=function(){return"number"==typeof this.j},i.getTimeUntilSkippable=function(){if("number"!=typeof this.j)return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},i.pause=function(){return this.g.pause()},i.play=function(){return this.g.play()},i.getVolume=function(){return this.g.volume},i.setVolume=function(e){this.g.volume=e},i.isMuted=function(){return this.g.muted},i.isLinear=function(){return this.s},i.resize=function(){},i.setMuted=function(e){this.g.muted=e},i.getSequenceLength=function(){return this.l?this.l:1},i.getPositionInSequence=function(){return this.i?this.i:1},i.getTitle=function(){return this.h.adTitle},i.getDescription=function(){return""},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return 0},i.getVastMediaWidth=function(){return 0},i.getVastAdId=function(){return this.h.vastAdId||""},i.getAdId=function(){return this.h.adId},i.getCreativeAdId=function(){return this.h.creativeId},i.getAdvertiserName=function(){return""},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){return 0},i.getPodIndex=function(){return 0},i.release=function(){this.l=this.i=this.g=this.h=null},H("shaka.ads.MediaTailorAd",rp),rp.prototype.release=rp.prototype.release,rp.prototype.getPodIndex=rp.prototype.getPodIndex,rp.prototype.getTimeOffset=rp.prototype.getTimeOffset,rp.prototype.getMediaUrl=rp.prototype.getMediaUrl,rp.prototype.getAdvertiserName=rp.prototype.getAdvertiserName,rp.prototype.getCreativeAdId=rp.prototype.getCreativeAdId,rp.prototype.getAdId=rp.prototype.getAdId,rp.prototype.getVastAdId=rp.prototype.getVastAdId,rp.prototype.getVastMediaWidth=rp.prototype.getVastMediaWidth,rp.prototype.getVastMediaHeight=rp.prototype.getVastMediaHeight,rp.prototype.getVastMediaBitrate=rp.prototype.getVastMediaBitrate,rp.prototype.getDescription=rp.prototype.getDescription,rp.prototype.getTitle=rp.prototype.getTitle,rp.prototype.getPositionInSequence=rp.prototype.getPositionInSequence,rp.prototype.getSequenceLength=rp.prototype.getSequenceLength,rp.prototype.setMuted=rp.prototype.setMuted,rp.prototype.resize=rp.prototype.resize,rp.prototype.isLinear=rp.prototype.isLinear,rp.prototype.isMuted=rp.prototype.isMuted,rp.prototype.setVolume=rp.prototype.setVolume,rp.prototype.getVolume=rp.prototype.getVolume,rp.prototype.play=rp.prototype.play,rp.prototype.pause=rp.prototype.pause,rp.prototype.skip=rp.prototype.skip,rp.prototype.canSkipNow=rp.prototype.canSkipNow,rp.prototype.getTimeUntilSkippable=rp.prototype.getTimeUntilSkippable,rp.prototype.isSkippable=rp.prototype.isSkippable,rp.prototype.isPaused=rp.prototype.isPaused,rp.prototype.getRemainingTime=rp.prototype.getRemainingTime,rp.prototype.getMinSuggestedDuration=rp.prototype.getMinSuggestedDuration,rp.prototype.getDuration=rp.prototype.getDuration,rp.prototype.isUsingAnotherMediaElement=rp.prototype.isUsingAnotherMediaElement,rp.prototype.hasCustomClick=rp.prototype.hasCustomClick,rp.prototype.isClientRendering=rp.prototype.isClientRendering,rp.prototype.needsSkipUI=rp.prototype.needsSkipUI,ap.prototype.stop=function(){for(var e=l(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.s.Da(t.target,t.type,t.listener);hp(this),this.m=[],this.u=[],this.G="",this.N=!0,this.H="",this.B=null,this.j=[],this.L=[],this.F.clear()},ap.prototype.release=function(){this.stop(),this.s&&this.s.release()},ap.prototype.onManifestUpdated=function(e){this.I=e,""!=this.G&&(function(e,t,n){var i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b;L(function(T){if(1==T.g)return i={type:8},r=Zr([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}),a=e.J.request(7,r,i),S(T,2),_(T,a.promise,4);if(2!=T.g){if(o=T.h,s=[],u=Ne(o.data),0<(h=JSON.parse(u)).avails.length){if(JSON.stringify(e.j)!=JSON.stringify(h.avails)){for(e.j=h.avails,c=l(e.j),d=c.next();!d.done;d=c.next())for(p=d.value,f=l(p.nonLinearAdsList),g=f.next();!g.done;g=f.next())for(m=g.value,v=l(m.nonLinearAdList),y=v.next();!y.done;y=v.next())b=y.value,op(e,b);s=e.getCuePoints(),e.i(new V("ad-cue-points-changed",(new Map).set("cuepoints",s)))}}else e.j.length&&e.i(new V("ad-cue-points-changed",(new Map).set("cuepoints",s))),hp(e),e.j=[];return n&&(e.I||0<s.length)&&function(e){lp(e),e.I||(up(e),e.s.o(e.h,"seeked",function(){up(e)}),e.s.o(e.h,"ended",function(){hp(e)})),e.s.o(e.h,"timeupdate",function(){lp(e)})}(e),A(T,0)}E(T),w(T)})}(this,this.G,this.N),this.N=!1)},ap.prototype.getCuePoints=function(){for(var e=[],t=l(this.j),n=t.next();!n.done;n=t.next())for(var i=(n=l(n.value.ads)).next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds});return e},(i=pp.prototype).needsSkipUI=function(){return!0},i.isClientRendering=function(){return!1},i.hasCustomClick=function(){return!0},i.isUsingAnotherMediaElement=function(){return!1},i.getDuration=function(){return this.i?this.i.duration:-1},i.getMinSuggestedDuration=function(){return this.getDuration()},i.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},i.isPaused=function(){return this.h.paused},i.isSkippable=function(){return this.g.isSkippable()},i.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},i.canSkipNow=function(){return 0==this.getTimeUntilSkippable()},i.skip=function(){this.h.currentTime+=this.getRemainingTime()},i.pause=function(){return this.h.pause()},i.play=function(){return this.h.play()},i.getVolume=function(){return this.h.volume},i.setVolume=function(e){this.h.volume=e},i.isMuted=function(){return this.h.muted},i.isLinear=function(){return!0},i.resize=function(){},i.setMuted=function(e){this.h.muted=e},i.getSequenceLength=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getTotalAds()},i.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return null==e?1:e.getAdPosition()},i.getTitle=function(){return this.g.getTitle()},i.getDescription=function(){return this.g.getDescription()},i.getVastMediaBitrate=function(){return 0},i.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},i.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},i.getVastAdId=function(){return""},i.getAdId=function(){return this.g.getAdId()},i.getCreativeAdId=function(){return this.g.getCreativeAdId()},i.getAdvertiserName=function(){return this.g.getAdvertiserName()},i.getMediaUrl=function(){return null},i.getTimeOffset=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getTimeOffset()},i.getPodIndex=function(){var e=this.g.getAdPodInfo();return null==e?0:e.getPodIndex()},i.release=function(){this.h=this.i=this.g=null},H("shaka.ads.ServerSideAd",pp),pp.prototype.release=pp.prototype.release,pp.prototype.getPodIndex=pp.prototype.getPodIndex,pp.prototype.getTimeOffset=pp.prototype.getTimeOffset,pp.prototype.getMediaUrl=pp.prototype.getMediaUrl,pp.prototype.getAdvertiserName=pp.prototype.getAdvertiserName,pp.prototype.getCreativeAdId=pp.prototype.getCreativeAdId,pp.prototype.getAdId=pp.prototype.getAdId,pp.prototype.getVastAdId=pp.prototype.getVastAdId,pp.prototype.getVastMediaWidth=pp.prototype.getVastMediaWidth,pp.prototype.getVastMediaHeight=pp.prototype.getVastMediaHeight,pp.prototype.getVastMediaBitrate=pp.prototype.getVastMediaBitrate,pp.prototype.getDescription=pp.prototype.getDescription,pp.prototype.getTitle=pp.prototype.getTitle,pp.prototype.getPositionInSequence=pp.prototype.getPositionInSequence,pp.prototype.getSequenceLength=pp.prototype.getSequenceLength,pp.prototype.setMuted=pp.prototype.setMuted,pp.prototype.resize=pp.prototype.resize,pp.prototype.isLinear=pp.prototype.isLinear,pp.prototype.isMuted=pp.prototype.isMuted,pp.prototype.setVolume=pp.prototype.setVolume,pp.prototype.getVolume=pp.prototype.getVolume,pp.prototype.play=pp.prototype.play,pp.prototype.pause=pp.prototype.pause,pp.prototype.skip=pp.prototype.skip,pp.prototype.canSkipNow=pp.prototype.canSkipNow,pp.prototype.getTimeUntilSkippable=pp.prototype.getTimeUntilSkippable,pp.prototype.isSkippable=pp.prototype.isSkippable,pp.prototype.isPaused=pp.prototype.isPaused,pp.prototype.getRemainingTime=pp.prototype.getRemainingTime,pp.prototype.getMinSuggestedDuration=pp.prototype.getMinSuggestedDuration,pp.prototype.getDuration=pp.prototype.getDuration,pp.prototype.isUsingAnotherMediaElement=pp.prototype.isUsingAnotherMediaElement,pp.prototype.hasCustomClick=pp.prototype.hasCustomClick,pp.prototype.isClientRendering=pp.prototype.isClientRendering,pp.prototype.needsSkipUI=pp.prototype.needsSkipUI,(i=fp.prototype).configure=function(){},i.stop=function(){this.C="",this.s=null,this.D=[]},i.release=function(){this.stop(),this.h&&this.h.release()},i.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},i.getCuePoints=function(){return this.D},m(gp,$),(i=gp.prototype).setLocale=function(e){this.s=e},i.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},i.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new Vd(e,t,n,function(e){return mp(i,e)}),this.g.configure(this.l)},i.initClientSide=function(t,n,i){var r=this;if(!e.google||!google.ima||!google.ima.AdsLoader)throw new Ce(2,10,1e4);this.j&&this.j.release(),this.j=new Ud(t,n,this.s,i,function(e){return mp(r,e)}),this.j.configure(this.l)},i.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),$.prototype.release.call(this)},i.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new V("ad-stopped")),this.dispatchEvent(new V("ad-content-attach-requested")),this.m=new Pd},i.requestClientSideAds=function(e){if(!this.j)throw new Ce(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.G=Date.now()/1e3,t.m.requestAds(e)},i.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new Ce(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},i.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new ap(e,t,n,function(e){return mp(i,e)})},i.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new Ce(1,10,10005);var i=this.i;return n=void 0===n?"":n,i.l?e=Promise.reject(new Ce(1,10,10004)):(i.l=new Br,function(e,t,n){var i,r,a,o,s,u,l,h,c,d,p,f;L(function(g){if(1==g.g)return i={type:7},(r=Zr([t],{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4})).method="POST",n&&(a=JSON.stringify(n),r.body=Be(a)),o=e.J.request(7,r,i),S(g,2),_(g,o.promise,4);if(2!=g.g){if(s=g.h,u=Ne(s.data),!(l=JSON.parse(u)).manifestUrl||!l.trackingUrl)throw Error("Insufficient data from MediaTailor.");return h=new re(t),c=new re(l.trackingUrl),e.G=h.resolve(c).toString(),d=Date.now()/1e3,p=d-e.O,e.i(new V("ads-loaded",(new Map).set("loadTime",p))),f=new re(l.manifestUrl),e.l.resolve(h.resolve(f).toString()),e.l=null,A(g,0)}if(E(g),!e.H.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,g.return();e.l.resolve(e.H),e.l=null,w(g)})}(i,e,t),i.H=n||"",i.O=Date.now()/1e3,e=i.l),e},i.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new Ce(1,10,10005);var t=this.i;t.G=e,t.i(new V("ads-loaded",(new Map).set("loadTime",0)))},i.initServerSide=function(t,n){var i=this;if(!e.google||!google.ima||!google.ima.dai)throw new Ce(2,10,10002);this.h&&this.h.release(),this.h=new fp(t,n,this.s,function(e){return mp(i,e)}),this.h.configure(this.l)},i.requestServerSideStream=function(e,t){if(t=void 0===t?"":t,!this.h)throw new Ce(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.15.9",(n=this.h).j?e=Promise.reject(new Ce(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.G=!0),n.j=new Br,n.g.requestStream(e),n.C=t||"",n.F=Date.now()/1e3,e=n.j),e},i.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new Ce(1,10,10003);(e.mpt||e.mpv)&&Y('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.15.9",this.h.g.replaceAdTagParameters(e)},i.getServerSideCuePoints=function(){return kt("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},i.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},i.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:Ld(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},i.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},i.onDashTimedMetadata=function(e){this.h&&"urn:google:dai:2018"==e.schemeIdUri&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},i.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},i.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},i.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&function(e,t){var n;L(function(i){if(1==i.g)return Qd(e),_(i,function(e,t){var n,i,r,a,o,s,u,l,h,c,d,p,f,g,m,v,y,b,w,T,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G,H,V,W,z,K,X;return L(function(L){switch(L.g){case 1:if(n=[],!t)return L.return(n);if(i=t.values.find(function(e){return"X-ASSET-URI"==e.key}),r=t.values.find(function(e){return"X-ASSET-LIST"==e.key}),!i&&!r)return L.return(n);if(a=null,(o=t.values.find(function(e){return"ID"==e.key}))&&(a=o.data),s=null==a?Math.floor(10*t.startTime)/10:t.startTime,(u=t.endTime)&&1/0!=t.endTime&&"number"==typeof t.endTime&&(u=null==a?Math.floor(10*t.endTime)/10:t.endTime),l=t.values.find(function(e){return"X-RESTRICT"==e.key}),c=h=!0,l&&l.data&&(d=l.data,h=!d.includes("SKIP"),c=!d.includes("JUMP")),p=h?0:null,(f=t.values.find(function(e){return"X-ENABLE-SKIP-AFTER"==e.key}))&&(g=f.data,p=parseFloat(g),isNaN(p)&&(p=h?0:null)),m=null,(v=t.values.find(function(e){return"X-ENABLE-SKIP-FOR"==e.key}))&&(y=v.data,m=parseFloat(y),isNaN(p)&&(m=null)),b=null,(w=t.values.find(function(e){return"X-RESUME-OFFSET"==e.key}))&&(T=w.data,b=parseFloat(T),isNaN(b)&&(b=null)),x=null,(C=t.values.find(function(e){return"X-PLAYOUT-LIMIT"==e.key}))&&(k=C.data,x=parseFloat(k),isNaN(x)&&(x=null)),P=M=I=!1,(D=t.values.find(function(e){return"CUE"==e.key}))&&(R=D.data,I=R.includes("ONCE"),M=R.includes("PRE"),P=R.includes("POST")),N=!1,(O=t.values.find(function(e){return"X-TIMELINE-OCCUPIES"==e.key}))?(U=O.data,N=U.includes("RANGE")):!w&&e.D.T()&&(N=!M&&!P),i){if(!(B=i.data))return L.return(n);n.push({id:a,groupId:null,startTime:s,endTime:u,uri:B,mimeType:null,isSkippable:h,skipOffset:p,skipFor:m,canJump:c,resumeOffset:b,playoutLimit:x,once:I,pre:M,post:P,timelineRange:N,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}),L.A(2);break}if(!r){L.A(2);break}return(F=r.data)?(S(L,4),_(L,$d(e,F,{type:11}),6)):L.return(n);case 6:for(j=L.h,G=Ne(j),H=JSON.parse(G),(V=H["SKIP-CONTROL"])&&("number"==typeof(W=V["ENABLE-SKIP-AFTER"])&&(p=parseFloat(W),isNaN(W)&&(p=h?0:null)),"number"==typeof(z=V["ENABLE-SKIP-FOR"])&&(m=parseFloat(z),isNaN(z)&&(m=null))),K=0;K<H.ASSETS.length;K++)(X=H.ASSETS[K]).URI&&n.push({id:a+"_shaka_asset_"+K,groupId:a,startTime:s,endTime:u,uri:X.URI,mimeType:null,isSkippable:h,skipOffset:p,skipFor:m,canJump:c,resumeOffset:b,playoutLimit:x,once:I,pre:M,post:P,timelineRange:N,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null});A(L,2);break;case 4:E(L);case 2:return L.return(n)}})}(e,t),2);(n=i.h).length?Kd(e,n):Y("Unsupported HLS interstitial",t),w(i)})}(this.g,n))},i.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if("urn:mpeg:dash:event:alternativeMPD:insert:2025"==i||"urn:mpeg:dash:event:alternativeMPD:replace:2025"==i){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t="urn:mpeg:dash:event:alternativeMPD:replace:2025"==n.schemeIdUri,i="urn:mpeg:dash:event:alternativeMPD:insert:2025"==n.schemeIdUri,t||i)){for(var r,a=n.startTime,o=n.endTime,s=null,u=0,h=l(n.eventNode.children),c=h.next();!c.done;c=h.next())if("AlternativeMPD"==(c=c.value).tagName){if(c=c.attributes.uri){r=c;break}}else if("InsertPresentation"==c.tagName||"ReplacePresentation"==c.tagName){var d=c.attributes.url;if(d){r=d,(h=An(c,"maxDuration",Pn))&&(s=h/n.timescale),(h=An(c,"returnOffset",Pn))&&(u=h/n.timescale),t&&u&&(o=a+u);break}}r&&Kd(e,[{id:n.id,groupId:null,startTime:a,endTime:o,uri:r,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null}])}}else("urn:mpeg:dash:event:2012"==i||"urn:scte:dash:scte214-events"==i)&&n.eventNode&&Sn(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&function(e,t){var n=Sn(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,a="true"==n.attributes.loop,o=An(n,"z",Pn);if(i&&0!=o){var s=null,u=Sn(n,"Background");if(u){var l=u.attributes.uri;s=l?"center / contain no-repeat url('"+l+"')":_n(u)}u=1920,l=1080;var h=Sn(n,"Viewport");if(h){if(null==(u=An(h,"x",Pn)))return;if(null==(l=An(h,"y",Pn)))return}var c={viewport:{x:u,y:l},topLeft:{x:0,y:0},size:{x:u,y:l}},d=Sn(n,"Overlay");if(h&&d){var p=Sn(d,"TopLeft"),f=Sn(d,"Size");if(p&&f){if(null==(d=An(p,"x",Pn)))return;if(null==(p=An(p,"y",Pn)))return;var g=An(f,"x",Pn);if(null==g)return;if(null==(f=An(f,"y",Pn)))return;c.topLeft.x=d,c.topLeft.y=p,c.size.x=g,c.size.y=f}}if(d=null,n=Sn(n,"Squeeze"),h&&n&&(f=Sn(n,"TopLeft"),n=Sn(n,"Size"),f&&n)){if(null==(h=An(f,"x",Pn)))return;if(null==(d=An(f,"y",Pn)))return;if(null==(f=An(n,"x",Pn)))return;if(null==(n=An(n,"y",Pn)))return;d={viewport:{x:u,y:l},topLeft:{x:h,y:d},size:{x:f,y:n}}}Kd(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:a,overlay:c,displayOnBackground:-1==o,currentVideo:d,background:s}])}}(this.g,n))}},i.addCustomInterstitial=function(e){if(!this.g)throw new Ce(1,10,10006);Kd(this.g,[e])},i.addAdUrlInterstitial=function(e){if(!this.g)throw new Ce(1,10,10006);return this.g.addAdUrlInterstitial(e)},i.getInterstitialPlayer=function(){if(!this.g)throw new Ce(1,10,10006);return this.g.Tb()},H("shaka.ads.AdManager",gp),gp.prototype.getInterstitialPlayer=gp.prototype.getInterstitialPlayer,gp.prototype.addAdUrlInterstitial=gp.prototype.addAdUrlInterstitial,gp.prototype.addCustomInterstitial=gp.prototype.addCustomInterstitial,gp.prototype.onDASHInterstitialMetadata=gp.prototype.onDASHInterstitialMetadata,gp.prototype.onHLSInterstitialMetadata=gp.prototype.onHLSInterstitialMetadata,gp.prototype.onCueMetadataChange=gp.prototype.onCueMetadataChange,gp.prototype.onHlsTimedMetadata=gp.prototype.onHlsTimedMetadata,gp.prototype.onDashTimedMetadata=gp.prototype.onDashTimedMetadata,gp.prototype.onManifestUpdated=gp.prototype.onManifestUpdated,gp.prototype.getStats=gp.prototype.getStats,gp.prototype.getCuePoints=gp.prototype.getCuePoints,gp.prototype.getServerSideCuePoints=gp.prototype.getServerSideCuePoints,gp.prototype.replaceServerSideAdTagParameters=gp.prototype.replaceServerSideAdTagParameters,gp.prototype.requestServerSideStream=gp.prototype.requestServerSideStream,gp.prototype.initServerSide=gp.prototype.initServerSide,gp.prototype.addMediaTailorTrackingUrl=gp.prototype.addMediaTailorTrackingUrl,gp.prototype.requestMediaTailorStream=gp.prototype.requestMediaTailorStream,gp.prototype.initMediaTailor=gp.prototype.initMediaTailor,gp.prototype.updateClientSideAdsRenderingSettings=gp.prototype.updateClientSideAdsRenderingSettings,gp.prototype.requestClientSideAds=gp.prototype.requestClientSideAds,gp.prototype.onAssetUnload=gp.prototype.onAssetUnload,gp.prototype.release=gp.prototype.release,gp.prototype.initClientSide=gp.prototype.initClientSide,gp.prototype.initInterstitial=gp.prototype.initInterstitial,gp.prototype.configure=gp.prototype.configure,gp.prototype.setLocale=gp.prototype.setLocale,gp.ADS_LOADED="ads-loaded",gp.AD_STARTED="ad-started",gp.AD_FIRST_QUARTILE="ad-first-quartile",gp.AD_MIDPOINT="ad-midpoint",gp.AD_THIRD_QUARTILE="ad-third-quartile",gp.AD_COMPLETE="ad-complete",gp.AD_STOPPED="ad-stopped",gp.AD_SKIPPED="ad-skipped",gp.AD_VOLUME_CHANGED="ad-volume-changed",gp.AD_MUTED="ad-muted",gp.AD_PAUSED="ad-paused",gp.AD_RESUMED="ad-resumed",gp.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",gp.CUEPOINTS_CHANGED="ad-cue-points-changed",gp.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",gp.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",gp.AD_CLICKED="ad-clicked",gp.AD_PROGRESS="ad-progress",gp.AD_BUFFERING="ad-buffering",gp.AD_IMPRESSION="ad-impression",gp.AD_DURATION_CHANGED="ad-duration-changed",gp.AD_CLOSED="ad-closed",gp.AD_LOADED="ad-loaded",gp.ALL_ADS_COMPLETED="all-ads-completed",gp.AD_LINEAR_CHANGED="ad-linear-changed",gp.AD_METADATA="ad-metadata",gp.AD_RECOVERABLE_ERROR="ad-recoverable-error",gp.AD_ERROR="ad-error",gp.AD_BREAK_READY="ad-break-ready",gp.AD_INTERACTION="ad-interaction",gp.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",gp.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",gp.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Id=function(){return new gp};var bp="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),_p="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),wp=["loop","playbackRate"],Sp=["pause","play"],Tp=(new Map).set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1),Ap=(new Map).set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),Ep=(new Map).set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),xp=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Cp=[["isTextTrackVisible","setTextTrackVisibility"]],kp="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),Ip="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function Mp(e,t,n,i,r,a,o){var s=this;this.G=e,this.J=o,this.l=new zi(t),this.K=n,this.u=!1,this.B=i,this.F=r,this.L=a,this.i=this.m=!1,this.I="",this.s=null,this.C=function(){return Rp(s)},this.D=function(e,t){switch((e=yp(t)).type){case"event":var n=e.targetName,i=W(e.event);s.B(n,i);break;case"update":for(i in n=e.update)for(var r in e=s.g[i]||{},n[i])e[r]=n[i][r];s.u&&(s.K(),s.u=!1);break;case"asyncComplete":if(r=e.id,i=e.error,t=e.res,e=s.h.get(r),s.h.delete(r),e)if(i){for(n in r=new Ce(i.severity,i.category,i.code),i)r[n]=i[n];e.reject(r)}else e.resolve(t)}},this.g={video:{},player:{}},this.H=0,this.h=new Map,this.j=null,Gp.add(this)}function Pp(e,t){var n=e.L();Fp=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.D),Rp(e),Op(e,{type:"init",initState:n,appData:e.s}),e.j.resolve()}function Lp(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new Ce(2,8,n,t))}function Dp(e){var t=Fp;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.D)}function Rp(e){var t=!!Fp&&"connected"==Fp.status;if(e.i&&!t){for(var n in e.F(),e.g)e.g[n]={};Np(e)}e.i=t,e.I=t?Fp.receiver.friendlyName:"",e.l.Ka()}function Np(e){if(e.h)for(var t=l(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new Ce(1,7,7e3))}}function Op(e,t){t=vp(t);var n=Fp;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},Z)}catch(i){throw t=new Ce(2,8,8005,i),n=new V("error",(new Map).set("detail",t)),e.B("player",n),e.Dd(),t}}(i=Mp.prototype).destroy=function(){return Gp.delete(this),Np(this),Fp&&Dp(this),this.l&&(this.l.stop(),this.l=null),this.F=this.B=null,this.i=this.m=!1,this.D=this.C=this.j=this.h=this.g=this.s=null,Promise.resolve()},i.Pa=function(){return this.i},i.Wf=function(){return this.I},i.init=function(){if(this.G.length)if(e.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Ka();var t=new chrome.cast.SessionRequest(this.G,[],null,this.J,null);t=new chrome.cast.ApiConfig(t,function(e){for(var t=l(Gp),n=t.next();!n.done;n=t.next()){var i=e;(n=n.value).j=new Br,n.u=!0,Pp(n,i)}},function(e){for(var t=l(Gp),n=t.next();!n.done;n=t.next())n=n.value,Bp="available"==e,n.l.Ka()},"origin_scoped"),chrome.cast.initialize(t,function(){},function(){}),Bp&&this.l.X(Up),(t=Fp)&&t.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Br,this.u=!0,Pp(this,t)):Fp=null}else e.__onGCastApiAvailable!==Hp&&(jp=e.__onGCastApiAvailable||null,e.__onGCastApiAvailable=Hp)},i.Yh=function(e){this.s=e,this.i&&Op(this,{type:"appData",appData:this.s})},i.cast=function(){var e=this;return L(function(t){if(!e.m)throw new Ce(1,8,8e3);if(!Bp)throw new Ce(1,8,8001);if(e.i)throw new Ce(1,8,8002);return e.j=new Br,chrome.cast.requestSession(function(t){return Pp(e,t)},function(t){return Lp(e,t)}),_(t,e.j,0)})},i.Dd=function(){if(this.i){if(Np(this),Fp){Dp(this);try{Fp.stop(function(){},function(){})}catch(e){}Fp=null}Rp(this)}},i.get=function(e,t){var n=this;if("video"==e){if(Sp.includes(t))return function(){return n.sj.apply(n,[e,t].concat(h(D.apply(0,arguments))))}}else if("player"==e){if(Ep.has(t)&&!this.get("player","isLive")())return function(){};if(kp.includes(t))return function(){return n.sj.apply(n,[e,t].concat(h(D.apply(0,arguments))))};if(Ip.includes(t))return function(){return n.Yl.apply(n,[e,t].concat(h(D.apply(0,arguments))))};if(Tp.has(t)||Ap.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},i.set=function(e,t,n){this.g[e][t]=n,Op(this,{type:"set",targetName:e,property:t,value:n})},i.sj=function(e,t){Op(this,{type:"call",targetName:e,methodName:t,args:D.apply(2,arguments)})},i.Yl=function(e,t){var n=D.apply(2,arguments),i=new Br,r=this.H.toString();this.H++,this.h.set(r,i);try{Op(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(e){i.reject(e)}return i};var Up=.02,Bp=!1,Fp=null,jp=null,Gp=new Set;function Hp(t){if(jp?e.__onGCastApiAvailable=jp:delete e.__onGCastApiAvailable,jp=null,t)for(var n=l(Gp),i=n.next();!i.done;i=n.next())i.value.init();"function"==typeof e.__onGCastApiAvailable&&e.__onGCastApiAvailable(t)}function Vp(t,n,i,r){r=void 0!==r&&r,$.call(this);var a=this;this.i=t,this.h=n,this.l=this.s=this.m=this.u=this.j=null,this.H=i,this.G=r,this.D=[],this.C=[],this.B=[],this.F=new Map,this.g=null,e.chrome?(this.g=new Mp(i,function(){return Kp(a)},function(){return Xp(a)},function(e,t){return Jp(a,e,t)},function(){return Yp(a)},function(){return zp(a)},r),function(e){e.g.init(),e.l=new At;for(var t=l(bp),n=t.next();!n.done;n=t.next())e.l.o(e.i,n.value,function(t){e.g.Pa()||(t=W(t),e.m.dispatchEvent(t))});for(var i in z)e.l.o(e.h,z[i],function(t){e.g.Pa()||e.s.dispatchEvent(t)});for(var r in e.j={},t={},e.i)(t={pe:t.pe}).pe=r,Object.defineProperty(e.j,t.pe,{configurable:!1,enumerable:!0,get:function(t){return function(){return qp(e,t.pe)}}(t),set:function(t){return function(n){var i=t.pe;e.g.Pa()?e.g.set("video",i,n):e.i[i]=n}}(t)});e.u={},Wp(e,function(t){Object.defineProperty(e.u,t,{configurable:!1,enumerable:!0,get:function(){return Zp(e,t)}})}),function(e){var t=new Map;Wp(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.F.set(n,i):e.F.set(i,n)):t.set(i,n)})}(e),e.m=new $,e.m.Se=e.j,e.s=new $,e.s.Se=e.u,e.l.o(e.h,"unloading",function(){e.g&&e.g.Pa()||Qp(e)})}(this)):(this.j=this.i,this.u=this.h)}function Wp(e,t){function n(e){return"constructor"!=e&&"function"==typeof r[e]&&!a.has(e)}var i,r=e.h,a=new Set;for(i in r)n(i)&&(a.add(i),t(i,r[i]));for(e=Object.getPrototypeOf(r),i=Object.getPrototypeOf({});e&&e!=i;){for(var o=l(Object.getOwnPropertyNames(e)),s=o.next();!s.done;s=o.next())n(s=s.value)&&(a.add(s),t(s,r[s]));e=Object.getPrototypeOf(e)}}function zp(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.cd(),startTime:null,addThumbnailsTrackCalls:e.D,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=l(wp),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),i=(n=l(xp)).next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(i=(n=l(Cp)).next();!i.done;i=n.next())i=(r=i.value)[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function Kp(e){var t=new V("caststatuschanged");e.dispatchEvent(t)}function Xp(e){var t=new V(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function Yp(e){for(var t=l(xp),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.D,a=e.C,o=e.B;Qp(e);var s=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var u,c=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime")),(i=e.g.get("player","getTextTracks")())&&i.length&&(u=i.find(function(e){return e.active}));var d=e.g.get("player","isTextTrackVisible")();s&&(e.i.autoplay=!1,t=e.h.load(s,n));var p={};for(i=(n=l(wp)).next();!i.done;i=n.next())i=i.value,p[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var t=l(r),n=t.next();!n.done;n=t.next()){var i;n=n.value,(i=e.Tb()).$e.apply(i,h(n))}for(i=(t=l(a)).next();!i.done;i=t.next()){var f;i=i.value,(f=e.Tb()).Yd.apply(f,h(i))}for(t=(f=l(o)).next();!t.done;t=f.next()){var g;t=t.value,(g=e.Tb()).Ze.apply(g,h(t))}for(f=(g=l(wp)).next();!f.done;f=g.next())f=f.value,e.i[f]=p[f];for(f=(g=l(Cp)).next();!f.done;f=g.next())f=(t=f.value)[1],t=e.g.get("player",t[0])(),e.h[f](t);e.h.Ce(d),u&&e.h.Xh(u.language,u.roles,u.forced),e.i.autoplay=c,s&&e.i.play()}},function(t){t=new V("error",t=(new Map).set("detail",t)),e.h.dispatchEvent(t)})}function qp(e,t){if("addEventListener"==t)return function(t,n,i){return e.m.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.m.removeEventListener(t,n,i)};if(e.g.Pa()&&0==Object.keys(e.g.g.video).length){var n=e.i[t];if("function"!=typeof n)return n}return e.g.Pa()?e.g.get("video",t):("function"==typeof(t=e.i[t])&&(t=t.bind(e.i)),t)}function Zp(e,t,n){if(n=void 0!==n&&n,e.F.has(t)&&(t=e.F.get(t)),"addEventListener"==t)return function(t,n,i){return e.s.addEventListener(t,n,i)};if("removeEventListener"==t)return function(t,n,i){return e.s.removeEventListener(t,n,i)};if("getMediaElement"==t)return function(){return e.j};if("getSharedConfiguration"==t)return e.g.get("player","getConfiguration");if("getNetworkingEngine"==t)return function(){return e.h.Jb()};if("getDrmEngine"==t)return function(){return e.h.D};if("getAdManager"==t)return function(){return e.h.pf()};if("getQueueManager"==t)return function(){return e.h.qh()};if("setVideoContainer"==t)return function(t){return e.h.di(t)};if(!n){if("addThumbnailsTrack"==t)return function(){var n=D.apply(0,arguments);return e.D.push(n),Zp(e,t,!0).apply(null,h(n))};if("addTextTrackAsync"==t)return function(){var n=D.apply(0,arguments);return e.C.push(n),Zp(e,t,!0).apply(null,h(n))};if("addChaptersTrack"==t)return function(){var n=D.apply(0,arguments);return e.B.push(n),Zp(e,t,!0).apply(null,h(n))}}if(e.g.Pa()){if("getManifest"==t||"drmInfo"==t)return function(){return Y(t+"() does not work while casting!"),null};if("attach"==t||"detach"==t)return function(){return Y(t+"() does not work while casting!"),Promise.resolve()};if("getChapters"==t)return function(){return Y(t+"() does not work while casting!"),[]}}return e.g.Pa()&&0==Object.keys(e.g.g.video).length&&(Tp.has(t)||Ap.has(t))||!e.g.Pa()?e.h[t].bind(e.h):e.g.get("player",t)}function Jp(e,t,n){e.g.Pa()&&("video"==t?e.m.dispatchEvent(n):"player"==t&&("unloading"==n.type&&Qp(e),e.s.dispatchEvent(n)))}function Qp(e){e.D=[],e.C=[],e.B=[]}function $p(e,t,n,i){$.call(this);var r=this;this.h=e,this.g=t,this.j=new At,this.H={video:e,player:t},this.F=n||function(){},this.I=i||function(e){return e},this.i=null,this.G=!1,this.s=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.D=new zi(function(){rf(r)}),function(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return ef(e)},t.onSenderDisconnected=function(){return ef(e)},t.onSystemVolumeChanged=function(){var t=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();t&&uf(e,{type:"update",update:{video:{volume:t.level,muted:t.muted}}},e.l),uf(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(t){return function(e,t){var n=yp(t.data);switch(n.type){case"PLAY":e.h.play(),lf(e);break;case"PAUSE":e.h.pause(),lf(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;null!=t&&(e.h.currentTime=Number(t)),i&&"PLAYBACK_START"==i?(e.h.play(),lf(e)):i&&"PLAYBACK_PAUSE"==i&&(e.h.pause(),lf(e));break;case"STOP":e.g.nc().then(function(){e.g&&lf(e)});break;case"GET_STATUS":of(e,Number(n.requestId));break;case"VOLUME":t=(i=n.volume).level,i=i.muted;var r=e.h.volume,a=e.h.muted;null!=t&&(e.h.volume=Number(t)),null!=i&&(e.h.muted=i),r==e.h.volume&&a==e.h.muted||lf(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,i=n.currentTime,r=e.I(t.contentId),a=n.autoplay||!0,e.F(t.customData),a&&(e.h.autoplay=!0),e.g.load(r,i).then(function(){e.g&&of(e)}).catch(function(t){var i="LOAD_FAILED";7==t.category&&7e3==t.code&&(i="LOAD_CANCELLED"),uf(e,{requestId:Number(n.requestId),type:i},e.u)});break;default:uf(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}(e,t)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(t){return function(e,t){var n=yp(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,function(e,t,n){var i,r,a,o,s,u,c,d,p,f,g,m,v,y,b,T,x,C,k;L(function(I){switch(I.g){case 1:for(i in t.player)r=t.player[i],e.g[i](r);return e.F(n),a=e.h.autoplay,t.manifest?(e.h.autoplay=!1,S(I,5),_(I,e.g.load(t.manifest,t.startTime),7)):_(I,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(o=l(t.addThumbnailsTrackCalls),s=o.next();!s.done;s=o.next())u=s.value,e.g.$e.apply(e.g,h(u));if(t.addTextTrackAsyncCalls)for(c=l(t.addTextTrackAsyncCalls),d=c.next();!d.done;d=c.next())p=d.value,e.g.Yd.apply(e.g,h(p));if(t.addChaptersTrackCalls)for(f=l(t.addChaptersTrackCalls),g=f.next();!g.done;g=f.next())m=g.value,e.g.Ze.apply(e.g,h(m));A(I,3);break;case 5:return v=E(I),y=(new Map).set("detail",v),b=new V("error",y),e.g&&e.g.dispatchEvent(b),I.return();case 3:if(!e.g)return I.return();for(T in t.video)x=t.video[T],e.h[T]=x;for(C in t.playerAfterLoad)k=t.playerAfterLoad[C],e.g[C](k);e.h.autoplay=a,t.manifest&&(e.h.play(),lf(e)),w(I)}})}(e,n.initState,n.appData),rf(e);break;case"appData":e.F(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,"video"==i){if(t=cast.receiver.CastReceiverManager.getInstance(),"volume"==r){t.setSystemVolumeLevel(n);break}if("muted"==r){t.setSystemVolumeMuted(n);break}}e.H[i][r]=n;break;case"call":(i=e.H[n.targetName])[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,"player"==i&&"load"==r&&(e.m=0,e.C=!1);var a=n.id,o=t.senderId;n=(t=e.H[i])[r].apply(t,n.args),"player"==i&&"load"==r&&(n=n.then(function(){e.B=!0})),n.then(function(t){return sf(e,o,a,null,t)},function(t){return sf(e,o,a,t,null)})}}(e,t)},t.start();for(var n=(t=l(bp)).next();!n.done;n=t.next())e.j.o(e.h,n.value,function(t){return nf(e,"video",t)});for(var i in z)e.j.o(e.g,z[i],function(t){return nf(e,"player",t)});e.j.o(e.h,"loadeddata",function(){e.C=!0}),e.j.o(e.g,"loading",function(){e.s=!1,tf(e)}),e.j.o(e.h,"playing",function(){e.s=!1,tf(e)}),e.j.o(e.h,"pause",function(){tf(e)}),e.j.o(e.g,"unloading",function(){e.s=!0,tf(e)}),e.j.o(e.h,"ended",function(){new zi(function(){e.h&&e.h.ended&&(e.s=!0,tf(e))}).X(cf)})}(this)}function ef(e){e.m=0,e.B=!0,e.G=0!=cast.receiver.CastReceiverManager.getInstance().getSenders().length,tf(e)}function tf(e){var t;L(function(n){return 1==n.g?_(n,Promise.resolve(),2):e.g?(t=new V("caststatuschanged"),e.dispatchEvent(t),af(e)||lf(e),void w(n)):n.return()})}function nf(e,t,n){e.g&&(rf(e),uf(e,{type:"event",targetName:t,event:n},e.l))}function rf(e){e.D.X(hf);for(var t={video:{},player:{}},n=l(_p),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.h[i];e.g.T()&&Ep.forEach(function(n,i){0==e.m%n&&(t.player[i]=e.g[i]())}),Tp.forEach(function(n,i){0==e.m%n&&(t.player[i]=e.g[i]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),uf(e,{type:"update",update:t},e.l),Ap.forEach(function(t,n){0==e.m%t&&((t={player:{}}).player[n]=e.g[n](),uf(e,{type:"update",update:t},e.l))}),e.C&&(e.m+=1),af(e)}function af(e){return!(!e.B||!e.h.duration&&!e.g.T()||(of(e),e.B=!1,0))}function of(e,t){var n={contentId:e.g.cd(),streamType:e.g.T()?"LIVE":"BUFFERED",contentType:""};e.g.T()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),lf(e,void 0===t?0:t,n)}function sf(e,t,n,i,r){e.g&&uf(e,{type:"asyncComplete",id:n,error:i,res:r},e.l,t)}function uf(e,t,n,i){e.G&&(e=vp(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function lf(e,t,n){n=void 0===n?null:n;var i={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.s?df:e.g.zf()?ff:e.h.paused?gf:pf,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(i.media=n),uf(e,{requestId:void 0===t?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}m(Vp,$),(i=Vp.prototype).destroy=function(e){return this.g&&void 0!==e&&e&&this.g.Dd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,$.prototype.release.call(this),Promise.all(e)},i.Mc=function(){return this.j},i.Tb=function(){return this.u},i.Ig=function(){return!!this.g&&this.g.m&&Bp},i.Pa=function(){return!!this.g&&this.g.Pa()},i.Wf=function(){return this.g?this.g.Wf():""},i.cast=function(){var e=this;return L(function(t){return 1==t.g?e.g?_(t,e.g.cast(),2):t.return():e.h?_(t,e.h.nc(),0):t.return()})},i.Yh=function(e){this.g&&this.g.Yh(e)},i.Qj=function(){var e;this.g&&(e=this.g).i&&chrome.cast.requestSession(function(t){return Pp(e,t)},function(t){return Lp(e,t)})},i.Dd=function(){this.g&&this.g.Dd()},i.Hi=function(e,t){t=void 0!==t&&t;var n=this;return L(function(i){if(1==i.g)return e==n.H&&t==n.G?i.return():(n.H=e,n.G=t,n.g?(n.g.Dd(),_(i,n.g.destroy(),2)):i.return());n.g=null,n.g=new Mp(e,function(){return Kp(n)},function(){return Xp(n)},function(e,t){return Jp(n,e,t)},function(){return Yp(n)},function(){return zp(n)},t),n.g.init(),w(i)})},H("shaka.cast.CastProxy",Vp),Vp.prototype.changeReceiverId=Vp.prototype.Hi,Vp.prototype.forceDisconnect=Vp.prototype.Dd,Vp.prototype.suggestDisconnect=Vp.prototype.Qj,Vp.prototype.setAppData=Vp.prototype.Yh,Vp.prototype.cast=Vp.prototype.cast,Vp.prototype.receiverName=Vp.prototype.Wf,Vp.prototype.isCasting=Vp.prototype.Pa,Vp.prototype.canCast=Vp.prototype.Ig,Vp.prototype.getPlayer=Vp.prototype.Tb,Vp.prototype.getVideo=Vp.prototype.Mc,Vp.prototype.destroy=Vp.prototype.destroy,m($p,$),(i=$p.prototype).isConnected=function(){return this.G},i.yl=function(){return this.s},i.im=function(e){this.i=e},i.lk=function(){this.i=null},i.jm=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},i.hm=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},i.gm=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},i.destroy=function(){var e,t=this;return L(function(n){if(1==n.g)return t.j&&(t.j.release(),t.j=null),e=[],t.g&&(e.push(t.g.destroy()),t.g=null),t.D&&(t.D.stop(),t.D=null),t.h=null,t.H=null,t.F=null,t.G=!1,t.s=!0,t.l=null,t.u=null,$.prototype.release.call(t),_(n,Promise.all(e),2);cast.receiver.CastReceiverManager.getInstance().stop(),w(n)})},H("shaka.cast.CastReceiver",$p),$p.prototype.destroy=$p.prototype.destroy,$p.prototype.setContentArtist=$p.prototype.gm,$p.prototype.setContentImage=$p.prototype.hm,$p.prototype.setContentTitle=$p.prototype.jm,$p.prototype.clearContentMetadata=$p.prototype.lk,$p.prototype.setContentMetadata=$p.prototype.im,$p.prototype.isIdle=$p.prototype.yl,$p.prototype.isConnected=$p.prototype.isConnected;var hf=.5,cf=5,df="IDLE",pf="PLAYING",ff="BUFFERING",gf="PAUSED";function mf(e,t,n,i,r){if(i>=r)return null;for(var a=-1,o=-1,s=0;s<n.length;s++)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){a=s;break}for(s=n.length-1;0<=s;s--)if(n[s].some(function(e){return null!=e&&""!=e.g.trim()})){o=s;break}if(-1===a||-1===o)return null;for(var u=s=!1,l="white",h="black",c=vf(i,r,s,u,l,h);a<=o;a++){for(var d=n[a],p=-1,f=-1,g=0;g<d.length;g++)if(null!=d[g]&&""!==d[g].g.trim()){p=g;break}for(g=d.length-1;0<=g;g--)if(null!=d[g]&&""!==d[g].g.trim()){f=g;break}if(-1===p||-1===f)d=yf(i,r),e.nestedCues.push(d);else{for(;p<=f;p++)if(g=d[p]){var m=g.l,v=g.i,y=g.j,b=g.h;m==s&&v==u&&y==l&&b==h||(c.payload&&e.nestedCues.push(c),c=vf(i,r,m,v,y,b),s=m,u=v,l=y,h=b),c.payload+=g.g}else c.payload+=" ";c.payload&&e.nestedCues.push(c),a!==o&&(c=yf(i,r),e.nestedCues.push(c)),c=vf(i,r,s,u,l,h)}}return e.nestedCues.length?{cue:e,stream:t}:null}function vf(e,t,n,i,r,a){return e=new zn(e,t,""),n&&e.textDecoration.push(gi),i&&(e.fontStyle=pi),e.color=r,e.backgroundColor=a,e}function yf(e,t){return(e=new zn(e,t,"")).lineBreak=!0,e}function bf(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function _f(e,t){this.i=[],this.g=1,this.h=0,this.D=e,this.C=t,this.j=this.m=!1,this.l="white",this.s="black",this.u=this.B=null,Sf(this)}function wf(e,t,n){var i="CC"+(1+(e.D<<1|e.C)),r=new zn(t,n,"");r.lineInterpretation=1;var a=Mf.get(e.g);return a&&(r.line=a),null!=e.u&&null!=e.B&&(r.position=10+Math.min(70,10*e.u)+2.5*e.B),(t=mf(r,i,e.i,t,n))&&15<e.g+t.cue.nestedCues.length-3&&(a=Mf.get(e.g+3-t.cue.nestedCues.length))&&(r.line=a),t}function Sf(e){Ef(e,0,15),e.g=1}function Tf(e,t,n){if(!(32>n||127<n)){var i="";switch(t){case 0:i=xf.has(n)?xf.get(n):String.fromCharCode(n);break;case 1:i=Cf.get(n);break;case 2:e.i[e.g].pop(),i=kf.get(n);break;case 3:e.i[e.g].pop(),i=If.get(n)}i&&e.i[e.g].push(new bf(i,e.m,e.j,e.s,e.l))}}function Af(e,t,n,i){if(!(0>n||0>t))if(t>=n)for(--i;0<=i;i--)e.i[t+i]=e.i[n+i].map(function(e){return e});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(e){return e})}function Ef(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var xf=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),Cf=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),kf=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),If=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),Mf=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function Pf(e,t){this.h=0,this.s=new _f(e,t),this.i=new _f(e,t),this.g=this.j=new _f(e,t),this.l=0,this.m=null}function Lf(e,t,n){e.g=e.i;var i=e.g,r=null;return 3!==e.h&&4!==e.h&&(r=wf(i,e.l,n),(n=e.i).g=0<n.h?n.h:0,Ef(n,0,15),(n=e.j).g=0<n.h?n.h:0,Ef(n,0,15),i.g=15),e.h=3,i.h=t,r}function Df(e){e.h=1,e.g=e.j,e.g.h=0}function Rf(e){q("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.s,e.h=4}var Nf="black green blue cyan red yellow magenta black".split(" "),Of="white green blue cyan red yellow magenta white_italics".split(" ");function Uf(e,t){this.I=t,this.L=e,this.J=this.l=!1,this.m=this.s=this.G=this.K=this.H=0,this.F=2,this.i=[],this.g=this.h=this.j=0,this.D=this.B=!1,this.C="white",this.u="black",Bf(this)}function Bf(e){e.i=[];for(var t=0;16>t;t++)e.i.push(Ff())}function Ff(){for(var e=[],t=0;42>t;t++)e.push(null);return e}function jf(e,t){Gf(e)&&(e.i[e.h][e.g]=new bf(t,e.D,e.B,e.u,e.C),e.g++)}function Gf(e){var t=e.g<e.m&&0<=e.g;return e.h<e.s&&0<=e.h&&t}function Hf(e,t,n){var i=new zn(e.j,t,"");i.textAlign=0===e.F?"left":1===e.F?"right":$n;var r=i.region;switch(e.I&&(r.id+="svc"+e.I),r.id+="win"+e.L,r.height=e.s,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.H,r.viewportAnchorY=e.K,r.viewportAnchorUnits=e.J?qt:2,e.G){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=mf(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}function Vf(){this.i=[],this.h=null,this.g=0}function Wf(e,t){3===t.type?(e.g=2*(63&t.value)-1,e.h=[]):e.h&&(0<e.g&&(e.h.push(t),e.g--),0===e.g&&(e.i.push(new zf(e.h)),e.h=null,e.g=0))}function zf(e){this.g=0,this.h=e}function Kf(e){if(!e.Oa())throw new Ce(2,2,3e3);return e.h[e.g++]}function Xf(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Yf(e,t,n,i){if(!e.g)return[];if(24==n)return n=[n=Kf(t).value,i=Kf(t).value].map(function(e){return("0"+(255&e).toString(16)).slice(-2)}).join(""),jf(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!Gf(t)||0>=t.g&&0>=t.h||(0>=t.g?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=Hf(t,i,e.i)),t.h+1>=t.s?function(e){for(var t=0,n=1;16>n;n++,t++)e.i[t]=e.i[n];for(n=0;1>n;n++,t++)e.i[t]=Ff()}(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=Hf(t,i,e.i)),t.i[t.h]=Ff(),t.g=0;break;case 12:t.isVisible()&&(r=Hf(t,i,e.i)),Bf(t),t.h=0,t.g=0}return r?[r]:[]}function qf(e,t,n,i){if(128<=n&&135>=n)i=7&n,e.h[i]&&(e.g=e.h[i]);else{if(136===n){n=Kf(t).value,t=[];for(var r=(n=l(Zf(e,n))).next();!r.done;r=n.next()){if((r=e.h[r.value]).isVisible()){var a=Hf(r,i,e.i);a&&t.push(a)}Bf(r)}return t}if(137===n)for(n=(t=l(Zf(e,t=Kf(t).value))).next();!n.done;n=t.next())(n=e.h[n.value]).isVisible()||(n.j=i),n.display();else{if(138===n){for(n=Kf(t).value,t=null,r=(n=l(Zf(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()&&(t=Hf(r,i,e.i)),r.l=!1;return t?[t]:[]}if(139===n){for(n=Kf(t).value,t=null,r=(n=l(Zf(e,n))).next();!r.done;r=n.next())(r=e.h[r.value]).isVisible()?t=Hf(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(140===n)return Jf(e,t=Kf(t).value,i);if(143===n)return i=Jf(e,255,i),Qf(e),i;if(144===n)t.skip(1),i=Kf(t).value,e.g&&(e.g.B=0<(128&i),e.g.D=0<(64&i));else if(145===n)i=Kf(t).value,n=Kf(t).value,t.skip(1),e.g&&(t=$f((48&n)>>4,(12&n)>>2,3&n),e.g.C=$f((48&i)>>4,(12&i)>>2,3&i),e.g.u=t);else if(146===n)i=Kf(t).value,t=Kf(t).value,e.g&&((e=e.g).h=15&i,e.g=63&t);else if(151===n)t.skip(1),t.skip(1),i=Kf(t).value,t.skip(1),e.g&&(e.g.F=3&i);else if(152<=n&&159>=n){n=(15&n)-8,(r=null!==e.h[n])||((a=new Uf(n,e.i)).j=i,e.h[n]=a),i=Kf(t).value,a=Kf(t).value;var o=Kf(t).value,s=Kf(t).value,u=Kf(t).value;t=Kf(t).value,r&&!(7&t)||((t=e.h[n]).h=0,t.g=0,t.D=!1,t.B=!1,t.C="white",t.u="black"),(t=e.h[n]).l=0<(32&i),t.K=127&a,t.H=o,t.G=(240&s)>>4,t.J=0<(128&a),t.s=1+(15&s),t.m=1+(63&u),e.g=e.h[n]}}}return[]}function Zf(e,t){for(var n=[],i=0;8>i;i++)!(1&~t)&&e.h[i]&&n.push(i),t>>=1;return n}function Jf(e,t,n){for(var i=[],r=(t=l(Zf(e,t))).next();!r.done;r=t.next()){r=r.value;var a=e.h[r];a.isVisible()&&(a=Hf(a,n,e.i))&&i.push(a),e.h[r]=null}return i}function Qf(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function $f(e,t,n){var i={0:0,1:0,2:1,3:1};return tg[(e=i[e])<<2|(t=i[t])<<1|(n=i[n])]}Uf.prototype.isVisible=function(){return this.l},Uf.prototype.display=function(){this.l=!0},zf.prototype.Oa=function(){return this.g<this.h.length},zf.prototype.Ua=function(){return this.g},zf.prototype.skip=function(e){if(this.g+e>this.h.length)throw new Ce(2,2,3e3);this.g+=e},zf.prototype.xj=function(e){if(0>this.g-e)throw new Ce(2,2,3e3);this.g-=e};var eg=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),tg="black blue green cyan red magenta yellow white".split(" ");function ng(){this.h=[],this.g=[],this.i=new Vf,this.l=0,this.m=new Map([["CC1",new Pf(0,0)],["CC2",new Pf(0,1)],["CC3",new Pf(1,0)],["CC4",new Pf(1,1)]]),this.u=this.s=0,this.j=new Map,this.C=!0,this.B=new Set,ig(this)}function ig(e){e.s=0,e.u=0;for(var t=l(e.m.values()),n=t.next();!n.done;n=t.next())(n=n.value).h=0,n.g=n.j,n.m=null,Sf(n.i),Sf(n.j),Sf(n.s);e.C=!0}function rg(e,t){var n=t.type;if(16==(112&t.Fb)){var i=t.Fb>>3&1;0===n?e.s=i:e.u=i}if(i="CC"+(1+(n<<1|(n?e.u:e.s))),n=e.m.get(i),255===t.Fb&&255===t.pc||!t.Fb&&!t.pc||!og(t.Fb)||!og(t.pc))return 45<=++e.l&&ig(e),null;e.l=0,t.Fb&=127,t.pc&=127;var r=t.Fb;if(1<=r&&15>=r||!t.Fb&&!t.pc)return null;if(r=null,16==(112&t.Fb))e:{if(e.B.add(i),i=t.Fb,e=t.pc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,16==(240&i)&&64==(192&e)){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(7&i)<<1|e>>5&1],i="white",r=!1;var a=null,o=95<e?e-96:e-64;13>=o?i=Of[Math.floor(o/2)]:15>=o?r=!0:a=Math.floor((o-16)/2),e=!(1&~e),4!==n.h&&(o=n.g,3===n.h&&t!==o.g&&(Af(o,n=1+t-o.h,1+o.g-o.h,o.h),Ef(o,0,n-1),Ef(o,t+1,15-t)),o.g=t,o.m=e,o.j=r,o.l=i,o.u=a,o.s="black")}else if(17==(247&i)&&32==(240&e))n.g.m=!1,n.g.j=!1,n.g.l="white",Tf(n.g,0,32),i=!1,"white_italics"===(t=Of[(14&e)>>1])&&(t="white",i=!0),n.g.m=!(1&~e),n.g.j=i,n.g.l=t;else if(16==(247&i)&&32==(240&e)||23==(247&i)&&45==(255&e))t="black",!(7&i)&&(t=Nf[(14&e)>>1]),n.g.s=t;else if(17==(247&i)&&48==(240&e))Tf(n.g,1,e);else if(18==(246&i)&&32==(224&e))Tf(n.g,1&i?3:2,e);else{if(20==(246&i)&&32==(240&e)){switch(e=t.pts,i=null,t.pc){case 32:Df(n);break;case 33:(n=n.g).i[n.g].pop();break;case 37:i=Lf(n,2,e);break;case 38:i=Lf(n,3,e);break;case 39:i=Lf(n,4,e);break;case 40:Tf(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Sf(n.s),Rf(n);break;case 43:Rf(n);break;case 44:t=n.i,i=null,4!==n.h&&(i=wf(t,n.l,e)),Ef(t,0,15);break;case 45:t=n.g,3!==n.h?i=null:(i=wf(t,n.l,e),Af(t,(r=t.g-t.h+1)-1,r,t.h),Ef(t,0,r-1),Ef(t,t.g,15-t.g),n.l=e);break;case 46:Ef(n.j,0,15);break;case 47:t=null,4!==n.h&&(t=wf(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Df(n),n.l=e,i=t}r=i;break e}(23==i||31==i)&&33<=e&&35>=e&&(n.g.B=e-32)}r=null}else e=t.pc,Tf(n.g,0,t.Fb),Tf(n.g,0,e);return r}function ag(e,t){var n=[];try{for(;t.Oa();){var i=Kf(t).value,r=(224&i)>>5,a=31&i;if(7===r&&0!=a&&(r=63&Kf(t).value),0!=r){e.B.add("svc"+r),e.j.has(r)||e.j.set(r,new Xf(r));for(var o=e.j.get(r),s=t.Ua();t.Ua()-s<a;){r=o;var u=t,l=Kf(u),c=l.value,d=l.pts;if(16===c&&(c=c<<16|Kf(u).value),0<=c&&31>=c)var p=Yf(r,u,c,d);else if(128<=c&&159>=c)p=qf(r,u,c,d);else{if(4096<=c&&4127>=c)r=u,8<=(u=255&c)&&15>=u?r.skip(1):16<=u&&23>=u?r.skip(2):24<=u&&31>=u&&r.skip(3);else if(4224<=c&&4255>=c)r=u,128<=(u=255&c)&&135>=u?r.skip(4):136<=u&&143>=u&&r.skip(5);else if(32<=c&&127>=c)u=c,r.g&&jf(r.g,127===u?"♪":String.fromCharCode(u));else if(160<=c&&255>=c)r.g&&jf(r.g,String.fromCharCode(c));else if(4128<=c&&4223>=c){if(u=255&c,r.g)if(eg.has(u)){var f=eg.get(u);jf(r.g,f)}else jf(r.g,"_")}else 4256<=c&&4351>=c&&r.g&&jf(r.g,160!=(255&c)?"_":"[CC]");p=[]}n.push.apply(n,h(p))}}}}catch(e){if(!(e instanceof Ce&&3e3===e.code))throw e;q("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.")}return n}function og(e){for(var t=0;e;)t^=1&e,e>>=1;return 1===t}function sg(e){for(var t=[],n=e,i=e=0;i<n.length;)2==e&&3==n[i]?(e=0,(n=[].concat(h(n))).splice(i,1),n=new Uint8Array(n)):0==n[i]?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;255==e[i];)n+=255,i++;n+=e[i++];for(var r=0;255==e[i];)r+=255,i++;r+=e[i++],4==n&&t.push(e.subarray(i,i+r)),i+=r}return t}function ug(){this.j=new Map,this.i=this.h=0,this.g=hg}function lg(e,t,n,i,r,a,o,s,u){var c=0,d=a,p=s.map(function(e){return e.Vh});for((p=[].concat.apply([],h(p))).length&&(d=p[0].sampleSize||a),t.skip(o+s[0].Sg);t.Oa();){o=t.W();var f=t.aa(),g=null;switch(g=!1,s=1,e.g){case cg:g=6==(g=31&f);break;case dg:s=2,t.skip(1),g=39==(g=f>>1&63)||40==g;break;case pg:s=2,t.skip(1),g=23==(g=f>>1&63)||24==g;break;default:return}if(g)for(f=0,c<p.length&&(f=p[c].$f||0),f=(n+f)/i,g=(s=l(sg(t.Yb(o-s)))).next();!g.done;g=s.next())u.push({packet:g.value,pts:f});else try{t.skip(o-s)}catch(e){break}0==(d-=o+4)&&(n=c<p.length?n+(p[c].Wh||r):n+r,d=++c<p.length&&p[c].sampleSize||a)}}ng.prototype.clear=function(){this.l=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,ig(this);for(var t=(e=l(this.j.values())).next();!t.done;t=e.next())Qf(t.value)},ng.prototype.extract=function(e,t){if(this.C){for(var n=l(this.m.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.C=!1}if(!(8>(e=new ua(e,0)).getLength())&&181===e.aa()&&49===e.Ga()&&1195456820===e.W()&&3===e.aa()&&64&(n=e.aa()))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.aa(),a=(4&r)>>2,o=e.aa(),s=e.aa();a&&(0==(r&=3)||1===r?this.h.push({pts:t,type:r,Fb:o,pc:s,order:this.h.length}):(this.g.push({pts:t,type:r,value:o,order:this.g.length}),this.g.push({pts:t,type:2,value:s,order:this.g.length})))}},ng.prototype.decode=function(){function e(e,t){return e.pts-t.pts||e.order-t.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=l(this.h),i=n.next();!i.done;i=n.next())(i=rg(this,i.value))&&t.push(i);for(i=(n=l(this.g)).next();!i.done;i=n.next())Wf(this.i,i.value);for(i=(n=l(this.i.i)).next();!i.done;i=n.next())i=ag(this,i.value),t.push.apply(t,h(i));return this.i.i=[],this.h=[],this.g=[],t},ng.prototype.getStreams=function(){return Array.from(this.B)},H("shaka.cea.CeaDecoder",ng),Xt=function(){return new ng},ug.prototype.init=function(e){function t(e){e=e.name,fg.has(e)&&(n.g=fg.get(e))}var n=this,i=[],r=[];if((new ca).box("moov",da).box("mvex",da).V("trex",function(e){var t=e.reader;t.skip(4),t.skip(4),e=t.W(),t=t.W(),n.h=e,n.i=t}).box("trak",da).V("tkhd",function(e){var t=e.reader;1==(e=e.version)?(t.skip(8),t.skip(8)):(t.skip(4),t.skip(4));var n=t.W();1==e?t.skip(8):t.skip(4),t.skip(4),t.skip(8),t.skip(2),t.skip(2),t.skip(2),t.skip(2),t.skip(36),t.Ga(),t.Ga(),t.Ga(),t.Ga(),i.push(n)}).box("mdia",da).V("mdhd",function(e){e=po(e.reader,e.version),r.push(e.timescale)}).box("minf",da).box("stbl",da).V("stsd",pa).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",fa).box("sinf",da).box("frma",function(e){e=mo(e.reader).codec,fg.has(e)&&(n.g=fg.get(e))}).parse(e,!0,!0),!i.length||!r.length||i.length!=r.length)throw new Ce(2,2,2010);this.g==hg&&Y("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(e,t){n.j.set(e,r[t])})},ug.prototype.parse=function(e){var t=this;if(this.g==hg)return[];var n=[],i=0,r=[];return(new ca).box("moof",function(e){i=e.start,r=[],da(e)}).box("traf",function(e){r.push({baseMediaDecodeTime:null,be:t.h,ce:t.i,oj:[],timescale:9e4}),da(e)}).V("trun",function(e){var t=r[r.length-1];e=fo(e.reader,e.version,e.flags),t.oj.push(e)}).V("tfhd",function(e){var n=r[r.length-1];e=ho(e.reader,e.flags),n.be=e.be||t.h,n.ce=e.ce||t.i,e=e.trackId,t.j.has(e)&&(n.timescale=t.j.get(e))}).V("tfdt",function(e){var t=r[r.length-1];e=co(e.reader,e.version),t.baseMediaDecodeTime=e.baseMediaDecodeTime}).box("mdat",function(e){for(var a=i-e.start-8,o=e.reader.Ua(),s=l(r),u=s.next();!u.done;u=s.next())null===(u=u.value).baseMediaDecodeTime?Y("Unable to find base media decode time for CEA captions!"):(e.reader.seek(o),lg(t,e.reader,u.baseMediaDecodeTime,u.timescale,u.be,u.ce,a,u.oj,n))}).parse(e,!1,!0),n},H("shaka.cea.Mp4CeaParser",ug);var hg=0,cg=1,dg=2,pg=3,fg=(new Map).set("avc1",cg).set("avc3",cg).set("dvav",cg).set("dva1",cg).set("hev1",dg).set("hvc1",dg).set("dvh1",dg).set("dvhe",dg).set("vvc1",pg).set("vvi1",pg).set("dvc1",pg).set("dvi1",pg);function gg(){this.g=null}function mg(e){return(e=function(e){var t=0,n=Ee(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+6,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,1&r||r+e>n.byteLength){n=[];break e}var a=Te(n,e,r);t.push({type:i,value:a}),e+=r}n=t}return n}(e=Ke(bn(e))).filter(function(e){return e.type===yg})[0])&&(e=fn(e=Oe(e.value,!0),"WRMHEADER"))?e:null}function vg(e){try{var t=mg(e);if(t)e:{for(var n=l(wn(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var a=l(r.children),o=a.next();!o.done;o=a.next()){var s=o.value;if("LA_URL"==s.tagName){var u=bn(s);break e}}}u=""}else u="";return u}catch(e){return""}}Wt("video/mp4",function(){return new ug}),gg.prototype.init=function(){},gg.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Rs;var t=[];if(!Bs(e=Te(e)))return t;var n=(e=this.g.parse(e)).ee(),i=e.vf();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(i=(n=l(i)).next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&null!=i.time)for(var r=l(sg(i.data)),a=r.next();!a.done;a=r.next())t.push({packet:a.value,pts:i.time});return t},H("shaka.cea.TsCeaParser",gg),Wt("video/mp2t",function(){return new gg});var yg=1;function bg(t,n,i){var r=function(e){for(var t=[],n=(e=l(e)).next();!n.done;n=e.next())(n=wg(n.value))&&t.push(n);return t}(t),a=null;t=[];var o=[],s=null,u=new Set(r.map(function(e){return e.keyId}));u.delete(null);var h="cenc";if(1<u.size)throw new Ce(2,4,4010);if(!n){if(1<(o=r.filter(function(e){return"urn:mpeg:dash:sea:2012"==e.Rd})).length)throw new Ce(2,4,4050);o.length&&(s=function(t){if(!e.crypto||!e.crypto.subtle)throw Y("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Ce(2,4,4042);var n=Tn(t.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!n)throw new Ce(2,4,4051);if("urn:mpeg:dash:sea:aes128-cbc:2013"!=n.attributes.schemeIdUri)throw new Ce(2,4,4051);if(!(n=Tn(t.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod")))throw new Ce(2,4,4051);if(t=n.attributes.IV,n=Ge(n.attributes.keyUriTemplate),!t||!n)throw new Ce(2,4,4051);if(16!=(t=Xe(t.substr(2))).byteLength)throw new Ce(2,4,4048);return{El:n,iv:t}}(o[0])),(o=r.find(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Rd}))&&o.encryptionScheme&&(h=o.encryptionScheme),(o=r.filter(function(e){return"urn:mpeg:dash:mp4protection:2011"==e.Rd?(a=e.init||a,!1):"urn:mpeg:dash:sea:2012"!=e.Rd})).length&&(t=function(e,t,n,i,r){for(var a=[],o=(n=l(n)).next();!o.done;o=n.next()){var s=i[(o=o.value).Rd];if(s){var u;if((u=Tn(o.node,"urn:microsoft:playready","pro"))&&bn(u)){u=Ke(u=bn(u));var h=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);u=[{initData:Ta(u,h,new Set,0),initDataType:"cenc",keyId:o.keyId}]}else u=null;if(h=null,"urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"===o.Rd){h=o;var c=r;if(0==c.size)h=null;else{var d=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]);h=[{initData:Ta(new Uint8Array([]),d,c,1),initDataType:"cenc",keyId:h.keyId}]}}u=Je(s,t,o.init||e||u||h),(s=Sg.get(s))&&(u.licenseServerUri=s(o)),a.push(u)}}return a}(a,h,o,i,u),0==t.length&&(t=[Je("",h,a)]))}if(r.length&&!s&&(n||!o.length))for(t=[],i=(n=l(Object.values(i))).next();!i.done;i=n.next())"org.w3.clearkey"!=(i=i.value)&&t.push(Je(i,h,a));if(u=Array.from(u)[0]||null)for(n=(h=l(t)).next();!n.done;n=h.next())for(i=(n=l(n.value.initData)).next();!i.done;i=n.next())i.value.keyId=u;return{Li:u,In:a,drmInfos:t,Fg:s,Qi:!0}}function _g(e){var t=Tn(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=bn(t)))return t;if((t=Tn(e.node,"urn:microsoft:playready","pro"))&&bn(t))return vg(t);if((e=Tn(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=bn(e))){t=Ke(e),e=8;var n=(t=Ee(t)).getUint8(e);return e+=20,0<n&&(e+=4+16*t.getUint32(e)),vg(e=fn("<pro>"+(e=We(e=Te(t,e+4)))+"</pro>"))}return""}function wg(e){var t=e.attributes.schemeIdUri,n=En(e,"urn:mpeg:cenc:2013","default_KID"),i=xn(e,"urn:mpeg:cenc:2013","pssh").map(_n),r=e.attributes.value;if(!t)return null;if(t=t.toLowerCase(),n&&(n=n.replace(/-/g,"").toLowerCase()).includes(" "))throw new Ce(2,4,4009);var a=[];try{a=i.map(function(e){return{initDataType:"cenc",initData:Ke(e),keyId:null}})}catch(e){throw new Ce(2,4,4007)}return{node:e,Rd:t,keyId:n,init:0<a.length?a:null,encryptionScheme:r}}var Sg=(new Map).set("com.apple.fps",function(t){if("apple"===e.shakaMediaKeysPolyfill)throw new Ce(2,4,4054);return(t=Tn(t.node,"https://dashif.org/CPS","Laurl"))&&(t=bn(t))?t:""}).set("com.widevine.alpha",function(e){var t=Tn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=bn(t))?t:(e=Tn(e.node,"urn:microsoft","laurl"))&&Ge(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",_g).set("com.microsoft.playready.recommendation",_g).set("com.microsoft.playready.software",_g).set("com.microsoft.playready.hardware",_g).set("org.w3.clearkey",function(e){var t=Tn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=bn(t))?t:(e=Tn(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&"EME-1.0"===e.attributes.Lic_type&&e&&(e=bn(e))?e:""});function Tg(t,n,i,r,a,o){var s=(new Map).set("RepresentationID",n).set("Number",i).set("SubNumber",r).set("Bandwidth",a).set("Time",o);return t.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(t,n,i,r){if("$$"==t)return"$";var a=s.get(n);if(null==a)return t;switch("RepresentationID"==n&&i&&(i=void 0),"Time"==n&&"bigint"!=typeof a&&(.2<=Math.abs(a-Math.round(a))&&Y("Calculated $Time$ values must be close to integers"),a=Math.round(a)),r){case void 0:case"d":case"i":case"u":t=a.toString();break;case"o":t=a.toString(8);break;case"x":t=a.toString(16);break;case"X":t=a.toString(16).toUpperCase();break;default:t=a.toString()}return i=e.parseInt(i,10)||1,Array(Math.max(0,i-t.length)+1).join("0")+t})}function Ag(e,t){var n=xg(e,t,"timescale"),i=1;n&&(i=Ln(n)||1);var r=(n=Ln((n=xg(e,t,"duration"))||""))?n/i:null,a=xg(e,t,"startNumber"),o=Number(xg(e,t,"presentationTimeOffset"))||0,s=Dn(a||"");if(null!=a&&null!=s||(s=1),a=null,t=Cg(e,t,"SegmentTimeline")){t=yn(t,"S"),a=i,e=e.oa.duration||1/0;for(var u=s,l=[],h=-o,c=0;c<t.length;++c){var d=t[c],p=t[c+1],f=An(d,"t",Dn),g=An(d,"d",Dn),m=An(d,"r",Pn);if(d=An(d,"k",Pn)||0,null!=f&&(f-=o),g){if(f=null!=f?f:h,0>(m=m||0))if(p){if(null==(p=An(p,"t",Dn)))break;if(f>=p)break;m=Math.ceil((p-f)/g)-1}else{if(1/0==e)break;if(f/a>=e)break;m=Math.ceil((e*a-f)/g)-1}for(0<l.length&&f!=h&&(l[l.length-1].end=f/a),p=0;p<=m;++p)h=f+g,l.push({start:f/a,end:h/a,ri:f,Ac:d,em:l.length+u}),f=h}}a=l}return{timescale:i,mg:n,mb:r,De:s,Ob:o/i||0,td:o,timeline:a}}function Eg(e,t){return[t(e.M),t(e.va),t(e.za)].filter(Yi)}function xg(e,t,n){t=Eg(e,t),e=null;for(var i=(t=l(t)).next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Cg(e,t,n){t=Eg(e,t),e=null;for(var i=(t=l(t)).next();!i.done&&!(e=Sn(i.value,n));i=t.next());return e}function kg(e,t,n,i,r,a){if(a=void 0===a?0:a,En(e,"http://www.w3.org/1999/xlink","href")){var o=function(e,t,n,i,r,a){for(var o=En(e,"http://www.w3.org/1999/xlink","href"),s=En(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",u=l(Object.keys(e.attributes)),h=u.next();!h.done;h=u.next()){var c=(h=h.value).split(":"),d=gn("http://www.w3.org/1999/xlink");c[0]==d&&delete e.attributes[h]}if(5<=a)return jr(new Ce(2,4,4028));if("onLoad"!=s)return jr(new Ce(2,4,4027));var p=Ze([i],[o]);return r.request(0,Zr(p,t)).bb(function(i){if(!(i=pn(i.data,e.tagName)))return jr(new Ce(2,4,4001,o));for(e.children=[];i.children.length;){var s=i.children.shift();e.children.push(s)}for(var u=(s=l(Object.keys(i.attributes))).next();!u.done;u=s.next())u=u.value,e.attributes[u]=i.attributes[u];return kg(e,t,n,p[0],r,a+1)})}(e,t,n,i,r,a);return n&&(o=o.bb(void 0,function(){return kg(e,t,n,i,r,a)})),o}o=[];for(var s=l(vn(e)),u=s.next(),h={};!u.done;h={Zd:void 0},u=s.next())h.Zd=u.value,"urn:mpeg:dash:resolve-to-zero:2013"==En(h.Zd,"http://www.w3.org/1999/xlink","href")?e.children=e.children.filter(function(e){return function(t){return t!==e.Zd}}(h)):"SegmentTimeline"!=h.Zd.tagName&&o.push(kg(h.Zd,t,n,i,r,a));return Wr(o).bb(function(){return e})}function Ig(e){this.h=Ee(e),this.g=new ua(this.h,0)}function Mg(e){var t=Pg(e);if(7<t.length)throw new Ce(2,3,3002);for(var n=0,i=(t=l(t)).next();!i.done;i=t.next())n=256*n+i.value;t=Pg(e);e:{for(var r=(i=l(Lg)).next();!r.done;r=i.next())if(we(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Ua();else{if(8==t.length&&224&t[1])throw new Ce(2,3,3001);for(r=i=0;r<t.length;r++){var a=t[r];i=0==r?a&(1<<8-t.length)-1:256*i+a}t=i}return t=e.g.Ua()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Ua(),i=Ee(e.h,e.g.Ua(),t),e.g.skip(t),new Dg(n,i)}function Pg(e){var t=e.g.Ua(),n=e.g.aa();if(0==n)throw new Ce(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),Te(e.h,t,n)}Ig.prototype.Oa=function(){return this.g.Oa()};var Lg=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function Dg(e,t){this.id=e,this.g=t}function Rg(e){if(8<e.g.byteLength)throw new Ce(2,3,3002);if(8==e.g.byteLength&&224&e.g.getUint8(0))throw new Ce(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++)t=256*t+e.g.getUint8(n);return t}function Ng(e){var t=new Ig(e.g);if(179!=(e=Mg(t)).id)throw new Ce(2,3,3013);if(e=Rg(e),183!=(t=Mg(t)).id)throw new Ce(2,3,3012);t=new Ig(t.g);for(var n=0;t.Oa();){var i=Mg(t);if(241==i.id){n=Rg(i);break}}return{tm:e,Wl:n}}function Og(e,t,n){if(!(t=Cg(e,t,"Initialization")))return null;var i=e.M.jb(),r=t.attributes.sourceURL;r&&(i=Ze(i,[Ge(r)],e.Qb())),r=0;var a=null;return(t=An(t,"range",Mn))&&(r=t.start,a=t.end),(n=new Xo(function(){return i},r,a,Gg(e),null,null,n,e.va.encrypted)).codecs=e.M.codecs,n.mimeType=e.M.mimeType,e.oa&&!e.oa.Af&&(n.g=e.oa.start+e.oa.duration),n}function Ug(e,t,n,i,r,a,o){var s,u,h,c,d,p,f,g,m,v,y,b,w,S,T,A,E,x;return L(function(C){if(1==C.g)return s=e.presentationTimeline,u=!e.Hb||!e.oa.Af,h=e.oa.start,c=e.oa.duration,d=e.M.mimeType.split("/")[1],f=null,g=[(p=t)(i,r,a,!1),"webm"==d?p(n.S(),n.startByte,n.endByte,!0):null],p=null,_(C,Promise.all(g),2);if(m=C.h,v=m[0],y=m[1]||null,w=h-o,S=h,T=c?h+c:1/0,"mp4"==d)var k=function(e,t,n,i,r,a,o){var s,u=(new ca).V("sidx",function(e){s=function(e,t,n,i,r,a,o){var s=[];o.reader.skip(4);var u=o.reader.W();if(0==u)throw new Ce(2,3,3005);if(0==o.version)var l=o.reader.W(),h=o.reader.W();else l=o.reader.Pd(),h=o.reader.Pd();o.reader.skip(2);var c=o.reader.Ga();for(e=e+o.size+h,h=0;h<c;h++){var d=o.reader.W(),p=(2147483648&d)>>>31;d&=2147483647;var f=o.reader.W();if(o.reader.skip(4),1==p)throw new Ce(2,3,3006);s.push(new qo(l/u+n,(l+f)/u+n,function(){return a},e,e+d-1,t,n,i,r)),l+=f,e+=d}return o.parser.stop(),s}(t,i,r,a,o,n,e)});if(e&&u.parse(e),s)return s;throw new Ce(2,3,3004)}(v,r,i,n,w,S,T);else{k=v;var I=new Ig(y);if(440786851!=Mg(I).id)throw new Ce(2,3,3008);var M=Mg(I);if(408125543!=M.id)throw new Ce(2,3,3009);I=M.g.byteOffset,M=new Ig(M.g);for(var P=null;M.Oa();){var L=Mg(M);if(357149030==L.id){P=L;break}}if(!P)throw new Ce(2,3,3010);for(P=new Ig(P.g),L=1e6,M=null;P.Oa();){var D=Mg(P);if(2807729==D.id)L=Rg(D);else if(17545==D.id)if(4==D.g.byteLength)M=D.g.getFloat32(0);else{if(8!=D.g.byteLength)throw new Ce(2,3,3003);M=D.g.getFloat64(0)}}if(null==M)throw new Ce(2,3,3011);if(M*=P=L/1e9,475249515!=(k=Mg(new Ig(k))).id)throw new Ce(2,3,3007);k=function(e,t,n,i,r,a,o,s,u){function l(){return r}var h=[];e=new Ig(e.g);for(var c=null,d=null;e.Oa();){var p=Mg(e);if(187==p.id){var f=Ng(p);f&&(p=n*f.tm,f=t+f.Wl,null!=c&&h.push(new qo(c+o,p+o,l,d,f-1,a,o,s,u)),c=p,d=f)}}return null!=c&&h.push(new qo(c+o,i+o,l,d,null,a,o,s,u)),h}(k,I,P,M,i,n,w,S,T)}for(A=l(b=k),E=A.next();!E.done;E=A.next())(x=E.value).codecs=e.M.codecs,x.mimeType=e.M.mimeType,x.bandwidth=e.bandwidth;return s.ue(b),f=new Gu(b),u&&f.Cd(S,T,!0),C.return(f)})}function Bg(e){return e.Sd}function Fg(e){var t=Cg(e,Bg,"RepresentationIndex");return e=Mn((e=xg(e,Bg,"indexRange"))||""),t&&(e=An(t,"range",Mn,e)),e}function jg(e,t){var n=e.M.mimeType.split("/")[1];if(e.M.contentType!=nt&&"mp4"!=n&&"webm"!=n)throw new Ce(2,4,4006);if("webm"==n&&!t)throw new Ce(2,4,4005)}function Gg(e){var t=e.M;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.Nf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.va.label||null,roles:e.roles||null,language:e.va.language||null}}function Hg(e){return e.Cc}function Vg(t,n,i,r,a,o,s,u,h,c){h||t.M.xf||(t.M.xf=xg(t,Wg,"initialization"));var d=t.M.xf?function(e,t){var n=e.M.xf;if(n||(n=xg(e,Wg,"initialization")),!n)return null;n=Ge(n);var i=e.M.originalId,r=e.bandwidth||null,a=e.M.jb,o=e.Qb;return t=new Xo(function(){var e=Tg(n,i,null,null,r,null);return Ze(a(),[e],o())},0,null,Gg(e),null,null,t,e.va.encrypted),t.codecs=e.M.codecs,t.mimeType=e.M.mimeType,e.oa&&!e.oa.Af&&(t.g=e.oa.start+e.oa.duration),t}(t,s):null,p=function(e){var t=Ag(e,Wg),n=xg(e,Wg,"media"),i=xg(e,Wg,"index"),r=xg(e,Wg,"k"),a=0;return r&&(a=parseInt(r,10)),{mg:t.mg,mb:t.mb,timescale:t.timescale,De:t.De,Ob:t.Ob,td:t.td,timeline:t.timeline,hc:n&&Ge(n),me:i,mimeType:e.M.mimeType,codecs:e.M.codecs,bandwidth:e.bandwidth,Ml:a}}(t);!function(e){var t=e.me?1:0;if(t+=e.timeline?1:0,0==(t+=e.mb?1:0))throw new Ce(2,4,4002);if(1!=t&&(e.me&&(e.timeline=null),e.mg=null,e.mb=null),!e.me&&!e.hc)throw new Ce(2,4,4002)}(p);var f=cn(t);if(p.me)return jg(t,d),{endTime:-1,timeline:-1,bd:function(){var e=Tg(p.me,f.M.originalId,null,null,f.bandwidth||null,null);return e=Ze(f.M.jb(),[e]),Ug(f,n,d,e,0,null,p.Ob)},timescale:p.timescale};if(p.mb)return r||"image"===t.va.contentType||"text"===t.va.contentType||(r=t.oa.start,c=t.za.id,i=t.oa.duration,c=(c=null!=c&&o.get(c)||i)?r+c:1/0,t.presentationTimeline.Hh(p.mb),t.presentationTimeline.mj(r,c)),{endTime:-1,timeline:-1,bd:function(){return function(t,n,i,r,a,o,s,u){function h(i){var a=i-y,s=a*v,l=n.mg,h=a*l;"BigInt"in e&&h>Number.MAX_SAFE_INTEGER&&(h=BigInt(a)*BigInt(l)),a=(s+=f)+v,l=Math.min(a,d());var c=[],p=n.Ml;if(p)for(var g=(l-s)/p,m={},E=0;E<p;m={Oj:void 0},E++){var x=s+g*E,C=x+g;m.Oj=E,(m=new qo(x,C,function(e){return function(){var t=Tg(b,w,i,e.Oj,_,h);return Ze(S(),[t],T())}}(m),0,null,r,A,f,d(),[],"",null,null,Jo,o)).codecs=t.M.codecs,m.mimeType=t.M.mimeType,0==u?0<E&&m.Hd():0!=E%u&&m.Hd(),c.push(m)}return(s=new qo(s,l,function(){if(p)return[];var e=Tg(b,w,i,null,_,h);return Ze(S(),[e],T())},0,null,r,A,f,d(),c,"",null,null,Jo,o,0<c.length)).codecs=t.M.codecs,s.mimeType=t.M.mimeType,s.bandwidth=t.bandwidth,s.j=a,s}function c(){var e=[Math.max(p.Lb(),f),Math.min(p.Jc(),d())].map(function(e){return e-f});return e=[Math.ceil(e[0]/v),Math.ceil(e[1]/v)-1],t.M.xb&&e[1]++,e.map(function(e){return e+y})}function d(){var e=null!=g&&a.get(g)||m;return e?f+e:1/0}var p=t.presentationTimeline,f=t.oa.start,g=t.za.id,m=t.oa.duration,v=n.mb,y=n.De,b=n.hc,_=t.bandwidth||null,w=t.M.originalId,S=t.M.jb,T=t.Qb,A=f-n.Ob,E=c();i=t.Hb?Math.max(E[0],E[1]-i+1):E[0],s=s||E[1],E=[];for(var x=i;x<=s;++x){var C=h(x);E.push(C)}var k=new Gu(E);if(E=p.Jc()<d(),x=p.T(),E||x){var I=Math.max(i,s+1);i=v,t.M.xb&&(i=.1),k.ng(i,function(){var e=p.Lb();k.hb(e);var t=l(c());t.next(),t=t.next().value;for(var n=[];I<=t;){var i=h(I);n.push(i),I++}return e>d()&&!n.length?null:n})}return Promise.resolve(k)}(f,p,a,d,o,s,u,t.M.cg)},timescale:p.timescale};var g=null;r=r=null,t.za.id&&t.M.id&&(r=t.za.id+","+t.M.id,r=i.get(r))&&(g=r.segmentIndex);var m=t.oa.start,v=t.oa.duration?m+t.oa.duration:1/0;if(g)Kg(c=g,p,m,v,d,t.Hb),c.hb(t.presentationTimeline.Lb());else{if(i=0,h=-1,null!=t.za.id&&null!=t.M.id){var y=c.get(t.za.id);if(y)h=y.timeline;else for(y=(c=l(c.values())).next();!y.done;y=c.next()){if(y=y.value,Math.abs(p.Ob-y.endTime)<=rt&&y.Qh.includes(t.M.id)){h=y.timeline;break}y.timeline>=i&&(i=y.timeline+1)}}-1==h&&(h=i),g=new zg(t.Hb,p,t.M.originalId,t.bandwidth,t.M.jb,t.Qb,m,v,d,s,t.M.cg,h)}return p.timeline&&"image"!==t.va.contentType&&"text"!==t.va.contentType&&t.presentationTimeline.nj(g.h?g.h.timeline:[],m),r&&t.Hb&&(r.segmentIndex=g),r=(r=(r=p.timeline)&&r[r.length-1])?r.end+p.Ob:-1,c=-1,g instanceof zg&&(c=g.kf()),{endTime:r,timeline:c,bd:function(){return g instanceof zg&&0==g.getNumReferences()&&Kg(g,p,m,v,d,t.Hb),Promise.resolve(g)},timescale:p.timescale}}function Wg(e){return e.Qc}function zg(e,t,n,i,r,a,o,s,u,l,h,c){Gu.call(this,[]),this.D=e,this.h=t,this.G=n,this.C=i,this.F=r,this.I=a,this.j=o,this.l=s,this.u=u,this.B=l,this.H=h,this.J=c,Xg(this)}function Kg(e,t,n,i,r,a){if(function(e,t){if(e.u!==t){e.u=t;for(var n=(e=l(e.g)).next();!n.done;n=e.next())(n=n.value)&&Zo(n,t)}}(e,r),e.D=a,e.h){if(e.h.td!==t.td&&(e.h.timeline=t.timeline,e.h.td=t.td,e.h.Ob=t.Ob),e.h.hc!==t.hc&&(e.h.hc=t.hc),(n=e.h.timeline).length){var o=n[n.length-1];t=t.timeline.filter(function(e){return e.end>o.end})}else t=t.timeline.slice();0<t.length&&e.h.timeline.push.apply(e.h.timeline,h(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;Xg(e)}function Xg(e){if(e.h&&!e.s){for(var t=[],n=l(e.h.timeline),i=n.next();!i.done;i=n.next())(i=i.value).start>=e.l||0>=i.end||t.push(i);e.h.timeline=t,e.hb(e.j)}}function Yg(e,t,n,i,r,a,o,s){return e=Tg(e,t,n,a,i||null,r),Ze(o(),[e],s()).map(function(e){return e.toString()})}function qg(e){this.s=null,this.B=e,this.G=new zr,this.i=[],this.h=null,this.m=[],this.C=null,this.F=[],this.D=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}function Zg(e,t){var n,i,r,a,o,s,u;return L(function(l){return 1==l.g?(n=Ze(e.i,[Jg(e,t)]),i=Zr(n,e.s.retryParameters),r=e.B.networkingEngine.request(8,i),Kr(e.G,r),S(l,2),_(l,r.promise,4)):2!=l.g?(a=l.h,o=Ne(a.data),1==(s=JSON.parse(o)).VERSION&&function(e,t,n){null!=e.g&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new zi(function(){Zg(e,i)}),(n=t.TTL)&&(e.D=n),e.g.X(e.D),e.m=t["PATHWAY-PRIORITY"]||[],e.F=t["PATHWAY-CLONES"]||[]}(e,s,a.uri),A(l,0)):(u=E(l))&&7001==u.code?l.return():(null!=e.g&&(e.g.stop(),e.g=null),e.g=new zi(function(){Zg(e,t)}),e.g.X(e.D),void w(l))})}function Jg(e,t){if(!e.m.length)return t;t=new re(t);var n=e.C||e.m[0],i=Math.round(e.B.getBandwidthEstimate()),r=t.g;return"DASH"==e.u?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):"HLS"==e.u&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),be(r)&&ue(t,r),t.toString()}function Qg(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}function $g(e,t,n){n=void 0!==n&&n,t=e.l.get(t)||new Map;for(var i=[],r=l(e.m),a=r.next(),o={};!a.done;o={Ld:void 0},a=r.next())if(o.Ld=a.value,a=t.get(o.Ld))i.push({Mh:o.Ld,location:a});else if(a=e.F.find(function(e){return function(t){return t.Rm==e.Ld}}(o))){var s=t.get(a["BASE-ID"]);s&&(a["URI-REPLACEMENT"].ck?(oe(s=new re(s),a["URI-REPLACEMENT"].ck),i.push({Mh:o.Ld,location:s.toString()})):i.push({Mh:o.Ld,location:s}))}for(r=Date.now(),a=(o=l(e.j.keys())).next();!a.done;a=o.next())a=a.value,r>(s=e.j.get(a))&&e.j.delete(a);if(i=i.filter(function(t){for(var n=l(e.j.keys()),i=n.next();!i.done;i=n.next())if(i.value.includes(new re(t.location).Gb))return!1;return!0}),i.length&&(e.C=i[0].Mh),i=i.map(function(e){return e.location}),!i.length&&e.h)for(o=(r=l(e.h.split(","))).next();!o.done;o=r.next())(o=t.get(o.value))&&(e.C=e.h,i.push(o));if(!i.length)for(r=(t=l(t.values())).next();!r.done;r=t.next())i.push(r.value);return n?i:Ze(e.i,i)}function em(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.u=this.s=!1,this.m=new Set}function tm(e,t){for(var n=[],i=[],r=[],a=[],o=(e=l(e)).next();!o.done;o=e.next()){var s=o.value;o=new Map(s.audioStreams.map(function(e){return[km(e),e]}));var u=new Map(s.videoStreams.map(function(e){return[Cm(e),e]})),h=new Map(s.textStreams.map(function(e){return[Im(e),e]}));if(s=new Map(s.imageStreams.map(function(e){return[Mm(e),e]})),t){var c=Sm(nt);h.set(Im(c),c),c=Sm("image"),s.set(Mm(c),c)}n.push(o),i.push(u),r.push(h),a.push(s)}return{Ci:n,Zj:i,Uj:r,Zi:a}}function nm(e){var t,n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w,S,T,A,E,x,C,k,I,M,P;return L(function(L){switch(L.g){case 1:if(t=it,1==e.length)return L.return(e[0]);for(n=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.ma}).map(function(e){return[km(e),e]}))}),i=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.Ha}).map(function(e){return[Cm(e),e]}))}),r=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.$a}).map(function(e){return[Im(e),e]}))}),a=e.map(function(e){return new Map(e.filter(function(e){return e.type===t.wg}).map(function(e){return[Mm(e),e]}))}),o=l(r),s=o.next();!s.done;s=o.next())u=s.value,h=wm(t.$a),u.set(Im(h),h);for(c=l(a),d=c.next();!d.done;d=c.next())p=d.value,f=wm(t.wg),p.set(Mm(f),f);return _(L,im(g=new em,[],n,0,um,hm,0),2);case 2:return m=L.h,_(L,im(g,[],i,0,um,hm,0),3);case 3:return v=L.h,_(L,im(g,[],r,0,um,hm,0),4);case 4:return y=L.h,_(L,im(g,[],a,0,um,hm,0),5);case 5:if(b=L.h,w=0,v.length&&m.length)for(E=l(m),x=E.next();!x.done;x=E.next())for(C=x.value,k=l(v),I=k.next();!I.done;I=k.next())M=I.value,P=w++,M.variantIds.push(P),C.variantIds.push(P);else for(S=v.concat(m),T=l(S),A=T.next();!A.done;A=T.next())A.value.variantIds=[w++];return L.return(v.concat(m).concat(y).concat(b))}})}function im(e,t,n,i,r,a,o){var s,u,h,c,d,p,f,g,m,v,y,b,w,S,T,A,E,x;return L(function(C){switch(C.g){case 1:for(s=[],u=0;u<n.length;u++)u>=i?s.push(new Set(n[u].values())):s.push(new Set);h=l(t),c=h.next();case 2:if(c.done){C.A(4);break}return d=c.value,_(C,function(e,t,n,i,r,a,o){return L(function(s){return 1==s.g?(cm(e,n,t,0<o),t.matchedStreams?t.segmentIndex?_(s,rm(t,i+o),2):s.A(2):s.return(!1)):(om(t,i,r,a,o),s.return(!0))})}(e,d,n,i,a,s,o),5);case 5:if(!C.h)throw new Ce(2,4,4037);c=h.next(),C.A(2);break;case 4:for(p=l(s),f=p.next();!f.done;f=p.next())for(g=f.value,m=l(g),v=m.next();!v.done;v=m.next())y=v.value,(b=am(e,y,n,r,a,s))&&t.push(b);for(w=l(s),S=w.next();!S.done;S=w.next())for(T=S.value,A=l(T),E=A.next(),x={};!E.done;x={gi:void 0},E=A.next())if(x.gi=E.value,!xm(x.gi)&&t.some(function(t){return function(n){return fm(e,t.gi,n)}}(x)))throw new Ce(2,4,4037);return C.return(t)}})}function rm(e,t){var n,i,r,a,o,s;return L(function(u){if(1==u.g){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)a=i[r],n.push(a.createSegmentIndex()),a.trickModeVideo&&!a.trickModeVideo.segmentIndex&&n.push(a.trickModeVideo.createSegmentIndex()),a.dependencyStream&&!a.dependencyStream.segmentIndex&&n.push(a.dependencyStream.createSegmentIndex());return _(u,Promise.all(n),2)}if(e.segmentIndex instanceof zu)for(o=t;o<i.length;o++)(s=i[o]).segmentIndex&&e.segmentIndex.h.push(s.segmentIndex);w(u)})}function am(e,t,n,i,r,a){if(xm(t))return null;var o=i(t);return cm(e,n,o),o.createSegmentIndex&&(o.createSegmentIndex=function(){return L(function(e){return o.segmentIndex?e.A(0):(o.segmentIndex=new zu,_(e,rm(o,0),0))})}),o.matchedStreams&&o.matchedStreams.length?(om(o,0,r,a,0),o):null}function om(e,t,n,i,r){var a=e.matchedStreams;for(t+=r;t<a.length;t++){var o=a[t];n(e,o);var s=!0;if("audio"==e.type&&0==dt(e.language,o.language)&&(s=!1),s&&(i[t-r].delete(o),o.fullMimeTypes))for(s=(o=l(o.fullMimeTypes.values())).next();!s.done;s=o.next())e.fullMimeTypes.add(s.value)}}function sm(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){if(t.segmentIndex&&(t.segmentIndex.release(),t.segmentIndex=null),t.matchedStreams)for(var e=l(t.matchedStreams),n=e.next();!n.done;n=e.next())(n=n.value).segmentIndex&&(n.segmentIndex.release(),n.segmentIndex=null)},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function um(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function lm(e,t){function n(e,t){e||(e=[]);for(var n=(t=l(t)).next();!n.done;n=t.next())n=n.value,e.includes(n)||e.push(n);return e}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=l(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(null==e.originalId?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=Ir(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new Ce(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),r=(i=l(t.closedCaptions)).next();!r.done;r=i.next()){var a=l(r.value);r=a.next().value,a=a.next().value,e.closedCaptions.set(r,a)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=sm(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var t=new zu,n=l(e.trickModeVideo.matchedStreams),i=n.next();!i.done;i=n.next())t.h.push(i.value.segmentIndex);return e.trickModeVideo.segmentIndex=t,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),lm(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),lm(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=sm(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var t=new zu,n=l(e.dependencyStream.matchedStreams),i=n.next();!i.done;i=n.next())t.h.push(i.value.segmentIndex);return e.dependencyStream.segmentIndex=t,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),lm(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),lm(e.dependencyStream,t))}function hm(e,t){var n=e.roles;n||(n=[]);for(var i=l(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,i=(n=l(t.keyIds)).next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,h(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),n=(t=l(t.closedCaptions)).next();!n.done;n=t.next())n=(i=l(n.value)).next().value,i=i.next().value,e.closedCaptions.set(n,i)}function cm(e,t,n,i){i=void 0!==i&&i?n.matchedStreams:[];for(var r=(t=l(t)).next();!r.done;r=t.next()){if(!(r=dm(e,r.value,n)))return;i.push(r)}n.matchedStreams=i}function dm(e,t,n){var i={audio:km,video:Cm,text:Im,image:Mm}[n.type],r=null,a=i(n);if(t.has(a))r=t.get(a);else{a={audio:function(t,n){return fm(e,t,n)},video:function(t,n){return fm(e,t,n)},text:gm,image:mm}[n.type];for(var o={audio:vm,video:ym,text:bm,image:_m}[n.type],s=l(t.values()),u=s.next();!u.done;u=s.next())!a(n,u=u.value)||n.fastSwitching!=u.fastSwitching||r&&!o(n,r,u)||(r=u)}return e.u&&!xm(r)&&t.delete(i(r)),r}function pm(e,t){return e.mimeType==t.mimeType&&Pm(e.codecs)===Pm(t.codecs)}function fm(e,t,n){return!(!pm(t,n)&&!e.s||t.drmInfos&&!kr(t.drmInfos,n.drmInfos))}function gm(e,t){return!t.language||e.forced===t.forced&&0!=dt(e.language,t.language)&&t.kind==e.kind}function mm(){return!0}function vm(e,t,n){var i=Am(e,t,n);if(i===Lm)return!0;if(i===Rm)return!1;i=dt(e.language,t.language);var r=dt(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(t){return e.roles.includes(t)}),(r=n.roles.filter(function(t){return e.roles.includes(t)})).length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(t.primary||!n.primary)||!(t.primary&&!n.primary)&&((i=Tm(e.channelsCount,t.channelsCount,n.channelsCount))==Lm||i!=Rm&&((i=Tm(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate))==Lm||i!=Rm&&!(!e.bandwidth||Em(e.bandwidth,t.bandwidth,n.bandwidth)!=Lm)))}function ym(e,t,n){var i=Am(e,t,n);if(i===Lm)return!0;if(i===Rm)return!1;if((i=Tm(e.width*e.height,t.width*t.height,n.width*n.height))==Lm)return!0;if(i==Rm)return!1;if(e.frameRate){if((i=Tm(e.frameRate,t.frameRate,n.frameRate))==Lm)return!0;if(i==Rm)return!1}return!(!e.bandwidth||Em(e.bandwidth,t.bandwidth,n.bandwidth)!=Lm)}function bm(e,t,n){var i=dt(e.language,t.language),r=dt(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(t){return e.roles.includes(t)}),(r=n.roles.filter(function(t){return e.roles.includes(t)})).length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return n.mimeType==e.mimeType&&n.codecs==e.codecs&&(t.mimeType!=e.mimeType||t.codecs!=e.codecs)}function _m(e,t,n){return Tm(e.width*e.height,t.width*t.height,n.width*n.height)==Lm}function wm(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Sm(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Gu([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Tm(e,t,n){if(t==e&&e!=n)return Rm;if(n==e&&e!=t)return Lm;if(t>e){if(n<=e||n-e<t-e)return Lm;if(n-e>t-e)return Rm}else{if(n>e)return Rm;if(e-n<e-t)return Lm;if(e-n>e-t)return Rm}return Dm}function Am(e,t,n){var i=e.mimeType===t.mimeType&&e.codecs===t.codecs,r=e.mimeType===n.mimeType&&e.codecs===n.codecs;return i&&!r?Rm:!i&&r?Lm:(t=pm(e,t),e=pm(e,n),t&&!e?Rm:!t&&e?Lm:Dm)}function Em(e,t,n){return t=Math.abs(e-t),(e=Math.abs(e-n))<t?Lm:t<e?Rm:Dm}function xm(e){switch(e.type){case nt:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function Cm(e){return JSON.stringify([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function km(e){return JSON.stringify([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Im(e){return JSON.stringify([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Mm(e){return JSON.stringify([e.width,e.codecs,e.mimeType])}function Pm(e){if(!Nm.has(e)){var t=Mi(e);Nm.set(e,t)}return Nm.get(e)}m(zg,Gu),(i=zg.prototype).getNumReferences=function(){return this.h?this.h.timeline.length:0},i.release=function(){Gu.prototype.release.call(this),this.h=null},i.hb=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;0<t&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,0===this.getNumReferences()&&this.release())}},i.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],a=r.start+this.j;if(r=i<n?t[i+1].start+this.j:1/0===this.l?r.end+this.j:this.l,e>=a&&e<r)return i+this.i}return null},i.get=function(e){var t=this;if(0>(e-=this.i)||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){var i=(n=this.h.timeline[e]).em,r=n.ri+this.h.td,a=this.j-this.h.Ob,o=this.j+n.end,s=o;e===this.getNumReferences()-1&&1/0!==this.l&&(s=this.D&&.1<Math.abs(s-this.l)?Math.min(s,this.l):this.l);var u=this.h.codecs,l=this.h.mimeType,h=this.h.bandwidth,c=[],d=!1;if(n.Ac&&this.h&&this.h.hc&&(d=this.h.hc.includes("$SubNumber$")),d){d=(n.end-n.start)/n.Ac;for(var p={},f=0;f<n.Ac;p={pg:void 0,Pj:void 0},f++){var g=n.start+d*f,m=g+d;p.Pj=f,p.pg=null,(p=new qo(this.j+g,this.j+m,function(e){return function(){return t.h?(null==e.pg&&(e.pg=Yg(t.h.hc,t.G,i,t.C,r,e.Pj,t.F,t.I)),e.pg):[]}}(p),0,null,this.u,a,this.j,this.l,[],"",null,null,Jo,this.B)).codecs=u,p.mimeType=l,p.bandwidth=h,0==this.H?0<f&&p.Hd():0!=f%this.H&&p.Hd(),c.push(p)}}(n=new qo(this.j+n.start,s,function(){return 0<c.length||!t.h?[]:Yg(t.h.hc,t.G,i,t.C,r,null,t.F,t.I)},0,null,this.u,a,this.j,this.l,c,"",null,null,Jo,this.B,0<c.length)).codecs=u,n.mimeType=l,n.j=o,n.bandwidth=h,this.g[e]=n}return n},i.Ib=function(e){Xg(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}},i.kf=function(){return this.J},qg.prototype.configure=function(e){this.s=e},qg.prototype.destroy=function(){return this.B=this.s=null,this.i=[],this.h=null,this.m=[],this.F=[],this.l.clear(),null!=this.g&&(this.g.stop(),this.g=null),this.G.destroy()},qg.prototype.setManifestType=function(e){this.u=e},qg.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)},(i=em.prototype).release=function(){for(var e=l(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.u=this.s=!1,this.m.clear()},i.ll=function(){return this.l},i.rh=function(){return this.j.slice()},i.Jk=function(){return this.i},i.Mi=function(e,t){if(e){if("audio"==e.type)for(var n=l(this.h),i=n.next();!i.done;i=n.next())(i=i.value).matchedStreams=i.matchedStreams.filter(function(t){return t!==e});else if("video"==e.type)for(i=(n=l(this.g)).next();!i.done;i=n.next())(i=i.value).matchedStreams=i.matchedStreams.filter(function(t){return t!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(t){return t!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(t){return t!==e}));else if(e.type==nt)for(i=(n=l(this.j)).next();!i.done;i=n.next())(i=i.value).matchedStreams=i.matchedStreams.filter(function(t){return t!==e});else if("image"==e.type)for(i=(n=l(this.i)).next();!i.done;i=n.next())(i=i.value).matchedStreams=i.matchedStreams.filter(function(t){return t!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}},i.Mg=function(e,t,n){n=void 0!==n&&n;var i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,S,T,A,E,x,C,k,I,M,P,D,R,N,O,U,B,F=this;return L(function(L){if(1==L.g){if(i=it,!t&&1==e.length)return r=tm(e,!1),a=r.Ci,o=r.Zj,s=r.Uj,u=r.Zi,F.h=Array.from(a[0].values()),F.g=Array.from(o[0].values()),F.j=Array.from(s[0].values()),F.i=Array.from(u[0].values()),L.A(2);for(h=n?F.m.size:0,c=-1,d=0;d<e.length;d++)p=e[d],F.m.has(p.id)||(F.m.add(p.id),-1==c&&(c=d));return-1==c?L.return():(f=tm(e,!0),g=f.Ci,m=f.Zj,v=f.Uj,y=f.Zi,_(L,Promise.all([im(F,F.h,g,c,sm,lm,h),im(F,F.g,m,c,sm,lm,h),im(F,F.j,v,c,sm,lm,h),im(F,F.i,y,c,sm,lm,h)]),2))}if(b=0,S=[],F.g.length&&F.h.length)for(I=l(F.h),M=I.next();!M.done;M=I.next())for(P=M.value,D=l(F.g),R=D.next();!R.done;R=D.next())N=R.value,O=Ir(P.drmInfos,N.drmInfos),P.drmInfos.length&&N.drmInfos.length&&!O.length||(U=(P.bandwidth||0)+(N.bandwidth||0),P.dependencyStream&&(U+=P.dependencyStream.bandwidth||0),N.dependencyStream&&(U+=N.dependencyStream.bandwidth||0),B=b++,S.push({id:B,language:P.language,disabledUntilTime:0,primary:P.primary,audio:P,video:N,bandwidth:U,drmInfos:O,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(T=F.g.length?F.g:F.h,A=l(T),E=A.next();!E.done;E=A.next())x=E.value,C=b++,k=x.bandwidth||0,x.dependencyStream&&(k+=x.dependencyStream.bandwidth||0),S.push({id:C,language:x.language,disabledUntilTime:0,primary:x.primary,audio:x.type==i.ma?x:null,video:x.type==i.Ha?x:null,bandwidth:k,drmInfos:x.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});F.l=S,w(L)})},i.Dj=function(e){this.s=e},i.Jj=function(e){this.u=e},H("shaka.util.PeriodCombiner",em),em.prototype.setUseStreamOnce=em.prototype.Jj,em.prototype.setAllowMultiTypeVariants=em.prototype.Dj,em.prototype.combinePeriods=em.prototype.Mg,em.prototype.deleteStream=em.prototype.Mi,em.prototype.getImageStreams=em.prototype.Jk,em.prototype.getTextStreams=em.prototype.rh,em.prototype.getVariants=em.prototype.ll;var Lm=1,Dm=0,Rm=-1,Nm=new Map;function Om(e,t){try{return function(e,t){var n=new DOMParser,i=Um.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch(e){return null}if(!(n=e.documentElement)||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}(Ue(e),t)}catch(e){return null}}var Um=new Ie(function(){if("undefined"!=typeof trustedTypes){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(e){return e}});return function(t){return e.createHTML(t)}}return function(e){return e}});function Bm(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.ua=1,this.G=[],this.l={Kf:"",type:"",profiles:[],xc:null,xb:0,jb:null,we:0},this.u=new Map,this.C=new Map,this.s=new Map,this.D=new Map,this.qa=new Map,this.m=new em,this.J=0,this.sa=new wt(5),this.K=new zi(function(){e.I&&!e.g.continueLoadingWhenPaused&&(e.H.Da(e.I,"timeupdate"),e.I.paused)?e.H.ra(e.I,"timeupdate",function(){return $m(e)}):$m(e)}),this.O=new zr,this.N=null,this.F=[],this.Z=1/0,this.na=!1,this.i=null,this.L=0,this.P=!1,this.H=new At,this.I=null,this.R=!1,this.Y="",this.ba=function(){return!1},this.U=[],this.$=new Set}function Fm(e){var t,n,i,r,a,o,s,u,c,d,p;return L(function(f){return 1==f.g?(t=4,n="MPD",i=function(e){var t=e.l.we;if(!e.l.Kf||!t||!e.G.length)return[];var n=Date.now()/1e3,i=e.G.filter(function(e){return!(e=Dn(e.attributes.ttl))||t+e>n}).map(_n).filter(Yi);return i.length?Ze(e.B,i):[]}(e),r=e.B,i.length?(r=i,n="Patch",t=6):1<e.B.length&&e.i&&(a=$g(e.i,"Location",!0)).length&&(r=a),o=Zr(r,e.g.retryParameters),s=Date.now(),_(f,ov(e,o,0,{type:t}),2)):3!=f.g?(u=f.h,e.j?(u.uri&&u.uri!=u.originalUri&&!e.B.includes(u.uri)&&e.B.unshift(u.uri),c=new re(u.uri),e.Y=c.g.toString(),_(f,function(e,t,n,i){var r,a,o,s,u,c,d,p;return L(function(f){if(1==f.g){if(r=t,(a=e.g.dash.manifestPreprocessor)!=rh){if(kt("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),!(o=Om(r,i)))throw new Ce(2,4,4001,n);a(o),r=Be(o.outerHTML)}if(!(s=pn(r,i)))throw new Ce(2,4,4001,n);return(u=e.g.dash.manifestPreprocessorTXml)!=ah&&u(s),"Patch"===i?f.return(function(e,t){var n,i,r,a,o,s,u,c,d,p,f,g,m,v,y,b,S,T,A,E,x,C,k,I;return L(function(M){if(1==M.g){if(n=t.attributes.mpdId,i=An(t,"originalPublishTime",kn),!n||n!==e.l.Kf||i!==e.l.we)throw e.G=[],new Ce(1,4,4052);for(r=[],a=[],o=new Set,s=l(vn(t)),u=s.next();!u.done;u=s.next())if(c=u.value,d=Un(c.attributes.sel||""),p=d[d.length-1],f=_n(c)||"","MPD"===p.name)if("mediaPresentationDuration"===p.Fc){var P=In(_n(c)||"");if(null!=P){e.l.xc=P;for(var L=l(e.u.values()),D=L.next();!D.done;D=L.next())D.value.xc=P}}else if("type"===p.Fc){for(e.h.presentationTimeline.pd("static"==f),e.l.type=f,L=(P=l(e.u.values())).next();!L.done;L=P.next())L.value.Hb="dynamic"==f;"static"==f&&(e.J=-1)}else"publishTime"===p.Fc?e.l.we=kn(f)||0:null===p.Fc&&"add"===c.tagName&&a.push(c);else if("PatchLocation"===p.name)Bn(e.G,c);else if("Period"===p.name)"add"===c.tagName?a.push(c):"remove"===c.tagName&&p.id&&Vm(e,p.id);else if("SegmentTemplate"===p.name){if((P=(L=Un(c.attributes.sel||""))[L.length-1]).Fc){L=Wm(e,L),D=_n(c)||"";for(var R=l(L),N=R.next();!N.done;N=R.next())jn((N=e.u.get(N.value)).M.Qc,c.tagName,P.Fc,D);P=L}else P=[];for(g=l(P),m=g.next();!m.done;m=g.next())v=m.value,o.add(v)}else if("SegmentTimeline"===p.name||"S"===p.name){for(P=Un(c.attributes.sel||""),D=(L=l(P=Wm(e,P))).next();!D.done;D=L.next())Bn(R=yn(D=Cg(D=e.u.get(D.value),Wg,"SegmentTimeline"),"S"),c),D.children=R;for(y=l(P),b=y.next();!b.done;b=y.next())S=b.value,o.add(S)}for(T=l(o),A=T.next();!A.done;A=T.next())E=A.value,zm(e,E);for(x=l(a),C=x.next();!C.done;C=x.next())k=C.value,r.push.apply(r,h(Hm(e,k)));return r.length?(e.h.periodCount+=r.length,e.h.gapCount=e.L,_(M,Gm(e,r,!0),2)):M.A(2)}"static"==e.l.type&&(I=e.l.xc,e.h.presentationTimeline.wb(I||1/0)),w(M)})}(e,s)):e.g.dash.disableXlinkProcessing?f.return(jm(e,s,n)):(c=e.g.dash.xlinkFailGracefully,d=kg(s,e.g.retryParameters,c,n,e.j.networkingEngine),Kr(e.O,d),_(f,d.promise,2))}return p=f.h,f.return(jm(e,p,n))})}(e,u.data,u.uri,n),3)):f.return(0)):(d=Date.now(),p=(d-s)/1e3,e.sa.sample(1,p),e.$.clear(),f.return(p))})}function jm(e,t,n){var i,r,a,o,s,u,c,d,p,f,g,m,v,y,b,T,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G,H,V,W,z,K,X,q,Z,J,Q,$,ee,te,ne,ie,re,ae,oe,se,ue,le,he,ce;return L(function(de){switch(de.g){case 1:for(e.i&&e.i.l.clear(),i=[n],r=[],a=new Map,o=yn(t,"Location"),s=l(o),u=s.next();!u.done;u=s.next())c=u.value,d=c.attributes.serviceLocation,(p=_n(c))&&(f=Ze(i,[p])[0],d&&(e.i?Qg(e.i,"Location",d,f):a.set(d,f)),r.push(f));if(e.i?0<(g=$g(e.i,"Location",!0)).length&&(i=e.B=g):r.length&&(i=e.B=r),e.l.Kf=t.attributes.id||"",e.l.we=An(t,"publishTime",kn)||0,e.G=yn(t,"PatchLocation"),m=Promise.resolve(),(v=Sn(t,"ContentSteering"))&&e.j)for(y=v.attributes.defaultServiceLocation,e.i?(e.i.i=i,e.i.h=y):(e.i=new qg(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=i,e.i.h=y,(b=_n(v))&&(An(v,"queryBeforeStart",Nn,!1)?m=Zg(e.i,b):Zg(e.i,b))),T=l(a.keys()),x=T.next();!x.done;x=T.next())C=x.value,k=a.get(C),Qg(e.i,"Location",C,k);if(I=yn(t,"BaseURL"),M=!1,e.i)for(P=l(I),D=P.next();!D.done;D=P.next())R=D.value,N=R.attributes.serviceLocation,O=_n(R),N&&O&&(Qg(e.i,"BaseURL",N,O),M=!0);if(e.U.splice(0),M&&e.i||(U=I.map(_n),e.U.push.apply(e.U,h(Ze(i,U)))),B=e.i,F=e.U,j=function(){return B&&M?$g(B,"BaseURL"):F.slice()},e.l.jb=j,G=0,I&&I.length&&(G=An(I[0],"availabilityTimeOffset",Rn)||0),e.l.xb=G,e.J=An(t,"minimumUpdatePeriod",In,-1),H=An(t,"availabilityStartTime",kn),V=An(t,"timeShiftBufferDepth",In),W=e.g.dash.ignoreSuggestedPresentationDelay,z=null,W||(z=An(t,"suggestedPresentationDelay",In)),K=e.g.dash.ignoreMaxSegmentDuration,X=null,K||(X=An(t,"maxSegmentDuration",In)),q=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.R=e.h.presentationTimeline.T()&&"static"==q),e.l.type=q,e.h)for(Z=e.h.presentationTimeline,J=Z.Lb(),Q=l(e.s.values()),$=Q.next();!$.done;$=Q.next())(ee=$.value).segmentIndex&&ee.segmentIndex.hb(J);else te=e.g.dash.ignoreMinBufferTime,ne=0,te||(ne=An(t,"minBufferTime",In)||0),ie=null!=z?Math.min(z,V||1/0):0<e.g.defaultPresentationDelay?e.g.defaultPresentationDelay:Math.min(1.5*ne,V||1/0),Z=new yu(H,ie,e.g.dash.autoCorrectDrift);return Z.pd("static"==q),Z.T()&&!isNaN(e.g.availabilityWindowOverride)&&(V=e.g.availabilityWindowOverride),null==V&&(V=1/0),Z.fg(V),re=t.attributes.profiles||"",e.l.profiles=re.split(","),ae={Hb:"static"!=q,presentationTimeline:Z,za:null,oa:null,va:null,M:null,bandwidth:0,xh:!1,xb:G,xc:null,profiles:re.split(","),roles:null,Qb:function(){return""}},_(de,m,2);case 2:return e.L=0,oe=Ym(e,ae,j,t,!1),se=oe.duration,ue=oe.periods,("static"!=q||e.R)&&oe.Oi||Z.wb(se||1/0),e.P&&e.na&&Z.Ej(e.Z),Z.Hh(X||1),e.P&&e.na&&(le=null!=z?z:e.g.defaultPresentationDelay,Z.Zh(le)),e.h?(e.h.periodCount=ue.length,e.h.gapCount=e.L,_(de,Gm(e,ue,!1),4)):_(de,e.m.Mg(ue,ae.Hb),6);case 6:if(e.h={presentationTimeline:Z,variants:e.m.l,textStreams:e.m.rh(),imageStreams:e.m.i,offlineSessionIds:[],sequenceMode:e.g.dash.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Km(t),nextUrl:Xm(t),periodCount:ue.length,gapCount:e.L,isLowLatency:e.P,startTime:null},!Z.Xj()){de.A(7);break}return he=yn(t,"UTCTiming"),_(de,function(e,t,n){var i,r,a,o,s,u,h,c;return L(function(d){switch(d.g){case 1:i=n.map(function(e){return{scheme:e.attributes.schemeIdUri,value:e.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),a=l(i),o=a.next();case 2:if(o.done){d.A(4);break}switch(s=o.value,S(d,5),u=s.scheme,h=s.value,u){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return d.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return d.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(h),d.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Y("NTP UTCTiming scheme is not supported");break;default:Y("Unrecognized scheme in UTCTiming element",u)}d.A(9);break;case 7:return _(d,nv(e,t,h,"HEAD"),10);case 10:return d.return(d.h);case 8:return _(d,nv(e,t,h,"GET"),11);case 11:return d.return(d.h);case 9:A(d,3);break;case 5:E(d);case 3:o=a.next(),d.A(2);break;case 4:return Y("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),d.return(0)}})}(e,j,he),8);case 8:if(ce=de.h,!e.j)return de.return();Z.Fj(ce);case 7:Z.Gf(),e.m&&!e.h.presentationTimeline.T()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),function(e){for(var t=Array.from(e.D.keys()).filter(function(t){return!e.F.includes(t)}),n=(t=l(t)).next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=l(e.D.get(n)),a=r.next();!a.done;a=r.next()){a=a.value;var o=e.s.get(a);o&&(o.segmentIndex&&0!=o.segmentIndex.getNumReferences()?i=!1:(e.m&&e.m.Mi(o,n),e.s.delete(a)))}i&&e.D.delete(n)}}(e),function(e,t){t=new Set(t.map(function(e){return e.id}));for(var n=l(e.C.keys()),i=n.next();!i.done;i=n.next())i=i.value,t.has(i)||e.C.delete(i)}(e,ue),w(de)}})}function Gm(e,t,n){var i;return L(function(r){if(1==r.g)return _(r,e.m.Mg(t,!0,n),2);e.h.variants=e.m.l,0<(i=e.m.rh()).length&&(e.h.textStreams=i),e.h.imageStreams=e.m.i,e.j.filter(e.h),w(r)})}function Hm(e,t){return Ym(e,{Hb:"dynamic"==e.l.type,presentationTimeline:e.h.presentationTimeline,za:null,oa:null,va:null,M:null,bandwidth:0,xh:!1,xb:e.l.xb,profiles:e.l.profiles,xc:e.l.xc,roles:null,Qb:function(){return""}},e.l.jb,t,!0).periods}function Vm(e,t){e.h.periodCount--;for(var n=l(e.u.keys()),i=n.next();!i.done;i=n.next())(i=i.value).startsWith(t)&&(Cg(e.u.get(i),Wg,"SegmentTimeline").children=[],zm(e,i),e.u.delete(i));e.F=e.F.filter(function(e){return e!==t})}function Wm(e,t){for(var n="",i="",r=-1,a="",o=(t=l(t)).next();!o.done;o=t.next())"Period"===(o=o.value).name?n=o.id:"AdaptationSet"===o.name?(i=o.id,null!==o.position&&(r=o.position)):"Representation"===o.name&&(a=o.id);if(t=[],a)t.push(n+","+a);else if(i)for(r=l(e.u.values()),e=r.next();!e.done;e=r.next())(e=e.value).za.id===n&&e.va.id===i&&e.M.id&&t.push(n+","+e.M.id);else if(-1<r)for(i=l(e.u.values()),e=i.next();!e.done;e=i.next())(e=e.value).za.id===n&&e.va.position===r&&e.M.id&&t.push(n+","+e.M.id);return t}function zm(e,t){var n=e.u.get(t),i=e.s.get(t);i.segmentIndex&&i.segmentIndex.hb(e.h.presentationTimeline.Lb());try{var r=Vg(n,function(t,n,i,r){return rv(e,t,n,i,r)},e.s,!0,e.g.dash.initialSegmentLimit,e.qa,n.M.aesKey,null,!0,e.C);i.createSegmentIndex=function(){return L(function(e){if(1==e.g)return i.segmentIndex?e.A(0):_(e,r.bd(),3);i.segmentIndex=e.h,w(e)})}}catch(e){if((t=n.M.contentType)!=nt&&"application"!=t&&"image"!=t||4002!=e.code)throw e}}function Km(e){var t=Sn(e,"ServiceDescription");if(!t)return null;if(e=Sn(t,"Latency"),t=Sn(t,"PlaybackRate"),!e&&!t)return null;var n={};return e&&("target"in e.attributes&&(n.targetLatency=parseInt(e.attributes.target,10)/1e3),"max"in e.attributes&&(n.maxLatency=parseInt(e.attributes.max,10)/1e3),"min"in e.attributes&&(n.minLatency=parseInt(e.attributes.min,10)/1e3)),t&&("max"in t.attributes&&(n.maxPlaybackRate=parseFloat(t.attributes.max)),"min"in t.attributes&&(n.minPlaybackRate=parseFloat(t.attributes.min))),n}function Xm(e){if(!(e=yn(e,"SupplementalProperty")).length)return null;for(var t=(e=l(e)).next();!t.done;t=e.next())if("urn:mpeg:dash:chaining:2016"==(t=t.value).attributes.schemeIdUri)return t.attributes.value;return null}function Ym(e,t,n,i,r){var a=t.xc;a||(a=An(i,"mediaPresentationDuration",In),e.l.xc=a);var o=0;e.h&&e.h.presentationTimeline&&e.R&&(o=e.h.presentationTimeline.dc());var s=[],u=o;i=yn(i,"Period");for(var h=0;h<i.length;h++){var c=i[h],d=i[h+1],p=An(c,"start",In,u),f=c.attributes.id,g=An(c,"duration",In);p=0==h&&0==p&&e.R?o:p;var m=null;if(d){var v=An(d,"start",In);null!=v&&(m=v-p+o)}else null!=a&&(m=a-p+o);if(v=rt,m&&g&&Math.abs(m-g)>v&&m>g&&e.L++,null==m&&(m=g),!(null!==e.N&&null!==f&&null!==p&&p<e.N)||e.F.includes(f)||h+1==i.length){if(null!==p&&(null===e.N||p>e.N)&&(e.N=p),u=qm(e,t,n,{start:p,duration:m,node:c,Af:null==m||!d}),s.push(u),t.za.id&&m&&e.qa.set(t.za.id,m),null==m){u=null;break}u=p+m}}if(r)for(n=(t=l(s)).next();!n.done;n=t.next())n=n.value.id,e.F.includes(n)||e.F.push(n);else e.F=s.map(function(e){return e.id});return null!=a?{periods:s,duration:a+o,Oi:!1}:{periods:s,duration:u,Oi:!0}}function qm(e,t,n,i){t.za=tv(e,i.node,null,n),t.oa=i,t.za.xb=t.xb,t.za.id||(t.za.id="__shaka_period_"+i.start);var r=yn(i.node,"EventStream");n=t.presentationTimeline.Lb();for(var a=(r=l(r)).next();!a.done;a=r.next())iv(e,i.start,i.duration,a.value,n);for(r=(n=l(n=yn(i.node,"SupplementalProperty"))).next();!r.done;r=n.next())"urn:mpeg:dash:urlparam:2014"==(r=r.value).attributes.schemeIdUri&&(r=Qm(e,r))&&(t.Qb=r);if(n=yn(i.node,"AdaptationSet").map(function(n,i){return Jm(e,t,i,n)}).filter(Yi),t.Hb){r=[];for(var o=(a=l(n)).next();!o.done;o=a.next())for(var s=(o=l(o.value.$l)).next();!s.done;s=o.next())r.push(s.value);if(r.length!=new Set(r).size)throw new Ce(2,4,4018)}for(r=new Map,o=(a=l(n)).next();!o.done;o=a.next())for(s=(o=l(o.value.qk)).next();!s.done;s=o.next()){var u=l(s.value);s=u.next().value,u=u.next().value,r.set(s,u)}if(r.size)for(a=null,s=(o=l(n)).next();!s.done;s=o.next()){u=[];for(var c=l((s=s.value).streams),d=c.next(),p={};!d.done;p={ii:void 0},d=c.next())if(p.ii=d.value,r.has(p.ii.originalId)){a||(a=yn(i.node,"AdaptationSet").map(function(n,i){return Jm(e,t,i,n)}).filter(Yi));for(var f=(d=l(a)).next();!f.done;f=d.next())(f=f.value.streams.find(function(e){return function(t){return t.originalId==e.ii.originalId}}(p)))&&(f.dependencyStream=r.get(f.originalId),f.originalId+=f.dependencyStream.originalId,u.push(f))}u.length&&s.streams.push.apply(s.streams,h(u))}if(i=n.filter(function(e){return!e.pi}),n=n.filter(function(e){return e.pi}),!e.g.disableIFrames)for(r=(n=l(n)).next();!r.done;r=n.next())for(a=(r=r.value).pi.split(" "),s=(o=l(i)).next();!s.done;s=o.next())if(s=s.value,a.includes(s.id))for(u=(s=l(s.streams)).next();!u.done;u=s.next())mr(u.value,r.streams);if(n=Zm(e.g.disableAudio,i,"audio"),r=Zm(e.g.disableVideo,i,"video"),a=Zm(e.g.disableText,i,nt),i=Zm(e.g.disableThumbnails,i,"image"),0===r.length&&0===n.length)throw new Ce(2,4,4004);return{id:t.za.id,audioStreams:n,videoStreams:r,textStreams:a,imageStreams:i}}function Zm(e,t,n){return e||!t.length?[]:t.reduce(function(e,t){return t.contentType!=n||e.push.apply(e,h(t.streams)),e},[])}function Jm(t,n,i,r){function a(e){var i=e.attributes["dvb:fontFamily"];e=e.attributes["dvb:url"],i&&e&&(e=Ze(n.va.jb(),[e],n.Qb()),t.j.addFont(i,e[0]))}function o(e){switch(e){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(e){switch(e){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}n.va=tv(t,r,n.za,null),n.va.position=i;var u=!1,c=(i=yn(r,"Role")).map(function(e){return e.attributes.value}).filter(Yi),d=void 0,p=n.va.contentType==nt;p&&(d="subtitle");for(var f=(i=l(i)).next();!f.done;f=i.next()){var g=(f=f.value).attributes.schemeIdUri;if(null==g||"urn:mpeg:dash:role:2011"==g)switch(f=f.attributes.value,f){case"main":u=!0;break;case"caption":case"subtitle":d=f}}var m=yn(r,"EssentialProperty");i=null;var v=!1;f=null,g=!1;for(var y=(m=l(m)).next();!y.done;y=m.next()){var b=(y=y.value).attributes.schemeIdUri;if("http://dashif.org/guidelines/trickmode"==b)i=y.attributes.value;else if("urn:mpeg:mpegB:cicp:TransferCharacteristics"==b)var S=s(parseInt(y.attributes.value,10));else if("urn:mpeg:mpegB:cicp:ColourPrimaries"==b)var T=o(parseInt(y.attributes.value,10));else"urn:mpeg:mpegB:cicp:MatrixCoefficients"!=b&&("urn:mpeg:dash:ssr:2023"==b&&t.g.dash.enableFastSwitching?v=!0:"urn:dvb:dash:fontdownload:2014"==b?a(y):"urn:mpeg:dash:urlparam:2014"==b&&(f=Qm(t,y))||(g=!0))}if(g)return null;var A=null;for(m=(g=l(g=yn(r,"SupplementalProperty"))).next();!m.done;m=g.next())"http://dashif.org/guidelines/last-segment-number"==(y=(m=m.value).attributes.schemeIdUri)?A=parseInt(m.attributes.value,10)-1:"urn:mpeg:mpegB:cicp:TransferCharacteristics"==y?S=s(parseInt(m.attributes.value,10)):"urn:mpeg:mpegB:cicp:ColourPrimaries"==y?T=o(parseInt(m.attributes.value,10)):"urn:dvb:dash:fontdownload:2014"==y?a(m):"urn:mpeg:dash:urlparam:2014"==y&&(f=Qm(t,m));f&&(n.Qb=f),f=yn(r,"Accessibility");var E,x=new Map;for(g=(f=l(f)).next();!g.done;g=f.next())if(g=(m=g.value).attributes.schemeIdUri,m=m.attributes.value,"urn:scte:dash:cc:cea-608:2015"!=g||t.g.disableText)if("urn:scte:dash:cc:cea-708:2015"!=g||t.g.disableText)"urn:mpeg:dash:role:2011"==g?null!=m&&(c.push(m),"captions"==m&&(d="caption")):"urn:tva:metadata:cs:AudioPurposeCS:2007"==g&&("1"==m?E="visually impaired":"2"==m?E="hard of hearing":"9"==m&&(E="spoken subtitles"));else if(g=1,null!=m)for(y=(m=l(m.split(";"))).next();!y.done;y=m.next()){b=y.value;var C=y=void 0;b.includes("=")?(y="svc"+(b=b.split("="))[0],C=b[1].split(",")[0].split(":").pop()):(y="svc"+g,g++,C=b),x.set(y,ht(C))}else x.set("svc1","und");else if(g=1,null!=m)for(b=(y=l(m=m.split(";"))).next();!b.done;b=y.next()){C=b.value;var k=b=void 0;C.includes("=")?(b=(C=C.split("="))[0].startsWith("CC")?C[0]:"CC"+C[0],k=C[1]||"und"):(b="CC"+g,2==m.length?g+=2:g++,k=C),x.set(b,ht(k))}else x.set("CC1","und");var I=bg(f=yn(r,"ContentProtection"),t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI);n.va.encrypted=0<f.length;var M=ht(n.va.language||"und"),P=n.va.label,D=new Map;if(r=yn(r,"Representation"),!t.g.ignoreSupplementalCodecs){for(f=[],m=(g=l(r)).next();!m.done;m=g.next())(m=En(y=m.value,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&((y=hn(y)).attributes.codecs=m.split(" ").join(","),y.attributes.id&&(y.attributes.supplementalId=y.attributes.id+"_supplementalCodecs"),f.push(y));r.push.apply(r,h(f))}if(f=r.map(function(i){var r=function(t,n,i,r,a,o,s,u,l,h,c,d){n.M=tv(t,h,n.va,null);var p=n.M.id;if(t.Z=Math.min(t.Z,n.M.xb),t.P=0<t.Z,!function(e){var t=e.Sd?1:0;return t+=e.Cc?1:0,0==(t+=e.Qc?1:0)?e.contentType==nt||"application"==e.contentType:(1!=t&&(e.Sd&&(e.Cc=null),e.Qc=null),!0)}(n.M))return null;var f=n.oa.start;n.bandwidth=An(h,"bandwidth",Ln)||0,n.roles=u;var g=yn(h,"SupplementalProperty"),m=yn(h,"EssentialProperty"),v=yn(h,"ContentProtection");h=null;var y,b,S=m.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri});(S||(S=g.find(function(e){return"urn:mpeg:dash:urlparam:2014"==e.attributes.schemeIdUri})))&&(h=Qm(t,S)),h&&(n.Qb=h),h=(S=n.M.contentType)==nt||"application"==S,S="image"==S,v.length&&(n.va.encrypted=!0);try{var T=void 0;if(i.Fg){var A=n.M.jb,E=n.Qb,x=Zr(Ze(A(),[i.Fg.El],E()),t.g.retryParameters);T={bitsKey:128,blockCipherMode:"CBC",iv:i.Fg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var n,i,r;return L(function(a){if(1==a.g)return _(a,ov(t,x,6),2);if(3!=a.g){if(!(n=a.h).data||16!=n.data.byteLength)throw new Ce(2,4,4049);return i={name:"AES-CBC"},r=T,_(a,e.crypto.subtle.importKey("raw",n.data,i,!0,["decrypt"]),3)}r.cryptoKey=a.h,T.fetchKey=void 0,w(a)})}}}if(n.M.aesKey=T,A=function(e,n,i,r){return rv(t,e,n,i,r)},n.M.Sd)var C=function(e,t,n){var i=Number(xg(e,Bg,"presentationTimeOffset"))||0,r=xg(e,Bg,"timescale"),a=1;r&&(a=Ln(r)||1);var o=i/a||0,s=Og(e,Bg,n);!function(e,t){if(jg(e,t),!Fg(e))throw new Ce(2,4,4002)}(e,s);var u=cn(e);return{endTime:-1,timeline:-1,bd:function(){var e=Cg(u,Bg,"RepresentationIndex"),n=u.M.jb();return e&&(e=Ge(e.attributes.sourceURL))&&(n=Ze(n,[e],u.Qb())),e=Fg(u),Ug(u,t,s,n,e.start,e.end,o)},timescale:a}}(n,A,T);else if(n.M.Cc)C=function(e,t,n){var i=Og(e,Hg,n),r=function(e){var t=function(e){return[e.M.Cc,e.va.Cc,e.za.Cc].filter(Yi).map(function(e){return yn(e,"SegmentURL")}).reduce(function(e,t){return 0<e.length?e:t}).map(function(t){return t.attributes.indexRange&&!e.xh&&(e.xh=!0),{Ll:Ge(t.attributes.media),start:(t=An(t,"mediaRange",Mn,{start:0,end:null})).start,end:t.end}})}(e),n=(e=Ag(e,Hg)).De;0==n&&(n=1);var i=0;return e.mb?i=e.mb*(n-1):e.timeline&&0<e.timeline.length&&(i=e.timeline[0].start),{mb:e.mb,startTime:i,De:n,Ob:e.Ob,timescale:e.timescale,timeline:e.timeline,Jd:t}}(e);if(!r.mb&&!r.timeline&&1<r.Jd.length)throw new Ce(2,4,4002);if(!r.mb&&!e.oa.duration&&!r.timeline&&1==r.Jd.length)throw new Ce(2,4,4002);if(r.timeline&&0==r.timeline.length)throw new Ce(2,4,4002);var a=null,o=null;e.za.id&&e.M.id&&(o=t.get(e.za.id+","+e.M.id))&&(a=o.segmentIndex);var s=function(e,t,n,i,r,a,o,s,u,l){var h=i.Jd.length;i.timeline&&i.timeline.length!=i.Jd.length&&(h=Math.min(i.timeline.length,i.Jd.length));for(var c=e-i.Ob,d=t?e+t:1/0,p=[],f=i.startTime,g={},m=0;m<h;g={og:void 0,ag:void 0},m++){g.ag=i.Jd[m];var v=f;f=void 0,f=null!=i.mb?v+i.mb:i.timeline?i.timeline[m].end:v+t,g.og=null,(g=new qo(e+v,e+f,function(e){return function(){return null==e.og&&(e.og=Ze(n(),[e.ag.Ll],l())),e.og}}(g),g.ag.start,g.ag.end,r,c,e,d,[],"",null,null,Jo,a)).codecs=s,g.mimeType=o,g.bandwidth=u,p.push(g)}return p}(e.oa.start,e.oa.duration,e.M.jb,r,i,n,e.M.mimeType,e.M.codecs,e.bandwidth,e.Qb);return t=!a,a?a.re(s,e.presentationTimeline.Lb()):a=new Gu(s),e.presentationTimeline.ue(s),e.Hb&&e.oa.Af||a.Cd(e.oa.start,e.oa.duration?e.oa.start+e.oa.duration:1/0,t),o&&(o.segmentIndex=a),{endTime:-1,timeline:-1,bd:function(){return a&&0!=a.getNumReferences()||a.If(s),Promise.resolve(a)},timescale:r.timescale}}(n,t.s,T);else if(n.M.Qc)C=Vg(n,A,t.s,!!t.h,t.g.dash.initialSegmentLimit,t.qa,T,d,!1,t.C);else{var k=n.oa.duration||0,I=n.M.jb,M=n.M.mimeType,P=n.M.codecs;C={endTime:-1,timeline:-1,bd:function(){var e=Vu(f,k,I());return e.Ib(function(e){e.mimeType=M,e.codecs=P}),Promise.resolve(e)},timescale:1}}}catch(e){if((h||S)&&4002==e.code)return null;throw e}if(d=function(e,t,n,i){var r=bg(e,n,i);if(t.Qi)e=1==t.drmInfos.length&&!t.drmInfos[0].keySystem,n=0==r.drmInfos.length,(0==t.drmInfos.length||e&&!n)&&(t.drmInfos=r.drmInfos),t.Qi=!1;else if(0<r.drmInfos.length&&(t.drmInfos=t.drmInfos.filter(function(e){return r.drmInfos.some(function(t){return t.keySystem==e.keySystem})}),0==t.drmInfos.length))throw new Ce(2,4,4008);return r.Li||t.Li}(v,i,t.g.ignoreDrmInfo,t.g.dash.keySystemsByURI),d=new Set(d?[d]:[]),v=!1,g.some(function(e){return"tag:dolby.com,2018:dash:EC3_ExtensionType:2018"==e.attributes.schemeIdUri&&"JOC"==e.attributes.value})&&(v=!0),g=!1,h&&(g=u.includes("forced_subtitle")||u.includes("forced-subtitle")),S&&((m=m.find(function(e){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(e.attributes.schemeIdUri)}))&&(y=m.attributes.value),!y))return null;h=n.M.codecs,n.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(h.includes("hvc1.2.4.L153.B0")||h.includes("hev1.2.4.L153.B0"))&&(b="PQ"),m=n.M.id?n.za.id+","+n.M.id:"",t.G.length&&p&&t.u.set(n.za.id+","+p,function(e){function t(e){return e?((e=cn(e)).Sd=null,e.Cc=null,e.Qc=Hn(e.Qc),e.Uf=null,e):null}return(e=cn(e)).za=t(e.za),e.va=t(e.va),e.M=t(e.M),e.oa&&(e.oa=cn(e.oa),e.oa.node=null),e}(n)),n.M.Uf&&function(e,t,n,i){if(!e.$.has(t)){e.$.add(t);var r,a=An(t,"presentationTime",Dn)||0,o=Sn(t,"UTCTiming");(r=o&&o.attributes.schemeIdUri)&&(r=!("urn:mpeg:dash:utc:http-ntp:2014"===(o=o.attributes.schemeIdUri)||"urn:mpeg:dash:utc:ntp:2014"===o||"urn:mpeg:dash:utc:sntp:2014"===o)),t=r?1e3*(An(t,"wallClockTime",kn)||0):ws(t=An(t,"wallClockTime",Dn)||0),a=(n=new Date(t-a/n.timescale*1e3)).getTime()/1e3,isNaN(a)||(i.s||i.ai(a),i=new V("prft",i=(new Map).set("detail",{wallClockTime:t,programStartDate:n})),e.j.onEvent(i))}}(t,n.M.Uf,C,n.presentationTimeline),-1!=C.endTime&&null!=n.za.id&&null!=n.M.id&&((p=t.C.get(n.za.id))?(p.endTime=C.endTime,p.Qh.includes(n.M.id)||p.Qh.push(n.M.id),t.C.set(n.za.id,p)):t.C.set(n.za.id,{endTime:C.endTime,timeline:C.timeline,Qh:[n.M.id]}));var D=m&&t.s.has(m)?t.s.get(m):{id:t.ua++,originalId:n.M.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){D.segmentIndex&&(D.segmentIndex.release(),D.segmentIndex=null)},segmentIndex:null,mimeType:n.M.mimeType,codecs:h,frameRate:n.M.frameRate,pixelAspectRatio:n.M.pixelAspectRatio,bandwidth:n.bandwidth,width:n.M.width,height:n.M.height,kind:r,encrypted:0<i.drmInfos.length,drmInfos:i.drmInfos,keyIds:d,language:a,originalLanguage:n.va.language,label:o,type:n.va.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:n.M.emsgSchemeIdUris,roles:u,forced:g,channelsCount:n.M.Nf,audioSamplingRate:n.M.audioSamplingRate,spatialAudio:v,closedCaptions:l,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:y,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([xi(n.M.mimeType,n.M.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return D.createSegmentIndex=function(){var e;return L(function(t){if(1==t.g)return D.segmentIndex?t.A(0):(e=D,_(t,C.bd(),3));e.segmentIndex=t.h,w(t)})},m&&n.Hb&&!t.s.has(m)&&(n=n.za.id||"",t.D.has(n)||t.D.set(n,[]),t.s.set(m,D),t.D.get(n).push(m)),D}(t,n,I,d,M,P,u,c,x,i,E,A);return r&&(r.hdr=r.hdr||S,r.colorGamut=r.colorGamut||T,r.fastSwitching=v,i=i.attributes.dependencyId)?(r.baseOriginalId=i,D.set(i,r),null):r}).filter(function(e){return!!e}),0==f.length&&0==D.size){if(i="image"==n.va.contentType,t.g.dash.ignoreEmptyAdaptationSet||p||i)return null;throw new Ce(2,4,4003)}if(!n.va.contentType||"application"==n.va.contentType)for(n.va.contentType=av(f[0].mimeType,f[0].codecs),g=(p=l(f)).next();!g.done;g=p.next())g.value.type=n.va.contentType;for(p=n.va.id||"__fake__"+t.ua++,m=(g=l(f)).next();!m.done;m=g.next()){for(m=m.value,b=(y=l(I.drmInfos)).next();!b.done;b=y.next())(b=b.value).keyIds=b.keyIds&&m.keyIds?new Set([].concat(h(b.keyIds),h(m.keyIds))):b.keyIds||m.keyIds;m.groupId=p}return r=r.map(function(e){return e.attributes.supplementalId||e.attributes.id}).filter(Yi),{id:p,contentType:n.va.contentType,language:M,Jn:u,streams:f,drmInfos:I.drmInfos,pi:i,$l:r,qk:D}}function Qm(e,t){if((t=Tn(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&An(t,"useMPDUrlQuery",Nn,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return"$querypart$"==n?e.Y:n.split("&").map(function(t){if("$querypart$"==t)return e.Y;var n=/\$query:(.*?)\$/g.exec(t);if(n&&2==n.length){n=n[1];var i=new ve(e.Y).get(n);if(i.length)return n+"="+i[0]}return t}).join("&")}}return null}function $m(e){var t,n;return L(function(i){switch(i.g){case 1:return t=0,S(i,2),_(i,Fm(e),4);case 4:t=i.h,A(i,3);break;case 2:if(n=E(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),ev(e,t),w(i)}})}function ev(e,t){if(!(0>e.J)){var n=e.J;0<=e.g.updatePeriod&&(n=e.g.updatePeriod),e.K.X(Math.max(n-t,St(e.sa)))}}function tv(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Nf:null,audioSamplingRate:null,xb:0,cg:1,encrypted:!1},i=i||n.jb;var r,a=t.attributes.id,o=t.attributes.supplementalId,s=yn(t,"BaseURL"),u=!1;if(e.i)for(var h=l(s),c=h.next();!c.done;c=h.next()){var d=c.value;c=d.attributes.serviceLocation,d=_n(d),c&&d&&(Qg(e.i,a,c,d),u=!0)}u&&e.i||(r=s.map(_n));var p=e.i;e=t.attributes.contentType||n.contentType,h=t.attributes.mimeType||n.mimeType,c=pl([t.attributes.codecs||n.codecs]).join(","),d=An(t,"frameRate",On)||n.frameRate;var f=t.attributes.sar||n.pixelAspectRatio,g=function(e,t){t=t.slice();for(var n=(e=l(e)).next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}(yn(t,"InbandEventStream"),n.emsgSchemeIdUris),m=yn(t,"AudioChannelConfiguration");m=function(e){for(var t=(e=l(e)).next();!t.done;t=e.next()){var n=(t=t.value).attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(!(t=parseInt(t,10)))continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],!(t=parseInt(t,16)))continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),!(t=parseInt(t,16)))continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&0<t&&t<n.length)return n[t]}}return null}(m)||n.Nf;var v=An(t,"audioSamplingRate",Dn)||n.audioSamplingRate;e||(e=av(h,c));var y=Sn(t,"SegmentBase"),b=Sn(t,"SegmentTemplate"),_=y&&An(y,"availabilityTimeOffset",Rn)||0,w=b&&An(b,"availabilityTimeOffset",Rn)||0,S=s&&s.length&&An(s[0],"availabilityTimeOffset",Rn)||0;_=n.xb+S+_+w,w=null,(S=Sn(t,"SegmentSequenceProperties"))&&(S=An(S,"cadence",Ln))&&(w=S),S=t.attributes.label;var T=yn(t,"Label");return T&&T.length&&bn(T=T[0])&&(S=bn(T)),{jb:function(){return Ze(i(),s.length?p&&u?$g(p,a):r||[]:[])},Sd:y||n.Sd,Cc:Sn(t,"SegmentList")||n.Cc,Qc:b||n.Qc,Uf:Sn(t,"ProducerReferenceTime")||n.Uf,width:An(t,"width",Dn)||n.width,height:An(t,"height",Dn)||n.height,contentType:e,mimeType:h,codecs:c,frameRate:d,pixelAspectRatio:f,emsgSchemeIdUris:g,id:o||a,originalId:a,language:t.attributes.lang,Nf:m,audioSamplingRate:v,xb:_,xf:null,cg:w||n.cg,label:S||null,encrypted:!1}}function nv(e,t,n,i){var r,a,o,s,u,l,h;return L(function(c){if(1==c.g)return r=[Ge(n)],a=Ze(t(),r),(o=Zr(a,e.g.retryParameters)).method=i,s=e.j.networkingEngine.request(4,o,{isPreload:e.ba()}),Kr(e.O,s),_(c,s.promise,2);if(u=c.h,"HEAD"==i){if(!u.headers||!u.headers.date)return c.return(0);l=u.headers.date}else l=Ne(u.data);return h=Date.parse(l),isNaN(h)?c.return(0):c.return(h-Date.now())})}function iv(e,t,n,i,r){for(var a=i.attributes.schemeIdUri||"",o=i.attributes.value||"",s=An(i,"timescale",Dn)||1,u=An(i,"presentationTimeOffset",Dn)||0,h=(i=l(yn(i,"Event"))).next();!h.done;h=i.next()){var c=An(h=h.value,"presentationTime",Dn)||0,d=An(h,"duration",Dn)||0;d=(c=Math.max((c-u)/s+t,t))+d/s,null!=n&&(c=Math.min(c,t+n),d=Math.min(d,t+n)),d<r||(h={schemeIdUri:a,value:o,startTime:c,endTime:d,id:h.attributes.id||"",timescale:s,eventElement:Gn(h),eventNode:Hn(h)},e.j.onTimelineRegionAdded(h))}}function rv(e,t,n,i,r){var a,o,s,u;return L(function(l){return 1==l.g?(a=ta,o=r?0:1,s=gl(t,n,i,e.g.retryParameters),_(l,ov(e,s,a,{type:o}),2)):(u=l.h,l.return(u.data))})}function av(e,t){return ji(t=xi(e,t))?nt:e.split("/")[0]}function ov(e,t,n,i){return i||(i={}),i.isPreload=e.ba(),t=e.j.networkingEngine.request(n,t,i),Kr(e.O,t),t.promise}function sv(){}(i=Bm.prototype).configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.ba=t),n&&this.h&&this.h.presentationTimeline.T()&&this.K.Ka(),this.i&&this.i.configure(this.g),this.m&&(this.m.Dj(this.g.dash.multiTypeVariantsAllowed&&Ut()),this.m.Jj(this.g.dash.useStreamOnceInPeriodFlattening))},i.start=function(e,t){var n,i=this;return L(function(r){if(1==r.g)return i.na=t.isLowLatencyMode(),i.B=[e],i.j=t,_(r,Fm(i),2);if(n=r.h,i.j&&ev(i,n),!i.j)throw new Ce(2,7,7001);return r.return(i.h)})},i.stop=function(){for(var e=l(this.s.values()),t=e.next();!t.done;t=e.next())(t=t.value).segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.s.clear(),this.D.clear(),this.u.clear(),this.C.clear(),this.l={Kf:"",type:"",profiles:[],xc:null,xb:0,jb:null,we:0},this.m=null,null!=this.K&&(this.K.stop(),this.K=null),this.i&&this.i.destroy(),this.H&&(this.H.release(),this.H=null),this.$.clear(),this.O.destroy()},i.update=function(){var e,t=this;return L(function(n){return 1==n.g?(S(n,2),_(n,Fm(t),4)):2!=n.g?A(n,0):(e=E(n),t.j&&e?(t.j.onError(e),void w(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.T()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Jc();var n=t.segmentIndex.find(e);null!=n&&(t=t.segmentIndex.get(n))&&(this.J=t.endTime-e,ev(this,0))}}},i.banLocation=function(e){this.i&&this.i.banLocation(e)},i.setMediaElement=function(e){this.I=e},H("shaka.dash.DashParser",Bm),so("application/dash+xml",function(){return new Bm}),so("video/vnd.mpeg.dash.mpd",function(){return new Bm}),H("shaka.dependencies",sv),sv.has=function(e){return hv.has(e)},sv.add=function(e,t){if(!lv[e])throw Error(e+" is not supported");e==uv?kt("mux.js","mux.js is no longer used in Shaka Player."):hv.set(e,function(){return t})};var uv="muxjs",lv={Kn:uv,ISOBoxer:"ISOBoxer"};sv.Allowed=lv;var hv=new Map([["ISOBoxer",function(){return e.ISOBoxer}]]);function cv(){this.j=new Ie(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase()?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new Ie(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function dv(){var t=e.ManagedMediaSource||e.MediaSource;return!(!t||!t.isTypeSupported)}function pv(t){return Me(),void 0!==e.matchMedia&&e.matchMedia("(color-gamut: p3)").matches?t?"HLG":"PQ":"SDR"}function fv(){cv.call(this),this.g=new Ie(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new Ie(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}function gv(){if(!mv())throw Error("Not a Chromecast device!");cv.call(this),this.h=new Ie(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new Ie(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return(e=e.toLowerCase()).includes("android")?vv:e.includes("fuchsia")?yv:bv})}function mv(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}(i=cv.prototype).kc=function(){return!!navigator.mediaCapabilities},i.Ja=function(){return this.j.value()},i.Fa=function(){return this.l.value()},i.ze=function(){return!1},i.tj=function(){return!1},i.yf=function(){return!1},i.uj=function(){return!1},i.ye=function(){return!1},i.rd=function(){return!0},i.sd=function(){return!0},i.Ee=function(){return!0},i.zj=function(){return 0},i.qc=function(){return Promise.resolve({width:1/0,height:1/0})},i.Lj=function(){return!1},i.ei=function(){return!1},i.ab=function(e){var t=this.Ja();return"TV"!==t&&"CONSOLE"!==t&&"CAST"!==t||(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},i.ki=function(){return!!e.indexedDB},i.rj=function(){return[]},i.ig=function(){return!1},i.hj=function(){return!1},i.Uh=function(){return!1},i.jg=function(){return!0},i.ij=function(){return!1},i.Tj=function(){return!0},i.qd=function(){return!1},i.Gh=function(e){return"com.apple.fps"===e},i.toString=function(){return"Device: "+this.Sb()+" v"+this.Ea()+"; Type: "+this.Ja()},m(fv,cv),(i=fv.prototype).Ea=function(){return this.g.value()},i.Sb=function(){return"Apple Browser"},i.Ja=function(){return this.h.value()},i.Fa=function(){return"WEBKIT"},i.kc=function(){return!1},i.ze=function(e,t){return"audio"===t},i.yf=function(){return!0},i.uj=function(e){return"audio"===e},i.ab=function(e){return cv.prototype.ab.call(this,e),e.abr.minTimeToSwitch=.5,e},i.ig=function(){return!0},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(Pe=function(){return new fv}),m(gv,cv),(i=gv.prototype).Ea=function(){return this.h.value()},i.Sb=function(){return"Chromecast with "+this.g.value()},i.Ja=function(){return"CAST"},i.Fa=function(){return"CHROMIUM"},i.kc=function(){return cv.prototype.kc.call(this)&&this.g.value()!==bv},i.sd=function(){return this.g.value()!==bv},i.zj=function(){switch(this.g.value()){case vv:return 0;case yv:return 3;default:return 1}},i.qc=function(){var t,n,i,r;return L(function(a){switch(a.g){case 1:if(t=e.cast&&cast.__platform__&&cast.__platform__.canDisplayType,n={width:1280,height:720},S(a,2),!(i=t)){a.A(4);break}return _(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:i=a.h;case 4:if(i){n.width=3840,n.height=2160,a.A(6);break}if(!(r=t)){a.A(7);break}return _(a,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:r=a.h;case 7:r&&(n.width=1920,n.height=1080);case 6:A(a,3);break;case 2:X("Failed to check canDisplayType:",E(a));case 3:return a.return(n)}})},i.ab=function(e){return cv.prototype.ab.call(this,e),e.streaming.stallSkip=0,e},i.ki=function(){return!1},i.qd=function(){return!0};var vv="Android",yv="Fuchsia",bv="Linux";function _v(){cv.call(this);var e=this;this.i=new Ie(function(){var e=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return e?parseInt(e[2],10):null}),this.g=new Ie(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new Ie(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"windows"==navigator.userAgentData.platform.toLowerCase():!!navigator.platform&&navigator.platform.toLowerCase().includes("win32")}),this.u=new Ie(function(){return!navigator.userAgent.match(/Edge?\//)||!e.h.value()}),this.s=new Ie(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new Ie(function(){return navigator.userAgentData&&navigator.userAgentData.platform?"android"==navigator.userAgentData.platform.toLowerCase():!!navigator.userAgent.includes("Android")})}function wv(){cv.apply(this,arguments)}function Sv(){cv.call(this),this.g=new Ie(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}function Tv(){cv.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}function Av(){cv.apply(this,arguments)}function Ev(){cv.call(this),this.h=new Ie(function(){return navigator.userAgent.includes("DT_STB_BCM")}),this.g=new Ie(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}function xv(){cv.call(this),this.g=function(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}()}function Cv(){cv.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}function kv(){var e=null;try{e="undefined"!=typeof Windows?Windows:chrome.webview.hostObjects.sync.Windows}catch(e){}return e}function Iv(e,t,n){this.type=e,this.ka=t,this.segments=n||null}function Mv(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=void 0===i?null:i}function Pv(e,t){return t?e.toString():(t=(new Set).add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Lv(e,t){return(e=e.attributes.filter(function(e){return e.name==t})).length?e[0]:null}function Dv(e,t,n){return(e=Lv(e,t))?e.value:n||null}function Rv(e,t){if(!(e=Lv(e,t)))throw new Ce(2,4,4023,t);return e.value}function Nv(e,t,n){n=void 0===n?[]:n,this.ka=t,this.g=e,this.Ac=n}function Ov(e,t){this.name=e,this.value=t}function Uv(e,t){return e.filter(function(e){return e.name==t})}function Bv(e,t){return e.filter(function(e){return Rv(e,"TYPE")==t})}function Fv(e,t){for(var n=(e=l(e)).next();!n.done;n=e.next())if((n=n.value).name===t)return n;return null}function jv(e,t,n){return n=void 0===n?0:n,(e=Fv(e,t))?Number(e.value):n}function Gv(e,t,n){return t?Hv(e,[t],n):[]}function Hv(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(e){return Vv(e,n)})),Ze(e,i)}function Vv(e,t){if(!t||!t.size)return e;var n=(e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}")).match(/{\$\w*}/g);if(n)for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=(i=i.value).slice(2,i.length-1),a=t.get(r);if(!a)throw new Ce(2,4,4039,r);e=e.replace(i,a)}return e}function Wv(){this.g=0}function zv(e,t){var n=(t=(t=Ne(t)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n").trim()).split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(n[0]))throw new Ce(2,4,4015);t=0;for(var i=!0,r=l(n),a=r.next();!a.done;a=r.next())if(a=a.value,/^#(?!EXT)/m.test(a)||i)i=!1;else{if(a=Kv(e,a),--e.g,Xv.includes(a.name)){t=1;break}"EXT-X-STREAM-INF"==a.name&&(i=!0)}for(r=[],i=!0,a=0;a<n.length;a++){var o=n[a],s=n[a+1];if(/^#(?!EXT)/m.test(o)||i)i=!1;else{if(o=Kv(e,o),Yv.includes(o.name)){if(1!=t)throw new Ce(2,4,4017);o=n.splice(a,n.length-a),n=[],i=[],a=[],s=null;for(var u=(o=l(o)).next();!u.done;u=o.next())u=u.value,/^(#EXT)/.test(u)?(u=Kv(e,u),Xv.includes(u.name)?r.push(u):"EXT-X-MAP"==u.name?s=u:"EXT-X-PART"==u.name?a.push(u):"EXT-X-PRELOAD-HINT"==u.name?"PART"==Dv(u,"TYPE")?a.push(u):"MAP"==Dv(u,"TYPE")&&(u.name="EXT-X-MAP",s=u):i.push(u)):/^#(?!EXT)/m.test(u)||(u=u.trim(),s&&i.push(s),n.push(new Nv(u,i,a)),i=[],a=[]);return a.length&&(s&&i.push(s),n.push(new Nv("",i,a))),new Iv(t,r,n)}r.push(o),"EXT-X-STREAM-INF"==o.name&&(o.attributes.push(new Ov("URI",s)),i=!0)}}return new Iv(t,r)}function Kv(e,t){e=e.g++;var n=t.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!n)throw new Ce(2,4,4016,t);t=n[1];var i,r=n[2];if(n=[],r){var a;(a=rn(r=new tn(r),/^([^,=]+)(?:,|$)/g))&&(i=a[1]);for(var o=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;a=rn(r,o);)n.push(new Ov(a[1],a[2]||a[3])),nn(r)}return new Mv(e,t,n,i)}mv()&&(Pe=function(){return new gv}),m(_v,cv),(i=_v.prototype).Ea=function(){return this.i.value()},i.Sb=function(){return this.g.value()},i.ze=function(e){return!!Mr(e)&&"Edge"===this.g.value()&&this.h.value()},i.tj=function(){return"Edge"===this.g.value()&&this.h.value()},i.yf=function(){return"Edge"===this.g.value()&&this.h.value()},i.sd=function(){return this.u.value()},i.ab=function(e){if(cv.prototype.ab.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},i.Uh=function(){return"Edge"===this.g.value()||this.s.value()},i.qd=function(){if("GECKO"===this.Fa()){var e=this.Ea();return null!==e?100<=e:cv.prototype.qd.call(this)}return cv.prototype.qd.call(this)},i.Gh=function(e){return"GECKO"===this.Fa()?e.startsWith("com.microsoft.playready.recommendation"):cv.prototype.Gh.call(this,e)},Le=function(){return new _v},m(wv,cv),(i=wv.prototype).Ea=function(){return null},i.Sb=function(){return"Hisense"},i.Ja=function(){return"TV"},i.kc=function(){return!1},i.qc=function(){var t={width:1920,height:1080},n=null;if(e.Hisense_Get4KSupportState)try{n=e.Hisense_Get4KSupportState()}catch(e){}return null==n&&(n=navigator.userAgent.includes("UHD")),n&&(t.width=3840,t.height=2160),Promise.resolve(t)},i.ab=function(e){return cv.prototype.ab.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(Pe=function(){return new wv}),m(Sv,cv),(i=Sv.prototype).Sb=function(){return"PlayStation"},i.Ja=function(){return"CONSOLE"},i.Fa=function(){return"WEBKIT"},i.Ea=function(){return this.g.value()},i.kc=function(){return!1},i.rd=function(){return!1},i.sd=function(){return!1},i.ei=function(){return 4===this.Ea()},i.qc=function(){var t,n,i,r;return L(function(a){switch(a.g){case 1:return t={width:1920,height:1080},n=!1,S(a,2),_(a,e.msdk.device.getDisplayInfo(),4);case 4:i=a.h,n="4K"===i.resolution,A(a,3);break;case 2:return E(a),S(a,5),_(a,e.msdk.device.getDisplayInfoImmediate(),7);case 7:r=a.h,n="4K"===r.resolution,A(a,3);break;case 5:Y("PlayStation: Failed to get the display info:",E(a));case 3:return n&&(t.width=3840,t.height=2160),a.return(t)}})},i.ab=function(e){return cv.prototype.ab.call(this,e),4===this.Ea()&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},i.Uh=function(){return 4===this.Ea()},i.jg=function(){return 4!==this.Ea()},navigator.userAgent.includes("PlayStation")&&(Pe=function(){return new Sv}),m(Tv,cv),(i=Tv.prototype).Ea=function(){return this.g},i.Sb=function(){return"Tizen"},i.Fa=function(){return"CHROMIUM"},i.Ja=function(){return"TV"},i.ze=function(){return!0},i.ye=function(){return 3===this.Ea()},i.kc=function(){return!1},i.rd=function(){var e=this.Ea();return null!==e?4<=e:cv.prototype.rd.call(this)},i.sd=function(){return!1},i.Ee=function(){return this.g&&this.h?5===this.g?5<=this.h:5<this.g:cv.prototype.Ee.call(this)},i.qc=function(){var t=e.devicePixelRatio;t={width:1920<e.screen.width*t?3840:1920,height:1080<e.screen.height*t?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var n=webapis.systeminfo.getMaxVideoResolution();t.width=n.width,t.height=n.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(t.width=7680,t.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(t.width=3840,t.height=2160)}catch(e){Y("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.ab=function(e){return cv.prototype.ab.call(this,e),e.drm.ignoreDuplicateInitData=2!==this.Ea(),3===this.Ea()&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},i.rj=function(){var e=[];return null!==this.g&&5>this.g&&e.push("opus"),e},i.hj=function(){return!0},i.ij=function(){return 3===this.Ea()},navigator.userAgent.includes("Tizen")&&(Pe=function(){return new Tv}),m(Av,cv),Av.prototype.Ea=function(){return null},Av.prototype.Sb=function(){return"Vizio"},Av.prototype.Ja=function(){return"TV"},Av.prototype.kc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(Pe=function(){return new Av}),m(Ev,cv),(i=Ev.prototype).Ea=function(){return this.g.value()},i.Sb=function(){return"WebKit STB"},i.Ja=function(){return"TV"},i.Fa=function(){return"WEBKIT"},i.kc=function(){return!1},i.rd=function(){var e=this.g.value();return null===e||15<=e},i.qc=function(){return Promise.resolve({width:e.screen.width*e.devicePixelRatio,height:e.screen.height*e.devicePixelRatio})},i.jg=function(){return!this.h.value()},(navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("DT_STB_BCM")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||1<navigator.maxTouchPoints||navigator.userAgentData&&navigator.userAgentData.platform&&"macos"==navigator.userAgentData.platform.toLowerCase()||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(Pe=function(){return new Ev}),m(xv,cv),(i=xv.prototype).Ea=function(){return this.g},i.Sb=function(){return"WebOS"},i.Ja=function(){return"TV"},i.Fa=function(){return"CHROMIUM"},i.kc=function(){return!1},i.rd=function(){var e=this.Ea();return null!==e?3<e:cv.prototype.rd.call(this)},i.sd=function(){var e=this.Ea();return null!==e?6<e:cv.prototype.sd.call(this)},i.Ee=function(){var e=this.Ea();return null!==e?3<e:cv.prototype.Ee.call(this)},i.qc=function(){var t={width:1920,height:1080};try{var n=JSON.parse(e.PalmSystem.deviceInfo);t.width=Math.max(1920,n.screenWidth),t.height=Math.max(1080,n.screenHeight)}catch(e){Y("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(t)},i.ab=function(e){return cv.prototype.ab.call(this,e),3===this.Ea()&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},i.Tj=function(){return!1},i.qd=function(){var e=this.Ea();return null!==e?6<=e:cv.prototype.qd.call(this)},navigator.userAgent.includes("Web0S")&&(Pe=function(){return new xv}),m(Cv,cv),(i=Cv.prototype).Ea=function(){return this.h},i.Sb=function(){return"Xbox"},i.Ja=function(){return"CONSOLE"},i.Fa=function(){return this.g?"EDGE":"CHROMIUM"},i.ze=function(){return!0},i.yf=function(){return!0},i.Lj=function(){return this.g},i.qc=function(){var e={width:1920,height:1080},t=kv();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,i=t.Media.Protection.ProtectionCapabilityResult;t=null;do{t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation")}while(t===i.maybe);t===i.probably&&(e.width=3840,e.height=2160)}catch(e){Y("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},i.ab=function(e){return cv.prototype.ab.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},i.ki=function(){return!1},(navigator.userAgent.includes("Xbox One")||null!==kv())&&(Pe=function(){return new Cv}),Mv.prototype.toString=function(e){var t="#"+this.name,n=this.attributes?this.attributes.filter(function(t){return!e||!e.has(t.name)}).map(function(e){return e.name+"="+(isNaN(Number(e.value))?'"'+e.value+'"':e.value)}):[];return this.value&&n.unshift(this.value),0<n.length&&(t+=":"+n.join(",")),t};var Xv="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" "),Yv="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" ");function qv(){}function Zv(e,t){try{var n=Jv(e);return Hr({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(e){return jr(e)}}function Jv(t){var n=t.split(":");if(2>n.length||"data"!=n[0])throw new Ce(2,1,1004,t);if(2>(n=n.slice(1).join(":").split(",")).length)throw new Ce(2,1,1004,t);var i=n[0];t=e.decodeURIComponent(n.slice(1).join(",")),n=i.split(";"),i=n[0];var r=!1;return 1<n.length&&"base64"==n[n.length-1]&&(r=!0,n.pop()),{data:r?Ke(t):Be(t),contentType:i}}function Qv(){var t=this;this.g=this.h=null,this.G=1,this.B=new Map,this.J=new Map,this.C=new Map,this.C.set("video",new Map),this.C.set("audio",new Map),this.C.set(nt,new Map),this.C.set("image",new Map),this.fc=(new Map).set("com.apple.streamingkeydelivery",function(n,i,r){return function(t,n,i,r){var a,o,s,u,l;return L(function(h){if(1==h.g){if("video/mp2t"==i)throw new Ce(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Ce(2,4,4041);if(a=Rv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(a))return h.return(null);o="cenc","SAMPLE-AES"==a&&(o="cbcs"),s=Rv(n,"URI"),u=Je("com.apple.fps",o,[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}],s);var c=new re(s).Gb.replace(/-/g,"").toLowerCase();return(l=32===c.length&&/^[0-9a-f]+$/.test(c)?c:null)||!r?h.A(2):_(h,Gy(t,r),3)}return 2!=h.g&&(l=h.h),l&&u.keyIds.add(l),h.return(u)})}(t,n,i,r)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(e){var t=Rv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=Je("com.widevine.alpha",n,[{initDataType:"cenc",initData:t=Te((t=Jv((t=Rv(e,"URI")).split("?")[0])).data)}]),(e=Dv(e,"KEYID"))&&n.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(n)}else e=Promise.resolve(null);return e}).set("com.microsoft.playready",function(e){var t=Rv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=Je("com.microsoft.playready",n,[{initDataType:"cenc",initData:t=Ta(e=Te((e=Jv((e=Rv(e,"URI")).split("?")[0])).data),t=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),new Set,0)}]),(e=fn(["<PLAYREADY>",ze(e),"</PLAYREADY>"].join("\n")))&&(n.licenseServerUri=vg(e)),n=Promise.resolve(n)}else n=Promise.resolve(null);return n}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(e){var t=Rv(e,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(t)){var n="cenc";"SAMPLE-AES"==t&&(n="cbcs"),n=Je("com.huawei.wiseplay",n,[{initDataType:"cenc",initData:t=Te((t=Jv((t=Rv(e,"URI")).split("?")[0])).data)}]),(e=Dv(e,"KEYID"))&&n.keyIds.add(e.toLowerCase().substr(2)),e=Promise.resolve(n)}else e=Promise.resolve(null);return e}),this.Ya=new Set,this.i=new Map,this.l=null,this.F="",this.gb=new Wv,this.K=-1,this.Z=1/0,this.Y=this.zc=this.Ta=!1,this.D=new zi(function(){t.R&&!t.g.continueLoadingWhenPaused&&(t.P.Da(t.R,"timeupdate"),t.R.paused)?t.P.ra(t.R,"timeupdate",function(){return Ny(t)}):Ny(t)}),this.ua=qy,this.m=null,this.Na=0,this.s=1/0,this.La=this.Ia=this.O=0,this.U=new zr,this.H=new Map,this.I=new Map,this.sa=new Map,this.ba=new Map,this.L=new Map,this.na=new Map,this.qa=new Map,this.ic=this.$=!1,this.eb=new wt(5),this.j=null,this.N=!0,this.P=new At,this.u=this.R=null,this.Mb=function(){return!1}}function $v(e,t){return Oy(e)?e.C.get(t.type):t.Hf}function ey(e,t){var n,i,r,a,o,s,u,c,d,p,f,g,m,v,y,b,T,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G,H,V,W;return L(function(L){switch(L.g){case 1:if(t.stream.isAudioMuxedInVideo)return L.return();for(n=[],i=l(t.S()),r=i.next();!r.done;r=i.next())a=r.value,o=new re(a),s=o.g,t.gf&&(0<=t.Wb&&s.add("_HLS_msn",String(t.Wb)),0<=t.Xb&&s.add("_HLS_part",String(t.Xb))),t.hf&&s.add("_HLS_skip","YES"),be(s)&&ue(o,le(s.toString())),n.push(o.toString());return S(L,2),_(L,Ry(e,n,!0).promise,4);case 4:u=L.h,A(L,3);break;case 2:throw c=E(L),e.h&&e.h.disableStream(t.stream),c;case 3:if(!t.stream.segmentIndex)return L.return();if(1!=(d=zv(e.gb,u.data)).type)throw new Ce(2,4,4017);return(p=u.uri)==u.originalUri||t.S().includes(p)||t.Xf.push(p),f=Uv(d.ka,"EXT-X-DEFINE"),g=ay(e,f,p),m=t.stream,v=$v(e,t),_(L,_y(e,d,m.mimeType,t.S,g),5);case 5:for(y=L.h,b=y.keyIds,T=y.drmInfos,x=y.encrypted,C=y.Ai,m.encrypted||!x||C||(m.encrypted=!0),function(e,t){return e.size===t.size&&[].concat(h(e)).every(function(e){return t.has(e)})}(m.keyIds,b)||(m.keyIds=b,m.drmInfos=T,e.h.newDrmInfo(m)),k=Iy(e,d,v,g,t.S,t.type),I=k.segments,(M=k.bandwidth)&&(m.bandwidth=M),P=Qu(m),D=l(I),R=D.next();!R.done;R=D.next())(N=R.value).ea&&(N.ea.Id=P);m.segmentIndex.re(I,e.l.Lb()),I.length&&(O=jv(d.ka,"EXT-X-MEDIA-SEQUENCE",0),B=(U=Fv(d.ka,"EXT-X-SKIP"))?Number(Dv(U,"SKIPPED-SEGMENTS")):0,F=yy(O,I),j=F.Wb,G=F.Xb,t.Wb=j+B,t.Xb=G,H=v.get(O),m.segmentIndex.hb(H)),(V=Hu(m.segmentIndex))&&(t.kd=V.startTime,W=I[I.length-1],t.wc=W.endTime),Fv(d.ka,"EXT-X-ENDLIST")&&(t.ie=!0),Ty(e,d),ky(e,d.ka,m.type,g,t.S),w(L)}})}function ty(e,t,n){n=void 0!==n&&n;for(var i=-1==e.K,r=l(t),a=r.next();!a.done;a=r.next()){var o=(a=a.value).stream.segmentIndex,s=$v(e,a);if(o=Hu(o))for(var u=(s=l(s)).next();!u.done;u=s.next()){var h=(u=l(u.value)).next().value;if(u.next().value==o.startTime){i&&(e.K=Math.max(e.K,h)),a.Ug=h;break}}}if(!(0>e.K))for(i=(t=l(t)).next();!i.done;i=t.next())(my(e,(i=i.value).type)||n)&&(r=i.stream.segmentIndex)&&0<(a=e.K-i.Ug)&&(r.g.splice(0,a),r=Hu(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),ny(e,i,r))}function ny(e,t,n){if(!(.001>Math.abs(n))){t.kd+=n,t.wc+=n;for(var i=l(e=$v(e,t)),r=i.next();!r.done;r=i.next()){var a=l(r.value);r=a.next().value,a=a.next().value,e.set(r,a+n)}t.S()}}function iy(e,t,n){var i,r,a,o,s;return L(function(u){switch(u.g){case 1:return t?(i=ta,r=gl(t.S(),t.Kc(),t.Ic(),e.g.retryParameters),_(u,By(e,r,i,{type:t instanceof qo?1:0}).promise,2)):u.return({mimeType:null,data:null});case 2:if(a=u.h,o=a.data,!t.aesKey){u.A(3);break}return _(u,fl(o,t.aesKey,n),4);case 4:o=u.h;case 3:return t instanceof qo?t.Be(o,!0):t.Be(o),(s=a.headers["content-type"])&&(s=s.split(";")[0].toLowerCase()),u.return({mimeType:s,data:o})}})}function ry(e){if(Oy(e)){if(e.ua==Jy){for(var t=1/0,n=1/0,i=l(e.i.values()),r=i.next();!r.done;r=i.next())(r=r.value).stream.segmentIndex&&"text"!=r.stream.type&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.wc),n=Math.min(n,r.kd));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.l.fg(t)}}else e.l.wb(py(e));if(!e.l.s)for(n=(t=l(e.i.values())).next();!n.done;n=t.next())!(n=n.value).stream.segmentIndex||"audio"!=n.type&&"video"!=n.type||(n=Hu(n.stream.segmentIndex))&&n.h&&e.l.ai(n.h);e.l.Gf()}function ay(e,t,n){n=new re(n).g;for(var i=new Map,r=(t=l(t)).next();!r.done;r=t.next()){var a=r.value,o=Dv(a,"NAME"),s=Dv(a,"VALUE");r=Dv(a,"QUERYPARAM"),a=Dv(a,"IMPORT"),o&&s&&(i.has(o)||i.set(o,s)),r&&(o=n.get(r)[0])&&!i.has(o)&&i.set(r,o),a&&(r=e.B.get(a))&&i.set(a,r)}return i}function oy(e){var t=new Set([xi(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Ib(function(n){n.mimeType&&t.add(xi(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function sy(e,t,n){for(var i={audio:[],video:[]},r=new Map,a=[],o=!1,s=!1,u=l(t),c=u.next();!c.done;c=u.next()){var d=c.value;c=Dv(d,"AUDIO");var p=Dv(d,"VIDEO"),f=c||p;f&&(a.includes(f)||a.push(f),(d=Dv(d,"PATHWAY-ID"))&&r.set(f,d),c?o=!0:p&&(s=!0))}a.length&&n.length&&function(e,t,n){t=t.filter(function(e){var t=Dv(e,"URI")||"";return"SUBTITLES"!=(e=Dv(e,"TYPE"))&&(""!=t||"AUDIO"==e)});for(var i={},r=(t=l(t)).next();!r.done;r=t.next()){var a=Pv(r=r.value,!e.j);i[a]?i[a].push(r):i[a]=[r]}for(var o in i)hy(e,i[o],n,!1)}(e,n=n.filter(function(e){return a.includes(Rv(e,"GROUP-ID"))}),r),n=(r=a.sort().join(","))&&e.J.has(r)?e.J.get(r):[],o?i.audio.push.apply(i.audio,h(n)):s&&i.video.push.apply(i.video,h(n)),o=!1;var g=t.map(function(e){return Rv(e,"URI")});return c=i.audio.find(function(e){return e&&e.S().find(function(e){return g.includes(e)})}),n=et("video",s=uy(e,t[0])),(u=et("audio",s))&&!n?(c="audio",o=0<i.audio.length):!i.audio.length&&!i.video.length&&u&&n?(c="video",s=[[n,u].join()]):i.audio.length&&c?(c="audio",o=!0):c=i.video.length&&!i.audio.length?"audio":"video",o||(e=function(e,t,n,i){for(var r=e.G++,a=[],o=l(t),s=o.next();!s.done;s=o.next()){var u=s.value;s=Rv(u,"URI"),u=Dv(u,"PATHWAY-ID"),e.j&&u&&Qg(e.j,r,u,s),a.push(s)}if(o=a.sort().join(",")+n.sort().join(","),e.i.has(o))return e.i.get(o);s=a.join(",");e:{if(t=Dv(t[0],"CLOSED-CAPTIONS"),"video"==i){if(e.g.disableText){e.N=!1,t=null;break e}if(t){if("NONE"!=t){t=e.H.get(t);break e}e.N=!1}else if(!t&&e.H.size)for(t=l(e.H.keys()).next();!t.done;){t=e.H.get(t.value);break e}}t=null}return i=dy(e,r,a,n=$e(i,n),i,null,!1,s,null,t,null,!1,null,!1),e.i.set(o,i),i}(e,t,s,c),r&&(e.stream.groupId=r),i[e.stream.type]=[e]),i}function uy(e,t){return t=Dv(t,"CODECS")||"",e.Y=0<t.length,e.Y||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),pl(t.split(/\s*,\s*/))}function ly(e,t,n,i,r,a,o,s,u,h,c,d){for(var p=l(n),f=p.next();!f.done;f=p.next())Dy(f.value.stream,r,a,o,s,u,null);for(r=e.g.disableVideo,n.length&&!r||(n=[null]),r&&(t=t.filter(function(e){return!e.stream.isAudioMuxedInVideo})),r=e.g.disableAudio,t.length&&!r||(t=[null]),r=[],a=(t=l(t)).next();!a.done;a=t.next())for(a=a.value,s=(o=l(n)).next();!s.done;s=o.next()){var g=s.value;(s=a?a.stream:null)&&(s.drmInfos=h,s.keyIds=c),(u=g?g.stream:null)&&(u.drmInfos=h,u.keyIds=c,e.g.disableIFrames||mr(u,d)),u&&!s&&(u.bandwidth=i),!u&&s&&(s.bandwidth=i),p=a?a.stream.drmInfos:null,f=g?g.stream.drmInfos:null,g=g?g.S().sort().join(","):"";var m=a?a.S().sort().join(","):"",v=[];s&&s.codecs&&v.push(s.codecs),u&&u.codecs&&v.push(u.codecs),g=[g,m,v.sort()].join("-"),s&&u&&!kr(p,f)||e.Ya.has(g)||(s={id:e.G++,language:s?s.language:"und",disabledUntilTime:0,primary:!!s&&s.primary||!!u&&u.primary,audio:s,video:u,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(s),e.Ya.add(g))}return r}function hy(e,t,n,i){i=void 0===i||i;for(var r=[],a=[],o=new Map,s=l(t),u=s.next();!u.done;u=s.next()){var h=u.value;u=i?Rv(h,"URI"):Dv(h,"URI")||"shaka://hls-muxed",h=Rv(h,"GROUP-ID"),r.push(u),a.push(h),o.set(h,u)}if(i=a.sort().join(","),u=t[0],t="","subtitles"==(s=Rv(u,"TYPE").toLowerCase())&&(s=nt),s==nt)t=Dv(u,"CODECS")||"";else for(h=(a=l(a)).next();!h.done;h=a.next())if(h=h.value,e.I.has(h)){t=e.I.get(h);break}if(a=r.sort().join(","),e.i.has(a))return e.i.get(a);if(h=e.G++,e.j)for(var c=(o=l(o)).next();!c.done;c=o.next()){var d=l(c.value);c=d.next().value,d=d.next().value,(c=n.get(c))&&Qg(e.j,h,c,d)}var p;return n=Dv(u,"LANGUAGE"),o=Dv(u,"NAME"),c="YES"==Dv(u,"DEFAULT"),d="audio"==s&&(d=Dv(u,"CHANNELS"))?parseInt(d.split("/")[0],10):null,p=!("audio"!=s||!(p=Dv(u,"CHANNELS")))&&(2==(p=p.split("/")).length&&("JOC"===p[1]||p[1].includes("ATMOS"))),(r=dy(e,h,r,t,s,n,c,o,d,null,Dv(u,"CHARACTERISTICS"),"YES"==Dv(u,"FORCED"),u="audio"==s&&(u=Dv(u,"SAMPLE-RATE"))?parseInt(u,10):null,p)).stream&&(r.stream.groupId=i),e.J.has(i)?e.J.get(i).push(r):e.J.set(i,[r]),e.i.set(a,r),r}function cy(e,t){var n="video",i=Rv(t,"URI"),r=Dv(t,"CODECS")||"";if("mjpg"==r&&(n="image"),e.i.has(i))return e.i.get(i);var a=Dv(t,"LANGUAGE"),o=Dv(t,"NAME"),s=Dv(t,"CHARACTERISTICS");return n=dy(e,e.G++,[i],r,n,a,!1,o,null,null,s,!1,null,!1),a=l((r=Dv(t,"RESOLUTION"))?r.split("x"):[null,null]),r=a.next().value,a=a.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(a)||void 0,(t=Dv(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function dy(e,t,n,i,r,a,o,s,u,h,c,d,p,f){function g(){return e.j&&1<n.length?$g(e.j,t):y.Xf.concat(Hv([e.F],n,e.B))}var m=by(e,i,r,a,o,s,u,h,c,d,p,f);n.includes("shaka://hls-muxed")&&(m.isAudioMuxedInVideo=!0,m.mimeType="video/mp2t",oy(m));var v,y={stream:m,type:r,Xf:[],kd:0,wc:0,Hf:new Map,hf:!1,gf:!1,ie:!1,Ug:-1,Wb:-1,Xb:-1,S:g},b=null;return m.createSegmentIndex=function(){return b||(m.isAudioMuxedInVideo?(m.segmentIndex=new Gu([]),Promise.resolve()):(v=Ry(e,y.S(),!0),b=new Promise(function(t){t(function(t){var n,v,b,T,x,C,k,I,M,P,D,R,N,O,U,B,F,j;return L(function(L){switch(L.g){case 1:return n=it,S(L,2),_(L,t.promise,4);case 4:if(v=L.h,t.aborted)return L.return();if((b=v.uri)!=v.originalUri&&(y.S().includes(b)||y.Xf.push(b)),1!=(T=zv(e.gb,v.data)).type)throw new Ce(2,4,4017);return x=Uv(T.ka,"EXT-X-DEFINE"),C=ay(e,x,b),k=!1,(!e.Y&&e.g.hls.disableCodecGuessing||e.N&&r==n.Ha&&!e.g.hls.disableClosedCaptionsDetection)&&0<T.segments.length&&(e.N=!1,k=!0),I=!e.Y&&e.g.hls.disableCodecGuessing,M=Oy(e),_(L,vy(e,0,C,T,g,i,r,a,o,s,u,h,c,d,p,f,void 0,k,I),5);case 5:if(P=L.h,t.aborted)return L.return();D=P.stream,Sy(e,T),Oy(e)&&!M&&Ay(e,T),y.kd=P.kd,y.wc=P.wc,y.hf=P.hf,y.gf=P.gf,y.ie=P.ie,y.Hf=P.Hf,y.Wb=P.Wb,y.Xb=P.Xb,m.segmentIndex=D.segmentIndex,m.encrypted=D.encrypted,m.drmInfos=D.drmInfos,m.keyIds=D.keyIds,m.mimeType=D.mimeType,m.bandwidth=m.bandwidth||D.bandwidth,m.codecs=m.codecs||D.codecs,m.closedCaptions=m.closedCaptions||D.closedCaptions,m.width=m.width||D.width,m.height=m.height||D.height,m.hdr=m.hdr||D.hdr,m.colorGamut=m.colorGamut||D.colorGamut,m.frameRate=m.frameRate||D.frameRate,"und"==m.language&&"und"!=D.language&&(m.language=D.language),m.language=m.language||D.language,m.channelsCount=m.channelsCount||D.channelsCount,m.audioSamplingRate=m.audioSamplingRate||D.audioSamplingRate,oy(m),m.drmInfos.length&&e.h.newDrmInfo(m),R=!1,(!h&&m.closedCaptions||h&&m.closedCaptions&&h.size!=m.closedCaptions.size)&&(R=!0),e.m&&R&&e.h.makeTextStreamsForClosedCaptions(e.m),r==n.$a&&(N=Hu(D.segmentIndex))&&N.ea&&(m.mimeType="application/mp4",oy(m)),O=Qu(m),m.segmentIndex.Ib(function(e){e.ea&&(e.ea.Id=O)}),function(e){if(!e.m)return!1;for(var t=[],n=[],i=(e=l(e.m.variants)).next();!i.done;i=e.next())(i=i.value).video&&t.push(i.video),i.audio&&n.push(i.audio);return!(0<t.length&&!t.some(function(e){return e.segmentIndex})||0<n.length&&!n.some(function(e){return e.segmentIndex}))}(e)&&(e.zc?gy(e,[y]):(e.zc=!0,U=Array.from(e.i.values()),B=U.filter(function(e){return e.stream.segmentIndex}),gy(e,B),ry(e),0<(F=e.s)&&e.D.X(F))),ky(e,T.ka,m.type,C,g),e.m&&(e.m.startTime=e.u),A(L,0);break;case 2:if(j=E(L),m.closeSegmentIndex(),7001===j.code)return L.return();if(!e.h.disableStream(m))throw j;w(L)}})}(v))})))},m.closeSegmentIndex=function(){b&&!m.segmentIndex&&v.abort(),m.segmentIndex&&(m.segmentIndex.release(),m.segmentIndex=null),b=null},y}function py(e){for(var t=1/0,n=(e=l(e.i.values())).next();!n.done;n=e.next())(n=n.value).stream.segmentIndex&&"text"!=n.stream.type&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.wc));return t}function fy(e,t){for(var n=[],i=(t=l(t)).next();!i.done;i=t.next())(i=i.value).segmentIndex&&i.segmentIndex.Ib(function(e){n.push(e)});e.l.ue(n)}function gy(e,t){if(!Oy(e))for(var n=py(e),i=l(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.Cd(0,n);fy(e,t.map(function(e){return e.stream})),n=(i=Array.from(e.i.values()).filter(function(e){return e.stream.segmentIndex})).some(function(e){return"audio"==e.stream.type}),r=i.some(function(e){return"video"==e.stream.type}),i=Oy(e)&&!e.Ta,n=!Oy(e)&&e.Ta&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?ty(e,t,i):(function(e,t){if(1/0==e.Z)for(var n=(t=l(t)).next();!n.done;n=t.next())null!=(n=Hu(n.value.stream.segmentIndex))&&null!=n.h&&(e.Z=Math.min(e.Z,n.h));if(1/0!=(t=e.Z))for(var i=(n=l(e.i.values())).next();!i.done;i=n.next())if(!my(e,(i=i.value).type)){var r=i.stream.segmentIndex;if(null!=r){var a=Hu(r);if(a)if(null==a.h)X("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.S(),"Expect AV sync issues!");else for(ny(e,i,a.h-t-a.startTime),r=(i=l(r)).next();!r.done;r=i.next())r.value.li(t)}}}(e,t),0<e.g.hls.ignoreManifestProgramDateTimeForTypes.length&&ty(e,t))}function my(e,t){return!!e.g.hls.ignoreManifestProgramDateTime||e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function vy(e,t,n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b){var w,T,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G,H,V,W,z,K,X,Y,q,Z,J,Q,$;return y=void 0===y||y,b=void 0===b||b,L(function(t){switch(t.g){case 1:if(w=i.segments||[],T=w.every(function(e){return!!Fv(e.ka,"EXT-X-GAP")}),!w.length||T)throw new Ce(2,4,4053);if(function(e,t){var n=Fv(t.ka,"EXT-X-PLAYLIST-TYPE");t=Fv(t.ka,"EXT-X-ENDLIST"),t=n&&"VOD"==n.value||t,n=n&&"EVENT"==n.value&&!t,n=!t&&!n,Uy(e,t?qy:n?Jy:Zy)}(e,i),Oy(e)&&Ty(e,i),x=Oy(e)?e.C.get(o):new Map,C=Iy(e,i,x,n,r,o),k=C.segments,I=C.bandwidth,N=R=D=P=M=null,!(0<k.length&&y)){t.A(2);break}return _(t,function(e,t){var n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,w;return L(function(S){if(1==S.g)return n=dl(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=Ly(e,t),r=i.segment,a=i.segmentIndex,o=r.S(),s=o[0],u=new re(s),h=u.vb.split(".").pop(),(c=Hy.get(h))?S.return(dl(c)):_(S,Promise.all([iy(e,r.ea,0),iy(e,r,a)]),2)):S.return(n);if(d=S.h,p=d[1].mimeType,f=d[0].data,g=d[1].data,m="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),v=["audio/mp4","video/mp4","video/iso.segment"],!(y=r.ea||v.includes(p))&&Bs(Te(g))){var T=g,A=e.g.disableAudio,E=e.g.disableVideo,x=e.g.disableText,C=Te(T),k=(new Rs).parse(C),I=k.ee();C=k.sh();var M=[],P=!1,L=!1;if(!A)switch(I.audio){case"aac":case"aac-loas":k.zb().length&&(M.push("mp4a.40.2"),P=!0);break;case"mp3":k.zb().length&&(M.push("mp4a.40.34"),P=!0);break;case"ac3":k.zb().length&&(M.push("ac-3"),P=!0);break;case"ec3":k.zb().length&&(M.push("ec-3"),P=!0);break;case"opus":k.zb().length&&(M.push("opus"),P=!0)}if(!E)switch(I.video){case"avc":C.codec?M.push(C.codec):M.push("avc1.42E01E"),L=!0;break;case"hvc":C.codec?M.push(C.codec):M.push("hvc1.1.6.L93.90"),L=!0;break;case"av1":M.push("av01.0.01M.08"),L=!0}if(M.length){if(A=P&&!L,E=new Map,L&&!x){for((x=new Vt("video/mp2t")).Rf(T),L=(T=l(x.xg())).next();!L.done;L=T.next())L=L.value,E.set(L,L);x.Wd()}C={type:A?"audio":"video",mimeType:"video/mp2t",codecs:M.join(", "),language:null,height:C.height,width:C.width,channelCount:null,sampleRate:null,closedCaptions:E,Ie:null,colorGamut:null,frameRate:C.frameRate}}else C=null;if(b=C)return S.return(b)}else if((y||m.includes(h))&&(w=function(e,t,n){function i(e){o=e.name;var t=e.reader;t.skip(24);var n=t.Ga(),i=t.Ga();t.skip(50),f=String(n),p=String(i),e.reader.Oa()&&da(e)}function r(e){var t=go(e.reader);g=t.channelCount,m=t.sampleRate,a(e.name)}function a(e){switch(e=e.toLowerCase()){case"avc1":case"avc3":u.push(e+".42E01E"),c=!0;break;case"hev1":case"hvc1":u.push(e+".1.6.L93.90"),c=!0;break;case"dvh1":case"dvhe":u.push(e+".05.04"),c=!0;break;case"vp09":u.push(e+".00.10.08"),c=!0;break;case"av01":u.push(e+".0.01M.08"),c=!0;break;case"mp4a":s.push("mp4a.40.2"),h=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(e),h=!0;break;case"apac":s.push("apac.31.00"),h=!0}}var o,s=[],u=[],h=!1,c=!1,d=null,p=null,f=null,g=null,m=null,v=null,y=null;if((new ca).box("moov",da).box("trak",da).box("mdia",da).V("mdhd",function(e){d=po(e.reader,e.version).language}).box("minf",da).box("stbl",da).V("stsd",pa).box("mp4a",function(e){var t=go(e.reader);g=t.channelCount,m=t.sampleRate,e.reader.Oa()?da(e):a(e.name)}).box("esds",function(e){e=e.reader;for(var t,n,i="mp4a";e.Oa();){t=e.aa();for(var r=e.aa();128&r;)r=e.aa();if(3==t)e.Ga(),128&(r=e.aa())&&e.Ga(),64&r&&e.skip(e.aa()),32&r&&e.Ga();else if(4==t)n=e.aa(),e.skip(12);else if(5==t)break}n&&(i+="."+vo(n),5==t&&e.Oa()&&(31==(n=(248&(t=e.aa()))>>3)&&e.Oa()&&(n=32+((7&t)<<3)+((224&e.aa())>>5)),i+="."+n)),s.push(i),h=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("apac",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(e){var t=o||"";switch(o){case"dvav":t="avc3";break;case"dva1":t="avc1"}(e=e.reader).skip(1),e=t+"."+vo(e.aa())+vo(e.aa())+vo(e.aa()),u.push(e),c=!0}).box("hvcC",function(e){var t=o||"";switch(o){case"dvh1":t="hvc1";break;case"dvhe":t="hev1"}var n=e.reader;n.skip(1);var i=["","A","B","C"][(e=n.aa())>>6],r=31&e,a=n.W(),s=(32&e)>>5?"H":"L";e=[n.aa(),n.aa(),n.aa(),n.aa(),n.aa(),n.aa()],n=n.aa();for(var l=0,h=0;32>h&&(l|=1&a,31!=h);h++)l<<=1,a>>=1;for(t=t+"."+i+r+"."+vo(l,!0),t+="."+s+n,i="",r=e.length;r--;)((s=e[r])||i)&&(i="."+s.toString(16).toUpperCase()+i);t+=i,u.push(t),c=!0}).box("dvcC",function(e){var t=o||"";switch(o){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.aa(),n=n.aa(),u.push(t+"."+yo(e>>1&127)+"."+yo(e<<5&32|n>>3&31)),c=!0}).box("dvvC",function(e){var t=o||"";switch(o){case"hvc1":t="dvh1";break;case"hev1":t="dvhe";break;case"avc1":t="dva1";break;case"avc3":t="dvav";break;case"av01":t="dav1"}var n=e.reader;n.skip(2),e=n.aa(),n=n.aa(),u.push(t+"."+yo(e>>1&127)+"."+yo(e<<5&32|n>>3&31)),c=!0}).V("vpcC",function(e){var t=o||"",n=e.reader;e=n.aa();var i=n.aa();n=n.aa()>>4&15,u.push(t+"."+yo(e)+"."+yo(i)+"."+yo(n)),c=!0}).box("av1C",function(e){var t=o||"";"dav1"===o&&(t="av01");var n=e.reader;n.skip(1);var i=(e=n.aa())>>>5,r=(64&(n=n.aa()))>>6;u.push(t+"."+i+"."+yo(31&e)+(n>>>7?"H":"M")+"."+yo(2===i&&r?(32&n)>>5?12:10:r?10:8)+"."+((16&n)>>4)+"."+((8&n)>>3)+((4&n)>>2)+(3&n)+"."+yo(1)+"."+yo(1)+"."+yo(1)+".0"),c=!0}).box("enca",ga).box("encv",fa).box("sinf",da).box("frma",function(e){a(e=mo(e.reader).codec)}).box("colr",function(e){u=u.map(function(t){if(t.startsWith("av01.")){var n=e.reader,i=n.Ua(),r=n.Yb(4),a=String.fromCharCode(r[0]);if(a+=String.fromCharCode(r[1]),a+=String.fromCharCode(r[2]),"nclx"===(a+=String.fromCharCode(r[3]))){r=n.Ga(),a=n.Ga();var o=n.Ga(),s=n.aa()>>7,u=t.split(".");10==u.length&&(u[6]=yo(r),u[7]=yo(a),u[8]=yo(o),u[9]=String(s),t=u.join("."))}n.seek(i)}return t});var t=function(e){var t=null,n=null,i=e.Yb(4),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),"nclx"===(r+=String.fromCharCode(i[3]))){switch(e.Ga()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.Ga(),e.Ga(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,Ie:n}}(e.reader),n=t.colorGamut;v=t.Ie,y=n}).parse(e||t,!0,!0),!s.length&&!u.length)return null;var b=h&&!c,_=new Map;if(c&&!n){n=new Vt("video/mp4"),e&&n.init(e);try{n.Rf(t);for(var w=l(n.xg()),S=w.next();!S.done;S=w.next()){var T=S.value;_.set(T,T)}}catch(e){}n.Wd()}return{type:b?"audio":"video",mimeType:b?"audio/mp4":"video/mp4",codecs:pl(s.concat(u)).join(", "),language:d,height:p,width:f,channelCount:g,sampleRate:m,closedCaptions:_,Ie:v,colorGamut:y,frameRate:null}}(f,g,e.g.disableText)))return S.return(w);return p?S.return(dl(p)):S.return(n)})}(e,k),3);case 3:O=t.h,o!=O.type&&Oy(e)&&(e.C.set(O.type,e.C.get(o)),e.C.set(o,new Map)),o=O.type,s=O.language,c=O.channelCount,g=O.sampleRate,e.g.disableText||(d=O.closedCaptions),P=O.height,M=O.width,D=O.Ie,R=O.colorGamut,N=O.frameRate,b&&(v=O.mimeType,a=O.codecs);case 2:if(v){t.A(4);break}return _(t,function(e,t,n,i){var r,a,o,s,u,l,h,c,d,p,f,g,m;return L(function(v){switch(v.g){case 1:return r=ta,a=Ly(e,i),2==(o=a.segment).status?v.return(Py(t)):(s=o.S(),u=new re(s[0]),l=u.vb.split(".").pop(),h=Xy.get(t),(c=h.get(l))||(c=Hy.get(l))||(c=My(t,n))?v.return(c):(p=1,f=Zr(s,e.g.retryParameters),S(v,2),f.method="HEAD",_(v,By(e,f,r,{type:p}).promise,4)));case 4:g=v.h,d=g.headers["content-type"],A(v,3);break;case 2:if(!(m=E(v))||1002!=m.code&&1001!=m.code){v.A(3);break}return f.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(f.headers.Range="bytes=0-0"),_(v,By(e,f,r,{type:p}).promise,6);case 6:g=v.h,d=g.headers["content-type"];case 3:if(!d){v.A(7);break}if("application/octet-stream"!=(c=d.toLowerCase().split(";")[0])){v.A(8);break}if(g.data.byteLength){v.A(9);break}return f.method="GET",_(v,By(e,f,r,{type:p}).promise,10);case 10:g=v.h;case 9:Bs(Te(g.data))&&(c="video/mp2t");case 8:if("application/octet-stream"!=c)return v.return(c);case 7:return v.return(Py(t))}})}(e,o,a,k),5);case 5:v=t.h,o!=nt||a||"application/mp4"!=v||!k[0]||k[0].ea||(v="text/vtt");case 4:return _(t,_y(e,i,v,r,n),6);case 6:if(U=t.h,B=U.drmInfos,F=U.keyIds,j=U.encrypted,G=U.Ai,j&&!B.length&&!G)throw new Ce(2,4,4026);return(H=by(e,a,o,s,u,h,c,d,p,f,g,m)).encrypted=j&&!G,H.drmInfos=B,H.keyIds=F,H.mimeType=v,I&&(H.bandwidth=I),oy(H),"video"==o&&(M||P||D||R)&&Dy(H,M,P,N,D,null,R),Oy(e)&&Ty(e,i),V=k[0].startTime,W=k[k.length-1],z=W.endTime,K=new Gu(k),H.segmentIndex=K,Y=!!(X=Fv(i.ka,"EXT-X-SERVER-CONTROL"))&&null!=Lv(X,"CAN-SKIP-UNTIL"),q=!!X&&null!=Lv(X,"CAN-BLOCK-RELOAD"),Z=jv(i.ka,"EXT-X-MEDIA-SEQUENCE",0),J=yy(Z,k),Q=J.Wb,$=J.Xb,t.return({stream:H,type:o,Xf:[],S:r,kd:V,wc:z,hf:Y,gf:q,ie:!1,Ug:-1,Wb:Q,Xb:$,Hf:x})}})}function yy(e,t){e=e+t.length-1;var n=-1;if(!t.length)return{Wb:++e,Xb:n};var i=(t=t[t.length-1]).g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Wb:e,Xb:n}):(e++,t.m&&(n=0),{Wb:e,Xb:n})}function by(e,t,n,i,r,a,o,s,u,h,c,d){var p=My(n,t)||Py(n),f=[];if(u)for(var g=(u=l(u.split(","))).next();!g.done;g=u.next())f.push(g.value);return u=void 0,g=null,n==nt?u=f.includes("public.accessibility.transcribes-spoken-dialog")&&f.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":f.includes("public.accessibility.describes-video")&&(g="visually impaired"),f.length||"subtitle"!==u||f.push("subtitle"),oy(e={id:e.G++,originalId:a,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:p,codecs:t,kind:n==nt?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:ht(i||"und"),originalLanguage:i,label:a,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:f,forced:h,channelsCount:o,audioSamplingRate:c,spatialAudio:d,closedCaptions:s,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:g,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}),e}function _y(e,t,n,i,r){var a,o,s,u,h,c,d,p,f,g,m,v,y,b,w,S,T,A,E,x,C,k,I,M,P,D,R,N,O;return L(function(L){switch(L.g){case 1:if(a=new Map,!e.g.ignoreDrmInfo&&t.segments)for(o=l(t.segments),s=o.next();!s.done;s=o.next())if(u=s.value,h=Uv(u.ka,"EXT-X-KEY"),c=null,h.length)for(c=Ey(e,t,u.ka,i,r),d=l(h),p=d.next();!p.done;p=d.next())f=p.value,a.set(f,c);m=g=!1,v=[],y=new Set,b=l(a),w=b.next();case 2:if(w.done){L.A(4);break}if(S=w.value,T=l(S),A=T.next().value,E=T.next().value,C=E,"NONE"==(k=Rv(x=A,"METHOD"))){L.A(3);break}if(g=!0,I=Dv(x,"KEYFORMAT")||"identity",M=null,Fy(k)){m=!0,L.A(3);break}if("identity"==I)return _(L,jy(e,x,n,i,C,r),11);if(!(P=e.fc.get(I))){D=null,L.A(9);break}return _(L,P(x,n,C),10);case 10:D=L.h;case 9:M=D,L.A(6);break;case 11:M=L.h;case 6:if(M){if(M.keyIds)for(R=l(M.keyIds),N=R.next();!N.done;N=R.next())O=N.value,y.add(O);v.push(M)}case 3:w=b.next(),L.A(2);break;case 4:return L.return({drmInfos:v,keyIds:y,encrypted:g,Ai:m})}})}function wy(t,n,i,r,a){if(!e.crypto||!e.crypto.subtle)throw Y("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new Ce(2,4,4042);var o=0,s=Dv(n,"IV","");if(s){var u=Xe(s.substr(2));if(16!=u.byteLength)throw new Ce(2,4,4048)}else o=jv(i.ka,"EXT-X-MEDIA-SEQUENCE",0);var l=Gv(r(),Rv(n,"URI"),a),h=l.sort().join("");if(i=n.toString()+"-"+o+"-"+h,!t.ba.has(i)){var c={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(Rv(n,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}c.fetchKey=function(){var n,i,r,a;return L(function(o){if(1==o.g)return t.L.has(h)||(n=Zr(l,t.g.retryParameters),i=By(t,n,6).promise,t.L.set(h,i)),_(o,t.L.get(h),2);if(3!=o.g){if(!(r=o.h).data||r.data.byteLength!=c.bitsKey/8)throw new Ce(2,4,4049);return a={name:"CTR"==c.blockCipherMode?"AES-CTR":"AES-CBC",length:c.bitsKey},_(o,e.crypto.subtle.importKey("raw",r.data,a,!0,["decrypt"]),3)}c.cryptoKey=o.h,c.fetchKey=void 0,w(o)})},t.ba.set(i,c)}return t.ba.get(i)}function Sy(e,t){null==e.u&&(t=Fv(t.ka,"EXT-X-START"))&&(e.u=Number(Rv(t,"TIME-OFFSET")))}function Ty(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;0<=r;){var a=Fv(i[r].ka,"EXTINF");if(a){n=Number(a.value.split(",")[0]);break}r--}if(!(i=Fv(t.ka,"EXT-X-TARGETDURATION")))throw new Ce(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=Fv(t.ka,"EXT-X-PART-INF"))&&(e.O=Number(Rv(r,"PART-TARGET"))),t=Fv(t.ka,"EXT-X-SERVER-CONTROL"),e.$&&e.O?(e.s=e.ic?5*e.O<=n?Math.min(e.O,e.s):Math.min(n,e.s):Math.min(e.O,e.s),e.La=t?Number(Rv(t,"PART-HOLD-BACK")):0):(e.s=Math.min(n,e.s),n=t?Lv(t,"HOLD-BACK"):null,e.Ia=n?Number(n.value):0),e.Na=Math.max(i,e.Na)}function Ay(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.La)n=e.La;else if(e.Ia)n=e.Ia;else for(var i=t.segments.length,r=i-Math.min(i,e.g.hls.liveSegmentsDelay);r<i;r++){var a=Fv(t.segments[r].ka,"EXTINF");n=a?n+Number(a.value.split(",")[0]):n+e.Na}e.u&&0>e.u&&(n=Math.min(-e.u,n),e.u+=n),e.l.Ij(0),e.l.Zh(n),e.l.pd(!1)}function Ey(e,t,n,i,r){var a=Fv(n,"EXT-X-MAP");if(!a)return null;var o=Rv(a,"URI"),s=Gv(i(),o,r);if(o=[s.toString(),Dv(a,"BYTERANGE","")].join("-"),!e.sa.has(o)){for(var u=void 0,h=null,c=!1,d=(n=l(n)).next();!d.done;d=n.next())"EXT-X-KEY"==(d=d.value).name?Fy(c=Rv(d,"METHOD"))&&d.id<a.id?(c=!1,u=wy(e,d,t,i,r)):c="NONE"!=c:"EXT-X-BYTERANGE"==d.name&&d.id<a.id&&(h=d);t=function(e,t,n,i,r){var a=0,o=null;return!(t=Dv(t,"BYTERANGE"))&&n&&(t=n.value),t&&(a=t.split("@"),o=Number(a[0]),o=(a=Number(a[1]))+o-1,i&&((n=o+1-a)%16&&(o+=16-n%16))),new Xo(function(){return e},a,o,null,null,null,i,r)}(s,a,h,u,c),e.sa.set(o,t)}return e.sa.get(o)}function xy(t,n,i,r,a,o,s,u,h){function c(e){e=new re(e).vb.split(".").pop();var t=Xy.get(s).get(e);return t||(t=Hy.get(e)),t}var d=r.ka,p=Fv(d,"EXTINF"),f=0,g=0,m=null;r.Ac.length&&(t.m.isLowLatency=!0);var v=null;if(!t.g.hls.ignoreManifestProgramDateTime){var y=Fv(d,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=kn(y.value),t.Ta=!0)}var b=Jo;if(Fv(d,"EXT-X-GAP")&&(t.m.gapCount++,b=2),!p){if(0==r.Ac.length)throw new Ce(2,4,4024,"EXTINF");if(!t.$)return null}var _=[];y=!1;var w=null,S=!1,T=!1;if(t.$&&r.Ac.length){f=n&&e.ReadableStream&&t.g.hls.allowLowLatencyByteRangeOptimization;for(var A=v,E={},x=0;x<r.Ac.length;E={qg:void 0,Qf:void 0},x++){var C=r.Ac[x],k=0==x?i:_[_.length-1],I=0==x?a:k.endTime,M=Number(Dv(C,"DURATION"))||t.O;if(M){var P=I+M,L=0,D=null;if("EXT-X-PRELOAD-HINT"==C.name?(L=(L=Dv(C,"BYTERANGE-START"))?Number(L):0,(k=Dv(C,"BYTERANGE-LENGTH"))?D=L+Number(k)-1:L&&(D=Number.MAX_SAFE_INTEGER)):(L=(D=l(Cy(k,L=Dv(C,"BYTERANGE")))).next().value,D=D.next().value),E.Qf=Dv(C,"URI"),E.Qf){k=Jo,"YES"==Dv(C,"GAP")&&(t.m.gapCount++,k=2,S=!0),E.qg=null;var R=function(e){return function(){return null==e.qg&&(e.qg=Gv(u(),e.Qf,o)),e.qg}}(E);f&&0<=L&&null!=D&&(w=R,y=!0),I=new qo(I,P,R,L,D,n,0,0,1/0,[],"",null,A,k,h),"EXT-X-PRELOAD-HINT"==C.name&&(I.Fh(),T=!0),"YES"!=Dv(C,"INDEPENDENT")&&0<x&&I.Hd(),(E=c(E.Qf))&&(I.mimeType=E,Yy.has(E)&&(I.ea=null)),_.push(I),A&&(A+=M)}}}}if(p){if(0==(p=Number(p.value.split(",")[0])))return null;f=a+p}else{if(!_.length)return null;f=_[_.length-1].endTime}y&&(S||0!=_[0].startByte?(y=!1,w=null):_=[]),(p=Fv(d,"EXT-X-BYTERANGE"))?(g=(m=l(Cy(i,p.value))).next().value,m=m.next().value):_.length&&(g=_[0].startByte,m=_[_.length-1].endByte),i="",p=null,"image"==s&&(i="1x1",d=Fv(d,"EXT-X-TILES"))&&(i=Rv(d,"LAYOUT"),(d=Dv(d,"DURATION"))&&(p=Number(d)));var N=null;return n=new qo(a,f,function(){return w?w():(null==N&&(N=Gv(u(),r.g,o)),N||[])},g,m,n,0,0,1/0,_,i,p,v,b,h,0<_.length&&!!r.g),(a=c(r.g))&&(n.mimeType=a,Yy.has(a)&&(n.ea=null)),y&&(t.ic=!0,n.ej(),T&&n.Fh()),n}function Cy(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),i=(n=n[1]?Number(n[1]):e.endByte+1)+t-1),[n,i]}function ky(e,t,n,i,r){if("video"==n||"audio"==n){var a=e.l.m;if(a&&!my(e,n))for(t=(t=Uv(t,"EXT-X-DATERANGE")).filter(function(e){return null!=Lv(e,"START-DATE")}).sort(function(e,t){return(e=Rv(e,"START-DATE"))<(t=Rv(t,"START-DATE"))?-1:e>t?1:0}),n=0;n<t.length;n++){var o=t[n];try{var s=kn(Rv(o,"START-DATE"));if(!isNaN(s)){var u=Math.max(0,s-a),h=null,c=Dv(o,"END-DATE");if(c){var d=kn(c);if(!isNaN(d)&&0>(h=d-a))continue}if(null==h){var p=Dv(o,"DURATION")||Dv(o,"PLANNED-DURATION");if(p){var f=parseFloat(p);if(isNaN(f)||(h=u+f),0>s-a+f)continue}}var g=Dv(o,"CLASS")||"com.apple.quicktime.HLS",m="YES"==Dv(o,"END-ON-NEXT");if(null==h&&m){for(var v=n+1;v<t.length;v++)if(g==(Dv(t[v],"CLASS")||"com.apple.quicktime.HLS")){var y=kn(Rv(t[v],"START-DATE"));if(!isNaN(y)&&y&&y>s){h=Math.max(0,y-a);break}}if(null==h)continue}v=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var b=[],_=l(o.attributes),w=_.next();!w.done;w=_.next()){var S=w.value;if(!v.includes(S.name)){var T=Vv(S.value,i);"X-ASSET-URI"!=S.name&&"X-ASSET-LIST"!=S.name||(T=Gv(r(),S.value,i)[0]),b.push({key:S.name,description:"",data:T,mimeType:null,pictureType:null})}}1<b.length&&e.h.onMetadata(g,u,h,b)}}catch(e){}}}}function Iy(e,t,n,i,r,a){var o=t.segments,s=void 0,u=jv(t.ka,"EXT-X-DISCONTINUITY-SEQUENCE",-1),h=jv(t.ka,"EXT-X-MEDIA-SEQUENCE",0),c=Fv(t.ka,"EXT-X-SKIP"),d=c?Number(Dv(c,"SKIPPED-SEGMENTS")):0,p=h+d,f=0;Oy(e)&&n.has(p)&&(f=n.get(p)),0===f&&e.ua==Jy&&0<n.size&&!n.has(p)&&null!=e.l.i&&(f=e.l.Lb());var g=[],m=null;c=[];for(var v=0;v<o.length;v++){var y=o[v],b=0==v?f:m.endTime;p=h+d+v,Fv(y.ka,"EXT-X-DISCONTINUITY")&&(u++,m&&m.ea&&(m.ea.g=b));for(var _=l(y.ka),w=_.next();!w.done;w=_.next())"EXT-X-KEY"==(w=w.value).name&&(s=Fy(Rv(w,"METHOD"))?wy(e,w,t,r,i):void 0);n.set(p,b),(b=xy(e,_=Ey(e,t,y.ka,r,i),m,y,b,i,a,r,s))&&((m=jv(y.ka,"EXT-X-BITRATE"))?c.push({bitrate:m,duration:b.endTime-b.startTime}):c.length&&((m=c.pop()).duration+=b.endTime-b.startTime,c.push(m)),m=b,b.i=u,my(e,a)&&null!=e.K&&p<e.K||g.push(b))}if(t=void 0,c.length&&(t=c.reduce(function(e,t){return e+t.duration},0),t=Math.round(c.reduce(function(e,t){return e+t.bitrate*t.duration},0)/t*1e3)),c=g.some(function(e){return null!=e.h}))for(n={},i=0;i<g.length;n={nf:void 0,mf:void 0,cf:void 0,md:void 0,bf:void 0},i++)if(n.md=g[i],null==n.md.h)for(n.mf=0,n.nf=i,r=function(e){return function(){var t=g[e.nf];if(t){if(null!=t.h)return t.h+e.mf;e.mf-=t.endTime-t.startTime,e.nf+=1}return null}}(n),n.bf=0,n.cf=i,o=function(e){return function(){var t=g[e.cf];if(t){if(t!=e.md&&(e.bf+=t.endTime-t.startTime),null!=t.h)return t.h+e.bf;--e.cf}return null}}(n);null==n.md.h;)n.md.h=o(),null==n.md.h&&(n.md.h=r());if(c)for(i=(n=l(g)).next();!i.done;i=n.next())for(i=(r=i.value).h,o=(r=l(r.g)).next();!o.done;o=r.next())(o=o.value).h=i,i+=o.endTime-o.startTime;if(n=e.Z,c&&1/0!=n&&!my(e,a))for(a=(e=l(g)).next();!a.done;a=e.next())a.value.li(n);return{segments:g,bandwidth:t}}function My(e,t){if(e==nt){if("vtt"==t||"wvtt"==t)return"text/vtt";if(t&&""!==t)return"application/mp4"}return"image"!=e||t&&"jpeg"!=t?"audio"==e&&"mp4a.40.34"==t?"audio/mpeg":"mjpg"==t?"application/mp4":null:"image/jpeg"}function Py(e){return e==nt?"text/vtt":Xy.get(e).get("mp4")}function Ly(e,t){for(var n=t[e=Oy(e)?Math.trunc((t.length-1)/2):0];2==n.Lc()&&e+1<t.length;)n=t[++e];return{segment:n,segmentIndex:e}}function Dy(e,t,n,i,r,a,o){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=a||void 0,e.colorGamut=o||void 0)}function Ry(e,t,n){return By(e,Zr(t,e.g.retryParameters),0,{type:n?2:3})}function Ny(e){var t,n,i,r,a,o;return L(function(s){switch(s.g){case 1:return e.h?(S(s,2),t=Date.now(),_(s,e.update(),4)):s.return();case 4:n=Date.now(),Oy(e)&&(i=(n-t)/1e3,e.eb.sample(1,i),r=0<e.g.updatePeriod?e.g.updatePeriod:e.s,a=Math.max(0,r-St(e.eb)),e.D.X(a)),A(s,3);break;case 2:if(o=E(s),!e.h)return s.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(o),s.return();o.severity=1,e.h.onError(o),e.D.X(.1);case 3:if(!e.h)return s.return();e.h.onManifestUpdated(),w(s)}})}function Oy(e){return e.ua!=qy}function Uy(e,t){e.ua=t,e.l&&e.l.pd(!Oy(e)),Oy(e)||e.D.stop()}function By(e,t,n,i){if(!e.U)throw new Ce(2,7,7001);return i||(i={}),i.isPreload=e.Mb(),t=e.h.networkingEngine.request(n,t,i),Kr(e.U,t),t}function Fy(e){return"AES-128"==e||"AES-256"==e||"AES-256-CTR"==e}function jy(t,n,i,r,a,o){var s,u,l,h,c,d,p,f,g,m,v;return L(function(y){switch(y.g){case 1:if("video/mp2t"==i)throw new Ce(2,4,4040);if("apple"===e.shakaMediaKeysPolyfill)throw new Ce(2,4,4041);if(s=Rv(n,"METHOD"),!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(s))return y.return(null);if((u=Gv(r(),Rv(n,"URI"),o))[0].startsWith("data:text/plain;base64,")){l=Ye(Ke(u[0].split("data:text/plain;base64,").pop())),y.A(2);break}return h=u.sort().join(""),t.na.has(h)||(c=Zr(u,t.g.retryParameters),d=By(t,c,6).promise,t.na.set(h,d)),_(y,t.na.get(h),3);case 3:p=y.h,l=Ye(p.data);case 2:if(f="00000000000000000000000000000000",!a){y.A(4);break}return _(y,Gy(t,a),5);case 5:(g=y.h)&&(f=g);case 4:return(m=new Map).set(f,l),v="cenc","SAMPLE-AES"==s&&(v="cbcs"),y.return(Qe(m,v))}})}function Gy(e,t){var n,i,r;return L(function(a){return 1==a.g?(n=null,e.qa.has(t)?(n=e.qa.get(t),a.A(2)):(i=gl(t.S(),t.Kc(),t.Ic(),e.g.retryParameters),_(a,By(e,i,ta,{type:0}).promise,3))):(2!=a.g&&(r=a.h,t.Be(r.data),n=function(e){var t=null;return(new ca).box("moov",da).box("trak",da).box("mdia",da).box("minf",da).box("stbl",da).V("stsd",pa).box("encv",fa).box("enca",ga).box("sinf",da).box("schi",da).V("tenc",function(e){(e=e.reader).aa(),e.aa(),e.aa(),e.aa(),t=Ye(e.Yb(16))}).parse(e,!0),t}(r.data),e.qa.set(t,n)),a.return(n))})}H("shaka.net.DataUriPlugin",qv),qv.parse=Zv,Yr("data",Zv),(i=Qv.prototype).configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&0<=e.updatePeriod;this.g=e,t&&(this.Mb=t),this.j&&this.j.configure(this.g),n&&this.m&&this.m.presentationTimeline.T()&&this.D.Ka()},i.start=function(e,t){var n,i=this;return L(function(r){return 1==r.g?(i.h=t,i.$=t.isLowLatencyMode(),_(r,Ry(i,[e]).promise,2)):3!=r.g?(n=r.h,i.F=n.uri,_(r,function(e,t){var n,i,r,a,o,s,u,c,d,p,f,g,m,v,y,b,T,A,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G,H,W,z,K,X,Y,q,Z,J,Q;return L(function($){switch($.g){case 1:return n=it,i=zv(e.gb,t),r=Uv(i.ka,"EXT-X-DEFINE"),a=[],o=[],s=[],e.l=new yu(null,0),e.l.pd(!0),u=function(){return[e.F]},c=null,d=new Map,1==i.type?(e.N=!1,j=Uv(i.ka,"EXT-X-DEFINE"),d=ay(e,j,e.F),c=n.Ha,G="",H=new Map,_($,vy(e,e.G++,d,i,u,"",c,G,!0,"Media Playlist",null,H,null,!1,null,!1),7)):(function(e,t){for(var n=new re(e.F).g,i=(t=l(t)).next();!i.done;i=t.next()){var r=i.value;i=Dv(r,"NAME");var a=Dv(r,"VALUE");r=Dv(r,"QUERYPARAM"),i&&a&&(e.B.has(i)||e.B.set(i,a)),r&&(i=n.get(r)[0])&&!e.B.has(i)&&e.B.set(r,i)}}(e,r),p=Uv(i.ka,"EXT-X-MEDIA"),f=Uv(i.ka,"EXT-X-STREAM-INF"),g=Uv(i.ka,"EXT-X-IMAGE-STREAM-INF"),m=Uv(i.ka,"EXT-X-I-FRAME-STREAM-INF"),v=Uv(i.ka,"EXT-X-SESSION-KEY"),y=Uv(i.ka,"EXT-X-SESSION-DATA"),b=Uv(i.ka,"EXT-X-CONTENT-STEERING"),function(e,t){for(var n=(t=l(t)).next();!n.done;n=t.next()){var i=n.value,r=Dv(i,"DATA-ID");n=Dv(i,"URI");var a=Dv(i,"LANGUAGE");i=Dv(i,"VALUE"),r=(new Map).set("id",r),n&&r.set("uri",Gv([e.F],n,e.B)[0]),a&&r.set("language",a),i&&r.set("value",i),n=new V("sessiondata",r),e.h&&e.h.onEvent(n)}}(e,y),_($,function(e,t){var n,i,r,a,o,s;return L(function(u){if(!e.h||!e.g)return u.return();for(i=l(t),r=i.next();!r.done;r=i.next())if(a=r.value,o=Dv(a,"PATHWAY-ID"),s=Dv(a,"SERVER-URI"),o&&s){e.j=new qg(e.h),e.j.configure(e.g),e.j.i=[e.F],e.j.setManifestType("HLS"),e.j.h=o,n=Zg(e.j,s);break}return _(u,n,0)})}(e,b),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(T=[],A=l(f),x=A.next(),C={};!x.done;C={Rj:void 0},x=A.next())k=x.value,(I=Dv(k,"SUPPLEMENTAL-CODECS"))&&(C.Rj=I.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),M=k.attributes.map(function(e){return function(t){var n=t.name,i=t.value;return"CODECS"==n&&(i=e.Rj.join(","),1<(t=t.value.split(",")).length&&(t=et("audio",t))&&(i+=","+t)),new Ov(n,i)}}(C)),T.push(new Mv(k.id,k.name,M,null)));for(f.push.apply(f,h(T)),P=[],D=l(m),R=D.next(),N={};!R.done;N={Sj:void 0},R=D.next())O=R.value,(U=Dv(O,"SUPPLEMENTAL-CODECS"))&&(N.Sj=U.split(/\s*,\s*/).map(function(e){return e.split("/")[0]}),B=O.attributes.map(function(e){return function(t){var n=t.name;return t=t.value,"CODECS"==n&&(t=e.Sj.join(",")),new Ov(n,t)}}(N)),P.push(new Mv(O.id,O.name,B,null)));m.push.apply(m,h(P))}return function(e,t){for(var n=(t=l(t)).next();!n.done;n=t.next()){var i=n.value,r=Dv(i,"AUDIO");n=Dv(i,"VIDEO");var a=Dv(i,"SUBTITLES");if(i=uy(e,i),a){var o=et(nt,i);e.I.set(a,o),Qt(i,o)}r&&((a=et("audio",i))||(a=e.g.hls.defaultAudioCodec),e.I.set(r,a)),n&&((r=et("video",i))||(r=e.g.hls.defaultVideoCodec),e.I.set(n,r))}}(e,f),function(e,t){t=Bv(t,"CLOSED-CAPTIONS"),e.N=0==t.length;for(var n=(t=l(t)).next();!n.done;n=t.next()){var i=n.value,r=Dv(i,"LANGUAGE");n=ht(r||"und"),r||(r=Dv(i,"NAME"))&&(n=r),r=Rv(i,"GROUP-ID"),i=Rv(i,"INSTREAM-ID").replace("SERVICE","svc"),e.H.get(r)||e.H.set(r,new Map),e.H.get(r).set(i,n)}}(e,p),F=function(e,t){return t.map(function(t){return"video"!==(t=cy(e,t)).stream.type?null:t.stream}).filter(function(e){return e})}(e,m),_($,function(e,t,n,i,r,a,o){var s,u,c,d,p,f,g,m,v,y,b,w,S,T,A,E,x,C,k,I,M,P,D,R,N,O,U,B,F,j,G,H,V,W,z,K;return L(function(L){switch(L.g){case 1:if(s=[],u=new Set,e.g.ignoreDrmInfo||!(0<n.length)){L.A(2);break}c=l(n),d=c.next();case 3:if(d.done){L.A(2);break}if(p=d.value,f=Rv(p,"METHOD"),g=Dv(p,"KEYFORMAT")||"identity",m=null,"NONE"==f){L.A(4);break}if(Fy(f)){v=Gv(r(),Rv(p,"URI"),a),y=v.sort().join(""),e.L.has(y)||(b=Zr(v,e.g.retryParameters),w=By(e,b,6).promise,e.L.set(y,w)),L.A(4);break}if("identity"==g)return _(L,jy(e,p,"",r,null,a),12);if(!(S=e.fc.get(g))){T=null,L.A(10);break}return _(L,S(p,"",null),11);case 11:T=L.h;case 10:m=T,L.A(6);break;case 12:m=L.h;case 6:if(m){if(m.keyIds)for(A=l(m.keyIds),E=A.next();!E.done;E=A.next())x=E.value,u.add(x);s.push(m)}case 4:d=c.next(),L.A(3);break;case 2:for(C={},k=l(t),I=k.next();!I.done;I=k.next())M=I.value,P=Pv(M,!e.j),C[P]?C[P].push(M):C[P]=[M];for(R in D=[],C)N=C[R],O=N[0],U=Dv(O,"FRAME-RATE"),B=Number(Dv(O,"AVERAGE-BANDWIDTH"))||Number(Rv(O,"BANDWIDTH")),F=Dv(O,"RESOLUTION"),j=l(F?F.split("x"):[null,null]),G=j.next().value,H=j.next().value,V=Dv(O,"VIDEO-RANGE"),(W=Dv(O,"REQ-VIDEO-LAYOUT"))&&W.includes(",")&&(z=W.split(",").filter(function(e){return"CH-STEREO"==e||"CH-MONO"==e}),W=z[0]),W=W||"CH-MONO",K=sy(e,N,i),D.push.apply(D,h(ly(e,K.audio,K.video,B,G,H,U,V,W,s,u,o)));return L.return(D.filter(function(e){return null!=e}))}})}(e,f,v,p,u,e.B,F),5);case 5:return a=$.h,o=function(e,t){var n=Bv(t,"SUBTITLES");t=n.map(function(t){if(e.g.disableText)return null;try{return hy(e,[t],new Map).stream}catch(t){if(e.g.hls.ignoreTextStreamFailures)return null;throw t}});for(var i=(n=l(n)).next();!i.done;i=n.next()){var r=Rv(i.value,"GROUP-ID");if((i=e.I.get(r))&&(r=e.J.get(r)))for(var a=(r=l(r)).next();!a.done;a=r.next())(a=a.value).stream.codecs=i,a.stream.mimeType=My(nt,i)||Py(nt),oy(a.stream)}return t.filter(function(e){return e})}(e,p),_($,function(e,t,n){var i,r;return L(function(a){return 1==a.g?(i=t.map(function(t){var n,i;return L(function(r){if(1==r.g)return e.g.disableThumbnails?r.return(null):(S(r,2),_(r,function(e,t){var n,i,r,a,o,s,u,l,h,c;return L(function(d){return 1==d.g?(n=Rv(t,"URI"),i=Dv(t,"CODECS","jpeg")||"",e.i.has(n)?d.return(e.i.get(n)):(r=Dv(t,"LANGUAGE"),a=Dv(t,"NAME"),o=Dv(t,"CHARACTERISTICS"),s=dy(e,e.G++,[n],i,"image",r,!1,a,null,null,o,!1,null,!1),(u=Dv(t,"RESOLUTION"))?_(d,s.stream.createSegmentIndex(),3):d.A(2))):(2!=d.g&&(l=Hu(s.stream.segmentIndex),h=l.tilesLayout)&&(s.stream.width=Number(u.split("x")[0])*Number(h.split("x")[0]),s.stream.height=Number(u.split("x")[1])*Number(h.split("x")[1])),(c=Dv(t,"BANDWIDTH"))&&(s.stream.bandwidth=Number(c)),e.i.set(n,s),d.return(s))})}(e,t),4));if(2!=r.g)return n=r.h,r.return(n.stream);if(i=E(r),e.g.hls.ignoreImageStreamFailures)return r.return(null);throw i})}).concat(n.map(function(t){if(e.g.disableThumbnails)return null;try{var n=cy(e,t);return"image"!==n.stream.type?null:n.stream}catch(t){if(e.g.hls.ignoreImageStreamFailures)return null;throw t}})),_(a,Promise.all(i),2)):(r=a.h,a.return(r.filter(function(e){return e})))})}(e,g,m),6);case 6:s=$.h,$.A(3);break;case 7:W=$.h,e.i.set(e.F,W),W.stream&&(z=Qu(W.stream),W.stream.segmentIndex.Ib(function(e){e.ea&&(e.ea.Id=z)})),c=W.stream.type,K=!0,(e.g.disableAudio&&"audio"==W.type||e.g.disableVideo&&"video"==W.type&&!W.stream.codecs.includes(","))&&(K=!1),K&&a.push({id:0,language:ht(G||"und"),disabledUntilTime:0,primary:!0,audio:"audio"==W.type?W.stream:null,video:"video"==W.type?W.stream:null,bandwidth:W.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new Ce(2,7,7001);if(Sy(e,i),1==i.type&&(Oy(e)&&(Ay(e,i),X=e.s,e.D.X(X)),Y=Array.from(e.i.values()),gy(e,Y),ry(e),ky(e,i.ka,c,d,u)),e.m={presentationTimeline:e.l,variants:a,textStreams:o,imageStreams:s,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.u},e.Y||!e.g.hls.disableCodecGuessing){$.A(8);break}for(q=[],Z=l(e.m.variants),J=Z.next();!J.done;J=Z.next())(Q=J.value).audio&&""===Q.audio.codecs&&q.push(Q.audio.createSegmentIndex()),Q.video&&""===Q.video.codecs&&q.push(Q.video.createSegmentIndex());return _($,Promise.all(q),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.m),w($)}})}(i,n.data),3)):r.return(i.m)})},i.stop=function(){this.D&&(this.D.stop(),this.D=null);var e=[];return this.U&&(e.push(this.U.destroy()),this.U=null),this.g=this.h=null,this.Ya.clear(),this.m=null,this.i.clear(),this.J.clear(),this.I.clear(),this.B.clear(),this.sa.clear(),this.ba.clear(),this.L.clear(),this.na.clear(),this.qa.clear(),this.j&&this.j.destroy(),this.P&&(this.P.release(),this.P=null),Promise.all(e)},i.update=function(){var e,t,n,i,r,a,o,s,u,c,d,p=this;return L(function(f){if(1==f.g){if(!Oy(p))return f.return();for(e=[],t=Array.from(p.i.values()),p.s=1/0,p.m.gapCount=0,n=t.filter(function(e){return e.stream.segmentIndex}),i=l(n),r=i.next();!r.done;r=i.next())a=r.value,e.push(ey(p,a));return _(f,Promise.all(e),2)}for(fy(p,n.map(function(e){return e.stream})),o=n.some(function(e){return 0==e.ie}),n.length&&!o&&(Uy(p,Qy.dk),s=n.map(function(e){return e.wc}),p.l.wb(Math.min.apply(Math,h(s))),p.h.updateDuration()),o&&ry(p),u=l(n),c=u.next();!c.done;c=u.next())(d=c.value).stream.isAudioMuxedInVideo||!d.stream.segmentIndex||Hu(d.stream.segmentIndex)||p.h.disableStream(d.stream);w(f)})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(e){this.j&&this.j.banLocation(e)},i.setMediaElement=function(e){this.R=e},H("shaka.hls.HlsParser",Qv);var Hy=(new Map).set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),Vy=(new Map).set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),Wy=(new Map).set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),zy=(new Map).set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),Ky=(new Map).set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),Xy=(new Map).set("audio",Vy).set("video",Wy).set("text",zy).set("image",Ky),Yy=new Set(["video/mp2t"].concat(h(Oi))),qy="VOD",Zy="EVENT",Jy="LIVE",Qy={dk:qy,Lm:Zy,Vm:Jy};function $y(e){return vg(e)}so("application/x-mpegurl",function(){return new Qv}),so("application/vnd.apple.mpegurl",function(){return new Qv});var eb=(new Map).set("com.microsoft.playready",$y).set("com.microsoft.playready.recommendation",$y).set("com.microsoft.playready.software",$y).set("com.microsoft.playready.hardware",$y);function tb(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.D=new wt(5),this.s=new zi(function(){!function(e){var t;L(function(n){switch(n.g){case 1:return S(n,2),_(n,nb(e),4);case 4:A(n,3);break;case 2:t=E(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();w(n)}})}(e)}),this.C=new zr,this.m=new Map,this.B=function(){return!1}}function nb(e){var t,n,i,r,a,o,s;return L(function(u){if(1==u.g)return t=Zr(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.B()}),Kr(e.C,r),_(u,r.promise,2);if(a=u.h,!e.h)return u.return();a.uri&&!e.l.includes(a.uri)&&e.l.unshift(a.uri);var c=a.uri,d=a.data,p=e.g.mss.manifestPreprocessor;if(p!=rh){if(kt("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),!(d=Om(d,"SmoothStreamingMedia")))throw new Ce(2,4,4046,c);p(d),d=Be(d.outerHTML)}var f=pn(d,"SmoothStreamingMedia");if(!f)throw new Ce(2,4,4046,c);if((c=e.g.mss.manifestPreprocessorTXml)!=ah&&c(f),e.i||(e.i=new yu(null,0)),c=An(f,"IsLive",Nn,!1))throw new Ce(2,4,4047);e.i.pd(!c),p=An(f,"TimeScale",Dn,1e7),d=An(f,"DVRWindowLength",Dn),c&&(0===d||isNaN(d))&&(d=1/0);var g,m=An(f,"CanSeek",Nn,!1);for(0===d&&m&&(d=1/0),m=null,d&&0<d&&(m=d/p),c&&!isNaN(e.g.availabilityWindowOverride)&&(m=e.g.availabilityWindowOverride),null==m&&(m=1/0),e.i.fg(m),d=An(f,"Duration",Dn,1/0),c||e.i.wb(d/p),c={variants:[],textStreams:[],timescale:p,duration:d/p},m=yn(f,"Protection"),p=e.g.mss.keySystemsBySystemId,d=[],g=(m=l(m)).next();!g.done;g=m.next())d=d.concat(yn(g.value,"ProtectionHeader"));if(d.length){for(m=[],g=0;g<d.length;g++){var v=d[g],y=v.attributes.SystemID.toLowerCase(),b=p[y];if(b){var S;e:{if(S=mg(v))for(var T=(S=l(wn(S,"DATA"))).next();!T.done;T=S.next())if(T=Sn(T.value,"KID")){S=Ke(bn(T)),S=Ye(S=new Uint8Array([S[3],S[2],S[1],S[0],S[5],S[4],S[7],S[6]].concat(h(S.slice(8)))));break e}S=null}y=Je(b,"cenc",y=[{initData:Ta(T=Ke(bn(v)),y=Xe(y.replace(/-/g,"")),new Set,0),initDataType:"cenc",keyId:S}]),S&&y.keyIds.add(S),(b=eb.get(b))&&(y.licenseServerUri=b(v)),m.push(y)}}p=m}else p=[];for(g=p,m=[],p=[],d=[],v=(f=l(f=yn(f,"StreamIndex"))).next();!v.done;v=f.next()){b=yn(v=v.value,"QualityLevel"),y=c.timescale,S=c.duration,T=yn(v,"c");for(var A=[],E=0,x=0;x<T.length;++x){var C=T[x],k=T[x+1],I=An(C,"t",Dn),M=An(C,"d",Dn);if(C=An(C,"r",Pn),!M)break;if(I=null!=I?I:E,(C=C||0)&&C--,0>C)if(k){if(null==(k=An(k,"t",Dn)))break;if(I>=k)break;C=Math.ceil((k-I)/M)-1}else{if(1/0==S)break;if(I/y>=S)break;C=Math.ceil((S*y-I)/M)-1}for(k=0;k<=C;++k)E=I+M,A.push({start:I/y,end:E/y,ri:I}),I=E}for(y=A,S=(b=l(b)).next();!S.done;S=b.next())(S=ib(e,v,S.value,y,g,c))&&("audio"!=S.type||e.g.disableAudio?"video"!=S.type||e.g.disableVideo?S.type!=nt||e.g.disableText||d.push(S):p.push(S):m.push(S))}for(f=[],g=(m=l(0<m.length?m:[null])).next();!g.done;g=m.next())for(g=g.value,A=(v=l(0<p.length?p:[null])).next();!A.done;A=v.next())y=(b=f).push,S=e,T=g,A=A.value,x=0,T&&T.bandwidth&&0<T.bandwidth&&(x+=T.bandwidth),A&&A.bandwidth&&0<A.bandwidth&&(x+=A.bandwidth),S={id:S.u++,language:T?T.language:"und",disabledUntilTime:0,primary:!!T&&T.primary||!!A&&A.primary,audio:T,video:A,bandwidth:x,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(b,S);c.variants=f,c.textStreams=d,e.j?(e.j.variants=c.variants,e.j.textStreams=c.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:c.variants,textStreams:c.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.Gf()),Promise.resolve(),o=Date.now(),s=(o-i)/1e3,e.D.sample(1,s),w(u)})}function ib(e,t,n,i,r,a){var o=t.attributes.Type;if("audio"!==o&&"video"!==o&&"text"!==o)return Y("Ignoring unrecognized type:",o),null;var s=t.attributes.Language,u=e.u++,h=An(n,"Bitrate",Ln),c=An(n,"MaxWidth",Ln),d=An(n,"MaxHeight",Ln),p=An(n,"Channels",Ln),f=An(n,"SamplingRate",Ln),g=a.duration;i.length&&(g=i[i.length-1].end-i[0].start);var m=e.i.getDuration();e.i.wb(Math.min(g,m));var v={id:u,originalId:t.attributes.Name||String(u),groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:h||0,width:c||void 0,height:d||void 0,kind:"",encrypted:0<r.length,drmInfos:r,keyIds:new Set,language:ht(s||"und"),originalLanguage:s,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:p,audioSamplingRate:f,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:g,timescale:a.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=ab.get(r))&&v.roles.push(r),"main"===r&&(v.primary=!0)),null!==(r=n.attributes.FourCC)&&""!==r||(r=t.attributes.FourCC),!r)if("audio"===o)r="AAC";else if("video"===o)return Y('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null;if(!rb.includes(r.toUpperCase()))return Y("Codec not supported:",r),null;switch(n=function(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if("audio"!==t)return null;t=i.channelsCount||2;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e=i.audioSamplingRate||44100],"AACH"===n?(n=new Uint8Array(4),e=r[2*e],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,(t=new Uint16Array(2))[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):((n=new Uint8Array(2))[0]=16|i>>1,n[1]=i<<7|t<<3,(t=new Uint16Array(1))[0]=(n[0]<<8)+n[1],t[0].toString(16))}(n,o,r,v),v.mssPrivateData.codecPrivateData=n,o){case"audio":if(!n)return Y("Quality unsupported without CodecPrivateData",o),null;v.type="audio",v.mimeType="mss/audio/mp4",v.codecs=function(e,t){var n=0;return"AACH"===e&&(n=5),t?0===n&&(n=(248&parseInt(t.substr(0,2),16))>>3):(n=2,"AACH"===e&&(n=5)),"mp4a.40."+n}(r,n);break;case"video":if(!n)return Y("Quality unsupported without CodecPrivateData",o),null;v.type="video",v.mimeType="mss/video/mp4",v.codecs=function(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}(n);break;case"text":v.type=nt,v.mimeType="application/mp4",("TTML"===r||"DFXP"===r)&&(v.codecs="stpp")}return v.fullMimeTypes.add(xi(v.mimeType,v.codecs)),v.createSegmentIndex=function(){if(v.segmentIndex)return Promise.resolve();if(e.m.has(v.id))var n=e.m.get(v.id);else n=[],"video"==v.type&&(n=v.mssPrivateData.codecPrivateData.split("00000001").slice(1)),n=_o(new bo([n={id:v.id,type:v.type,codecs:v.codecs,encrypted:v.encrypted,timescale:v.mssPrivateData.timescale,duration:v.mssPrivateData.duration,Eb:n,Ma:new Uint8Array([]),Wa:new Uint8Array([]),cb:0,fb:0,data:null,stream:v}])),e.m.set(v.id,n);return n=function(e,t,n,i,r){var a=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[];for(var o=(r=l(r)).next(),s={};!o.done;s={kg:void 0},o=r.next())s.kg=o.value,i.push(new qo(s.kg.start,s.kg.end,function(t){return function(){return Ze(e.l,[a.replace("{start time}",String(t.kg.ri))])}}(s),0,null,t,0,0,n.mssPrivateData.duration));return i}(e,new Xo(function(){return[]},0,null,Qu(v),v.mssPrivateData.timescale,n,null,v.encrypted),v,t,i),v.segmentIndex=new Gu(n),Promise.resolve()},v.closeSegmentIndex=function(){v.segmentIndex&&(v.segmentIndex.release(),v.segmentIndex=null)},v}(i=tb.prototype).configure=function(e,t){this.g=e,t&&(this.B=t)},i.start=function(e,t){var n=this;return L(function(i){if(1==i.g)return n.l=[e],n.h=t,_(i,nb(n),2);if(!n.h)throw new Ce(2,7,7001);return i.return(n.j)})},i.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,null!=this.s&&(this.s.stop(),this.s=null),this.m.clear(),this.C.destroy()},i.update=function(){var e,t=this;return L(function(n){return 1==n.g?(S(n,2),_(n,nb(t),4)):2!=n.g?A(n,0):(e=E(n),t.h&&e?(t.h.onError(e),void w(n)):n.return())})},i.onExpirationUpdated=function(){},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},H("shaka.mss.MssParser",tb);var rb="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),ab=(new Map).set("CAPT","main").set("SUBT","alternate").set("DESC","main");function ob(e,t,n,i,r,a,o){if(200<=n&&299>=n&&202!=n||304==n)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:a};a=null;try{a=Ue(t)}catch(e){}throw new Ce(401==n||403==n?2:1,1,1001,i,n,a,e,o,r||i)}function sb(){}function ub(e,t,n,i,r,a){var o=new pb;oa(t.headers).forEach(function(e,t){o.append(t,e)});var s=new cb,u={Fi:!1,Wj:!1};if(e=function(e,t,n,i,r,a,o,s,u){var l,h,c,d,p,f,g,m,v,y,b,T,x,C;return L(function(k){switch(k.g){case 1:return l=hb,h=db,d=new ArrayBuffer(0),f=p=0,g={},m=Date.now(),S(k,2),_(k,l(e,i),4);case 4:if(c=k.h,g=function(e){var t={};return e.forEach(function(e,n){t[n.trim()]=e}),t}(c.headers),o(g),"HEAD"==i.method){k.A(5);break}return y=(v=c.headers.get("Content-Length"))?parseInt(v,10):0,c.body?(b=c.clone().body.getReader(),new h({start:function(e){!function t(){var n,i,r,o;return L(function(l){switch(l.g){case 1:return S(l,2),_(l,b.read(),4);case 4:n=l.h,A(l,3);break;case 2:return E(l),l.return();case 3:if(n.done){l.A(5);break}if(p+=n.value.byteLength,!s){l.A(5);break}return _(l,s(n.value),5);case 5:i=Date.now(),r=p-f,(100<i-m&&r>=u||n.done)&&(o=n.done?0:y-p,a(i-m,r,o),f=p,m=i),n.done?e.close():(e.enqueue(n.value),t()),w(l)}})}()}}),_(k,c.arrayBuffer(),8)):_(k,c.arrayBuffer(),9);case 8:d=k.h,k.A(5);break;case 9:d=k.h,T=Date.now(),a(T-m,d.byteLength,0);case 5:t.headers.Range&&2==(x=t.headers.Range.replace("bytes=","").split("-").filter(function(e){return e}).map(function(e){return parseInt(e,10)})).length&&d.byteLength!=x[1]-x[0]+1&&Y("Payload length does not match range requested bytes",t,c),A(k,3);break;case 2:if(C=E(k),r.Fi)throw new Ce(1,1,7001,e,n);if(r.Wj)throw new Ce(1,1,1003,e,n);throw new Ce(1,1,1002,e,C,n);case 3:return k.return(ob(g,d,c.status,e,c.url,t,n))}})}(e,t,n,{body:t.body||void 0,headers:o,method:t.method,signal:s.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},u,i,r,t.streamDataCallback,a.minBytesForProgressEvents||0),e=new Fr(e,function(){return u.Fi=!0,s.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new zi(function(){u.Wj=!0,s.abort()});l.X(t/1e3),e.finally(function(){l.stop()})}return e}function lb(){if(!e.ReadableStream)return!1;try{new ReadableStream({})}catch(e){return!1}return!!e.Response&&!!new Response("").body&&!(!e.fetch||"polyfill"in e.fetch||!e.AbortController)}so("application/vnd.ms-sstr+xml",function(){return new tb}),H("shaka.net.HttpFetchPlugin",sb),sb.isSupported=lb,sb.parse=ub;var hb=e.fetch,cb=e.AbortController,db=e.ReadableStream,pb=e.Headers;function fb(){}function gb(e,t,n,i,r,a){var o=new mb,s=Date.now(),u=0;return new Fr(new Promise(function(h,c){o.open(t.method,e,!0),o.responseType="arraybuffer",o.timeout=t.retryParameters.timeout,o.withCredentials=t.allowCrossSiteCredentials;var d={};for(var p in o.onabort=function(){c(new Ce(1,1,7001,e,n))},o.onreadystatechange=function(){if(o.readyState===XMLHttpRequest.HEADERS_RECEIVED){for(var e=o.getAllResponseHeaders().trim().split("\r\n"),t={},n=(e=l(e)).next();!n.done;n=e.next())t[(n=n.value.split(": "))[0].toLowerCase()]=n.slice(1).join(": ");r(d=t)}},o.onload=function(r){var a=o.response;try{i(Date.now()-s,r.loaded-u,0);var l=ob(d,a,o.status,e,o.responseURL,t,n);h(l)}catch(e){c(e)}},o.onerror=function(t){c(new Ce(1,1,1002,e,t,n))},o.ontimeout=function(){c(new Ce(1,1,1003,e,n))},o.onprogress=function(e){var t=Date.now(),n=a.minBytesForProgressEvents||0,r=e.loaded-u;(100<t-s&&r>=n||e.lengthComputable&&e.loaded==e.total)&&(i(t-s,r,4==o.readyState?0:e.total-e.loaded),u=e.loaded,s=t)},t.headers)o.setRequestHeader(p.toLowerCase(),t.headers[p]);o.send(t.body)}),function(){return o.abort(),Promise.resolve()})}lb()&&(Yr("http",ub,2,!0),Yr("https",ub,2,!0),Yr("blob",ub,2,!0)),H("shaka.net.HttpXHRPlugin",fb),fb.parse=gb;var mb=e.XMLHttpRequest;function vb(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function yb(e){var t=e.ec(!1);return t?ze(t):e.S().map(function(e){return"{"+encodeURI(e.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function bb(e,t){return gl(e.g.S(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function _b(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function wb(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}function Sb(e){return 0==e.i?0:e.j/e.i}function Tb(e){var t=this;this.u=e,this.i=new Map,this.h=new ra(function(){return Ab(t).catch(function(){})}),this.j=[],this.s=function(){},this.m=function(){},this.g=new _b,this.l=!1}function Ab(e){e.l=!0;var t=e.j.map(function(e){return e()});return e.j=[],Promise.all(t)}function Eb(e,t,n,i,r,a){aa(e.h);var o=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new Ce(2,9,7001);if(r){var t=Te(n);for(var o in(t=new Sa(t)).data){var s=Number(o);e.m(t.data[s],t.g[s])}}return e.g.close(i,n.byteLength),e.s(Sb(e.g),e.g.g),a(n)});e.i.set(t,o)}function xb(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Br,e.onabort=function(e){e.preventDefault(),n.g.reject()},e.onerror=function(e){e.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}function Cb(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var e;return L(function(i){if(1==i.g)return null==r.result?(n(),i.return()):(e=r.result,_(i,t(e.key,e.value,e),2));e.continue(),w(i)})}})}function kb(e){this.h=e,this.g=[]}function Ib(e,t){return Mb(e,t,"readwrite")}function Mb(e,t,n){var i=new xb(n=e.h.transaction([t],n),t);return e.g.push(i),i.promise().then(function(){Qt(e.g,i)},function(){Qt(e.g,i)}),i}function Pb(e,t,n){this.h=new kb(e),this.i=t,this.g=n}function Lb(e){return Promise.reject(new Ce(2,9,9011,"Cannot add new value to "+e))}function Db(e,t,n,i){t=(e=Ib(e.h,t)).store();for(var r=(n=l(n)).next(),a={};!r.done;a={Eh:void 0},r=n.next())a.Eh=r.value,t.delete(a.Eh).onsuccess=function(e){return function(){return i(e.Eh)}}(a);return e.promise()}function Rb(e,t,n){var i,r,a,o,s,u,h;return L(function(c){if(1==c.g){for(i=Mb(e.h,t,"readonly"),r=i.store(),a={},o=[],s=l(n),u=s.next(),h={};!u.done;h={Zf:void 0,Cf:void 0},u=s.next())h.Cf=u.value,h.Zf=r.get(h.Cf),h.Zf.onsuccess=function(e){return function(){null==e.Zf.result&&o.push(e.Cf),a[e.Cf]=e.Zf.result}}(h);return _(c,i.promise(),2)}if(o.length)throw new Ce(2,9,9012,"Could not find values for "+o);return c.return(n.map(function(e){return a[e]}))})}function Nb(e){this.g=new kb(e)}function Ob(){this.g=new Map}function Ub(e){var t=null;if(e.g.forEach(function(e,n){e.getCells().forEach(function(e,i){e.hasFixedKeySpace()||t||(t={path:{Vb:n,ib:i},ib:e})})}),t)return t;throw new Ce(2,9,9013,"Could not find a cell that supports add-operations")}function Bb(e,t,n){if(!(e=e.g.get(t)))throw new Ce(2,9,9013,"Could not find mechanism with name "+t);if(!(t=e.getCells().get(n)))throw new Ce(2,9,9013,"Could not find cell with name "+n);return t}function Fb(e,t){jb.set(e,t)}Yr("http",gb,1,!0),Yr("https",gb,1,!0),Yr("blob",gb,1,!0),_b.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}},Tb.prototype.destroy=function(){return this.h.destroy()},Tb.prototype.queue=function(e,t,n,i,r){var a=this;aa(this.h);var o=(this.i.get(e)||Promise.resolve()).then(function(){var e,o,s,u,l,h,c;return L(function(d){if(1==d.g)return _(d,function(e,t){var n,i,r,a;return L(function(o){return 1==o.g?(n=ta,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),_(o,i.promise,2)):(a=o.h,Qt(e.j,r),o.return(a.data))})}(a,t),2);if(e=d.h,a.h.g)throw new Ce(2,9,7001);if(i)for(u in o=Te(e),(s=new Sa(o)).data)l=Number(u),h=s.data[l],c=s.g[l],a.m(h,c);return a.g.close(n,e.byteLength),a.s(Sb(a.g),a.g.g),d.return(r(e))})});return this.i.set(e,o),o},xb.prototype.abort=function(){var e=this;return L(function(t){if(1==t.g){try{e.i.abort()}catch(e){}return S(t,2),_(t,e.g,4)}if(2!=t.g)return A(t,0);E(t),w(t)})},xb.prototype.store=function(){return this.h},xb.prototype.promise=function(){return this.g},kb.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))},(i=Pb.prototype).destroy=function(){return this.h.destroy()},i.hasFixedKeySpace=function(){return!0},i.addSegments=function(){return Lb(this.i)},i.removeSegments=function(e,t){return Db(this,this.i,e,t)},i.getSegments=function(e){var t,n=this;return L(function(i){return 1==i.g?_(i,Rb(n,n.i,e),2):(t=i.h,i.return(t.map(function(e){return n.Ki(e)})))})},i.addManifests=function(){return Lb(this.g)},i.updateManifest=function(){return Promise.reject(new Ce(2,9,9016,"Cannot modify values in "+this.g))},i.updateManifestExpiration=function(e,t){var n=Ib(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(n){(n=n.target.result)&&(n.expiration=t,i.put(n,e))},n.promise()},i.removeManifests=function(e,t){return Db(this,this.g,e,t)},i.getManifests=function(e){var t,n=this;return L(function(i){return 1==i.g?_(i,Rb(n,n.g,e),2):(t=i.h,i.return(Promise.all(t.map(function(e){return n.$d(e)}))))})},i.getAllManifests=function(){var e,t,n=this;return L(function(i){return 1==i.g?(e=Mb(n.h,n.g,"readonly"),t=new Map,_(i,Cb(e,function(e,i){var r;return L(function(a){if(1==a.g)return _(a,n.$d(i),2);r=a.h,t.set(e,r),w(a)})}),2)):3!=i.g?_(i,e.promise(),3):i.return(t)})},i.Ki=function(e){return e},i.$d=function(e){return Promise.resolve(e)},i.add=function(e,t){var n,i,r,a,o,s,u,h=this;return L(function(c){if(1==c.g){for(n=Ib(h.h,e),i=n.store(),r=[],a=l(t),o=a.next(),s={};!o.done;s={Rh:void 0},o=a.next())u=o.value,s.Rh=i.add(u),s.Rh.onsuccess=function(e){return function(){r.push(e.Rh.result)}}(s);return _(c,n.promise(),2)}return c.return(r)})},Nb.prototype.destroy=function(){return this.g.destroy()},Nb.prototype.getAll=function(){var e,t,n=this;return L(function(i){return 1==i.g?(e=Mb(n.g,"session-ids","readonly"),t=[],_(i,Cb(e,function(e,n){t.push(n)}),2)):3!=i.g?_(i,e.promise(),3):i.return(t)})},Nb.prototype.add=function(e){for(var t=Ib(this.g,"session-ids"),n=t.store(),i=(e=l(e)).next();!i.done;i=e.next())n.add(i.value);return t.promise()},Nb.prototype.remove=function(e){var t,n=this;return L(function(i){return 1==i.g?_(i,Cb(t=Ib(n.g,"session-ids"),function(t,n,i){e.includes(n.sessionId)&&i.delete()}),2):_(i,t.promise(),0)})},Ob.prototype.destroy=function(){for(var e=[],t=l(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Ob.prototype.init=function(){var e=this;jb.forEach(function(t,n){(t=t())&&e.g.set(n,t)});for(var t=[],n=l(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)},H("shaka.offline.StorageMuxer",Ob),Ob.unregister=function(e){jb.delete(e)},Ob.register=Fb,Ob.prototype.destroy=Ob.prototype.destroy;var jb=new Map;function Gb(){Pb.apply(this,arguments)}function Hb(e,t){!function(e){var t=e.streams.filter(function(e){return"audio"==e.contentType});if(e=e.streams.filter(function(e){return"video"==e.contentType}),!t.every(function(e){return e.variantIds})||!e.every(function(e){return e.variantIds})){for(var n=l(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(i=(n=l(e)).next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=l(e),a=r.next();!a.done;a=r.next())a.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,a=(r=l(t)).next();!a.done;a=r.next())a.value.variantIds.push(i);if(e.length&&t.length)for(i=(t=l(t)).next();!i.done;i=t.next())for(i=i.value,a=(r=l(e)).next();!a.done;a=r.next()){a=a.value;var o=n++;i.variantIds.push(o),a.variantIds.push(o)}}}(e);for(var n=l(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(n){return function(e,t,n){var i=e.initSegmentUri?Vb(e.initSegmentUri):null,r=t+e.presentationTimeOffset,a=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(e){var n=Vb(e.uri);return{startTime:t+e.startTime,endTime:t+e.endTime,dataKey:n,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:a,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}(n,e.startTime,t)})}function Vb(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new Ce(2,9,9004,"Could not parse uri "+e)}function Wb(){Pb.apply(this,arguments)}function zb(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function Kb(){Pb.apply(this,arguments)}function Xb(){this.m=this.j=this.i=this.h=this.g=this.l=null}m(Gb,Pb),Gb.prototype.updateManifestExpiration=function(e,t){var n,i,r,a=this;return L(function(o){return n=Ib(a.h,a.g),i=n.store(),r=new Br,i.get(e).onsuccess=function(n){(n=n.target.result)?(n.expiration=t,i.put(n),r.resolve()):r.reject(new Ce(2,9,9012,"Could not find values for "+e))},_(o,Promise.all([n.promise(),r]),0)})},Gb.prototype.$d=function(e){var t,n,i,r,a,o;return L(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,a=Hb(e.periods[n],r),t.push(a);return _(s,nm(t),2)}return o=s.h,s.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:null==e.expiration?1/0:e.expiration,streams:o,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})},Gb.prototype.Ki=function(e){return{data:e.data}},m(Wb,Pb),Wb.prototype.$d=function(e){var t,n,i,r,a,o;return L(function(s){if(1==s.g){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var u=e.periods[n],h=[],c=l(u.streams),d=c.next();!d.done;d=c.next())0!=(d=d.value).variantIds.length&&h.push(zb(d,u.startTime,u.startTime+r));a=h,t.push(a)}return _(s,nm(t),2)}return o=s.h,s.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:null==e.expiration?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:o,sequenceMode:!1})})},m(Kb,Pb),(i=Kb.prototype).hasFixedKeySpace=function(){return!1},i.addSegments=function(e){return this.add(this.i,e)},i.addManifests=function(e){return this.add(this.g,e)},i.updateManifest=function(e,t){return function(e,t,n){var i=(e=Ib(e.h,e.g)).store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}(this,e,t)},i.$d=function(e){return null==e.expiration&&(e.expiration=1/0),Promise.resolve(e)},(i=Xb.prototype).init=function(){var t=this,n=new Br,i=!1,r=new zi(function(){i=!0,n.reject(new Ce(2,9,9017))});"number"==typeof Yb&&0<Yb&&r.X(Yb);var a=e.indexedDB.open("shaka_offline_db",5);return a.onsuccess=function(){if(!i){r.stop();var e=a.result;t.l=e;var o=e.objectStoreNames;o=o.contains("manifest")&&o.contains("segment")?new Gb(e,"segment","manifest"):null,t.g=o,o=(o=e.objectStoreNames).contains("manifest-v2")&&o.contains("segment-v2")?new Wb(e,"segment-v2","manifest-v2"):null,t.h=o,o=(o=e.objectStoreNames).contains("manifest-v3")&&o.contains("segment-v3")?new Wb(e,"segment-v3","manifest-v3"):null,t.i=o,o=(o=e.objectStoreNames).contains("manifest-v5")&&o.contains("segment-v5")?new Kb(e,"segment-v5","manifest-v5"):null,t.j=o,e=e.objectStoreNames.contains("session-ids")?new Nb(e):null,t.m=e,n.resolve()}},a.onupgradeneeded=function(){for(var e=a.result,t=l(["segment-v5","manifest-v5","session-ids"]),n=t.next();!n.done;n=t.next())n=n.value,e.objectStoreNames.contains(n)||e.createObjectStore(n,{autoIncrement:!0})},a.onerror=function(e){i||(r.stop(),n.reject(new Ce(2,9,9001,a.error)),e.preventDefault())},n},i.destroy=function(){var e=this;return L(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return _(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return _(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return _(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return _(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return _(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),w(t)}})},i.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},i.getEmeSessionCell=function(){return this.m},i.erase=function(){var t=this;return L(function(n){switch(n.g){case 1:if(!t.g){n.A(2);break}return _(n,t.g.destroy(),2);case 2:if(!t.h){n.A(4);break}return _(n,t.h.destroy(),4);case 4:if(!t.i){n.A(6);break}return _(n,t.i.destroy(),6);case 6:if(!t.j){n.A(8);break}return _(n,t.j.destroy(),8);case 8:return t.l&&t.l.close(),_(n,function(){var t=new Br,n=e.indexedDB.deleteDatabase("shaka_offline_db");return n.onblocked=function(){},n.onsuccess=function(){t.resolve()},n.onerror=function(e){t.reject(new Ce(2,9,9001,n.error)),e.preventDefault()},t}(),10);case 10:return t.l=null,t.g=null,t.h=null,t.i=null,t.j=null,_(n,t.init(),0)}})};var Yb=5;function qb(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}function Zb(e){if(null==(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e)))return null;var t=e[1];if("manifest"!=t&&"segment"!=t)return null;var n=e[2];if(!n)return null;var i=e[3];return i&&null!=t?new qb(t,n,i,Number(e[4])):null}function Jb(e,t){this.h=e,this.g=t}function Qb(e,t){var n=new yu(null,0);n.wb(t.duration);var i=t.streams.filter(function(e){return"audio"==e.type}),r=t.streams.filter(function(e){return"video"==e.type});i=function(e,t,n,i){for(var r=new Set,a=l(t),o=a.next();!o.done;o=a.next())for(var s=(o=l(o.value.variantIds)).next();!s.done;s=o.next())r.add(s.value);for(o=(a=l(n)).next();!o.done;o=a.next())for(s=(o=l(o.value.variantIds)).next();!s.done;s=o.next())r.add(s.value);for(a=new Map,o=(r=l(r)).next();!o.done;o=r.next())o=o.value,a.set(o,{id:o,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(r=(t=l(t)).next();!r.done;r=t.next())for(r=$b(e,o=r.value,i),s=(o=l(o.variantIds)).next();!s.done;s=o.next())(s=a.get(s.value)).language=r.language,s.primary=s.primary||r.primary,s.audio=r;for(t=(n=l(n)).next();!t.done;t=n.next())for(t=$b(e,r=t.value,i),o=(r=l(r.variantIds)).next();!o.done;o=r.next())(o=a.get(o.value)).primary=o.primary||t.primary,o.video=t;return a}(e,i,r,n),r=t.streams.filter(function(e){return e.type==nt}).map(function(t){return $b(e,t,n)});var a=t.streams.filter(function(e){return"image"==e.type}).map(function(t){return $b(e,t,n)}),o=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var s=l(i.values()),u=s.next();!u.done;u=s.next())(u=u.value).audio&&u.audio.encrypted&&(u.audio.drmInfos=o),u.video&&u.video.encrypted&&(u.video.drmInfos=o);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:a,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function $b(e,t,n){var i=t.segments.map(function(n){return function(e,t,n){var i=new qb("segment",e.h,e.g,t.dataKey);return e=new qo(t.startTime,t.endTime,function(){return[i.toString()]},0,null,null!=t.initSegmentKey?function(e,t){var n=new qb("segment",e.h,e.g,t);return new Xo(function(){return[n.toString()]},0,null)}(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.hg(t.thumbnailSprite),e}(e,n,t)});return n.ue(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Gu(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([xi(t.mimeType,t.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null}}function e_(){this.g=null}function t_(){}function n_(e,t){var n=Zb(e);return e=n&&"manifest"==n.g?Hr(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t}):n&&"segment"==n.g?function(e,t,n){var i=new Ob;return Hr(void 0).bb(function(){return i.init()}).bb(function(){return Bb(i,t.Vb(),t.ib())}).bb(function(e){return e.getSegments([t.key()])}).bb(function(e){return{uri:t,data:e[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}(n.key(),n,t):jr(new Ce(2,1,9004,e)),e}function i_(e,t,n){var i,r,a,o,s,u;return L(function(h){switch(h.g){case 1:i=[];for(var c=[],d=l(n),p=d.next();!p.done;p=d.next()){p=p.value;for(var f=!1,g=l(c),m=g.next();!m.done;m=g.next())if(r_((m=m.value).info,p)){m.sessionIds.push(p.sessionId),f=!0;break}f||c.push({info:p,sessionIds:[p.sessionId]})}r=l(c),a=r.next();case 2:if(a.done){h.A(4);break}return o=a.value,s=function(e,t,n){var i,r;return L(function(a){switch(a.g){case 1:return i=new Aa({yc:t,onError:function(){},Of:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),S(a,2),i.configure(e),_(a,function(e,t,n,i,r,a){var o,s,u,l,h;return L(function(c){return 1==c.g?(o=[],a.length&&o.push(a[0].contentType),r.length&&o.push(r[0].contentType),s=function(e){return(e=Je(t,e,null)).licenseServerUri=n,e.serverCertificate=i,e.persistentStateRequired=!0,e.sessionType="persistent-license",e},(u=br(o)).video&&(l=s(a[0].encryptionScheme||""),u.video.drmInfos.push(l)),u.audio&&(h=s(r[0].encryptionScheme||""),u.audio.drmInfos.push(h)),_(c,nr([u],!0,e.N,[]),2)):(aa(e.l),c.return(Pa(e,[u])))})}(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:A(a,3);break;case 2:return E(a),_(a,i.destroy(),5);case 5:return a.return([]);case 3:return r=[],_(a,Promise.all(n.sessionIds.map(function(e){return L(function(t){return 1==t.g?(S(t,2),_(t,function(e,t){var n,i,r;return L(function(a){return 1==a.g?_(a,Ra(e,t,{initData:null,initDataType:null}),2):3!=a.g?(n=a.h)?(i=[],(r=e.i.get(n))&&(r.Pb=new Br,i.push(r.Pb)),i.push(n.remove()),_(a,Promise.all(i),3)):a.return():(e.i.delete(n),void w(a))})}(i,e),4)):2!=t.g?(r.push(e),A(t,0)):(E(t),void w(t))})})),6);case 6:return _(a,i.destroy(),7);case 7:return a.return(r)}})}(e,t,o),_(h,s,5);case 5:u=h.h,i=i.concat(u),a=r.next(),h.A(2);break;case 4:return h.return(i)}})}function r_(e,t){function n(e,t){return e.robustness==t.robustness&&e.contentType==t.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&$t(e.audioCapabilities,t.audioCapabilities,n)&&$t(e.videoCapabilities,t.videoCapabilities,n)}function a_(e,t){var n=Qb(new Jb(e.Vb(),e.ib()),t),i=t.appMetadata||{};return n=o_(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function o_(e){for(var t=[],n=pr(e.variants),i=(n=l(n)).next();!i.done;i=n.next())t.push(or(i.value));for(n=(e=l(e.textStreams)).next();!n.done;n=e.next())t.push(sr(n.value));return t}function s_(){this.g=new Map}function u_(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,a=i.bandwidth||t.bandwidth-r;0>=a&&(a=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,a)}}function l_(e,t){e.g.set(t.id,t.bandwidth||2048)}function h_(e,t){return null==(e=e.g.get(t))&&(e=0),e}function c_(e){var t=this;if(e&&e.constructor!=_c)throw new Ce(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Jb()):(this.h=nh(),this.g=new Xr,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new ra(function(){var e,i,r,a,o;return L(function(s){switch(s.g){case 1:return _(s,Promise.all(t.l.map(function(e){return Ab(e)})),2);case 2:for(e=function(){},i=[],r=l(t.i),a=r.next();!a.done;a=r.next())o=a.value,i.push(o.then(e,e));return _(s,Promise.all(i),3);case 3:if(!n){s.A(4);break}return _(s,t.g.destroy(),4);case 4:t.h=null,t.g=null,w(s)}})}),this.m=1e9}function d_(){if(dv(Me()))e:{for(var e=l(jb.values()),t=e.next();!t.done;t=e.next())if(t=(t=t.value)()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}function p_(e){var t,n,i;return L(function(r){switch(r.g){case 1:return _(r,(t=new Ob).init(),2);case 2:return _(r,Ub(t),3);case 3:return n=r.h,i=new qb("manifest",n.path.Vb,n.path.ib,e),_(r,t.destroy(),4);case 4:return _(r,(new c_).remove(i.toString()),0)}})}function f_(e,t,n,i,r,a){var o,s,u,h,c,d,p,f,g,m,v;return L(function(y){switch(y.g){case 1:for(o=!1,S(y,2),s=!0,u=l(n.streams),h=u.next();!h.done;h=u.next())for(c=h.value,d=l(c.segments),p=d.next();!p.done;p=d.next())f=p.value,null!=(g=f.pendingSegmentRefId?i[f.pendingSegmentRefId]:null)&&(f.dataKey=g,f.pendingSegmentRefId=void 0),null!=(g=f.pendingInitSegmentRefId?i[f.pendingInitSegmentRefId]:null)&&(f.initSegmentKey=g,f.pendingInitSegmentRefId=void 0),f.pendingSegmentRefId&&(s=!1),f.pendingInitSegmentRefId&&(s=!1);return n.size+=r,s&&(n.isIncomplete=!1),_(y,e.updateManifest(t,n),4);case 4:o=!0,a(),A(y,0);break;case 2:return m=E(y),_(y,p_(t),5);case 5:if(o){y.A(6);break}return v=Object.values(i),_(y,e.removeSegments(v,function(){}),6);case 6:throw m}})}function g_(e){return e.variants.some(function(e){var t=e.audio&&e.audio.encrypted;return e.video&&e.video.encrypted||t})}function m_(e){return e.variants.some(function(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]).some(function(e){return e.initData&&e.initData.length})})}function v_(e,t,n,i){if(t.expiration=n.fe(),n=Ma(n),t.sessionIds=i?n:[],g_(e)&&i&&!n.length)throw new Ce(2,9,9007)}function y_(e,t){for(var n=[],i=l(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&"video"==r.type?n.push({contentType:xi(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||"audio"!=r.type||n.push({contentType:xi(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function b_(e,t,n){return L(function(i){return _(i,function(e,t,n,i){var r,a,o;return L(function(s){return 1==s.g?i.drmInfo?(r=function(e){var t=Array.from(e.g.keys());if(!t.length)throw new Ce(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}(n),a=i.sessionIds.map(function(e){return{sessionId:e,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:y_(i,!1),videoCapabilities:y_(i,!0)}}),_(s,i_(t,e,a),2)):s.return():3!=s.g?(o=s.h,_(s,r.remove(o),3)):_(s,r.add(a.filter(function(e){return!o.includes(e.sessionId)})),0)})}(e.g,e.h.drm,n,t),0)})}function __(e,t,n){function i(){}var r=function(e){for(var t=new Set,n=(e=l(e.streams)).next();!n.done;n=e.next())for(var i=(n=l(n.value.segments)).next();!i.done;i=n.next())null!=(i=i.value).initSegmentKey&&t.add(i.initSegmentKey),t.add(i.dataKey);return Array.from(t)}(n);return a_(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}function w_(e,t){var n;return L(function(i){switch(i.g){case 1:return S(i,2),_(i,xh(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,A(i,3);break;case 2:E(i);case 3:if(n)return i.return(n);throw new Ce(1,2,2011,t)}})}function S_(e,t,n,i,r,a){var o={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},s=r.offline.numberOfParallelDownloads,u=0===s?i.id:0;return function(e,t,n){if(null!=(t=e.segmentIndex.find(t)))for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}(i,n.presentationTimeline.Lb(),function(n,r){var l=yb(n),h=void 0;if(!a.has(l)){var c=n.endTime-n.startTime;c=h_(t,i.id)*c,c=wb(e.g,c),a.set(l,new vb(n,c,u,!1,r))}n.ea&&(h=yb(n.ea),a.has(h)||(c=.5*h_(t,i.id),c=wb(e.g,c),a.set(h,new vb(n.ea,c,u,!0,r)))),o.segments.push({pendingInitSegmentRefId:h,initSegmentKey:h?0:null,startTime:n.startTime,endTime:n.endTime,appendWindowStart:n.appendWindowStart,appendWindowEnd:n.appendWindowEnd,timestampOffset:n.timestampOffset,tilesLayout:n.tilesLayout,pendingSegmentRefId:l,dataKey:0,mimeType:n.mimeType,codecs:n.codecs,thumbnailSprite:n.thumbnailSprite}),0!==s&&(u=(u+1)%s)}),o}function T_(e){if(e.j.g)throw new Ce(2,9,7001)}function A_(){if(!d_())throw new Ce(2,9,9e3)}function E_(e,t){return L(function(n){return 1==n.g?(e.i.push(t),T(n,2),_(n,t,4)):2!=n.g?n.return(n.h):(x(n),Qt(e.i,t),C(n,0))})}function x_(e){for(var t=new Set,n=l(e.variants),i=n.next();!i.done;i=n.next())(i=i.value).audio&&t.add(i.audio),i.video&&t.add(i.video);for(i=(n=l(e.textStreams)).next();!i.done;i=n.next())t.add(i.value);for(n=(e=l(e.imageStreams)).next();!n.done;n=e.next())t.add(n.value);return t}H("shaka.offline.indexeddb.StorageMechanismOpenTimeout",Yb),Fb("idb",function(){return Me().ki()?new Xb:null}),qb.prototype.Vb=function(){return this.i},qb.prototype.ib=function(){return this.h},qb.prototype.key=function(){return this.l},qb.prototype.toString=function(){return this.j},(i=e_.prototype).configure=function(){},i.start=function(e,t){var n,i,r,a,o,s,u=this;return L(function(l){switch(l.g){case 1:if(n=Zb(e),u.g=n,null==n||"manifest"!=n.g)throw new Ce(2,1,9004,e);return i=new Ob,T(l,2),_(l,i.init(),4);case 4:return _(l,Bb(i,n.Vb(),n.ib()),5);case 5:return _(l,l.h.getManifests([n.key()]),6);case 6:return r=l.h,a=r[0],o=new Jb(n.Vb(),n.ib()),s=Qb(o,a),t.makeTextStreamsForClosedCaptions(s),l.return(s);case 2:return x(l),_(l,i.destroy(),7);case 7:C(l,0)}})},i.stop=function(){return Promise.resolve()},i.update=function(){},i.onExpirationUpdated=function(e,t){var n,i,r,a,o,s,u,l=this;return L(function(h){switch(h.g){case 1:return n=l.g,i=new Ob,S(h,2,3),_(h,i.init(),5);case 5:return _(h,Bb(i,n.Vb(),n.ib()),6);case 6:return _(h,(r=h.h).getManifests([n.key()]),7);case 7:if(a=h.h,o=a[0],s=o.sessionIds.includes(e),u=null==o.expiration||o.expiration>t,!s||!u){h.A(3);break}return _(h,r.updateManifestExpiration(n.key(),t),3);case 3:return x(h),_(h,i.destroy(),10);case 10:C(h,0);break;case 2:E(h),h.A(3)}})},i.onInitialVariantChosen=function(){},i.banLocation=function(){},i.setMediaElement=function(){},so("application/x-offline-manifest",function(){return new e_}),H("shaka.offline.OfflineScheme",t_),t_.plugin=n_,Yr("offline",n_),(i=c_.prototype).destroy=function(){return this.j.destroy()},i.configure=function(e,t){return 2==arguments.length&&"string"==typeof e&&(e=Wl(e,t)),ih(this.h,e)},i.getConfiguration=function(){var e=nh();return ih(e,this.h,nh()),e},i.Jb=function(){return this.g},i.store=function(e,t,n,i,r){var a=this,o=this.getConfiguration(),s=new Tb(this.g);return this.l.push(s),t=function(e,t,n,i,r,a,o,s){var u,h,c,d,p,f,g,m,v,y,b,T,k,I,M,P,D,R,N,O,U,B,F;return L(function(j){switch(j.g){case 1:return A_(),h=u=null,c=new Ob,f=p=d=null,S(j,2,3),_(j,a(),5);case 5:return u=j.h,_(j,function(e,t,n,i){var r,a,o,s,u;return L(function(l){if(1==l.g)return r=null,a=e.g,o={networkingEngine:a,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(e){r=e},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),T_(e),_(l,n.start(t,o),2);if(3!=l.g)return s=l.h,T_(e),u=x_(s),_(l,Promise.all(ee(u,function(e){return e.createSegmentIndex()})),3);if(T_(e),r)throw r;return l.return(s)})}(e,t,u,o),6);case 6:if(g=j.h,T_(e),g.presentationTimeline.T()||g.presentationTimeline.hd())throw new Ce(2,9,9005,t);m=l(i),v=m.next();case 7:if(v.done){j.A(9);break}return y=v.value,_(j,function(e,t,n){var i,r,a,o,s,u,h,c,d,p,f,g,m,v,y;return L(function(b){switch(b.g){case 1:return _(b,w_(e,t),2);case 2:if("text/vtt"!=(i=b.h))throw new Ce(1,2,2017,t);return _(b,function(e,t,n){var i,r,a;return L(function(o){return 1==o.g?(i=ta,(r=Zr([e],n)).method="GET",_(o,t.request(i,r).promise,2)):(a=o.h,o.return(a.data))})}(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=b.h,!(a=Fi(i)))throw new Ce(2,2,2014,i);for(o=a(),s={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},u=Te(r),h=o.parseMedia(u,s,t,[]),c=[],d=l(h),p=d.next(),f={};!p.done;f={rg:void 0,Bd:void 0},p=d.next())f.Bd=p.value,f.rg=null,g=function(e){return function(){return null==e.rg&&(e.rg=Ze([t],[e.Bd.payload])),e.rg||[]}}(f),m=new qo(f.Bd.startTime,f.Bd.endTime,g,0,null,null,0,0,1/0),f.Bd.payload.includes("#xywh")&&4===(v=f.Bd.payload.split("#xywh=")[1].split(",")).length&&m.hg({height:parseInt(v[3],10),positionX:parseInt(v[0],10),positionY:parseInt(v[1],10),width:parseInt(v[2],10)}),c.push(m);if(y=i,!c.length){b.A(4);break}return _(b,xh(c[0].S()[0],e.g,e.h.manifest.retryParameters),5);case 5:y=b.h;case 4:return b.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Gu(c),mimeType:y||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([xi(y||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}(e,y,g),10);case 10:b=j.h,g.imageStreams.push(b),T_(e),v=m.next(),j.A(7);break;case 9:T=l(r),k=T.next();case 11:return k.done?(Ha(o.drm.clearKeys,g.variants),P=g.variants.some(function(e){if(e.audio)for(var t=l(e.audio.drmInfos),n=t.next();!n.done;n=t.next())if(n.value.licenseServerUri.startsWith("data:"))return!0;if(e.video)for(t=(e=l(e.video.drmInfos)).next();!t.done;t=e.next())if(t.value.licenseServerUri.startsWith("data:"))return!0;return!1}),D=o.offline.usePersistentLicense,P&&(D=!1),_(j,e.yd(g,function(e){f=f||e},o,D),15)):(I=k.value,_(j,function(e,t,n,i,r,a,o){var s;return L(function(u){if(1==u.g)return a?u.A(2):_(u,w_(e,n),3);if(2!=u.g&&(a=u.h),s={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Vu(0,t.presentationTimeline.getDuration(),[n]),mimeType:a||"",codecs:o||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:nt,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([xi(a||"",o||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},!ji(xi(s.mimeType,s.codecs)))throw new Ce(2,2,2014,a);return u.return(s)})}(e,g,I.uri,I.language,I.kind,I.mime,I.codecs),14));case 14:M=j.h,g.textStreams.push(M),T_(e),k=T.next(),j.A(11);break;case 15:if(h=j.h,T_(e),f)throw f;return _(j,function(e,t,n,i){var r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,T,x,C,k,I,M,P,D,R,N,O,U,B,F;return L(function(L){switch(L.g){case 1:return r={width:1/0,height:1/0},function(e,t,n){e.variants=e.variants.filter(function(e){return Qi(e,t,n)})}(e,n.restrictions,r),_(L,$i(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(a=[],o=n.preferredDecodingAttributes,s=n.preferredVideoCodecs,u=n.preferredAudioCodecs,h=n.preferredTextFormats,Ji(e,s,u,o,h),c=l(e.variants),d=c.next();!d.done;d=c.next())p=d.value,a.push(or(p));for(f=l(e.textStreams),g=f.next();!g.done;g=f.next())m=g.value,a.push(sr(m));for(v=l(e.imageStreams),y=v.next();!y.done;y=v.next())b=y.value,a.push(ur(b));return _(L,n.offline.trackSelectionCallback(a),3);case 3:for(T=L.h,x=e.presentationTimeline.getDuration(),C=0,k=l(T),I=k.next();!I.done;I=k.next())M=I.value,P=M.bandwidth*x/8,C+=P;return S(L,4),_(L,n.offline.downloadSizeCallback(C),6);case 6:if(!L.h)throw new Ce(2,9,9014);A(L,5);break;case 4:if((D=E(L))instanceof Ce)throw D;throw new Ce(2,9,9015);case 5:for(R=new Set,N=new Set,O=new Set,U=l(T),B=U.next();!B.done;B=U.next())"variant"==(F=B.value).type&&R.add(F.id),"text"==F.type&&N.add(F.id),"image"==F.type&&O.add(F.id);e.variants=e.variants.filter(function(e){return R.has(e.id)}),e.textStreams=e.textStreams.filter(function(e){return N.has(e.id)}),e.imageStreams=e.imageStreams.filter(function(e){return O.has(e.id)}),function(e){e.variants.map(function(e){return e.video});var t=new Set(e.variants.map(function(e){return e.audio}));e=e.textStreams;for(var n=l(t),i=n.next();!i.done;i=n.next())for(var r=(i=l(t)).next();!r.done;r=i.next());for(n=(t=l(e)).next();!n.done;n=t.next())for(i=(n=l(e)).next();!i.done;i=n.next());}(e),w(L)}})}(g,h,o,D),16);case 16:return _(j,c.init(),17);case 17:return T_(e),_(j,Ub(c),18);case 18:return d=j.h,T_(e),R=function(e,t,n,i,r,a,o){var s=function(e,t,n){return{offlineUri:null,originalManifestUri:e,duration:t.presentationTimeline.getDuration(),size:0,expiration:1/0,tracks:t=o_(t),appMetadata:n,isIncomplete:!1}}(n,t,i),u=r.offline.progressCallback;!function(e,t,n){e.s=function(e,t){s.size=t,u(s,e)},e.m=n}(a,0,function(t,n){h&&o&&c==n&&Ia(e,"cenc",t)});var h=g_(t)&&!m_(t),c=null;h&&(c=C_.get(e.g.keySystem));for(var d=new s_,p=l(t.textStreams),f=p.next();!f.done;f=p.next())d.g.set(f.value.id,52);for(f=(p=l(t.imageStreams)).next();!f.done;f=p.next())l_(d,f.value);for(f=(p=l(t.variants)).next();!f.done;f=p.next())u_(d,f.value);return a=function(e,t,n,i){for(var r=new Map,a=x_(n),o=new Map,s=(a=l(a)).next();!s.done;s=a.next()){var u=S_(e,t,n,s=s.value,i,r);o.set(s.id,u)}for(t=(e=l(n.variants)).next();!t.done;t=e.next())(t=t.value).audio&&o.get(t.audio.id).variantIds.push(t.id),t.video&&o.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(o.values()),oi:Array.from(r.values())}}(a,d,t,r),r=a.streams,a=a.oi,(d=e.g)&&o&&(d.initData=[]),{Gl:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.fe(),streams:r,sessionIds:o?Ma(e):[],drmInfo:d,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},oi:a}}(h,g,t,n,o,s,D),N=R.Gl,O=R.oi,_(j,d.ib.addManifests([N]),19);case 19:if(U=j.h,T_(e),p=U[0],T_(e),f)throw f;return _(j,function(e,t,n,i,r,a,o,s,u,h){var c,d,p,f,g,m,v,y,b,T,x;return L(function(C){switch(C.g){case 1:if(c={},d=0,p=function(){if(e.j.g||r.l)throw new Ce(2,9,7001)},f=function(e,t){var f,g,m,v,y,b,S,T,A;return L(function(E){if(1==E.g){for(f=l(e),g=f.next(),m={};!g.done;m={rc:void 0},g=f.next())m.rc=g.value,p(),v=bb(m.rc,a),y=m.rc.i,b=m.rc.h,S=function(e){return function(t){var n,i,r,a;return L(function(s){switch(s.g){case 1:if(n=e.rc.g,i=n.ec(!1),!n.aesKey||i){s.A(2);break}return _(s,fl(t,n.aesKey,e.rc.j),3);case 3:t=s.h;case 2:return r=yb(n),_(s,o.addSegments([{data:t}]),4);case 4:a=s.h,p(),c[r]=a[0],d+=t.byteLength,w(s)}})}}(m),T=m.rc.g,(A=T.ec(!1))?Eb(r,m.rc.groupId,A,y,b,S):r.queue(m.rc.groupId,v,y,b,S);return _(E,function(e){return L(function(t){return 1==t.g?_(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}(r),2)}return p(),!t||r.l?E.A(0):(v_(s,i,u,h),_(E,o.updateManifest(n,i),0))})},g=!1,S(C,2),!g_(s)||!g||m_(s)){C.A(4);break}return _(C,f(t.filter(function(e){return e.h}),!0),5);case 5:return p(),t=t.filter(function(e){return!e.h}),m=c,v=d,c={},d=0,_(C,f_(o,n,i,m,v,function(){return T_(e)}),6);case 6:p();case 4:if(g){C.A(7);break}return _(C,f(t,!1),8);case 8:return p(),y=c,b=d,c={},d=0,_(C,f_(o,n,i,y,b,function(){return p()}),9);case 9:p();case 7:A(C,0);break;case 2:return T=E(C),x=Object.values(c),_(C,o.removeSegments(x,function(){}),10);case 10:throw T}})}(e,O,p,N,s,o,d.ib,g,h,D),20);case 20:return T_(e),v_(g,N,h,D),_(j,d.ib.updateManifest(p,N),21);case 21:return T_(e),B=new qb("manifest",d.path.Vb,d.path.ib,p),j.return(a_(B,N));case 3:return x(j),_(j,c.destroy(),22);case 22:if(!u){j.A(23);break}return _(j,u.stop(),23);case 23:if(!h){j.A(25);break}return _(j,h.destroy(),25);case 25:C(j,0);break;case 2:if(F=E(j),null==p){j.A(27);break}return _(j,p_(p),27);case 27:throw f||F}})}(this,e,t||{},i||[],r||[],function(){var t;return L(function(i){return 1==i.g?n?i.A(2):_(i,xh(e,a.g,o.manifest.retryParameters),3):(2!=i.g&&(n=i.h),t=uo(e,n||null),i.return(t()))})},o,s),(t=new Fr(t,function(){return Ab(s)})).finally(function(){Qt(a.l,s)}),function(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Qt(e.i,n)})}(this,t)},i.remove=function(e){return E_(this,function(e,t){var n,i,r,a,o,s;return L(function(u){switch(u.g){case 1:if(A_(),null==(n=Zb(t))||"manifest"!=n.g)throw new Ce(2,9,9004,t);return i=n,r=new Ob,T(u,2),_(u,r.init(),4);case 4:return _(u,Bb(r,i.Vb(),i.ib()),5);case 5:return _(u,(a=u.h).getManifests([i.key()]),6);case 6:return o=u.h,s=o[0],_(u,Promise.all([b_(e,s,r),__(a,i,s)]),2);case 2:return x(u),_(u,r.destroy(),8);case 8:C(u,0)}})}(this,e))},i.Zl=function(){return E_(this,function(e){var t,n,i,r,a,o,s,u,h,c;return L(function(d){switch(d.g){case 1:return A_(),t=e.g,n=e.h.drm,i=new Ob,r=!1,T(d,2),_(d,i.init(),4);case 4:a=[],function(e){e.g.forEach(function(e){var t;t=e.getEmeSessionCell(),a.push(t)})}(i),o=l(a),s=o.next();case 5:if(s.done){d.A(2);break}return _(d,(u=s.value).getAll(),8);case 8:return h=d.h,_(d,i_(n,t,h),9);case 9:return c=d.h,_(d,u.remove(c),10);case 10:c.length!=h.length&&(r=!0),s=o.next(),d.A(5);break;case 2:return x(d),_(d,i.destroy(),11);case 11:C(d,3);break;case 3:return d.return(!r)}})}(this))},i.list=function(){return E_(this,L(function(i){switch(i.g){case 1:return A_(),e=[],t=new Ob,T(i,2),_(i,t.init(),4);case 4:return n=Promise.resolve(),function(e,t){e.g.forEach(function(e,n){e.getCells().forEach(function(e,i){t({Vb:n,ib:i},e)})})}(t,function(t,i){n=n.then(function(){return L(function(n){if(1==n.g)return _(n,i.getAllManifests(),2);n.h.forEach(function(n,i){n=a_(new qb("manifest",t.Vb,t.ib,i),n),e.push(n)}),w(n)})})}),_(i,n,2);case 2:return x(i),_(i,t.destroy(),6);case 6:C(i,3);break;case 3:return i.return(e)}}));var e,t,n},i.yd=function(e,t,n,i){var r,a=this;return L(function(o){return 1==o.g?((r=new Aa({yc:a.g,onError:t,Of:function(){},onExpirationUpdated:function(){},onEvent:function(){}})).configure(n.drm),_(o,function(e,t,n){return e.ba=!0,e.C=new Map,e.O=n,xa(e,t,!1)}(r,e.variants,i),2)):3!=o.g?_(o,ka(r),3):o.return(r)})},H("shaka.offline.Storage",c_),c_.deleteAll=function(){var e;return L(function(t){return 1==t.g?(e=new Ob,T(t,2),_(t,function(e){var t,n;return L(function(i){return 1==i.g?(t=Array.from(e.g.values()),(n=0<t.length)||jb.forEach(function(e){(e=e())&&t.push(e)}),_(i,Promise.all(t.map(function(e){return e.erase()})),2)):n?i.A(0):_(i,Promise.all(t.map(function(e){return e.destroy()})),0)})}(e),2)):5!=t.g?(x(t),_(t,e.destroy(),5)):C(t,0)})},c_.prototype.list=c_.prototype.list,c_.prototype.removeEmeSessions=c_.prototype.Zl,c_.prototype.remove=c_.prototype.remove,c_.prototype.store=c_.prototype.store,c_.prototype.getNetworkingEngine=c_.prototype.Jb,c_.prototype.getConfiguration=c_.prototype.getConfiguration,c_.prototype.configure=c_.prototype.configure,c_.prototype.destroy=c_.prototype.destroy,c_.support=d_;var C_=(new Map).set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");function k_(){}function I_(){for(var e=l(D_),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(e){Y("Error installing polyfill!",e)}}}function M_(e,t){for(e={priority:t||0,callback:e},t=0;t<D_.length;t++)if(D_[t].priority<e.priority)return void D_.splice(t,0,e);D_.push(e)}Tc("offline",d_),H("shaka.polyfill",k_),k_.register=M_,k_.installAll=I_;var P_,L_,D_=[];function R_(){}function N_(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var e=l(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),t=e.next();!t.done;t=e.next())O_(t.value)}function O_(e){var t="aria-"+e.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,e,{get:function(){return this.getAttribute(t)},set:function(e){null==e||null==e?this.removeAttribute(t):this.setAttribute(t,e)}})}function U_(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}function B_(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(Y("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function F_(e){if(!e)return!1;var t=(e=e.getConfiguration()).audioCapabilities&&e.audioCapabilities[0];return!(!(e=e.videoCapabilities&&e.videoCapabilities[0]||t)||void 0===e.encryptionScheme)}function j_(e,t){return!(e&&e!=t&&("cbcs"!=e&&"cbcs-1-9"!=e||!Me().qd()))}function G_(){}function H_(){Me().jg()&&!P_&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(P_=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=V_,navigator.emeEncryptionSchemePolyfilled=!0)}function V_(e,t){var n,i=this;return L(function(r){return 1==r.g?_(r,P_.call(i,e,t),2):F_(n=r.h)?(navigator.requestMediaKeySystemAccess=P_,r.return(n)):(navigator.requestMediaKeySystemAccess=W_,r.return(W_.call(i,e,t)))})}function W_(e,t){var n,i,r,a,o,s,u,h,c,d,p,f,g=this;return L(function(m){if(1==m.g){for(n=B_(e),i=[],r=l(t),a=r.next();!a.done;a=r.next())o=a.value,s=z_(o.videoCapabilities,n),u=z_(o.audioCapabilities,n),o.videoCapabilities&&o.videoCapabilities.length&&!s.length||o.audioCapabilities&&o.audioCapabilities.length&&!u.length||((h=Object.assign({},o)).videoCapabilities=s,h.audioCapabilities=u,i.push(h));if(!i.length)throw(c=Error("Unsupported keySystem or supportedConfigurations.")).name="NotSupportedError",c.code=DOMException.NOT_SUPPORTED_ERR,c;return _(m,P_.call(g,e,i),2)}return d=m.h,f=p=null,i[0]&&(i[0].videoCapabilities&&(p=i[0].videoCapabilities[0].encryptionScheme),i[0].audioCapabilities&&(f=i[0].audioCapabilities[0].encryptionScheme)),m.return(new U_(d,p,f))})}function z_(e,t){return e?e.filter(function(e){return j_(e.encryptionScheme,t)}):e}function K_(){}function X_(){if(e.Document){var t=Element.prototype;t.requestFullscreen=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen,(t=Document.prototype).exitFullscreen=t.exitFullscreen||t.mozCancelFullScreen||t.msExitFullscreen||t.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",Y_),document.addEventListener("webkitfullscreenerror",Y_),document.addEventListener("mozfullscreenchange",Y_),document.addEventListener("mozfullscreenerror",Y_),document.addEventListener("MSFullscreenChange",Y_),document.addEventListener("MSFullscreenError",Y_)}}function Y_(e){var t=e.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),n=document.createEvent("Event");n.initEvent(t,e.bubbles,e.cancelable),e.target.dispatchEvent(n)}function q_(){}function Z_(){Me().jg()&&!L_&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(L_=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=J_,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function J_(e){var t,n,i=this;return L(function(r){switch(r.g){case 1:return _(r,L_.call(i,e),2);case 2:if(!(t=r.h).supported||!e.keySystemConfiguration)return r.return(t);if(F_(n=t.keySystemAccess))return navigator.mediaCapabilities.decodingInfo=L_,r.return(t);if(navigator.mediaCapabilities.decodingInfo=Q_,n){r.A(3);break}return _(r,$_(e),4);case 4:return t.keySystemAccess=r.h,r.return(t);case 3:return r.return(Q_.call(i,e))}})}function Q_(e){var t,n,i,r,a,o,s,u=this;return L(function(l){switch(l.g){case 1:return n=t=null,!e.keySystemConfiguration||(i=e.keySystemConfiguration,r=i.keySystem,n=i.audio&&i.audio.encryptionScheme,t=i.video&&i.video.encryptionScheme,a=B_(r),o={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},j_(n,a)&&j_(t,a))?_(l,L_.call(u,e),2):l.return(o);case 2:if((s=l.h).keySystemAccess){s.keySystemAccess=new U_(s.keySystemAccess,t,n),l.A(3);break}if(!e.keySystemConfiguration){l.A(3);break}return _(l,$_(e),5);case 5:s.keySystemAccess=l.h;case 3:return l.return(s)}})}function $_(e){var t,n;return L(function(i){if(1==i.g){var r=e.keySystemConfiguration,a=[],o=[];return r.audio&&a.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&o.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},a.length&&(r.audioCapabilities=a),o.length&&(r.videoCapabilities=o),t=r,_(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}function ew(){}function tw(){Me().kc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),ew.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=nw)}function nw(t){var n,i,r,a,o,s,u;return L(function(l){switch(l.g){case 1:if(n={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:t},Me(),i=t.video,r=t.audio,"media-source"!=t.type){if("file"!=t.type)return l.return(n);if(i&&(a=i.contentType,""==cs().canPlayType(a))||r&&(o=r.contentType,""==cs().canPlayType(o)))return l.return(n);l.A(2);break}if(!dv())return l.return(n);if(!i){l.A(3);break}return _(l,function(t){var n;return L(function(i){return 1==i.g?"CAST"!==Me().Ja()?i.A(2):_(i,function(t){var n,i,r,a;return L(function(o){if(1==o.g){if(!(e.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return o.return(Ot(t.contentType));switch(n=t.contentType,t.width&&t.height&&1280<t.width&&720<t.height&&(n+="; width="+t.width+"; height="+t.height),t.framerate&&(24>(i=Math.round(t.framerate))||30<i)&&(n+="; framerate="+t.framerate),t.transferFunction||""){case"":case"srgb":break;case"pq":n+="; eotf=smpte2084";break;case"hlg":n+="; eotf=arib-std-b67";break;default:return o.return(!1)}return r=!1,(a=lw).has(n)?(r=a.get(n),o.A(2)):_(o,cast.__platform__.canDisplayType(n),3)}return 2!=o.g&&(r=o.h,a.set(n,r)),o.return(r)})}(t),3):2!=i.g?(n=i.h,i.return(n)):i.return(Ot(t.contentType))})}(i),4);case 4:if(!l.h)return l.return(n);case 3:if(r){var h=Me().Ja(),c=r.contentType;if("CAST"===h&&r.spatialRendering&&(c+="; spatialRendering=true"),!Ot(c))return l.return(n)}case 2:return t.keySystemConfiguration?(s=t.keySystemConfiguration,_(l,function(e,t,n){var i,r,a,o,s,u,l,h,c,d,p;return L(function(f){switch(f.g){case 1:if(i=[],r=[],n.audio&&(a={robustness:n.audio.robustness||"",contentType:t.contentType},Me().hj()&&t.contentType.includes('codecs="ac-3"')&&(a.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(a.encryptionScheme=n.audio.encryptionScheme),i.push(a)),n.video&&(o={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(o.encryptionScheme=n.video.encryptionScheme),r.push(o)),s={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(s.audioCapabilities=i),r.length&&(s.videoCapabilities=r),u=e?e.contentType:"",l=t?t.contentType:"",h=Li(u)+";"+Pi(u),c=Li(l)+";"+Pi(l),d=n.keySystem,p=null,S(f,2),Rr.has(h+"#"+c+"#"+d)){p=Rr.get(h+"#"+c+"#"+d)||null,f.A(4);break}return _(f,navigator.requestMediaKeySystemAccess(n.keySystem,[s]),5);case 5:p=f.h,Rr.set(h+"#"+c+"#"+d,p);case 4:A(f,3);break;case 2:E(f);case 3:return f.return(p)}})}(i,r,s),6)):(n.supported=!0,l.return(n));case 6:(u=l.h)&&(n.supported=!0,n.keySystemAccess=u);case 5:return l.return(n)}})}k_.Aria=R_,R_.install=N_,M_(N_),U_.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=l(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(n=(t=l(e.audioCapabilities)).next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},U_.prototype.createMediaKeys=function(){return this.g.createMediaKeys()},k_.EmeEncryptionScheme=G_,G_.install=H_,M_(H_),k_.Fullscreen=K_,K_.install=X_,M_(X_),k_.MCapEncryptionScheme=q_,q_.install=Z_,M_(Z_,-2),k_.MediaCapabilities=ew,ew.install=tw,ew.originalMcap=null;var iw,rw,aw,ow,sw,uw,lw=new Map;function hw(){}function cw(){var t=Me(),n="WEBKIT"===t.Fa()?t.Ea():null;for((e.MediaSource||e.ManagedMediaSource)&&n&&e.MediaSource&&(12>=n?(dw(),function(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}()):15>=n&&dw()),n=(t=l(t.rj())).next();!n.done;n=t.next())pw(n.value);(e.MediaSource||e.ManagedMediaSource)&&function(){if(e.MediaSource){var t=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(e){return"mp2t"!=Ii(e)&&t(e)}}if(e.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return"mp2t"!=Ii(e)&&n(e)}}}(),e.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&function(){var e=MediaSource.isTypeSupported;Me().Tj()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(e){return e.startsWith("codecs=")});if(0>i)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),a=r.findIndex(function(e){return e.startsWith("vp09")});return 0<=a&&(r[a]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}()}function dw(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,D.apply(0,arguments));return t.abort=function(){},t}}function pw(t){var n=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(e){return Pi(e)!=t&&n(e)},e.ManagedMediaSource){var i=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);e.ManagedMediaSource.isTypeSupported=function(e){return Pi(e)!=t&&i(e)}}}function fw(){}function gw(){screen.orientation&&screen.orientation.unlock||(null!=screen.orientation?(void 0===screen.orientation.lock&&(screen.orientation.lock=function(){return Promise.resolve()}),void 0===screen.orientation.unlock&&(screen.orientation.unlock=function(){})):null!=e.orientation&&function(){function t(){switch(e.orientation){case-90:n.type="landscape-secondary",n.angle=270;break;case 0:n.type="portrait-primary",n.angle=0;break;case 90:n.type="landscape-primary",n.angle=90;break;case 180:n.type="portrait-secondary",n.angle=180}}var n=new mw;screen.orientation=n,t(),e.addEventListener("orientationchange",function(){t();var e=new V("change");n.dispatchEvent(e)})}())}function mw(){$.call(this),this.type="",this.angle=0}function vw(){}function yw(t){e.HTMLVideoElement&&e.WebKitMediaKeys&&e.shakaMediaKeysPolyfill!=kw&&(void 0!==t&&t&&(iw=!0,rw=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),aw=HTMLMediaElement.prototype.setMediaKeys,ow=e.MediaKeys,sw=e.MediaKeySystemAccess,uw=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=_w,e.MediaKeys=Tw,e.MediaKeySystemAccess=Sw,navigator.requestMediaKeySystemAccess=bw,e.shakaMediaKeysPolyfill=kw,_r.clear(),Rr.clear())}function bw(e,t){try{var n=new Sw(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function _w(e){var t=this.mediaKeys;return t&&t!=e&&Aw(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Aw(e,this):Promise.resolve()}function ww(e){if(Ee(e=Te(e.initData)).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Be(e=Oe(e.subarray(4),!0));var t=new Event("encrypted");t.initDataType="skd",t.initData=Se(e),this.dispatchEvent(t)}function Sw(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(t=(e=l(t)).next();!t.done;t=e.next()){var n=t.value;if("required"==n.persistentState)t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var a=l(n.audioCapabilities),o=a.next();!o.done;o=a.next())(o=o.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.audioCapabilities.push(o),r=!0));if(n.videoCapabilities)for(a=(n=l(n.videoCapabilities)).next();!a.done;a=n.next())(a=a.value).contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,a.contentType.split(";")[0])&&(t.videoCapabilities.push(a),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t)return void(this.g=t)}throw(e=Error("Unsupported keySystem")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Tw(e){this.h=new WebKitMediaKeys(e),this.g=new At}function Aw(e,t){if(e.g.Sa(),!t)return Promise.resolve();e.g.o(t,"webkitneedkey",ww);try{return Au(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(e){return Promise.reject(e)}}function Ew(e){$.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new At,this.sessionId="",this.expiration=NaN,this.closed=new Br,this.keyStatuses=new Cw}function xw(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new V("keystatuseschange"),e.dispatchEvent(t)}function Cw(){this.size=0,this.g=void 0}M_(tw,-1),k_.MediaSource=hw,hw.install=cw,M_(cw),k_.Orientation=fw,fw.install=gw,m(mw,$),mw.prototype.lock=function(e){function t(e){return screen.lockOrientation?screen.lockOrientation(e):screen.mozLockOrientation?screen.mozLockOrientation(e):!!screen.msLockOrientation&&screen.msLockOrientation(e)}var n=!1;switch(e){case"natural":n=t("default");break;case"any":n=!0,this.unlock();break;default:n=t(e)}return n?Promise.resolve():((e=Error("screen.orientation.lock() is not available on this device")).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(e))},mw.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},M_(gw),k_.PatchedMediaKeysApple=vw,vw.uninstall=function(){e.shakaMediaKeysPolyfill==kw&&iw&&(iw=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",rw),HTMLMediaElement.prototype.setMediaKeys=aw,e.MediaKeys=ow,e.MediaKeySystemAccess=sw,navigator.requestMediaKeySystemAccess=uw,rw=uw=aw=sw=ow=null,e.shakaMediaKeysPolyfill="",_r.clear(),Rr.clear())},vw.install=yw,Sw.prototype.createMediaKeys=function(){var e=new Tw(this.keySystem);return Promise.resolve(e)},Sw.prototype.getConfiguration=function(){return this.g},Tw.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary"))throw new TypeError("Session type "+e+" is unsupported on this platform.");return new Ew(this.h,e)},Tw.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Tw.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},m(Ew,$),(i=Ew.prototype).generateRequest=function(e,t){var n=this;this.h=new Br;try{var i=this.l.createSession("video/mp4",Te(t));this.i=i,this.sessionId=i.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(e){n.h&&(n.h.resolve(),n.h=null),e=new V("message",e=(new Map).set("messageType",null==n.keyStatuses.Lc()?"license-request":"license-renewal").set("message",Se(e.message))),n.dispatchEvent(e)}),this.j.o(i,"webkitkeyadded",function(){n.g&&(xw(n,"usable"),n.g.resolve(),n.g=null)}),this.j.o(i,"webkitkeyerror",function(){var e=Error("EME PatchedMediaKeysApple key error");if(e.errorCode=n.i.error,null!=n.h)n.h.reject(e),n.h=null;else if(null!=n.g)n.g.reject(e),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:xw(n,"output-not-allowed");break;default:xw(n,"internal-error")}}),xw(this,"status-pending")}catch(e){this.h.reject(e)}return this.h},i.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},i.update=function(e){this.g=new Br;try{this.i.update(Te(e))}catch(e){this.g.reject(e)}return this.g},i.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Sa()}catch(e){this.closed.reject(e)}return this.closed},i.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},(i=Cw.prototype).Lc=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Dr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Dr.value();return!(!this.g||!we(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var kw="apple";function Iw(){}function Mw(){if(e.MediaKeys){var t=Me();MediaKeys.prototype.setServerCertificate&&t.Ee()||(MediaKeys.prototype.setServerCertificate=Pw)}}function Pw(){return Promise.resolve(!1)}function Lw(){}function Dw(){if(!(!e.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Kw="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Nw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Ow,e.MediaKeys=Bw,e.MediaKeySystemAccess=Uw,e.shakaMediaKeysPolyfill=Xw}}function Rw(e){return Kw?Kw+e.charAt(0).toUpperCase()+e.slice(1):e}function Nw(e,t){try{var n=new Uw(e,t);return Promise.resolve(n)}catch(e){return Promise.reject(e)}}function Ow(e){var t=this.mediaKeys;return t&&t!=e&&Fw(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&Fw(e,this),Promise.resolve()}function Uw(e,t){this.g=this.keySystem=e;var n=!1;"org.w3.clearkey"==e&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video");for(var a=(t=l(t)).next();!a.done;a=t.next()){var o={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:(a=a.value).initDataTypes,sessionTypes:["temporary"],label:a.label},s=!1;if(a.audioCapabilities)for(var u=l(a.audioCapabilities),h=u.next();!h.done;h=u.next())(h=h.value).contentType&&(s=!0,r.canPlayType(h.contentType.split(";")[0],this.g)&&(o.audioCapabilities.push(h),i=!0));if(a.videoCapabilities)for(h=(u=l(a.videoCapabilities)).next();!h.done;h=u.next())(h=h.value).contentType&&(s=!0,r.canPlayType(h.contentType,this.g)&&(o.videoCapabilities.push(h),i=!0));if(s||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),"required"==a.persistentState&&(n?(o.persistentState="required",o.sessionTypes=["persistent-license"]):i=!1),i)return void(this.h=o)}throw n="Unsupported keySystem","org.w3.clearkey"!=e&&"com.widevine.alpha"!=e||(n="None of the requested configurations were supported."),(e=Error(n)).name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}function Bw(e){this.l=e,this.h=null,this.g=new At,this.i=[],this.j=new Map}function Fw(e,t){e.h=t,e.g.Sa();var n=Kw;t&&(e.g.o(t,n+"needkey",function(t){var n=new CustomEvent("encrypted");n.initDataType="cenc",n.initData=Se(t.initData),e.h.dispatchEvent(n)}),e.g.o(t,n+"keymessage",function(t){var n=jw(e,t.sessionId);n&&(t=new V("message",t=(new Map).set("messageType",null==n.keyStatuses.Lc()?"licenserequest":"licenserenewal").set("message",t.message)),n.h&&(n.h.resolve(),n.h=null),n.dispatchEvent(t))}),e.g.o(t,n+"keyadded",function(t){(t=jw(e,t.sessionId))&&t.ready()}),e.g.o(t,n+"keyerror",function(t){var n=jw(e,t.sessionId);if(n){var i=Error("EME v0.1b key error"),r=t.errorCode;r.systemCode=t.systemCode,i.errorCode=r,!t.sessionId&&n.h?(45==t.systemCode&&(i.message="Unsupported session type."),n.h.reject(i),n.h=null):t.sessionId&&n.g?(n.g.reject(i),n.g=null):(i=t.systemCode,t.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?Ww(n,"output-restricted"):Ww(n,1==i?"expired":"internal-error"))}}))}function jw(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Gw(e,t,n){$.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Br,this.keyStatuses=new zw}function Hw(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if("persistent-license"==e.l)if(n)var i=Te(Be("LOAD_SESSION|"+n));else{var r=Be("PERSISTENT|");i=qe(r,t)}else i=Te(t)}catch(e){return Promise.reject(e)}e.h=new Br;var a=Rw("generateKeyRequest");try{e.j[a](e.i,i)}catch(t){if("InvalidStateError"!=t.name)return e.h=null,Promise.reject(t);new zi(function(){try{e.j[a](e.i,i)}catch(t){e.h.reject(t),e.h=null}}).X(.01)}return e.h}function Vw(e,t,n){if(e.g)e.g.then(function(){return Vw(e,t,n)}).catch(function(){return Vw(e,t,n)});else{if(e.g=t,"webkit-org.w3.clearkey"==e.i){var i=Ne(n),r=JSON.parse(i);"oct"!=r.keys[0].kty&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=Ke(r.keys[0].k),r=Ke(r.keys[0].kid)}else i=Te(n),r=null;var a=Rw("addKey");try{e.j[a](e.i,i,r,e.sessionId)}catch(t){e.g.reject(t),e.g=null}}}function Ww(e,t){var n=e.keyStatuses;n.size=null==t?0:1,n.g=t,t=new V("keystatuseschange"),e.dispatchEvent(t)}function zw(){this.size=0,this.g=void 0}M_(function(){e.HTMLVideoElement&&e.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||yw())}),k_.PatchedMediaKeysCert=Iw,Iw.install=Mw,M_(Mw),k_.PatchedMediaKeysWebkit=Lw,Lw.install=Dw,Uw.prototype.createMediaKeys=function(){var e=new Bw(this.g);return Promise.resolve(e)},Uw.prototype.getConfiguration=function(){return this.h},Bw.prototype.createSession=function(e){if("temporary"!=(e=e||"temporary")&&"persistent-license"!=e)throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Gw(t,this.l,e),this.i.push(e),e},Bw.prototype.setServerCertificate=function(){return Promise.resolve(!1)},Bw.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")},m(Gw,$),(i=Gw.prototype).ready=function(){Ww(this,"usable"),this.g&&this.g.resolve(),this.g=null},i.generateRequest=function(e,t){return Hw(this,t,null)},i.load=function(e){return"persistent-license"==this.l?Hw(this,null,e):Promise.reject(Error("Not a persistent session."))},i.update=function(e){var t=new Br;return Vw(this,t,e),t},i.close=function(){if("persistent-license"!=this.l){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=Rw("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch(e){}}return this.closed.resolve(),this.closed},i.remove=function(){return"persistent-license"!=this.l?Promise.reject(Error("Not a persistent session.")):this.close()},(i=zw.prototype).Lc=function(){return this.g},i.forEach=function(e){this.g&&e(this.g,Dr.value())},i.get=function(e){if(this.has(e))return this.g},i.has=function(e){var t=Dr.value();return!(!this.g||!we(e,t))},i.entries=function(){},i.keys=function(){},i.values=function(){};var Kw="",Xw="webkit";function Yw(){}function qw(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;t.requestPictureInPicture&&document.exitPictureInPicture||!t.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,t.requestPictureInPicture=Jw,Object.defineProperty(t,"disablePictureInPicture",{get:$w,set:eS,enumerable:!0,configurable:!0}),document.exitPictureInPicture=Qw,document.addEventListener("webkitpresentationmodechanged",Zw,!0))}}function Zw(e){if("picture-in-picture"==(e=e.target).webkitPresentationMode){document.pictureInPictureElement=e;var t=new Event("enterpictureinpicture");e.dispatchEvent(t)}else document.pictureInPictureElement==e&&(document.pictureInPictureElement=null),t=new Event("leavepictureinpicture"),e.dispatchEvent(t)}function Jw(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function Qw(){var e=document.pictureInPictureElement;return e?(e.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function $w(){return!!this.hasAttribute("disablePictureInPicture")||!this.webkitSupportsPresentationMode("picture-in-picture")}function eS(e){e?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}function tS(){}function nS(){e.crypto&&("randomUUID"in e.crypto||(e.crypto.randomUUID=iS))}function iS(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}function rS(){}function aS(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:oS})}function oS(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}function sS(){}function uS(){for(var e=l([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())(t=t.value).prototype.indexOf||(t.prototype.indexOf=lS),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=hS),t.prototype.includes||(t.prototype.includes=cS)}function lS(e,t){return Array.prototype.indexOf.call(this,e,t)}function hS(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function cS(e,t){return-1!==this.indexOf(e,t)}function dS(){}function pS(){if(e.HTMLMediaElement){var t=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var e=t.apply(this);return e&&e.catch(function(){}),e}}}function fS(){}function gS(){if(e.HTMLVideoElement){var t=HTMLVideoElement.prototype;!t.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in t||"number"==typeof cs().webkitDroppedFrameCount)&&(t.getVideoPlaybackQuality=mS)}}function mS(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}function vS(){}function yS(){if(!e.VTTCue&&e.TextTrackCue){var t=null,n=TextTrackCue.length;if(3==n)t=bS;else if(6==n)t=_S;else{try{var i=!!bS(1,2,"")}catch(e){i=!1}i&&(t=bS)}t&&(e.VTTCue=function(e,n,i){return t(e,n,i)})}}function bS(t,n,i){return new e.TextTrackCue(t,n,i)}function _S(t,n,i){return new e.TextTrackCue(t+"-"+n+"-"+i,t,n,i)}function wS(e){$.call(this),this.h=e,this.l=null,this.g=[],this.i=-1,this.j=null,this.m=new At}function SS(){}M_(Dw),k_.PiPWebkit=Yw,Yw.install=qw,M_(qw),k_.RandomUUID=tS,tS.install=nS,M_(nS),k_.Symbol=rS,rS.install=aS,M_(aS),k_.TypedArray=sS,sS.install=uS,M_(uS),k_.VideoPlayPromise=dS,dS.install=pS,M_(pS),k_.VideoPlaybackQuality=fS,fS.install=gS,M_(gS),k_.VTTCue=vS,vS.install=yS,M_(yS),m(wS,$),(i=wS.prototype).destroy=function(){var e=this;return L(function(t){if(1==t.g)return _(t,e.removeAllItems(),2);e.h=null,e.m&&(e.m.release(),e.m=null),$.prototype.release.call(e),w(t)})},i.configure=function(e){this.l=e},i.getConfiguration=function(){return this.l},i.getCurrentItem=function(){return this.g.length&&0<=this.i&&this.i<this.g.length?this.g[this.i]:null},i.getCurrentItemIndex=function(){return this.i},i.getItems=function(){return this.g.slice()},i.insertItems=function(e){this.g.push.apply(this.g,h(e)),this.dispatchEvent(new V("itemsinserted"))},i.removeAllItems=function(){var e=this;return L(function(t){switch(t.g){case 1:if(e.m.Sa(),!(e.g.length&&0<=e.i)){t.A(2);break}return _(t,e.h.nc(),2);case 2:if(!e.j){t.A(4);break}if(e.j.Tf.u){t.A(5);break}return _(t,e.j.Tf.destroy(),5);case 5:e.j=null;case 4:e.g=[],e.i=-1,e.dispatchEvent(new V("itemsremoved")),w(t)}})},i.playItem=function(e){var t,n,i,r,a,o,s,u,h,c,d,p,f,g,m=this;return L(function(v){if(1==v.g){if(m.m.Sa(),!m.g.length||e>=m.g.length)throw new Ce(2,7,7007);return t=m.g[e],m.i!=e&&(m.i=e,m.dispatchEvent(new V("currentitemchanged"))),n=m.h.h,0<(i=m.l?m.l.preloadNextUrlWindow:0)&&(r=!1,m.m.o(n,"timeupdate",function(){var e,t,a,o;return L(function(s){switch(s.g){case 1:if(m.j||1>=m.g.length||r||m.h.T()||!n.duration)return s.return();if(e=m.h.xa().end-n.currentTime,isNaN(e)){s.A(0);break}if(!(e<=i)){s.A(0);break}if(t=m.l&&m.l.repeatMode,a=null,m.i+1<m.g.length?a=m.g[m.i+1]:1==t&&(a=m.g[0]),!a){s.A(0);break}return r=!0,o=null,S(s,5),_(s,m.h.preload(a.manifestUri,a.startTime,a.mimeType,a.config),7);case 7:o=s.h,A(s,6);break;case 5:E(s),o=null;case 6:m.j={item:a,Tf:o},r=!1,w(s)}})})),m.m.o(m.h,"complete",function(){var e=m.l&&m.l.repeatMode,t=!1;if(2==e)t=!0;else{var i=m.i+1;i<m.g.length?m.playItem(i):1==e&&(1==m.g.length?t=!0:m.playItem(0))}t&&(n.paused?(n.currentTime=m.h.xa().start,n.play()):m.m.o(n,"paused",function(){n.currentTime=m.h.xa().start,n.play()}))}),t.config&&(m.h.vj(),m.h.configure(t.config)),a=t.manifestUri,m.j&&m.j.item==t&&m.j.Tf&&(a=m.j.Tf),_(v,m.h.load(a,t.startTime,t.mimeType),2)}if(m.j=null,t.extraText)for(o=l(t.extraText),s=o.next();!s.done;s=o.next())(u=s.value).mime?m.h.Yd(u.uri,u.language,u.kind,u.mime,u.codecs):m.h.Yd(u.uri,u.language,u.kind);if(t.extraThumbnail)for(h=l(t.extraThumbnail),c=h.next();!c.done;c=h.next())d=c.value,m.h.$e(d);if(t.extraChapter)for(p=l(t.extraChapter),f=p.next();!f.done;f=p.next())g=f.value,m.h.Ze(g.uri,g.language,g.mime);w(v)})},H("shaka.queue.QueueManager",wS),wS.prototype.playItem=wS.prototype.playItem,wS.prototype.removeAllItems=wS.prototype.removeAllItems,wS.prototype.insertItems=wS.prototype.insertItems,wS.prototype.getItems=wS.prototype.getItems,wS.prototype.getCurrentItemIndex=wS.prototype.getCurrentItemIndex,wS.prototype.getCurrentItem=wS.prototype.getCurrentItem,wS.prototype.getConfiguration=wS.prototype.getConfiguration,wS.prototype.configure=wS.prototype.configure,wS.prototype.destroy=wS.prototype.destroy,Md=function(e){return new wS(e)},SS.prototype.parseInit=function(){},SS.prototype.setSequenceMode=function(){},SS.prototype.setManifestType=function(){},SS.prototype.parseMedia=function(e,t){for(var n=null,i=[],r=(e=l(e=Ne(e).split(/\r?\n/))).next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=TS.exec(r))){var a=AS.exec(r[1]);r=new zn(a=60*parseInt(a[1],10)+parseFloat(a[2].replace(",",".")),t.segmentEnd?t.segmentEnd:a+2,r[2]),n&&(n.endTime=a,i.push(n)),n=r}return n&&i.push(n),i},H("shaka.text.LrcTextParser",SS),SS.prototype.parseMedia=SS.prototype.parseMedia,SS.prototype.setManifestType=SS.prototype.setManifestType,SS.prototype.setSequenceMode=SS.prototype.setSequenceMode,SS.prototype.parseInit=SS.prototype.parseInit;var TS=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,AS=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;function ES(){}function xS(e,t,n,i,r,a,o,s,u,h,c,d,p){var f=h;if(mn(e)){if(!c)return null;var g={tagName:"span",children:[bn(e)],attributes:{},parent:null}}else g=e;for(var m=null,v=l(eT),y=v.next();!y.done&&!(m=RS(g,"backgroundImage",i,"#",y.value)[0]);y=v.next());v=null;var b=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if((y=Cn(g,eT,"backgroundImage"))&&b.test(y)){if((v=parseInt(y.split(":").pop(),10)-1)>=p.length)return null;v=p[v]}else d&&y&&!y.startsWith("#")&&(b=new re(d),y=new re(y),(y=b.resolve(y).toString())&&(v=y));if(("p"==e.tagName||m||v)&&(c=!0),e=c,y="default"==(g.attributes["xml:space"]||(s?"default":"preserve")),s=[],!(b=g.children.every(mn)))for(var _=l(g.children),w=_.next();!w.done;w=_.next())(w=xS(w.value,t,n,i,r,a,o,y,u,g,c,d,p))&&s.push(w);if(i=null!=h,d=bn(g),d=g.children.length&&d&&/\S/.test(d),!((_=g.attributes.begin||g.attributes.end||g.attributes.dur)||d||"br"==g.tagName||0!=s.length||i&&!y))return null;for(d=(p=OS(g,n)).start,p=p.end;f&&f.tagName&&"tt"!=f.tagName;)d=(p=NS(f,n,d,p)).start,p=p.end,f=f.parent;if(null==d&&(d=0),d+=t.periodStart,p=null==p?1/0:p+t.periodStart,d=Math.max(d,t.segmentStart),p=Math.min(p,t.segmentEnd),!_&&0<s.length)for(d=1/0,p=0,n=(t=l(s)).next();!n.done;n=t.next())n=n.value,d=Math.min(d,n.startTime),p=Math.max(p,n.endTime);if("br"==g.tagName)return(r=new zn(d,p,"")).lineBreak=!0,r;if(t="",b&&(t=Ge(bn(g)||""),y&&(t=t.replace(/\s+/g," "))),(t=new zn(d,p,t)).nestedCues=s,c||(t.isContainer=!0),u&&(t.cellResolution=u),u=RS(g,"region",a,"")[0],g.attributes.region&&u&&u.attributes["xml:id"]){var S=u.attributes["xml:id"];t.region=o.filter(function(e){return e.id==S})[0]}return o=u,h&&i&&!g.attributes.region&&!g.attributes.style&&(o=RS(h,"region",a,"")[0]),function(e,t,n,i,r,a,o,s){if("rtl"==MS(t,n,a,"direction",o=o||s)&&(e.direction="rtl"),"tb"==(s=MS(t,n,a,"writingMode",o))||"tblr"==s?e.writingMode="vertical-lr":"tbrl"==s?e.writingMode="vertical-rl":"rltb"==s||"rl"==s?e.direction="rtl":s&&(e.direction=ii),(s=MS(t,n,a,"textAlign",!0))?(e.positionAlign=JS.get(s),e.lineAlign=ZS.get(s),e.textAlign=ei[s.toUpperCase()]):e.textAlign=$n,(s=MS(t,n,a,"displayAlign",!0))&&(e.displayAlign=ni[s.toUpperCase()]),(s=MS(t,n,a,"color",o))&&(e.color=kS(s)),(s=MS(t,n,a,"backgroundColor",o))&&(e.backgroundColor=kS(s)),(s=MS(t,n,a,"border",o))&&(e.border=s),s=MS(t,n,a,"fontFamily",o))switch(s){case"monospaceSerif":e.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":e.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":e.fontFamily="sans-serif";break;case"monospaceSansSerif":e.fontFamily="Consolas,monospace";break;case"proportionalSerif":e.fontFamily="serif";break;default:e.fontFamily=s.split(",").filter(function(e){return"default"!=e}).join(",")}switch((s=MS(t,n,a,"fontWeight",o))&&"bold"==s&&(e.fontWeight=ci),s=MS(t,n,a,"wrapOption",o),e.wrapLine=!s||"noWrap"!=s,(s=MS(t,n,a,"lineHeight",o))&&s.match(HS)&&(e.lineHeight=s),(s=MS(t,n,a,"fontSize",o))&&(s.match(HS)||s.match(GS))&&(e.fontSize=s),(s=MS(t,n,a,"fontStyle",o))&&(e.fontStyle=fi[s.toUpperCase()]),i?(r=i.attributes.imageType||i.attributes.imagetype,s=i.attributes.encoding,i=bn(i).trim(),"PNG"==r&&"Base64"==s&&i&&(e.backgroundImage="data:image/png;base64,"+i)):r&&(e.backgroundImage=r),(i=MS(t,n,a,"textOutline",o))&&((i=i.split(" "))[0].match(HS)?e.textStrokeColor=e.color:(e.textStrokeColor=kS(i[0]),i.shift()),i[0]&&i[0].match(HS)?e.textStrokeWidth=i[0]:e.textStrokeColor=""),(i=MS(t,n,a,"letterSpacing",o))&&i.match(HS)&&(e.letterSpacing=i),(i=MS(t,n,a,"linePadding",o))&&i.match(HS)&&(e.linePadding=i),(i=MS(t,n,a,"opacity",o))&&(e.opacity=parseFloat(i)),(i=PS(n,a,"textDecoration"))&&IS(e,i),(i=LS(t,a,"textDecoration"))&&IS(e,i),(i=MS(t,n,a,"textCombine",o))&&(e.textCombineUpright=i),MS(t,n,a,"ruby",o)){case"container":e.rubyTag="ruby";break;case"text":e.rubyTag="rt"}}(t,g,o,m,v,r,e,0==s.length),t}function CS(e,t,n){var i=new Yt,r=e.attributes["xml:id"];if(!r)return null;i.id=r,r=null,n&&(r=jS.exec(n)||VS.exec(n)),n=r?Number(r[1]):null,r=r?Number(r[2]):null;var a,o=PS(e,t,"extent");if(o){var s=(a=jS.exec(o))||VS.exec(o);null!=s&&(i.width=Number(s[1]),i.height=Number(s[2]),a||(null!=n&&(i.width=100*i.width/n),null!=r&&(i.height=100*i.height/r)),i.widthUnits=a||null!=n?qt:0,i.heightUnits=a||null!=r?qt:0)}return(e=PS(e,t,"origin"))&&null!=(s=(a=jS.exec(e))||VS.exec(e))&&(i.viewportAnchorX=Number(s[1]),i.viewportAnchorY=Number(s[2]),a?o||(i.width=100-i.viewportAnchorX,i.widthUnits=qt,i.height=100-i.viewportAnchorY,i.heightUnits=qt):(null!=r&&(i.viewportAnchorY=100*i.viewportAnchorY/r),null!=n&&(i.viewportAnchorX=100*i.viewportAnchorX/n)),i.viewportAnchorUnits=a||null!=n?qt:0),i}function kS(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&4==(t=t[1].split(",")).length?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function IS(e,t){for(var n=(t=l(t.split(" "))).next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(gi)||e.textDecoration.push(gi);break;case"noUnderline":e.textDecoration.includes(gi)&&Qt(e.textDecoration,gi);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Qt(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Qt(e.textDecoration,"overline")}}function MS(e,t,n,i,r){return r=void 0===r||r,(e=LS(e,n,i))?e:r?PS(t,n,i):null}function PS(e,t,n){return e?Cn(e,$S,n)||DS(e,t,n):null}function LS(e,t,n){return Cn(e,$S,n)||DS(e,t,n)}function DS(e,t,n){e=RS(e,"style",t,"");for(var i=null,r=0;r<e.length;r++){var a=En(e[r],"urn:ebu:tt:style",n);a||(a=Cn(e[r],$S,n)),a||(a=LS(e[r],t,n)),a&&(i=a)}return i}function RS(e,t,n,i,r){var a=[];if(!e||1>n.length)return a;var o=e;for(e=null;!e&&!(e=r?En(o,r,t):o.attributes[t])&&(o=o.parent););if(t=e)for(r=(t=l(t.split(" "))).next();!r.done;r=t.next())for(r=r.value,o=(e=l(n)).next();!o.done;o=e.next())if(i+(o=o.value).attributes["xml:id"]==r){a.push(o);break}return a}function NS(e,t,n,i){return e=OS(e,t),null==n?n=e.start:null!=e.start&&(n+=e.start),null==i?i=e.end:null!=e.start&&(i+=e.start),{start:n,end:i}}function OS(e,t){var n=US(e.attributes.begin,t),i=US(e.attributes.end,t);return e=US(e.attributes.dur,t),null==i&&null!=e&&(i=n+e),{start:n,end:i}}function US(e,t){var n=null;if(WS.test(e)){e=WS.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),a=Number(e[4]);n=(r+=(a+=(Number(e[5])||0)/t.h)/t.frameRate)+60*i+3600*n}else if(zS.test(e))n=BS(zS,e);else if(KS.test(e))n=BS(KS,e);else if(XS.test(e))e=XS.exec(e),n=Number(e[1])/t.frameRate;else if(YS.test(e))e=YS.exec(e),n=Number(e[1])/t.g;else if(qS.test(e))n=BS(qS,e);else if(e)throw new Ce(2,2,2001,"Could not parse cue time range in TTML");return n}function BS(e,t){return null==(e=e.exec(t))||""==e[0]?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+60*(Number(e[2])||0)+3600*(Number(e[1])||0)}function FS(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),0==this.g&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}Bi("application/x-subtitle-lrc",function(){return new SS}),ES.prototype.parseInit=function(){},ES.prototype.setSequenceMode=function(){},ES.prototype.setManifestType=function(){},ES.prototype.parseMedia=function(e,t,n,i){var r=Ne(e);if(e=[],""==r)return e;var a=fn(r,"tt",!0);if(!a)throw new Ce(2,2,2005,"Failed to parse TTML.");if(!(r=wn(a,"body")[0]))return[];var o=Cn(a,QS,"frameRate"),s=Cn(a,QS,"subFrameRate"),u=Cn(a,QS,"frameRateMultiplier"),h=Cn(a,QS,"tickRate"),c=Cn(a,QS,"cellResolution"),d=a.attributes["xml:space"]||"default",p=Cn(a,$S,"extent");if("default"!=d&&"preserve"!=d)throw new Ce(2,2,2005,"Invalid xml:space value: "+d);d="default"==d,o=new FS(o,s,u,h),c=function(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{Yc:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}(c),s=((s=wn(a,"metadata")[0])?s.children:[]).filter(function(e){return"\n"!=e}),u=wn(a,"style"),h=[];for(var f=l(a=wn(a,"region")),g=f.next();!g.done;g=f.next())(g=CS(g.value,u,p))&&h.push(g);if(yn(r,"p").length)throw new Ce(2,2,2001,"<p> can only be inside <div> in TTML");for(f=(p=l(yn(r,"div"))).next();!f.done;f=p.next())if(yn(f.value,"span").length)throw new Ce(2,2,2001,"<span> can only be inside <p> in TTML");return(t=xS(r,t,o,s,u,a,h,d,c,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e},H("shaka.text.TtmlTextParser",ES),ES.prototype.parseMedia=ES.prototype.parseMedia,ES.prototype.setManifestType=ES.prototype.setManifestType,ES.prototype.setSequenceMode=ES.prototype.setSequenceMode,ES.prototype.parseInit=ES.prototype.parseInit;var jS=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,GS=/^(\d{1,4}(?:\.\d+)?|100)%$/,HS=/^(\d+px|\d+em|\d*\.?\d+c)$/,VS=/^(\d+)px (\d+)px$/,WS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,zS=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,KS=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,XS=/^(\d*(?:\.\d*)?)f$/,YS=/^(\d*(?:\.\d*)?)t$/,qS=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),ZS=(new Map).set("left",oi).set("center","center").set("right","end").set("start",oi).set("end","end"),JS=(new Map).set("left","line-left").set("center","center").set("right","line-right"),QS=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],$S=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],eT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];function tT(){this.g=new ES}function nT(){this.g="UNKNOWN"}function iT(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],e.textAlign="middle"==t?$n:ei[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode="lr"==i[1]?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign="line-left"==t||"start"==t?"line-left":"line-right"==t||"end"==t?"line-right":"center"==t||"middle"==t?"center":Qn)):(i=/^region:(.*)$/.exec(t))?(t=function(e,t){return e=e.filter(function(e){return e.id==t}),e.length?e[0]:null}(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=si[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=ai,e.line=Number(n[1]),n[2]&&(e.lineAlign=si[n[2].toUpperCase()]))}function rT(){this.g=null}function aT(e,t,n){var i,r,a;return(new ca).box("payl",ma(function(e){i=Ne(e)})).box("iden",ma(function(e){r=Ne(e)})).box("sttg",ma(function(e){a=Ne(e)})).parse(e),i?function(e,t,n,i,r){if(Yn(e=new zn(i,r,e)),t&&(e.id=t),n)for(n=an(t=new tn(n));n;)iT(e,n,[]),nn(t),n=an(t);return e}(i,r,a,t,n):null}function oT(){}function sT(){this.g=new nT}function uT(e){var t="WEBVTT\n\n";if(""==e)return t;for(var n=(e=l((e=(e=e.replace(/\r+/g,"")).trim()).split("\n\n"))).next();!n.done;n=e.next())(n=n.value.split(/\n/))[0].match(/\d+/)&&n.shift(),n[0]=n[0].replace(/,/g,"."),t+=n.join("\n").replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+"\n\n";return t}function lT(){}function hT(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=cT(n))&&(e.color=n),(n=t.BackColour)&&(n=cT(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=ci),t.Italic&&(e.fontStyle=pi),t.Underline&&e.textDecoration.push(gi),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=ti,e.textAlign="start";break;case 2:e.displayAlign=ti,e.textAlign=$n;break;case 3:e.displayAlign=ti,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=$n;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=$n;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function cT(e){return 0<=(e=parseInt(e.replace("&H",""),16))?"rgba("+(255&e)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function dT(e){return 3600*((e=mT.exec(e))[1]?parseInt(e[1].replace(":",""),10):0)+60*parseInt(e[2],10)+parseFloat(e[3])}Bi("application/ttml+xml",function(){return new ES}),tT.prototype.parseInit=function(e){var t=!1;if((new ca).box("moov",da).box("trak",da).box("mdia",da).box("minf",da).box("stbl",da).V("stsd",pa).box("stpp",function(e){t=!0,e.parser.stop()}).parse(e),!t)throw new Ce(2,2,2007)},tT.prototype.setSequenceMode=function(){},tT.prototype.setManifestType=function(){},tT.prototype.parseMedia=function(e,t,n){var i=[],r=null,a=[],o=new Map,s=[];if((new ca).box("moof",da).box("traf",da).V("tfhd",function(e){r=ho(e.reader,e.flags).ce}).V("trun",function(e){for(var t=(e=l((e=fo(e.reader,e.version,e.flags)).Vh)).next();!t.done;t=e.next())s.push(t.value.sampleSize||r||0)}).V("subs",function(e){for(var t=e.reader,n=t.W(),i=-1,r=0;r<n;r++){var a=t.W();i+=a,a=t.Ga();for(var s=[],u=0;u<a;u++)1==e.version?s.push(t.W()):s.push(t.Ga()),t.aa(),t.aa(),t.W();o.set(i,s)}}).box("mdat",ma(function(e){a.push(e)})).parse(e,!1),0==a.length)throw new Ce(2,2,2007);for(var u=qe.apply(Ve,h(a)),c=0,d=0;d<s.length;d++){var p=Te(u,c,s[d]);c+=s[d];var f=o.get(d);if(f&&f.length){p=Te(p,0,f[0]);for(var g=[],m=f[0],v=1;v<f.length;v++){var y=Te(e,m,f[v]);y=We(y),g.push("data:image/png;base64,"+y),m+=f[v]}i=i.concat(this.g.parseMedia(p,t,n,g))}else i=i.concat(this.g.parseMedia(p,t,n,[]))}return i},H("shaka.text.Mp4TtmlParser",tT),tT.prototype.parseMedia=tT.prototype.parseMedia,tT.prototype.setManifestType=tT.prototype.setManifestType,tT.prototype.setSequenceMode=tT.prototype.setSequenceMode,tT.prototype.parseInit=tT.prototype.parseInit,Bi('application/mp4; codecs="stpp"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.im1i"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.im1t"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.im2i"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.im2t"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.etd1"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new tT}),Bi('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new tT}),Bi('application/mp4; codecs="stpp.TTML.im1t"',function(){return new tT}),nT.prototype.parseInit=function(){},nT.prototype.setSequenceMode=function(){},nT.prototype.setManifestType=function(e){this.g=e},nT.prototype.parseMedia=function(e,t){var n=(e=(e=Ne(e)).replace(/\r\n|\r(?=[^\n]|$)/gm,"\n")).split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new Ce(2,2,2e3);if(e=t.vttOffset,"HLS"==this.g)if(n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new Ce(2,2,2e3);if(null==(e=sn(e[1])))throw new Ce(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;95443.7176888889<=r;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}else t.periodStart&&t.vttOffset==t.periodStart&&(e=0);for(t=[],r=(i=l(n[0].split("\n"))).next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new tn(r);var a=new Yt;an(r),nn(r);for(var o=an(r);o;){var s=a,u=o;(o=/^id=(.*)$/.exec(u))?s.id=o[1]:(o=/^width=(\d{1,2}|100)%$/.exec(u))?s.width=Number(o[1]):(o=/^lines=(\d+)$/.exec(u))?(s.height=Number(o[1]),s.heightUnits=2):(o=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.regionAnchorX=Number(o[1]),s.regionAnchorY=Number(o[2])):(o=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(u))?(s.viewportAnchorX=Number(o[1]),s.viewportAnchorY=Number(o[2])):/^scroll=up$/.exec(u)&&(s.scroll="up"),nn(r),o=an(r)}t.push(a)}for(qn(i=new Map),r=[],a=(n=l(n.slice(1))).next();!a.done;a=n.next()){if((1!=(a=a.value.split("\n")).length||a[0])&&!/^NOTE($|[ \t])/.test(a[0])&&"STYLE"==a[0]){for(s=[],o=-1,u=1;u<a.length;u++)a[u].includes("::cue")&&(s.push([]),o=s.length-1),-1!=o&&(s[o].push(a[u]),a[u].includes("}")&&(o=-1));for(o=(s=l(s)).next();!o.done;o=s.next()){var h=o.value;o="global",(u=h[0].match(/\((.*)\)/))&&(o=u.pop()),u=h.slice(1,-1),h[0].includes("}")&&(h=/\{(.*?)\}/.exec(h[0]))&&(u=h[1].split(";")),(h=i.get(o))||(h=new zn(0,0,""));for(var c=!1,d=0;d<u.length;d++){var p=/^\s*([^:]+):\s*(.*)/.exec(u[d]);if(p){var f=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":c=!0,h.backgroundColor=f;break;case"color":c=!0,h.color=f;break;case"font-family":c=!0,h.fontFamily=f;break;case"font-size":c=!0,h.fontSize=f;break;case"font-weight":(700<=parseInt(f,10)||"bold"==f)&&(c=!0,h.fontWeight=ci);break;case"font-style":switch(f){case"normal":c=!0,h.fontStyle=di;break;case"italic":c=!0,h.fontStyle=pi;break;case"oblique":c=!0,h.fontStyle="oblique"}break;case"opacity":c=!0,h.opacity=parseFloat(f);break;case"text-combine-upright":c=!0,h.textCombineUpright=f;break;case"text-shadow":c=!0,h.textShadow=f;break;case"white-space":c=!0,h.wrapLine="noWrap"!=f}}}c&&i.set(o,h)}}if(c=e,1==(h=a).length&&!h[0]||/^NOTE($|[ \t])/.test(h[0])||"STYLE"==h[0]||"REGION"==h[0])a=null;else if(a=null,h[0].includes("--\x3e")||(a=h[0],h.splice(0,1)),o=on(s=new tn(h[0])),d=rn(s,/[ \t]+--\x3e[ \t]+/g),u=on(s),null==o||null==d||null==u)Y("Failed to parse VTT time code. Cue skipped:",a,h),a=null;else{for(o+=c,u+=c,c=h.slice(1).join("\n").trim(),i.has("global")?((h=i.get("global").clone()).startTime=o,h.endTime=u,h.payload=c):h=new zn(o,u,c),nn(s),o=an(s);o;)iT(h,o,t),nn(s),o=an(s);Yn(h,i),null!=a&&(h.id=a),a=h}a&&r.push(a)}return r},H("shaka.text.VttTextParser",nT),nT.prototype.parseMedia=nT.prototype.parseMedia,nT.prototype.setManifestType=nT.prototype.setManifestType,nT.prototype.setSequenceMode=nT.prototype.setSequenceMode,nT.prototype.parseInit=nT.prototype.parseInit,Bi("text/vtt",function(){return new nT}),Bi('text/vtt; codecs="vtt"',function(){return new nT}),Bi('text/vtt; codecs="wvtt"',function(){return new nT}),rT.prototype.parseInit=function(e){var t=this,n=!1;if((new ca).box("moov",da).box("trak",da).box("mdia",da).V("mdhd",function(e){e=po(e.reader,e.version),t.g=e.timescale}).box("minf",da).box("stbl",da).V("stsd",pa).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new Ce(2,2,2008);if(!n)throw new Ce(2,2,2008)},rT.prototype.setSequenceMode=function(){},rT.prototype.setManifestType=function(){},rT.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new Ce(2,2,2008);var n,i=0,r=[],a=[],o=!1,s=!1,u=!1,h=null;if((new ca).box("moof",da).box("traf",da).V("tfdt",function(e){o=!0,i=co(e.reader,e.version).baseMediaDecodeTime}).V("tfhd",function(e){h=ho(e.reader,e.flags).be}).V("trun",function(e){s=!0,r=fo(e.reader,e.version,e.flags).Vh}).box("mdat",ma(function(e){u=!0,n=e})).parse(e,!1),!u&&!o&&!s)throw new Ce(2,2,2008);e=i;for(var c=new ua(n,0),d=l(r),p=d.next();!p.done;p=d.next()){var f=(p=p.value).Wh||h,g=p.$f?i+p.$f:e;e=g+(f||0);var m=0;do{var v=c.W();m+=v;var y=null;"vttc"==ya(c.W())?8<v&&(y=c.Yb(v-8)):c.skip(v-8),f&&y&&(v=aT(y,t.periodStart+g/this.g,t.periodStart+e/this.g),a.push(v))}while(p.sampleSize&&m<p.sampleSize)}return a.filter(Yi)},H("shaka.text.Mp4VttParser",rT),rT.prototype.parseMedia=rT.prototype.parseMedia,rT.prototype.setManifestType=rT.prototype.setManifestType,rT.prototype.setSequenceMode=rT.prototype.setSequenceMode,rT.prototype.parseInit=rT.prototype.parseInit,Bi('application/mp4; codecs="wvtt"',function(){return new rT}),oT.prototype.parseInit=function(){},oT.prototype.setSequenceMode=function(){},oT.prototype.setManifestType=function(){},oT.prototype.parseMedia=function(e){var t=Ne(e).replace(/\r+/g,"");if(e=[],""==(t=t.trim()))return e;for(var n=(t=l(t.split("\n\n"))).next();!n.done;n=t.next()){var i=new tn((n=n.value.split("\n"))[0]),r=on(i),a=rn(i,/,/g);if(i=on(i),null==r||null==a||null==i)throw new Ce(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new zn(r,i,n.slice(1).join("\n").trim()))}return e},H("shaka.text.SbvTextParser",oT),oT.prototype.parseMedia=oT.prototype.parseMedia,oT.prototype.setManifestType=oT.prototype.setManifestType,oT.prototype.setSequenceMode=oT.prototype.setSequenceMode,oT.prototype.parseInit=oT.prototype.parseInit,Bi("text/x-subviewer",function(){return new oT}),sT.prototype.parseInit=function(){},sT.prototype.setSequenceMode=function(){},sT.prototype.setManifestType=function(){},sT.prototype.parseMedia=function(e,t,n){return e=Te(Be(e=uT(e=Ne(e)))),this.g.parseMedia(e,t,n,[])},H("shaka.text.SrtTextParser",sT),sT.srt2webvtt=uT,sT.prototype.parseMedia=sT.prototype.parseMedia,sT.prototype.setManifestType=sT.prototype.setManifestType,sT.prototype.setSequenceMode=sT.prototype.setSequenceMode,sT.prototype.parseInit=sT.prototype.parseInit,Bi("text/srt",function(){return new sT}),lT.prototype.parseInit=function(){},lT.prototype.setSequenceMode=function(){},lT.prototype.setManifestType=function(){},lT.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=(e=l(r=Ne(e).split(/\r?\n\s*\r?\n/))).next();!r.done;r=e.next()){var a=r.value;r=a,(a=pT.exec(a))&&(i=a[1],r=a[2]),"V4 Styles"==i||"V4+ Styles"==i?(t=r,t=n?t+"\n"+r:r):"Events"==i&&(n=n?n+"\n"+r:r)}for(i=[],r=null,e=(t=l(t.split(/\r?\n/))).next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(a=fT.exec(e)))if(e=a[1].trim(),a=a[2].trim(),"Format"==e)r=a.split(gT);else if("Style"==e){e=a.split(gT),a={};for(var o=0;o<r.length&&o<e.length;o++)a[r[o]]=e[o];i.push(a)}for(r=[],t=null,a=(n=l(n.split(/\r?\n/))).next(),e={};!a.done;e={Nj:void 0},a=n.next())if(a=a.value,!/^\s*;/.test(a)&&(o=fT.exec(a)))if(a=o[1].trim(),o=o[2].trim(),"Format"==a)t=o.split(gT);else if("Dialogue"==a){o=o.split(gT),a={};for(var s=0;s<t.length&&s<o.length;s++)a[t[s]]=o[s];o=new zn(s=dT(a.Start),dT(a.End),o.slice(t.length-1).join(",").replace(/\\N/g,"\n").replace(/\{[^}]+\}/g,"")),e.Nj=a.Style,(e=i.find(function(e){return function(t){return t.Name==e.Nj}}(e)))&&hT(o,e),r.push(o)}return r},H("shaka.text.SsaTextParser",lT),lT.prototype.parseMedia=lT.prototype.parseMedia,lT.prototype.setManifestType=lT.prototype.setManifestType,lT.prototype.setSequenceMode=lT.prototype.setSequenceMode,lT.prototype.parseInit=lT.prototype.parseInit;var pT=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,fT=/^\s*([^:]+):\s*(.*)/,gT=/\s*,\s*/,mT=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;function vT(e,t){var n=1&e[t+1]?7:9;return t+n<=e.length&&0<(e=((3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5)-n)?{le:n,wa:e}:null}function yT(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(60&e[t+2])>>>2;if(i>n.length-1)return null;var r=((192&e[t+2])>>>6)+1,a=(1&e[t+2])<<2;return a|=(192&e[t+3])>>>6,{sampleRate:n[i],channelCount:a,codec:"mp4a.40."+r}}function bT(e,t){if(t+1<e.length&&255===e[t]&&240==(246&e[t+1])){var n=1&e[t+1]?7:9;if(t+n>=e.length)return!1;var i=(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5;return!(i<=n)&&((t+=i)===e.length||t+1<e.length&&255===e[t]&&240==(246&e[t+1]))}return!1}function _T(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function wT(e,t){if(t+8>e.length||11!==e[t]||119!==e[t+1])return null;var n=e[t+4]>>6;if(3<=n)return null;var i=63&e[t+4],r=2*[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][3*i+n];if(t+r>e.length)return null;var a=e[t+6]>>5,o=0;2===a?o+=2:(1&a&&1!==a&&(o+=2),4&a&&(o+=2)),o=(e[t+6]<<8|e[t+7])>>12-o&1;var s=7&e[t+5];return e=new Uint8Array([n<<6|e[t+5]>>3<<1|s>>2,(3&s)<<6|a<<3|o<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][a]+o,Ma:e,wa:r}}function ST(e,t){if(11===e[t]&&119===e[t+1]){var n,i,r=0,a=5;for(t+=a;0<a;){i=e[t];var o=Math.min(a,8),s=8-o;n=(i&(n=4278190080>>>24+s<<s))>>s,r=r?r<<o|n:n,t+=1,a-=o}if(16>r)return!0}return!1}function TT(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function AT(e,t){if(t+8>e.length||2935!=(e[t]<<8|e[t+1]))return null;var n=new Ss(e.subarray(t+2));As(n,2),As(n,3);var i=Es(n,11)+1<<1,r=Es(n,2);if(3==r){r=[24e3,22060,16e3][r=Es(n,2)];var a=3}else r=[48e3,44100,32e3][r],a=Es(n,2);var o=Es(n,3),s=Es(n,1);return n=Es(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/(16*[1,2,3,6][a])),e=new Uint8Array([(8160&e)>>5,(31&e)<<3,r<<6|n<<1,o<<1|s,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][o]+s,Ma:e,wa:i})}function ET(e){this.j=e,this.h=0,this.g=new Map,this.i=null}Bi("text/x-ssa",function(){return new lT}),(i=_T.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/aac"==e.toLowerCase().split(";")[0]&&Ot(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/aac"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="'+(Di(t)||"mp4a.40.2")+'"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){for(var r=Te(e),a=_s(r),o=a.length;o<r.length&&!bT(r,o);o++);if(e=1e3*n.endTime,(a=bs(a)).length&&n&&(a=a.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(e=a.data),!(a=yT(r,o)))return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));t.audioSamplingRate=a.sampleRate,t.channelsCount=a.channelCount;for(var s=[];o<r.length;){var u=vT(r,o);if(!u)return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));var l=u.le+u.wa;o+l<=r.length&&s.push({data:r.subarray(o+u.le,o+l),size:u.wa,duration:1024,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),o+=l}return r=a.sampleRate,e=Math.floor(e*r/1e3),i=new bo([i={id:t.id,type:"audio",codecs:a.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.h,baseMediaDecodeTime:e,Cb:s},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=_o(i),this.g.set(n,t)),n=this.i!==t,i=Eo(i),this.i=t,this.h++,n?(t=qe(t,i),Promise.resolve(t)):Promise.resolve(i)},H("shaka.transmuxer.AacTransmuxer",_T),_T.prototype.transmux=_T.prototype.transmux,_T.prototype.getOriginalMimeType=_T.prototype.getOriginalMimeType,_T.prototype.convertCodecs=_T.prototype.convertCodecs,_T.prototype.isSupported=_T.prototype.isSupported,_T.prototype.destroy=_T.prototype.destroy,yi("audio/aac",function(){return new _T("audio/aac")},wi),(i=TT.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ac3"==e.toLowerCase().split(";")[0]&&Ot(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ac3"==t.toLowerCase().split(";")[0]?Me().ye()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){for(var r=_s(e=Te(e)),a=r.length;a<e.length&&!ST(e,a);a++);var o=1e3*n.endTime;(r=bs(r)).length&&n&&(r=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(o=r.data),r=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=wT(e,a);if(!l)return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,s=l.Ma,u.push({data:e.subarray(a,a+l.wa),size:l.wa,duration:1536,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),a+=l.wa}return e=Math.floor(o*r/1e3),i=new bo([i={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Eb:[],Ma:s,Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.h,baseMediaDecodeTime:e,Cb:u},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=_o(i),this.g.set(n,t)),n=this.i!==t,i=Eo(i),this.i=t,this.h++,n?(t=qe(t,i),Promise.resolve(t)):Promise.resolve(i)},H("shaka.transmuxer.Ac3Transmuxer",TT),TT.prototype.transmux=TT.prototype.transmux,TT.prototype.getOriginalMimeType=TT.prototype.getOriginalMimeType,TT.prototype.convertCodecs=TT.prototype.convertCodecs,TT.prototype.isSupported=TT.prototype.isSupported,TT.prototype.destroy=TT.prototype.destroy,yi("audio/ac3",function(){return new TT("audio/ac3")},wi),(i=ET.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/ec3"==e.toLowerCase().split(";")[0]&&Ot(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/ec3"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="ec-3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){for(var r=_s(e=Te(e)),a=r.length;a<e.length&&2935!=(e[a]<<8|e[a+1]);a++);var o=1e3*n.endTime;(r=bs(r)).length&&n&&(r=r.find(function(e){return"com.apple.streaming.transportStreamTimestamp"===e.description}))&&(o=r.data),r=0;for(var s=new Uint8Array([]),u=[];a<e.length;){var l=AT(e,a);if(!l)return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,s=l.Ma,u.push({data:e.subarray(a,a+l.wa),size:l.wa,duration:1536,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),a+=l.wa}return e=Math.floor(o*r/1e3),i=new bo([i={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:r,duration:i,Eb:[],Ma:s,Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.h,baseMediaDecodeTime:e,Cb:u},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=_o(i),this.g.set(n,t)),n=this.i!==t,i=Eo(i),this.i=t,this.h++,n?(t=qe(t,i),Promise.resolve(t)):Promise.resolve(i)},H("shaka.transmuxer.Ec3Transmuxer",ET),ET.prototype.transmux=ET.prototype.transmux,ET.prototype.getOriginalMimeType=ET.prototype.getOriginalMimeType,ET.prototype.convertCodecs=ET.prototype.convertCodecs,ET.prototype.isSupported=ET.prototype.isSupported,ET.prototype.destroy=ET.prototype.destroy,yi("audio/ec3",function(){return new ET("audio/ec3")},wi);var xT=[100,110,122,244,44,83,86,118,128,138,139,134];function CT(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,a=e[t+2]>>2&3;if(1!==n&&0!==r&&15!==r&&3!==a){var o=e[t+3]>>6;r=1e3*MT[14*(3===n?3-i:3===i?3:4)+r-1],a=PT[3*(3===n?0:2===n?1:2)+a],n=LT[n][i];var s=DT[i],u=Math.floor(n*r/a+(e[t+2]>>1&1))*s,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&87>=l&&2===i&&224e3<=r&&0===o&&(e[t+3]|=128),{sampleRate:a,channelCount:3===o?1:2,wa:u,bm:8*n*s}}return null}function kT(e,t){return!(255!==e[t]||224&~e[t+1]||!(6&e[t+1]))}function IT(e,t){if(t+1<e.length&&kT(e,t)){var n=CT(e,t),i=4;return n&&n.wa&&(i=n.wa),(t+=i)===e.length||t+1<e.length&&kT(e,t)}return!1}var MT=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],PT=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],LT=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],DT=[0,1,1,4];function RT(e){this.j=e,this.h=0,this.g=new Map,this.i=null}function NT(e){this.h=e,this.g=null}function OT(e){this.h=e,(this.g=hv.get("ISOBoxer")())&&function(e){function t(){this._procFullBox(),1&this.flags&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(e){this._procEntryField(e,"InitializationVector","data",8),2&this.flags&&(this._procEntryField(e,"NumberOfEntries","uint",16),this._procSubEntries(e,"clearAndCryptedData",e.NumberOfEntries,function(e){this._procEntryField(e,"BytesOfClearData","uint",16),this._procEntryField(e,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",1===this.version?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),1&this.flags&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),0===this.default_sample_info_size&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var e=!0,n=0;16>n;n++)this.usertype[n]!==BT[n]&&(e=!1);e&&(this._parsing&&(this.type="sepiff"),t.call(this))})}(this)}function UT(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}(i=RT.prototype).destroy=function(){this.g.clear()},i.isSupported=function(e){return"audio/mpeg"==e.toLowerCase().split(";")[0]&&Ot(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"audio/mpeg"==t.toLowerCase().split(";")[0]?'audio/mp4; codecs="mp3"':t},i.getOriginalMimeType=function(){return this.j},i.transmux=function(e,t,n,i){for(var r=Te(e),a=_s(r).length;a<r.length&&!IT(r,a);a++);var o;for(e=[];a<r.length;){var s=CT(r,a);if(!s)return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));o||(o=s),a+s.wa<=r.length&&e.push({data:r.subarray(a,a+s.wa),size:s.wa,duration:1152,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),a+=s.wa}return o?(r=9e4*o.bm/o.sampleRate*this.h,i=new bo([i={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:o.sampleRate,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.h,baseMediaDecodeTime:r,Cb:e},stream:t}]),n=t.id+"_"+n.i,this.g.has(n)?t=this.g.get(n):(t=_o(i),this.g.set(n,t)),n=this.i!==t,i=Eo(i),this.i=t,this.h++,n?(t=qe(t,i),Promise.resolve(t)):Promise.resolve(i)):Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null))},H("shaka.transmuxer.Mp3Transmuxer",RT),RT.prototype.transmux=RT.prototype.transmux,RT.prototype.getOriginalMimeType=RT.prototype.getOriginalMimeType,RT.prototype.convertCodecs=RT.prototype.convertCodecs,RT.prototype.isSupported=RT.prototype.isSupported,RT.prototype.destroy=RT.prototype.destroy,yi("audio/mpeg",function(){return new RT("audio/mpeg")},wi),(i=NT.prototype).destroy=function(){},i.isSupported=function(e){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var t=Di(e).split(","),n=et("audio",t);return t=et("video",t),!(!n||t||"mp3"!=Mi(n))&&Ot(this.convertCodecs("audio",e))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?"audio/mpeg":t},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Rs,this.g.eg(n.i),e=Te(e),"mp3"!=(e=this.g.parse(e)).ee().audio||"audio"!=r)return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));for(n=new Uint8Array([]),r=l(e.zb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=CT(e,t))?(t+i.wa<=e.length&&(n=qe(n,e.subarray(t,t+i.wa))),t+=i.wa):t++;return Promise.resolve(n)},H("shaka.transmuxer.MpegTsTransmuxer",NT),NT.prototype.transmux=NT.prototype.transmux,NT.prototype.getOriginalMimeType=NT.prototype.getOriginalMimeType,NT.prototype.convertCodecs=NT.prototype.convertCodecs,NT.prototype.isSupported=NT.prototype.isSupported,NT.prototype.destroy=NT.prototype.destroy,yi("video/mp2t",function(){return new NT("video/mp2t")},Si),(i=OT.prototype).destroy=function(){},i.isSupported=function(e,t){var n=e.startsWith("mss/");return!(!this.g||!n)&&(t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e)))},i.convertCodecs=function(e,t){return t.replace("mss/","")},i.getOriginalMimeType=function(){return this.h},i.transmux=function(e,t,n){if(!n)return Promise.resolve(Te(e));if(!t.mssPrivateData)return Promise.reject(new Ce(2,3,3020,n?n.S()[0]:null));try{var i,r=this.g.parseBuffer(e),a=r.fetch("tfhd");a.track_ID=t.id+1;var o=r.fetch("tfdt"),s=r.fetch("traf");null===o&&((o=this.g.createFullBox("tfdt",s,a)).version=1,o.flags=0,o.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var u=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var h=r.fetch("tfrf");h&&h._parent.boxes.splice(h._parent.boxes.indexOf(h),1);var c=r.fetch("sepiff");if(null!==c){c.type="senc",c.usertype=void 0;var d=r.fetch("saio");if(null===d){(d=this.g.createFullBox("saio",s)).version=0,d.flags=0,d.entry_count=1,d.offset=[0];var p=this.g.createFullBox("saiz",s);if(p.version=0,p.flags=0,p.sample_count=c.sample_count,p.default_sample_info_size=0,p.sample_info_size=[],2&c.flags)for(i=0;i<c.sample_count;i+=1)p.sample_info_size[i]=10+6*c.entry[i].NumberOfEntries;else p.default_sample_info_size=8}}a.flags&=16777214,a.flags|=131072,u.flags|=1;var f=r.fetch("moof");u.data_offset=f.getLength()+8;var g=r.fetch("saio");null!==g&&(g.offset[0]=UT(f,"traf")+UT(s,"senc")+16);var m=Te(r.write());return Promise.resolve(m)}catch(e){return e instanceof Ce?Promise.reject(e):Promise.reject(new Ce(2,3,3022,n?n.S()[0]:null))}},H("shaka.transmuxer.MssTransmuxer",OT),OT.prototype.transmux=OT.prototype.transmux,OT.prototype.getOriginalMimeType=OT.prototype.getOriginalMimeType,OT.prototype.convertCodecs=OT.prototype.convertCodecs,OT.prototype.isSupported=OT.prototype.isSupported,OT.prototype.destroy=OT.prototype.destroy;var BT=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);function FT(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}yi("mss/audio/mp4",function(){return new OT("mss/audio/mp4")},wi),yi("mss/video/mp4",function(){return new OT("mss/video/mp4")},wi),(i=FT.prototype).destroy=function(){this.j.clear(),this.i&&this.i.destroy()},i.isSupported=function(e,t){if("video/mp2t"!=e.toLowerCase().split(";")[0])return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Di(n).split(",");return n=et("audio",i),i=et("video",i),!(n&&(n=Mi(n),!jT.includes(n))||i&&(n=Mi(i),!GT.includes(n)))&&(t?Ot(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),Ot(t)||Ot(e)))},i.convertCodecs=function(e,t){return"video/mp2t"==t.toLowerCase().split(";")[0]?(t=Di(t).replace("mp4a.40.34","mp3").split(",").map(function(e){return rr(e,"audio/mp4")}).map(ar).join(","),"audio"==e?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},i.getOriginalMimeType=function(){return this.m},i.transmux=function(e,t,n,i,r){var a=Te(e);if("audio"==r&&!Bs(a)){for(var o=_s(a),s=o.length;s<a.length;s++)if(IT(a,s))return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));for(s=o.length;s<a.length;s++)if(bT(a,s))return this.i||(this.i=new _T("audio/aac")),this.i.transmux(e,t,n,i,r);return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null))}this.h?this.h.clearData():this.h=new Rs,this.h.eg(n.i);var u=this.h.parse(a),c=[],d=u.ee();try{var p=null;if("video"==r){switch(d.video){case"avc":var f=[],g=null,m=u.fd(),v=function(e){function t(e){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:e.pts,dts:e.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var e=[],t=l(r.nalus),n=t.next();!n.done;n=t.next()){var a=(n=n.value).fullData.byteLength,o=new Uint8Array(4);o[0]=a>>24&255,o[1]=a>>16&255,o[2]=a>>8&255,o[3]=255&a,e.push(o),e.push(n.fullData)}r.data=qe.apply(Ve,h(e)),i.push(r)}}for(var i=[],r=null,a=!1,o=0;o<e.length;o++){var s=e[o],u=s.nalus,c=!1;r&&u.length&&!a&&(n(),t(s));for(var d=(u=l(s.nalus)).next();!d.done;d=u.next()){var p=!1;switch((d=d.value).type){case 1:var f=!1;p=!0;var g=d.data;c&&4<g.length&&(2===(g=Ds(new Ss(g)))||4===g||7===g||9===g)&&(f=!0),f&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(s),r.frame=!0,r.isKeyframe=f;break;case 5:p=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(s),r.frame=!0,r.isKeyframe=!0;break;case 6:case 8:case 12:p=!0;break;case 7:c=p=!0;break;case 9:a=p=!0,r&&r.frame&&(n(),r=null),r||t(s);break;default:p=!1}r&&p&&r.nalus.push(d)}}return n(),i}(m);if(!v.length)throw new Ce(2,3,3023,n?n.S()[0]:null);for(var y=0;y<v.length;y++){var b,_=v[y];null==g&&(g=_.dts),b=y+1<v.length?(v[y+1].dts||0)-(_.dts||0):1<v.length?(_.dts||0)-(v[y-1].dts||0):9e4*(n.endTime-n.startTime),f.push({data:_.data,size:_.data.byteLength,duration:b,yb:Math.round((_.pts||0)-(_.dts||0)),flags:{Ab:0,sb:0,rb:0,ob:0,pb:_.isKeyframe?2:1,Bb:_.isKeyframe?0:1}})}for(var w=[],S=l(m),T=S.next();!T.done;T=S.next())w.push.apply(w,h(T.value.nalus));var A=function(e){if(!e.length)return null;var t=e.find(function(e){return 7==e.type});if(e=e.find(function(e){return 8==e.type}),!t||!e)return null;var n=new Ss(t.data),i=Ps(n);if(Ps(n),Ps(n),Cs(n),xT.includes(i)&&(3===(i=ks(n))&&As(n,1),Cs(n),Cs(n),As(n,1),Ms(n))){i=3!==i?8:12;for(var r=0;r<i;r++)Ms(n)&&Ls(n,6>r?16:64)}if(Cs(n),0===(i=ks(n)))ks(n);else if(1===i)for(As(n,1),Cs(n),Cs(n),i=ks(n),r=0;r<i;r++)Cs(n);Cs(n),As(n,1);var a=ks(n),o=ks(n),s=Es(n,1);0===s&&As(n,1),As(n,1);var u=0,l=0,c=0,d=0;if(Ms(n)&&(u=ks(n),l=ks(n),c=ks(n),d=ks(n)),r=i=1,Ms(n)&&Ms(n)){var p=Ps(n);0<p&&16>=p?(i=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][p-1],r=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][p-1]):255===p&&(i=Es(n,16),r=Es(n,16))}return n=(2-s)*(o+1)*16-2*c-2*d,a=16*(a+1)-2*u-2*l,u=[],t=t.fullData,u.push(t.byteLength>>>8&255),u.push(255&t.byteLength),u=u.concat.apply(u,h(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(255&e.byteLength),t=t.concat.apply(t,h(e)),{height:n,width:a,Wa:e=new Uint8Array([1,u[3],u[4],u[5],255,225].concat(u,[1],t)),cb:i,fb:r}}(w);if(!A||null==g)throw new Ce(2,3,3018,n?n.S()[0]:null);t.height=A.height,t.width=A.width,p={id:t.id,type:"video",codecs:"avc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:A.Wa,cb:A.cb,fb:A.fb,data:{Zb:this.g,baseMediaDecodeTime:g,Cb:f},stream:t};break;case"hvc":var E=[],x=null,C=[],k=u.fd();if(!k.length)throw new Ce(2,3,3023,n?n.S()[0]:null);for(var I=0;I<k.length;I++){var M=k[I],P=M.nalus;C.push.apply(C,h(P));for(var L=!1,D=[],R=!1,N=l(P),O=N.next();!O.done;O=N.next()){var U=O.value;switch(U.type){case 1:case 0:var B=R=!0;break;case 19:case 20:case 21:L=B=R=!0;break;case 32:case 33:case 34:case 39:case 40:B=!0;break;case 35:R=B=!0;break;default:B=!1}if(R&&B){var F=U.fullData.byteLength,j=new Uint8Array(4);j[0]=F>>24&255,j[1]=F>>16&255,j[2]=F>>8&255,j[3]=255&F,D.push(j),D.push(U.fullData)}}var G,H=D.length?{data:qe.apply(Ve,h(D)),isKeyframe:L}:null;if(H)null==x&&null!=M.dts&&(x=M.dts),G=I+1<k.length?(k[I+1].dts||0)-(M.dts||0):1<k.length?(M.dts||0)-(k[I-1].dts||0):9e4*(n.endTime-n.startTime),E.push({data:H.data,size:H.data.byteLength,duration:G,yb:Math.round((M.pts||0)-(M.dts||0)),flags:{Ab:0,sb:0,rb:0,ob:0,pb:H.isKeyframe?2:1,Bb:H.isKeyframe?0:1}})}var V=function(e){if(!e.length)return null;var t=e.find(function(e){return 32==e.type}),n=e.find(function(e){return 33==e.type}),i=e.find(function(e){return 34==e.type});if(!t||!n||!i)return null;var r=function(e){var t=new Ss(e,!0);return Ps(t),Ps(t),Es(t,4),Es(t,2),Es(t,6),{Ih:(e=Es(t,3))+1,mi:t=Ms(t)}}(t.fullData);e=function(e){Ps(e=new Ss(e,!0)),Ps(e);var t=0,n=0,i=0,r=0;Es(e,4);var a=Es(e,3);Ms(e);for(var o=Es(e,2),s=Es(e,1),u=Es(e,5),l=Ps(e),h=Ps(e),c=Ps(e),d=Ps(e),p=Ps(e),f=Ps(e),g=Ps(e),m=Ps(e),v=Ps(e),y=Ps(e),b=Ps(e),_=[],w=[],S=0;S<a;S++)_.push(Ms(e)),w.push(Ms(e));if(0<a)for(S=a;8>S;S++)Es(e,2);for(S=0;S<a;S++)_[S]&&Es(e,88),w[S]&&Ps(e);ks(e),3==(_=ks(e))&&Es(e,1),w=ks(e),S=ks(e),Ms(e)&&(t+=ks(e),n+=ks(e),i+=ks(e),r+=ks(e));var T=ks(e),A=ks(e),E=ks(e);if(Ms(e))for(var x=0;x<=a;x++)ks(e),ks(e),ks(e);else ks(e),ks(e),ks(e);if(ks(e),ks(e),ks(e),ks(e),ks(e),ks(e),Ms(e)&&Ms(e))for(x=0;4>x;x++)for(var C=0;C<(3===x?2:6);C++)if(Ms(e)){var k=Math.min(64,1<<4+(x<<1));1<x&&Is(e);for(var I=0;I<k;I++)Is(e)}else ks(e);for(Ms(e),Ms(e),Ms(e)&&(Ps(e),ks(e),ks(e),Ms(e)),x=ks(e),k=C=0;k<x;k++)if(I=!1,0!==k&&(I=Ms(e)),I){k===x&&ks(e),Ms(e),ks(e);for(var M=I=0;M<=C;M++){var P=Ms(e),L=!1;P||(L=Ms(e)),(P||L)&&I++}C=I}else{for(C=(M=ks(e))+(I=ks(e)),P=0;P<M;P++)ks(e),Ms(e);for(M=0;M<I;M++)ks(e),Ms(e)}if(Ms(e))for(x=ks(e),C=0;C<x;C++){for(k=0;k<E+4;k++)Es(e,1);Es(e,1)}if(x=E=1,C=0,Ms(e),Ms(e),Ms(e)){if(Ms(e)&&(I=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],M=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1],0<(k=Ps(e))&&16>=k?(E=I[k-1],x=M[k-1]):255===k&&(E=Es(e,16),x=Es(e,16))),Ms(e)&&Ms(e),Ms(e)&&(Es(e,3),Ms(e),Ms(e)&&(Ps(e),Ps(e),Ps(e))),Ms(e)&&(ks(e),ks(e)),Ms(e),Ms(e),Ms(e),(k=Ms(e))&&(ks(e),ks(e),ks(e),ks(e)),Ms(e)&&(Es(e,32),Es(e,32),Ms(e)&&ks(e),Ms(e)))for(M=!1,k=Ms(e),I=Ms(e),(k||I)&&((M=Ms(e))&&(Ps(e),Es(e,5),Ms(e),Es(e,5)),Es(e,4),Es(e,4),M&&Es(e,4),Es(e,5),Es(e,5),Es(e,5)),P=0;P<=a;P++){var D=!0;L=1,Ms(e)||(D=Ms(e));var R=!1;if(D?ks(e):R=Ms(e),R||(L=ks(e)+1),k){for(D=0;D<L;D++)ks(e),ks(e),M&&(ks(e),ks(e));Ms(e)}if(I){for(D=0;D<L;D++)ks(e),ks(e),M&&(ks(e),ks(e));Ms(e)}}Ms(e)&&(Ms(e),Ms(e),Ms(e),C=ks(e),ks(e),ks(e),ks(e),ks(e))}return{ah:b,hh:o,ih:s,gh:u,bh:l,dh:h,eh:c,fh:d,Vg:p,Wg:f,Xg:g,Yg:m,Zg:v,$g:y,Jf:C,Ng:0,Lg:_,Hg:T,Gg:A,width:w-(t+n)*(1===_||2===_?2:1),height:S-(i+r)*(1===_?2:1),dm:E,cm:x}}(n.fullData);var a=function(e){var t=new Ss(e,!0);Ps(t),Ps(t),ks(t),ks(t),Ms(t),Ms(t),Es(t,3),Ms(t),Ms(t),ks(t),ks(t),Is(t),Ms(t),Ms(t),Ms(t)&&ks(t),Is(t),Is(t),Ms(t),Ms(t),Ms(t),Ms(t),e=Ms(t);var n=1;return(t=Ms(t))&&e?n=0:t?n=3:e&&(n=2),{Kh:n}}(i.fullData);return t=function(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));return r[0]=1,r[1]=(3&i.hh)<<6|(i.ih?1:0)<<5|31&i.gh,r[2]=i.bh,r[3]=i.dh,r[4]=i.eh,r[5]=i.fh,r[6]=i.Vg,r[7]=i.Wg,r[8]=i.Xg,r[9]=i.Yg,r[10]=i.Zg,r[11]=i.$g,r[12]=i.ah,r[13]=240|(3840&i.Jf)>>8,r[14]=255&i.Jf,r[15]=252|3&i.Kh,r[16]=252|3&i.Lg,r[17]=248|7&i.Hg,r[18]=248|7&i.Gg,r[19]=0,r[20]=0,r[21]=(3&i.Ng)<<6|(7&i.Ih)<<3|(i.mi?1:0)<<2|3,r[22]=3,r[23]=160,r[24]=0,r[25]=1,r[26]=(65280&e.byteLength)>>8,r[27]=255&e.byteLength,r.set(e,28),r[23+(5+e.byteLength)]=161,r[e.byteLength+29]=0,r[e.byteLength+30]=1,r[e.byteLength+31]=(65280&t.byteLength)>>8,r[e.byteLength+32]=255&t.byteLength,r.set(t,e.byteLength+33),r[23+(e.byteLength+10+t.byteLength)]=162,r[e.byteLength+10+t.byteLength+24]=0,r[e.byteLength+10+t.byteLength+25]=1,r[e.byteLength+10+t.byteLength+26]=(65280&n.byteLength)>>8,r[e.byteLength+10+t.byteLength+27]=255&n.byteLength,r.set(n,e.byteLength+10+t.byteLength+28),r}(t.fullData,n.fullData,i.fullData,{Ih:r.Ih,mi:r.mi,hh:e.hh,ih:e.ih,ah:e.ah,gh:e.gh,bh:e.bh,dh:e.dh,eh:e.eh,fh:e.fh,Vg:e.Vg,Wg:e.Wg,Xg:e.Xg,Yg:e.Yg,Zg:e.Zg,$g:e.$g,Ng:e.Ng,Jf:e.Jf,Lg:e.Lg,Hg:e.Hg,Gg:e.Gg,Kh:a.Kh}),{height:e.height,width:e.width,Wa:t,cb:e.dm,fb:e.cm}}(C);if(!V||null==x)throw new Ce(2,3,3018,n?n.S()[0]:null);t.height=V.height,t.width=V.width,p={id:t.id,type:"video",codecs:"hvc1",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:9e4,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:V.Wa,cb:V.cb,fb:V.fb,data:{Zb:this.g,baseMediaDecodeTime:x,Cb:E},stream:t}}p&&(c.push(p),p=null)}if("audio"==r){switch(d.audio){case"aac":for(var W,z=[],K=null,X=null,Y=null,q=l(u.zb()),Z=q.next();!Z.done;Z=q.next()){var J=Z.value,Q=J.data;if(Q){var $=0;if(-1==X&&Y)Q=qe(Y,J.data),X=null;else if(null!=X&&Y){$=Math.max(0,X);var ee=qe(Y,Q.subarray(0,$));z.push({data:ee,size:ee.byteLength,duration:1024,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),X=Y=null}if(!(W=yT(Q,$)))throw new Ce(2,3,3018,n?n.S()[0]:null);for(t.audioSamplingRate=W.sampleRate,t.channelsCount=W.channelCount,null==K&&null!==J.pts&&(K=J.pts);$<Q.length;){var te=vT(Q,$);if(!te){Y=Q.subarray($,Q.length),X=-1;break}var ne=te.le+te.wa;0!=(X=Math.max(0,$+ne-Q.length))?Y=Q.subarray($+te.le,$+ne):$+ne<=Q.length&&z.push({data:Q.subarray($+te.le,$+ne),size:te.wa,duration:1024,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),$+=ne}}}if(!W||null==K){if(!u.fd().length)throw new Ce(2,3,3018,n?n.S()[0]:null);K=9e4*n.startTime;var ie=et("audio",t.codecs.split(","));if(!ie||!t.channelsCount||!t.audioSamplingRate)throw new Ce(2,3,3018,n?n.S()[0]:null);W={sampleRate:t.audioSamplingRate,channelCount:t.channelsCount,codec:ie};var re=function(e,t){if("mp4a.40.2"===e){if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t||3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}(ie,t.channelsCount);if(!re)throw new Ce(2,3,3018,n?n.S()[0]:null);for(var ae=K+9e4*(n.endTime-n.startTime),oe=K;oe<ae;)z.push({data:re,size:re.byteLength,duration:1024,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),oe+=1024/W.sampleRate*9e4}var se=W.sampleRate,ue=K/9e4*se;p={id:t.id,type:"audio",codecs:W.codec,encrypted:t.encrypted&&0<t.drmInfos.length,timescale:se,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.g,baseMediaDecodeTime:ue,Cb:z},stream:t};break;case"ac3":for(var le=[],he=0,ce=new Uint8Array([]),de=null,pe=l(u.zb()),fe=pe.next();!fe.done;fe=pe.next()){var ge=fe.value,me=ge.data;null==de&&null!==ge.pts&&(de=ge.pts);for(var ve=0;ve<me.length;){var ye=wT(me,ve);ye?(t.audioSamplingRate=ye.sampleRate,t.channelsCount=ye.channelCount,he=ye.sampleRate,ce=ye.Ma,le.push({data:me.subarray(ve,ve+ye.wa),size:ye.wa,duration:1536,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),ve+=ye.wa):ve++}}if(0==he||0==ce.byteLength||null==de)throw new Ce(2,3,3018,n?n.S()[0]:null);var be=de/9e4*he;p={id:t.id,type:"audio",codecs:"ac-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:he,duration:i,Eb:[],Ma:ce,Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.g,baseMediaDecodeTime:be,Cb:le},stream:t};break;case"ec3":for(var _e=[],we=0,Se=new Uint8Array([]),Ae=null,Ee=l(u.zb()),xe=Ee.next();!xe.done;xe=Ee.next()){var ke=xe.value,Ie=ke.data;null==Ae&&null!==ke.pts&&(Ae=ke.pts);for(var Me=0;Me<Ie.length;){var Pe=AT(Ie,Me);Pe?(t.audioSamplingRate=Pe.sampleRate,t.channelsCount=Pe.channelCount,we=Pe.sampleRate,Se=Pe.Ma,_e.push({data:Ie.subarray(Me,Me+Pe.wa),size:Pe.wa,duration:1536,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),Me+=Pe.wa):Me++}}if(0==we||0==Se.byteLength||null==Ae)throw new Ce(2,3,3018,n?n.S()[0]:null);var Le=Ae/9e4*we;p={id:t.id,type:"audio",codecs:"ec-3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:we,duration:i,Eb:[],Ma:Se,Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.g,baseMediaDecodeTime:Le,Cb:_e},stream:t};break;case"mp3":for(var De,Re=[],Ne=null,Oe=l(u.zb()),Ue=Oe.next();!Ue.done;Ue=Oe.next()){var Be=Ue.value,Fe=Be.data;if(Fe){null==Ne&&null!==Be.pts&&(Ne=Be.pts);for(var je=0;je<Fe.length;){var Ge=CT(Fe,je);Ge?(De||(De=Ge),je+Ge.wa<=Fe.length&&Re.push({data:Fe.subarray(je,je+Ge.wa),size:Ge.wa,duration:1152,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),je+=Ge.wa):je++}}}if(!De||null==Ne)throw new Ce(2,3,3018,n?n.S()[0]:null);var He=De.sampleRate,We=Ne/9e4*He;p={id:t.id,type:"audio",codecs:"mp3",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:He,duration:i,Eb:[],Ma:new Uint8Array([]),Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.g,baseMediaDecodeTime:We,Cb:Re},stream:t};break;case"opus":var ze=[],Ke=null,Xe=u.G;if(!Xe)throw new Ce(2,3,3018,n?n.S()[0]:null);var Ye=[];switch(Xe.ik){case 1:case 2:Ye=[0];break;case 0:Ye=[255,1,1,0,1];break;case 128:Ye=[255,2,0,0,1];break;case 3:Ye=[1,2,1,0,2,1];break;case 4:Ye=[1,2,2,0,1,2,3];break;case 5:Ye=[1,3,2,0,4,1,2,3];break;case 6:Ye=[1,4,2,0,4,1,2,3,5];break;case 7:Ye=[1,4,2,0,4,1,2,3,5,6];break;case 8:Ye=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:Ye=[1,1,2,0,1];break;case 131:Ye=[1,1,3,0,1,2];break;case 132:Ye=[1,1,4,0,1,2,3];break;case 133:Ye=[1,1,5,0,1,2,3,4];break;case 134:Ye=[1,1,6,0,1,2,3,4,5];break;case 135:Ye=[1,1,7,0,1,2,3,4,5,6];break;case 136:Ye=[1,1,8,0,1,2,3,4,5,6,7]}for(var Ze=new Uint8Array([0,Xe.channelCount,0,0,Xe.sampleRate>>>24&255,Xe.sampleRate>>>17&255,Xe.sampleRate>>>8&255,Xe.sampleRate>>>0&255,0,0].concat(h(Ye))),Je=Xe.sampleRate,Qe=l(u.zb()),$e=Qe.next();!$e.done;$e=Qe.next()){var tt=$e.value,nt=tt.data;null==Ke&&null!==tt.pts&&(Ke=tt.pts);for(var it=0;it<nt.length;){for(var rt=!!(16&nt[it+1]),at=!!(8&nt[it+1]),ot=it+2,st=0;255===nt[ot];)st+=255,ot+=1;st+=nt[ot],ot+=1,ot+=rt?2:0,ot+=at?2:0;var ut=nt.slice(ot,ot+st);ze.push({data:ut,size:ut.byteLength,duration:960,yb:0,flags:{Ab:0,sb:0,rb:0,ob:0,pb:2,Bb:0}}),it=ot+st}}if(0==Ze.byteLength||null==Ke)throw new Ce(2,3,3018,n?n.S()[0]:null);t.audioSamplingRate=Xe.sampleRate,t.channelsCount=Xe.channelCount;var lt=Ke/9e4*Je;p={id:t.id,type:"audio",codecs:"opus",encrypted:t.encrypted&&0<t.drmInfos.length,timescale:Je,duration:i,Eb:[],Ma:Ze,Wa:new Uint8Array([]),cb:0,fb:0,data:{Zb:this.g,baseMediaDecodeTime:lt,Cb:ze},stream:t}}p&&(c.push(p),p=null)}}catch(e){return e&&3023==e.code?Promise.resolve(new Uint8Array([])):Promise.reject(e)}if(!c.length)return Promise.reject(new Ce(2,3,3018,n?n.S()[0]:null));var ht=new bo(c),ct=t.id+"_"+n.i;if(this.j.has(ct))var dt=this.j.get(ct);else dt=_o(ht),this.j.set(ct,dt);var pt=this.l!==dt,ft=Eo(ht);if(this.l=dt,this.g++,pt){var gt=qe(dt,ft);return Promise.resolve(gt)}return Promise.resolve(ft)},H("shaka.transmuxer.TsTransmuxer",FT),FT.prototype.transmux=FT.prototype.transmux,FT.prototype.getOriginalMimeType=FT.prototype.getOriginalMimeType,FT.prototype.convertCodecs=FT.prototype.convertCodecs,FT.prototype.isSupported=FT.prototype.isSupported,FT.prototype.destroy=FT.prototype.destroy;var jT=["aac","ac-3","ec-3","mp3","opus"],GT=["avc","hevc"];function HT(){}function VT(e,t){var n=this;this.parent=e,this.controls=t,this.eventManager=new At,this.localization=this.controls.sa,this.player=this.controls.Tb(),this.video=this.controls.Mc(),this.adManager=this.player.pf(),this.ad=t.getAd(),this.eventManager.o(this.adManager,"ad-started",function(e){n.ad=e.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null})}function WT(e){return zT(e,"shaka-back-to-overflow-button")}function zT(e,t){return(e=e.getElementsByClassName(t)).length?e[0]:null}function KT(e){e&&(e=zT(e,"shaka-chosen-item"))&&e.parentElement.focus()}function XT(){var e=os("i");return e.classList.add("material-icons-round"),e.classList.add("shaka-chosen-item"),e.textContent="done",e.ariaHidden="true",e}function YT(e,t){e&&(t?e.classList.remove("shaka-hidden"):e.classList.add("shaka-hidden"))}function qT(e,t){var n=Math.floor(e/86400),i=Math.floor(e%86400/3600),r=Math.floor(e/60%60);return 10>(e=Math.floor(e%60))&&(e="0"+e),e=r+":"+e,t&&(10>r&&(e="0"+e),e=i+":"+e,0<n&&(10>i&&(e="0"+e),e=n+":"+e)),e}function ZT(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("shaka-ad-info"),this.g.disabled=!0,this.parent.appendChild(this.g),this.h=new zi(function(){if(n.ad.isLinear()){var e="",t=n.ad.getSequenceLength();1<t&&(e=n.ad.getPositionInSequence(),e=n.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(e)).replace("[NUM_ADS]",String(t)));var i=Math.round(n.ad.getRemainingTime()),r=n.ad.getDuration();-1==i||-1==r?(n.g.textContent=e,YT(n.g,""!=e)):0<i?(i=qT(r-i,!1)+" / "+qT(r,!1),e=1<t?e+"  "+i:n.localization.resolve("AD_TIME").replace("[AD_TIME]",i),n.g.textContent=e,YT(n.g,""!=e)):(n.h.stop(),n.g.textContent="")}}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){n.h.Ka(),n.h.ya(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.h.stop(),n.g.textContent=""}),this.ad&&(this.h.Ka(),this.h.ya(.5))}function JT(t,n){VT.call(this,t,n);var i=this;this.j=this.controls.g,this.h=this.controls.i,this.i=[],this.g=os("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(e){if(i.g.classList.contains("shaka-hidden")){e.preventDefault();var t=i.h.getBoundingClientRect();i.g.style.left=e.clientX-t.left+"px",i.g.style.top=e.clientY-t.top+"px",YT(i.g,!0)}else YT(i.g,!1)}),this.eventManager.o(e,"click",function(){YT(i.g,!1)}),this.eventManager.o(this.g,"click",function(){YT(i.g,!1)}),function(e){for(var t=l(e.j.contextMenuElements),n=t.next();!n.done;n=t.next()){n=n.value;var i=$T.get(n);i?e.i.push(i.create(e.g,e.controls)):Y("Unrecognized context menu element:",n)}}(this)}function QT(e,t){$T.set(e,t)}yi("video/mp2t",function(){return new FT("video/mp2t")},Ti),m(HT,Xl),H("shaka.util.FairPlayUtils",HT),VT.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},H("shaka.ui.Element",VT),VT.prototype.release=VT.prototype.release,m(ZT,VT),ZT.prototype.release=function(){this.h.stop(),this.h=null,VT.prototype.release.call(this)},H("shaka.ui.AdInfo",ZT),m(JT,VT),JT.prototype.release=function(){this.h=null;for(var e=l(this.i),t=e.next();!t.done;t=e.next())t.value.release();this.i=[],VT.prototype.release.call(this)},JT.prototype.Ji=function(){YT(this.g,!1)},H("shaka.ui.ContextMenu",JT),JT.registerElement=QT,JT.prototype.closeMenu=JT.prototype.Ji;var $T=new Map;function eA(e,t){VT.call(this,e,t);var n=this;this.button=ss(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){tA(n)}),this.eventManager.o(this.localization,"locale-changed",function(){tA(n)}),this.eventManager.o(this.video,"play",function(){tA(n),n.g()}),this.eventManager.o(this.video,"pause",function(){tA(n),n.g()}),this.eventManager.o(this.video,"seeking",function(){tA(n),n.g()}),this.eventManager.o(this.player,"loaded",function(){tA(n),n.g()}),this.eventManager.o(this.adManager,"ad-paused",function(){tA(n),n.g()}),this.eventManager.o(this.adManager,"ad-resumed",function(){tA(n),n.g()}),this.eventManager.o(this.adManager,"ad-started",function(){tA(n),n.g()}),this.eventManager.o(this.adManager,"ad-stopped",function(){tA(n),n.g()}),this.eventManager.o(this.button,"click",function(){n.controls.Ba()&&ZA(n.controls)}),tA(this),this.g()}function tA(e){if(e.isEnded()&&e.video.duration)e.button.ariaLabel=e.localization.resolve("REPLAY");else{var t=e.isPaused()?"PLAY":"PAUSE";e.button.ariaLabel=e.localization.resolve(t)}}function nA(e,t){eA.call(this,e,t),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation")}function iA(e,t){VT.call(this,e,t);var n=this;this.s=null,this.j=this.C=!1,this.B=this.u=null,this.l=new zi(function(){0===parseInt(n.h.textContent,10)&&eE(n.controls,!0);var e=parseInt(n.h.textContent,10);0!==e&&(n.video.currentTime=n.controls.lh()+e),n.g.style.opacity="0",n.C=!1,n.h.textContent="0s"}),this.g=os("div"),this.g.classList.add("shaka-no-propagation"),this.parent.appendChild(this.g),this.h=os("span"),this.h.textContent="0s",this.g.appendChild(this.h),this.i=os("span"),this.i.classList.add("shaka-forward-rewind-container-icon"),this.g.appendChild(this.i),this.m=!1,this.eventManager.o(this.g,"touchstart",function(e){n.controls.Ba()&&(0<e.touches.length&&(n.u=e.touches[0].clientX,n.B=e.touches[0].clientY),n.j=!1)}),this.eventManager.o(this.g,"touchmove",function(e){if(0<e.touches.length&&null!=n.u&&null!=n.B){var t=e.touches[0].clientX-n.u;e=e.touches[0].clientY-n.B,10<Math.sqrt(t*t+e*e)&&(n.j=!0)}}),this.eventManager.o(this.g,"touchend",function(e){if(n.controls.Ba()&&!n.j)if(n.controls.Ec())e.preventDefault(),n.controls.Oc();else if(0<n.controls.g.tapSeekDistance)if(e.preventDefault(),e=n.controls.g.tapSeekDistance,n.C){if(n.s+500>Date.now()){n.l.stop(),n.s=Date.now();var t=parseInt(n.h.textContent,10);t=n.m?t-e:t+e,n.h.textContent=t.toString()+"s",n.g.style.opacity="1",n.l.X(.5)}}else n.C=!0,n.s=Date.now(),n.l.X(.5)})}function rA(e,t){iA.call(this,e,t),this.g.classList.add("shaka-fast-forward-container"),this.i.textContent="fast_forward",this.m=!1}function aA(e,t){iA.call(this,e,t),this.g.classList.add("shaka-rewind-container"),this.i.textContent="fast_rewind",this.m=!0}function oA(e,t,n,i){VT.call(this,e,t);var r=this;this.container=os("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,h(n)),this.i=!1,this.bar=document.createElement("input"),this.F=new zi(function(){r.onChangeEnd(),r.i=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,h(i)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.bar.disabled=!this.controls.Ba(),this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.K=new zi(function(){r.bar.disabled=!1}),this.eventManager.o(this.controls,"showingui",function(){r.K.X(0)}),this.eventManager.o(this.controls,"hidingui",function(){r.K.stop(),r.bar.disabled=!0}),this.eventManager.o(this.bar,"mousedown",function(e){r.bar.disabled||(r.i=!0,r.onChangeStart(),e.stopPropagation())}),this.eventManager.o(this.bar,"touchstart",function(e){r.bar.disabled||(r.i=!0,uA(r,e),r.onChangeStart(),e.stopPropagation())}),this.eventManager.o(this.bar,"input",function(){r.onChange()}),this.eventManager.o(this.bar,"touchmove",function(e){r.i&&(uA(r,e),r.onChange(),e.stopPropagation())}),this.eventManager.o(this.bar,"touchend",function(e){r.i&&(r.i=!1,uA(r,e),r.onChangeEnd(),e.stopPropagation())}),this.eventManager.o(this.bar,"touchcancel",function(e){r.i&&(r.i=!1,uA(r,e),r.onChangeEnd(),e.stopPropagation())}),this.eventManager.o(this.bar,"mouseup",function(e){r.i&&(r.i=!1,r.onChangeEnd(),e.stopPropagation())}),this.eventManager.o(this.bar,"blur",function(){r.i&&(r.i=!1,r.onChangeEnd())}),this.eventManager.o(this.bar,"contextmenu",function(e){e.preventDefault(),e.stopPropagation()})}function sA(e,t){var n=e.bar.getBoundingClientRect(),i=parseFloat(e.bar.min),r=parseFloat(e.bar.max);e=parseFloat(e.bar.step)||1;var a=n.left+6;return n=n.right-6,t=i+(Math.max(a,Math.min(n,t))-a)/(n-a)*(r-i),t=Math.round((t-i)/e)*e+i,Math.min(r,Math.max(i,t))}function uA(e,t){t.preventDefault(),e.bar.value=sA(e,t.changedTouches[0].clientX)}function lA(e,t){oA.call(this,e,t,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var n=this;this.D=os("div"),this.D.classList.add("shaka-ad-markers"),this.container.insertBefore(this.D,this.container.childNodes[0]),this.H=this.controls.g,this.B=new zi(function(){var e=n.getValue();n.player.T()||e==n.video.duration&&(e-=.001),n.video.currentTime=e}),this.C=new zi(function(){hA(n)}),this.L=!1,this.h=os("div"),this.h.id="shaka-player-ui-thumbnail-container",this.g=os("img"),this.g.id="shaka-player-ui-thumbnail-image",this.g.draggable=!1,this.J=os("div"),this.J.id="shaka-player-ui-thumbnail-time-container",this.G=os("div"),this.G.id="shaka-player-ui-thumbnail-time",this.J.appendChild(this.G),this.h.appendChild(this.g),this.h.appendChild(this.J),this.container.appendChild(this.h),this.j=os("div"),this.j.id="shaka-player-ui-time-container",this.container.appendChild(this.j),this.l=this.s=null,this.I=!1,this.u=new zi(function(){mA(n)}),this.m=[],this.eventManager.o(this.bar,"input",function(){n.controls.Oc()}),this.eventManager.o(this.localization,"locale-updated",function(){return pA(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return pA(n)}),this.eventManager.o(this.adManager,"ad-started",function(){dA(n)||YT(n.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){dA(n)&&YT(n.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(e){n.m=e.cuepoints,cA(n)}),this.eventManager.o(this.player,"unloading",function(){n.m=[],cA(n),n.l&&(n.l.abort(),n.l=null),n.s=null,mA(n),vA(n)}),this.eventManager.o(this.bar,"mousemove",function(e){if(n.controls.Ec())vA(n),mA(n);else{var t=sA(n,e.clientX),i=n.bar.getBoundingClientRect();e=Math.max(0,e.clientX-i.left),n.player.mh().length?(vA(n),gA(n,e,t)):(mA(n),fA(n,e,t))}}),this.eventManager.o(this.container,"mouseleave",function(){vA(n),n.u.stop(),n.u.X(.25)}),this.setValue(this.video.currentTime),this.update(),pA(this),this.ad&&YT(this.container,!1)}function hA(e){if(e.m.length){for(var t=e.player.xa(),n=t.end-t.start,i=["to right"],r=[],a=e.H.seekBarColors.adBreaks,o=!1,s=l(e.m),u=s.next();!u.done;u=s.next())if(-1!=(u=u.value).start||u.end){if(!u.end&&u.start>=t.start||"number"==typeof u.end&&u.end>t.start){var h=(Math.max(u.start,t.start)-t.start)/n||0,c=h+.01;u.end&&(c=(u.end-t.start)/n||0),r.push({start:h,end:c})}}else o=!0;for(n=(t=l(r=r.sort(function(e,t){return e.start-t.start}))).next();!n.done;n=t.next())n=n.value,i.push("transparent "+100*n.start+"%"),i.push(a+" "+100*n.start+"%"),i.push(a+" "+100*n.end+"%"),i.push("transparent "+100*n.end+"%");o&&(i.push("transparent 99%"),i.push(a+" 99%")),e.D.style.background="linear-gradient("+i.join(",")+")"}else e.D.style.background="transparent",e.C.stop()}function cA(e){function t(){hA(e);var t=e.player.xa();t=t.end-t.start,e.player.T()&&5<t&&e.C.ya(.25)}e.player.$?t():e.eventManager.ra(e.player,"loaded",t)}function dA(e){var t=e.player.xa();return t=t.end-t.start,!(e.player.T()&&(5>t||!isFinite(t))||null!=e.ad&&e.ad.isLinear())}function pA(e){e.bar.ariaLabel=e.localization.resolve("SEEK")}function fA(e,t,n){var i=e.j.clientWidth;e.j.style.width="auto",e.j.style.height="20px",e.j.style.top="-30px",e.j.style.left=Math.min(e.bar.offsetWidth-i,Math.max(0,t-i/2))+"px",e.j.style.right="",e.j.style.visibility="visible",t=e.player.xa(),e.player.T()?1>(n=t.end-n)?(e.j.textContent=e.localization.resolve("LIVE"),e.j.style.left="",e.j.style.right="0px"):e.j.textContent="-"+qT(n,3600<=n):(n-=t.start,e.j.textContent=qT(n,3600<=n))}function gA(e,t,n){var i,r,a,o,s,u,l,h,c,d,p,f,g,m,v,y,b;L(function(T){switch(T.g){case 1:return 0>n&&(n=0),i=!1,e.m.length&&(i=e.m.some(function(e){return!!e.end&&n>=e.start&&n<=e.end})),i?(mA(e),fA(e,t,n),T.return()):(r=e.player.xa(),a=Math.max(Math.ceil(r.start),Math.min(Math.floor(r.end),n)),e.player.T()?(o=r.end-n,e.G.textContent=1>o?e.localization.resolve("LIVE"):"-"+qT(o,3600<=o)):e.G.textContent=qT(n,3600<=n),_(T,e.player.Vi(null,a),2));case 2:if(!(s=T.h)||!s.uris||!s.uris.length)return mA(e),fA(e,t,n),T.return();if(s.width<s.height?e.h.classList.add("portrait-thumbnail"):e.h.classList.remove("portrait-thumbnail"),u=-10,l=e.h.clientWidth,h=Math.floor(9*l/16),e.h.style.height=h+"px",e.h.style.top=-(h-u)+"px",c=Math.min(e.bar.offsetWidth-l,Math.max(0,t-l/2)),e.h.style.left=c+"px",e.h.style.visibility="visible",d=s.uris[0].split("#xywh=")[0],e.s&&d===e.s.uris[0].split("#xywh=")[0]&&s.startByte==e.s.startByte&&s.endByte==e.s.endByte){T.A(3);break}if(e.s=s,e.l&&(e.l.abort(),e.l=null),"mjpg"!=s.codecs&&!d.startsWith("offline:")){T.A(4);break}return e.g.src='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg"/>',S(T,5),p=ta,f=gl(s.uris,s.startByte,s.endByte,e.player.getConfiguration().streaming.retryParameters),e.l=e.player.Jb().request(p,f,{type:1}),_(T,e.l.promise,7);case 7:g=T.h,e.l=null,"mjpg"==s.codecs?(new ca).box("mdat",ma(function(e){d=URL.createObjectURL(new Blob([e],{type:"image/jpeg"}))})).parse(g.data,!1):(m=s.mimeType||"image/jpeg",v=new Blob([g.data],{type:m}),d=URL.createObjectURL(v)),A(T,4);break;case 5:if(7001==(y=E(T)).code)return T.return();throw y;case 4:try{e.h.removeChild(e.g)}catch(e){}e.g=os("img"),e.g.id="shaka-player-ui-thumbnail-image",e.g.draggable=!1,e.g.src=d,e.g.onload=function(){d.startsWith("blob:")&&URL.revokeObjectURL(d)},e.h.insertBefore(e.g,e.h.firstChild);case 3:b=l/s.width,s.imageHeight?e.g.height=s.imageHeight:s.sprite||(e.g.style.height="100%",e.g.style.objectFit="contain"),s.imageWidth?e.g.width=s.imageWidth:s.sprite||(e.g.style.width="100%",e.g.style.objectFit="contain"),e.g.style.left="-"+b*s.positionX+"px",e.g.style.top="-"+b*s.positionY+"px",e.g.style.transform="scale("+b+")",e.g.style.transformOrigin="left top",h=Math.floor(l*s.height/s.width),e.h.style.height=h+"px",e.h.style.top=-(h-u)+"px",w(T)}})}function mA(e){e.h.style.visibility="hidden"}function vA(e){e.j.style.visibility="hidden"}function yA(){}function bA(e,t){VT.call(this,e,t);var n=this;this.j=os("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=os("div"),this.h.classList.add("shaka-skip-ad-counter"),YT(this.h,!1),this.j.appendChild(this.h),this.g=ss(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,YT(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),_A(this),this.i=new zi(function(){if(n.ad.isSkippable()){var e=Math.round(n.ad.getTimeUntilSkippable());0<e?n.h.textContent=e:(n.i.stop(),YT(n.h,!1))}else SA(n)}),this.eventManager.o(this.localization,"locale-updated",function(){_A(n)}),this.eventManager.o(this.localization,"locale-changed",function(){_A(n)}),this.eventManager.o(this.adManager,"ad-started",function(){wA(n)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){n.ad.isSkippable()?n.ad.canSkipNow()&&(n.g.disabled=!1,n.i.stop(),YT(n.h,!1)):SA(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){SA(n)}),this.eventManager.o(this.g,"click",function(){n.ad.skip()}),this.ad&&wA(this)}function _A(e){e.g.textContent=e.localization.resolve("SKIP_AD")}function wA(e){e.ad.isSkippable()&&e.ad.needsSkipUI()&&(YT(e.g,!0),YT(e.h,!0),e.h.textContent="",e.i.Ka(),e.i.ya(.5))}function SA(e){e.i.stop(),e.g.disabled=!0,YT(e.g,!1),YT(e.h,!1)}function TA(){var e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function AA(e,t,n){t=1/Math.tan(t/2),e[0]=t/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n=1/-99.9,e[10]=100.1*n,e[14]=20*n}function EA(e,t,n){var i=t[0],r=t[1],a=t[2],o=t[3],s=t[4],u=t[5],l=t[6],h=t[7],c=t[8],d=t[9],p=t[10],f=t[11],g=t[12],m=t[13],v=t[14];t=t[15];var y=n[0],b=n[1],_=n[2],w=n[3];e[0]=y*i+b*s+_*c+w*g,e[1]=y*r+b*u+_*d+w*m,e[2]=y*a+b*l+_*p+w*v,e[3]=y*o+b*h+_*f+w*t,y=n[4],b=n[5],_=n[6],w=n[7],e[4]=y*i+b*s+_*c+w*g,e[5]=y*r+b*u+_*d+w*m,e[6]=y*a+b*l+_*p+w*v,e[7]=y*o+b*h+_*f+w*t,y=n[8],b=n[9],_=n[10],w=n[11],e[8]=y*i+b*s+_*c+w*g,e[9]=y*r+b*u+_*d+w*m,e[10]=y*a+b*l+_*p+w*v,e[11]=y*o+b*h+_*f+w*t,y=n[12],b=n[13],_=n[14],w=n[15],e[12]=y*i+b*s+_*c+w*g,e[13]=y*r+b*u+_*d+w*m,e[14]=y*a+b*l+_*p+w*v,e[15]=y*o+b*h+_*f+w*t}function xA(e,t){var n=new Float32Array(3),i=t[0],r=t[1],a=t[2],o=t[4],s=t[5],u=t[6],l=t[8],h=t[9],c=t[10];n[0]=Math.sqrt(i*i+r*r+a*a),n[1]=Math.sqrt(o*o+s*s+u*u),n[2]=Math.sqrt(l*l+h*h+c*c),u=1/n[0],l=1/n[1],h=1/n[2],o=t[0]*u,n=t[1]*l,i=t[2]*h,r=t[4]*u,s=t[5]*l,a=t[6]*h,u*=t[8],l*=t[9],0<(h=o+s+(t=t[10]*h))?(t=2*Math.sqrt(h+1),e[3]=.25*t,e[0]=(a-l)/t,e[1]=(u-i)/t,e[2]=(n-r)/t):o>s&&o>t?(t=2*Math.sqrt(1+o-s-t),e[3]=(a-l)/t,e[0]=.25*t,e[1]=(n+r)/t,e[2]=(u+i)/t):s>t?(t=2*Math.sqrt(1+s-o-t),e[3]=(u-i)/t,e[0]=(n+r)/t,e[1]=.25*t,e[2]=(a+l)/t):(t=2*Math.sqrt(1+t-o-s),e[3]=(n-r)/t,e[0]=(u+i)/t,e[1]=(a+l)/t,e[2]=.25*t)}function CA(e,t){var n=t[0],i=t[1],r=t[2],a=n+n,o=i+i,s=r+r;n*=a;var u=i*a;i*=o;var l=r*a,h=r*o;r*=s,a*=t=t[3],o*=t,t*=s,e[0]=1-i-r,e[1]=u+t,e[2]=l-o,e[3]=0,e[4]=u-t,e[5]=1-n-r,e[6]=h+a,e[7]=0,e[8]=l+o,e[9]=h-a,e[10]=1-n-i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1}function kA(){var e=new Float32Array(4);return e[3]=1,e}function IA(e){var t=[],n=[],i=[],r=Math.PI;e=void 0!==e&&e?r/2:r;for(var a=0;100>=a;a++){var o=a*r/100,s=Math.sin(o);o=Math.cos(o);for(var u=0;100>=u;u++){var l=2*u*e/100;t.push(Math.sin(l)*s,o,Math.cos(l)*s),n.push(u/100,a/100)}}for(r=0;100>r;r++)for(e=0;100>e;e++)s=(a=101*r+e)+101,i.push(a,s,a+1),i.push(s,s+1,a+1);return{Yj:t,Vj:n,indices:i}}function MA(e,t,n,i,r){this.i=e,this.qa=t,this.s=n,this.g=i,this.u=new At,this.L=kA(),this.h=kA(),this.ba=this.na=this.$=this.l=null,this.D=TA(),this.I=TA(),this.N=TA(),this.Y=TA(),this.C=null,this.O=!1,this.J=this.B=null,this.sa=this.ua=0,this.Z=this.P=this.R=this.K=null,this.H=this.G=0,this.j=75,this.U=0,this.m=r,this.F=-1,function(e){(function(e){var t=e.D,n=[0,0,0],i=[1,0,0],r=[0,1,0],a=n[0],o=n[1];n=n[2];var s=r[0],u=r[1],l=r[2],h=i[0];r=i[1];var c=i[2];if(1e-6>Math.abs(a-h)&&1e-6>Math.abs(o-r)&&1e-6>Math.abs(n-c))for(a=0;16>a;a++)t[a]=0==a%5?1:0;else{i=a-h,r=o-r,h=n-c;var d=1/Math.sqrt(i*i+r*r+h*h);c=u*(h*=d)-l*(r*=d),l=l*(i*=d)-s*h,s=s*r-u*i,(d=Math.sqrt(c*c+l*l+s*s))?(c*=d=1/d,l*=d,s*=d):s=l=c=0,u=r*s-h*l;var p=h*c-i*s,f=i*l-r*c;(d=Math.sqrt(u*u+p*p+f*f))?(u*=d=1/d,p*=d,f*=d):f=p=u=0,t[0]=c,t[1]=u,t[2]=i,t[3]=0,t[4]=l,t[5]=p,t[6]=r,t[7]=0,t[8]=s,t[9]=f,t[10]=h,t[11]=0,t[12]=-(c*a+l*o+s*n),t[13]=-(u*a+p*o+f*n),t[14]=-(i*a+r*o+h*n),t[15]=1}xA(e.L,e.D),e=t=e.Y,a=(n=[4,4,4])[0],o=n[1],n=n[2],t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a,t[4]=e[4]*o,t[5]=e[5]*o,t[6]=e[6]*o,t[7]=e[7]*o,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]})(e),function(e){DA(e),e.g.viewport(0,0,e.g.drawingBufferWidth,e.g.drawingBufferHeight),e.g.clearColor(0,0,0,1),e.g.enable(e.g.CULL_FACE),e.g.cullFace(e.g.FRONT),e.g.clear(e.g.COLOR_BUFFER_BIT)}(e),function(e){var t=PA(e,e.g.VERTEX_SHADER),n=PA(e,e.g.FRAGMENT_SHADER);e.l=e.g.createProgram(),e.g.attachShader(e.l,t),e.g.attachShader(e.l,n),e.g.linkProgram(e.l),"cubemap"==e.m?(e.R=e.g.getAttribLocation(e.l,"aVertexPosition"),e.P=e.g.getAttribLocation(e.l,"aTextureCoord")):(e.R=e.g.getAttribLocation(e.l,"a_vPosition"),e.g.enableVertexAttribArray(e.R),e.P=e.g.getAttribLocation(e.l,"a_TexCoordinate"),e.g.enableVertexAttribArray(e.P))}(e),function(e){e.K="cubemap"==e.m?{Yj:[-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1],Vj:[2/3,.5,1/3,.5,1/3,0,2/3,0,2/3,.5,2/3,0,1,0,1,.5,1,1,2/3,1,2/3,.5,1,.5,0,.5,0,0,1/3,0,1/3,.5,0,.5,1/3,.5,1/3,1,0,1,1/3,1,1/3,.5,2/3,.5,2/3,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]}:"halfequirectangular"==e.m?IA(!0):IA(),e.$=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.$),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.K.Yj),e.g.STATIC_DRAW),e.na=e.g.createBuffer(),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.na),e.g.bufferData(e.g.ARRAY_BUFFER,new Float32Array(e.K.Vj),e.g.STATIC_DRAW),e.ba=e.g.createBuffer(),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ba),e.g.bufferData(e.g.ELEMENT_ARRAY_BUFFER,new Uint16Array(e.K.indices),e.g.STATIC_DRAW)}(e),function(e){e.Z=e.g.createTexture(),e.g.bindTexture(e.g.TEXTURE_2D,e.Z),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_S,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_WRAP_T,e.g.CLAMP_TO_EDGE),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MIN_FILTER,e.g.NEAREST),e.g.texParameteri(e.g.TEXTURE_2D,e.g.TEXTURE_MAG_FILTER,e.g.NEAREST)}(e),Au(e.i,HTMLMediaElement.HAVE_CURRENT_DATA,e.u,function(){if(e.i.readyState>=HTMLMediaElement.HAVE_ENOUGH_DATA&&LA(e),"requestVideoFrameCallback"in e.i){var t=function(){-1!=e.F&&(LA(e),-1!=e.F&&(e.F=e.i.requestVideoFrameCallback(t)))};e.F=e.i.requestVideoFrameCallback(t)}else{var n;e.u.o(e.i,"canplaythrough",function(){LA(e)}),e.u.o(e.i,"playing",function(){if(e.B&&e.B.stop(),!n)for(var t=e.qa.qb(),i=(t=l(t)).next();!i.done;i=t.next())(i=i.value.frameRate)&&(!n||n<i)&&(n=i);n||(n=60),LA(e),e.B=new zi(function(){LA(e)}).Ka().ya(1/n)}),e.u.o(e.i,"pause",function(){e.B&&e.B.stop(),e.B=null,LA(e)}),e.u.o(e.i,"seeked",function(){LA(e)}),e.u.o(document,"visibilitychange",function(){LA(e)})}})}(this)}function PA(e,t){switch(t){case e.g.VERTEX_SHADER:var n="cubemap"==e.m?"attribute vec4 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvarying highp vec2 vTextureCoord;\nvarying highp vec3 vLighting;\nvoid main(void) {\n  gl_Position = uProjectionMatrix * uModelViewMatrix * aVertexPosition;\n  vTextureCoord = aTextureCoord;\n}":"attribute vec4 a_vPosition;\n// Per-vertex texture coordinate info\nattribute vec2 a_TexCoordinate;\nuniform mat4 u_VPMatrix;\n// Passed into the fragment shader.\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nvoid main()\n{\n gl_Position = u_VPMatrix * a_vPosition;\n // Pass through texture coord\n v_TexCoordinate = a_TexCoordinate;\n pass_position = a_vPosition.xyz;\n}";break;case e.g.FRAGMENT_SHADER:n="cubemap"==e.m?"varying highp vec2 vTextureCoord;\nuniform sampler2D uSampler;\nvoid main(void) {\n  highp vec4 texelColor = texture2D(uSampler, vTextureCoord);\n  gl_FragColor = vec4(texelColor.rgb , texelColor.a);\n}":"precision highp float;\n#define PI 3.141592653589793238462643383279\nvarying vec2 v_TexCoordinate;\nvarying vec3 pass_position;\nuniform sampler2D uSampler;\nvoid main(void) {\nhighp float xValue =\n      (PI + atan(pass_position.z, pass_position.x)) / (2.0 * PI);\n vec2 tc = vec2(xValue, v_TexCoordinate.t);\n tc = vec2(tc.x , tc.y);\nhighp vec4 texelColor =\n      texture2D(uSampler, tc);\n  gl_FragColor = vec4(texelColor.rgb, texelColor.a);\n}";break;default:return null}return t=e.g.createShader(t),e.g.shaderSource(t,n),e.g.compileShader(t),t}function LA(e,t){t=void 0===t||t;var n=e.qa.m==Ed;!e.i||2>e.i.readyState||!n&&0==e.i.playbackRate||(AA(e.I,e.j*Math.PI/180,1.5625),"cubemap"==e.m?AA(e.I,e.j*Math.PI/180,2.5):AA(e.I,e.j*Math.PI/180,1.5625),e.g.useProgram(e.l),e.g.clear(e.g.COLOR_BUFFER_BIT),DA(e),t&&(e.g.activeTexture(e.g.TEXTURE0),e.g.bindTexture(e.g.TEXTURE_2D,e.Z),e.g.pixelStorei(e.g.UNPACK_PREMULTIPLY_ALPHA_WEBGL,0),e.g.texImage2D(e.g.TEXTURE_2D,0,e.g.RGBA,e.g.RGBA,e.g.UNSIGNED_BYTE,e.i)),"equirectangular"!=e.m&&"halfequirectangular"!=e.m||(EA(e.N,e.D,e.Y),EA(e.N,e.I,e.N)),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.$),e.g.vertexAttribPointer(e.R,3,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.R),e.g.bindBuffer(e.g.ARRAY_BUFFER,e.na),e.g.vertexAttribPointer(e.P,2,e.g.FLOAT,!1,0,0),e.g.enableVertexAttribArray(e.P),e.g.bindBuffer(e.g.ELEMENT_ARRAY_BUFFER,e.ba),"cubemap"==e.m?(e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"uProjectionMatrix"),!1,e.I),e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"uModelViewMatrix"),!1,e.N)):e.g.uniformMatrix4fv(e.g.getUniformLocation(e.l,"u_VPMatrix"),!1,e.N),e.g.uniform1i(e.g.getUniformLocation(e.l,"uSampler"),0),e.O&&e.g.viewport(0,0,e.s.width/2,e.s.height),e.g.drawElements(e.g.TRIANGLES,e.K.indices.length,e.g.UNSIGNED_SHORT,0),e.O&&(e.g.viewport(e.s.width/2,0,e.s.width/2,e.s.height),e.g.drawElements(e.g.TRIANGLES,e.K.indices.length,e.g.UNSIGNED_SHORT,0)))}function DA(e){var t=e.i.videoWidth;t||(t=e.s.scrollWidth);var n=e.i.videoHeight;if(n||(n=e.s.scrollHeight),e.ua!==t||e.sa!==n){e.s.width=t,e.s.height=n,e.ua=t,e.sa=n;var i=t/n,r=e.I,a=-i,o=1/(i-a);r[0]=0*o,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=0,r[6]=0,r[7]=0,r[8]=(i+a)*o,r[9]=0,r[10]=-1,r[11]=-1,r[12]=0,r[13]=0,r[14]=-0,r[15]=0,e.I=r,e.g.viewport(0,0,t,n)}}function RA(e,t,n,i){var r=1/0,a=90*Math.PI/180;"halfequirectangular"==e.m&&(r=90*Math.PI/180,a/=2);var o="cubemap"==e.m?e.N:e.D;if(e.G+=t,e.H+=n,e.G<r&&e.G>-r){r=Math.sin(t),t=Math.cos(t);var s=o[0],u=o[1],l=o[2],h=o[3],c=o[8],d=o[9],p=o[10],f=o[11];o!=o&&(o[4]=o[4],o[5]=o[5],o[6]=o[6],o[7]=o[7],o[12]=o[12],o[13]=o[13],o[14]=o[14],o[15]=o[15]),o[0]=s*t-c*r,o[1]=u*t-d*r,o[2]=l*t-p*r,o[3]=h*t-f*r,o[8]=s*r+c*t,o[9]=u*r+d*t,o[10]=l*r+p*t,o[11]=h*r+f*t}else e.G-=t;e.H<a&&e.H>-a?(a=TA(),r=TA(),t=-1*n,n=Math.sin(t),t=Math.cos(t),s=r[4],u=r[5],l=r[6],h=r[7],c=r[8],d=r[9],p=r[10],f=r[11],r!==a&&(a[0]=r[0],a[1]=r[1],a[2]=r[2],a[3]=r[3],a[12]=r[12],a[13]=r[13],a[14]=r[14],a[15]=r[15]),a[4]=s*t+c*n,a[5]=u*t+d*n,a[6]=l*t+p*n,a[7]=h*t+f*n,a[8]=c*t-s*n,a[9]=d*t-u*n,a[10]=p*t-l*n,a[11]=f*t-h*n,EA(o,a,o)):e.H-=n,n=TA(),a=TA(),r=Math.sin(i),i=Math.cos(i),t=a[0],s=a[1],u=a[2],l=a[3],h=a[4],c=a[5],d=a[6],p=a[7],a!==n&&(n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15]),n[0]=t*i+h*r,n[1]=s*i+c*r,n[2]=u*i+d*r,n[3]=l*i+p*r,n[4]=h*i-t*r,n[5]=c*i-s*r,n[6]=d*i-u*r,n[7]=p*i-l*r,EA(o,n,o),LA(e,!1)}function NA(e,t){(void 0===t||t)&&(xA(e.h,e.D),e.U=0,e.C=kA(),e.C[0]=(e.h[0]-e.L[0])/20,e.C[1]=(e.h[1]-e.L[1])/20,e.C[2]=(e.h[2]-e.L[2])/20,e.C[3]=(e.h[3]-e.L[3])/20),e.h[0]-=e.C[0],e.h[1]-=e.C[1],e.h[2]-=e.C[2],e.h[3]-=e.C[3],t=TA(),function(e,t){var n=t[0],i=t[1],r=t[2],a=n*n+i*i+r*r+(t=t[3])*t;0<a&&(a=1/Math.sqrt(a)),e[0]=n*a,e[1]=i*a,e[2]=r*a,e[3]=t*a}(e.h,e.h),CA(t,e.h),e.D=t,e.J&&(e.J.stop(),e.J=null),20>e.U?e.J=new zi(function(){NA(e,!1),e.G=0,e.H=0,e.U++,LA(e,!1)}).X(.025):(CA(t,e.L),e.D=t)}function OA(e,t,n,i,r){$.call(this);var a=this;this.i=e,this.l=t,this.F=n,this.J=i,this.u=r,this.s=new At,this.h=new At,this.B=FA(this.l),this.g=null,this.m=!1,this.I=this.H=this.G=this.D=this.C=0,this.j=null,this.s.o(i,"loading",function(){a.g&&NA(a.g),UA(a)}),this.s.o(i,"spatialvideoinfo",function(e){switch((e=e.detail).projection){case"rect":default:a.j=null;break;case"equi":a.j="equirectangular";break;case"hequ":switch(e.hfov){case 360:a.j="equirectangular";break;case 180:a.j="halfequirectangular";break;default:null==e.hfov?a.j="halfequirectangular":a.j=null}break;case"fish":a.j="halfequirectangular"}UA(a)}),this.s.o(i,"nospatialvideoinfo",function(){a.j=null,UA(a)}),this.s.o(i,"unloading",function(){a.j=null,UA(a)}),UA(this)}function UA(e){if(e.u.displayInVrMode||e.j){e.l||(e.l=document.createElement("canvas"),e.l.classList.add("shaka-vr-canvas-container"),e.F.parentElement.insertBefore(e.l,e.F.nextElementSibling),e.B=FA(e.l));var t=e.j||e.u.defaultVrProjectionMode;e.g?e.g.m!=t&&(e.h.Sa(),e.g.release(),BA(e,t)):(e.l.style.display="",BA(e,t),e.dispatchEvent(new V("vrstatuschanged",(new Map).set("newStatus",e.Ub()))))}else!e.u.displayInVrMode&&!e.j&&e.l&&e.g&&(e.l.style.display="none",e.h.Sa(),e.g.release(),e.g=null,e.dispatchEvent(new V("vrstatuschanged",(new Map).set("newStatus",e.Ub()))))}function BA(t,n){t.B&&t.l&&(t.g=new MA(t.F,t.J,t.l,t.B,n),function(t){t.h.o(t.i,"mousedown",function(e){if(!t.m){var n=e.clientX;e=e.clientY,t.m=!0,t.C=n,t.D=e}}),0<navigator.maxTouchPoints&&t.h.o(t.i,"touchstart",function(e){if(!t.m){var n=e.touches[0].clientX;e=e.touches[0].clientY,t.m=!0,t.C=n,t.D=e}}),t.h.o(t.i,"wheel",function(e){if(!t.m){var n=t.g,i=e.deltaY;i/=50,20<=n.j&&100>=n.j&&(n.j+=i),20>n.j?n.j=20:100<n.j&&(n.j=100),LA(n,!1),e.preventDefault(),e.stopPropagation()}}),t.h.o(t.i,"mousemove",function(e){t.m&&GA(t,e.clientX,e.clientY)}),0<navigator.maxTouchPoints&&t.h.o(t.i,"touchmove",function(e){t.m&&GA(t,e.touches[0].clientX,e.touches[0].clientY),e.preventDefault()}),t.h.o(t.i,"mouseleave",function(){t.m=!1}),t.h.o(t.i,"mouseup",function(){t.m=!1}),0<navigator.maxTouchPoints&&t.h.o(t.i,"touchend",function(){t.m=!1});var n=!1;if(e.DeviceOrientationEvent)if("function"==typeof DeviceMotionEvent.requestPermission){var i=function(){DeviceMotionEvent.requestPermission().then(function(e){"granted"!==e||n||(n=!0,jA(t))})};DeviceMotionEvent.requestPermission().then(function(e){t.h.Da(t.i,"click",i),t.h.Da(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.Da(t.i,"touchend",i),"granted"!==e?(t.h.ra(t.i,"click",i),t.h.ra(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.ra(t.i,"touchend",i)):(n=!0,jA(t))}).catch(function(){t.h.Da(t.i,"click",i),t.h.Da(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.Da(t.i,"touchend",i),t.h.ra(t.i,"click",i),t.h.ra(t.i,"mouseup",i),0<navigator.maxTouchPoints&&t.h.ra(t.i,"touchend",i)})}else n=!0,jA(t)}(t))}function FA(e){if(!e)return null;var t=Me().Ja();if("TV"==t||"CONSOLE"==t||"CAST"==t)return null;for(var n=(t=l(["webgl2","webgl"])).next();!n.done;n=t.next())if(n=e.getContext(n.value))return n;return null}function jA(t){t.h.o(e,"deviceorientation",function(e){if(t.g){var n=(e.alpha||0)-t.G,i=(e.beta||0)-t.H,r=(e.gamma||0)-t.I;(10<Math.abs(n)||10<Math.abs(i)||5<Math.abs(r))&&(i=r=n=0),t.G=e.alpha||0,t.H=e.beta||0,t.I=e.gamma||0,e=screen.orientation.angle,RA(t.g,n*HA*-1,90==e||-90==e?r*HA*-1:i*HA,0)}})}function GA(e,t,n){var i=-.6*Math.PI/180;RA(e.g,(t-e.C)*i,-1*(n-e.D)*i,0),e.C=t,e.D=n}m(eA,VT),eA.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var e=this.ad.isPaused();else e=(e=this.controls).B.paused&&!e.R;return e},eA.prototype.isEnded=function(){return(!this.ad||!this.ad.isLinear())&&(!this.player||this.player.isEnded())},eA.prototype.g=function(){this.isEnded()&&this.video.duration?this.button.textContent="replay":this.button.textContent=this.isPaused()?"play_arrow":"pause"},H("shaka.ui.PlayButton",eA),m(nA,eA),nA.prototype.g=function(){this.isEnded()?this.button.setAttribute("icon","replay"):this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},H("shaka.ui.BigPlayButton",nA),m(iA,VT),H("shaka.ui.HiddenSeekButton",iA),m(rA,iA),H("shaka.ui.HiddenFastForwardButton",rA),m(aA,iA),H("shaka.ui.HiddenRewindButton",aA),m(oA,VT),(i=oA.prototype).release=function(){this.F&&(this.F.stop(),this.F=null),VT.prototype.release.call(this)},i.setRange=function(e,t){this.bar.min=e,this.bar.max=t},i.onChangeStart=function(){},i.onChange=function(){},i.onChangeEnd=function(){},i.changeTo=function(e){this.i||(this.i=!0,this.onChangeStart());var t=parseFloat(this.bar.min),n=parseFloat(this.bar.max);this.bar.value=e>n?n:e<t?t:e,this.onChange(),this.F.X(.5)},i.getValue=function(){return parseFloat(this.bar.value)},i.setValue=function(e){this.i||(this.bar.value=e)},H("shaka.ui.RangeElement",oA),oA.prototype.setValue=oA.prototype.setValue,oA.prototype.getValue=oA.prototype.getValue,oA.prototype.changeTo=oA.prototype.changeTo,oA.prototype.onChangeEnd=oA.prototype.onChangeEnd,oA.prototype.onChange=oA.prototype.onChange,oA.prototype.onChangeStart=oA.prototype.onChangeStart,oA.prototype.setRange=oA.prototype.setRange,m(lA,oA),(i=lA.prototype).release=function(){this.B&&(this.B.stop(),this.B=null,this.C.stop(),this.C=null),oA.prototype.release.call(this)},i.onChangeStart=function(){this.L=!this.video.paused,this.controls.ci(!0),this.video.pause(),this.u.stop(),this.I=!0},i.onChange=function(){if(this.video.duration)if(this.update(),this.B.X(.125),this.player.mh().length&&!this.controls.Ec()){var e=parseFloat(this.bar.min),t=parseFloat(this.bar.max),n=this.bar.getBoundingClientRect(),i=Math.round(this.getValue());gA(this,(i-e)/((t-e)/n.width),i)}else mA(this)},i.onChangeEnd=function(){this.B.Ka(),this.controls.ci(!1),this.L&&this.video.play(),this.I&&(this.I=!1,this.u.stop(),this.u.X(.25))},i.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},i.update=function(){var e=this.H.seekBarColors,t=this.getValue(),n=this.video.buffered.length,i=n?this.video.buffered.start(0):0,r=n?this.video.buffered.end(n-1):0,a=(n=this.player.xa()).end-n.start;this.setRange(n.start,n.end),dA(this)?(YT(this.container,!0),i=(Math.max(i,n.start)-n.start)/a||0,r=(Math.min(r,n.end)-n.start)/a||0,t=(Math.min(Math.max(t,n.start),n.end)-n.start)/a||0,this.container.style.background="linear-gradient("+["to right",(this.H.showUnbufferedStart?e.base:e.played)+" "+100*i+"%",e.played+" "+100*i+"%",e.played+" "+100*t+"%",e.buffered+" "+100*t+"%",e.buffered+" "+100*r+"%",e.base+" "+100*r+"%"].join()+")"):YT(this.container,!1)},H("shaka.ui.SeekBar",lA),yA.prototype.create=function(e,t){return new lA(e,t)},lA.Factory=yA,m(bA,VT),bA.prototype.release=function(){this.i.stop(),this.i=null,VT.prototype.release.call(this)},H("shaka.ui.SkipAdButton",bA),MA.prototype.release=function(){-1!=this.F&&(this.i.cancelVideoFrameCallback(this.F),this.F=-1),this.u&&(this.u.release(),this.u=null),this.B&&(this.B.stop(),this.B=null),this.J&&(this.J.stop(),this.J=null)},MA.prototype.Ud=function(){(this.O=!this.O)||this.g.viewport(0,0,this.s.width,this.s.height),LA(this,!1)},m(OA,$),(i=OA.prototype).release=function(){this.s&&(this.s.release(),this.s=null),this.h&&(this.h.release(),this.h=null),this.g&&(this.g.release(),this.g=null),$.prototype.release.call(this)},i.configure=function(e){this.u=e,UA(this)},i.Jg=function(){return this.l?!!this.B:!!FA(document.createElement("canvas"))},i.Ub=function(){return!!this.g},i.Ud=function(){this.g?this.g.Ud():Y("Not playing VR content")},i.wh=function(e){this.g?RA(this.g,e*HA,0,0):Y("Not playing VR content")},i.uh=function(e){this.g?RA(this.g,0,e*HA,0):Y("Not playing VR content")},i.vh=function(e){this.g?RA(this.g,0,0,e*HA):Y("Not playing VR content")};var HA=Math.PI/180;function VA(t,n,i,r,a){$.call(this);var o=this;this.Y=!0,this.g=a,this.D=new Vp(i,t,this.g.castReceiverAppId,this.g.castAndroidReceiverCompatible),this.qa=!0,this.B=this.D.Mc(),this.m=i,this.s=this.D.Tb(),this.Z=t,this.l=n,this.Mb=r,this.na=this.s.pf(),this.u=this.j=null,this.R=!1,this.I=[],this.Ta=[],this.Na=!1,this.J=new zi(function(){o.l.classList.add("no-cursor"),o.Na=!1,$A(o)}),this.$=new zi(function(){o.i.removeAttribute("shown"),iE(o),QA(o),o.U&&o.U.Ji(),o.N.X(o.g.closeMenusDelay)}),this.N=new zi(function(){for(var e=l(o.I),t=e.next();!t.done;t=e.next())YT(t.value,!1);o.g.enableTooltips&&o.F.classList.add("shaka-tooltips-on")}),this.ua=new zi(function(){o.Ba()&&aE(o)}),this.O=null,this.H=[],this.sa=function(){var e=new vt("en");return e.Va("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_STATISTICS","إحصاءات الإعلانات"],["AD_TIME","الإعلان: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["CHAPTERS","الفصول"],["DOWNLOAD_VIDEO_FRAME","حفظ إطار الفيديو"],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["QUALITY","الجودة"],["RECENTER_VR","إعادة التوسيط"],["REPLAY","إعادة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["STATISTICS","الإحصاءات"],["SUBTITLE_FORCED","عرض إجباري"],["SURROUND","صوت محيطي"],["TOGGLE_STEREOSCOPIC","إيقاف العرض المجسّم أو تفعيله"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),e.Va("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_STATISTICS","Anzeigenstatistiken"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["CHAPTERS","Kapitel"],["DOWNLOAD_VIDEO_FRAME","Videoframe speichern"],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild im Bild aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild im Bild beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["QUALITY","Qualität"],["RECENTER_VR","Zentrieren"],["REPLAY","Noch einmal wiedergeben"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["STATISTICS","Statistiken"],["SUBTITLE_FORCED","Erzwungen"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Einstellung „stereoskopisch“ ein‑/ausschalten"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),e.Va("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["CHAPTERS","Chapters"],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recenter"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_NEXT","Next"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),e.Va("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_STATISTICS","Ad statistics"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["CHAPTERS","Chapters"],["DOWNLOAD_VIDEO_FRAME","Save video frame"],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["RECENTER_VR","Recentre"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Toggle stereoscopic"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),e.Va("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadísticas del anuncio"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["CHAPTERS","Capítulos"],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["QUALITY","Calidad"],["RECENTER_VR","Volver a centrar"],["REPLAY","Volver a reproducir"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_NEXT","Siguiente"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["STATISTICS","Estadísticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Envolvente"],["TOGGLE_STEREOSCOPIC","Activar/Desactivar estereoscópica"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Va("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estadísticas de anuncios"],["AD_TIME","Anuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["CHAPTERS","Capítulos"],["DOWNLOAD_VIDEO_FRAME","Guardar fotograma"],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["QUALITY","Calidad"],["RECENTER_VR","Volver a centrar"],["REPLAY","Volver a reproducir"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["STATISTICS","Estadísticas"],["SUBTITLE_FORCED","Forzado"],["SURROUND","Sonido envolvente"],["TOGGLE_STEREOSCOPIC","Activar o desactivar el modo estereoscópico"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),e.Va("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_STATISTICS","Statistiques sur les annonces"],["AD_TIME","Annonce : [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["CHAPTERS","Chapitres"],["DOWNLOAD_VIDEO_FRAME","Télécharger l'image de la vidéo"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["QUALITY","Qualité"],["RECENTER_VR","Recentrer"],["REPLAY","Revoir"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_NEXT","Suivante"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["STATISTICS","Statistiques"],["SUBTITLE_FORCED","Forcé"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Activer/Désactiver le mode stéréoscopique"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),e.Va("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_STATISTICS","Statistiche sugli annunci"],["AD_TIME","Annuncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["CHAPTERS","Capitoli"],["DOWNLOAD_VIDEO_FRAME","Salva fotogramma"],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["QUALITY","Qualità"],["RECENTER_VR","Ricentra"],["REPLAY","Riproduci di nuovo"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["STATISTICS","Statistiche"],["SUBTITLE_FORCED","Forzata"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Pulsante di attivazione/disattivazione stereoscopico"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),e.Va("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_STATISTICS","広告の統計情報"],["AD_TIME","広告: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["CHAPTERS","章"],["DOWNLOAD_VIDEO_FRAME","動画フレームを保存"],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["QUALITY","品質"],["RECENTER_VR","中心を再設定"],["REPLAY","もう一度再生"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["STATISTICS","統計情報"],["SUBTITLE_FORCED","強制"],["SURROUND","サラウンド"],["TOGGLE_STEREOSCOPIC","立体画像を切り替える"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),e.Va("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_STATISTICS","광고 통계"],["AD_TIME","광고: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["CHAPTERS","장"],["DOWNLOAD_VIDEO_FRAME","동영상 프레임 저장"],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["QUALITY","품질"],["RECENTER_VR","중심 재설정"],["REPLAY","다시보기"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["STATISTICS","통계"],["SUBTITLE_FORCED","강제"],["SURROUND","서라운드"],["TOGGLE_STEREOSCOPIC","입체 보기 전환"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),e.Va("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_STATISTICS","Advertentiestatistieken"],["AD_TIME","Advertentie: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["CHAPTERS","Hoofdstukken"],["DOWNLOAD_VIDEO_FRAME","Videoframe opslaan"],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Geluid uitzetten"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["QUALITY","Kwaliteit"],["RECENTER_VR","Opnieuw centreren"],["REPLAY","Opnieuw afspelen"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["STATISTICS","Statistieken"],["SUBTITLE_FORCED","Afgedwongen"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stereoscopisch aan-/uitzetten"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Geluid aanzetten"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),e.Va("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_STATISTICS","Statystyki reklam"],["AD_TIME","Reklama: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["CHAPTERS","Rozdziały"],["DOWNLOAD_VIDEO_FRAME","Zapisz klatkę filmu"],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["QUALITY","Jakość"],["RECENTER_VR","Wyśrodkuj"],["REPLAY","Odtwórz ponownie"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_NEXT","Dalej"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["STATISTICS","Statystyki"],["SUBTITLE_FORCED","Wymuszone"],["SURROUND","Przestrzenny"],["TOGGLE_STEREOSCOPIC","Przełącz tryb stereoskopowy"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),e.Va("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_STATISTICS","Estatísticas de anúncios"],["AD_TIME","Anúncio: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["CHAPTERS","Capítulos"],["DOWNLOAD_VIDEO_FRAME","Salvar frame do vídeo"],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["QUALITY","Qualidade"],["RECENTER_VR","Centralizar"],["REPLAY","Repetir"],["RESOLUTION","Resolução"],["REWIND","Voltar"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["STATISTICS","Estatísticas"],["SUBTITLE_FORCED","Exibição forçada"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Alternar imagem estereoscópica"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),e.Va("ru",new Map([["AD_DURATION","Продолжительность рекламы"],["AD_PROGRESS","Реклама [AD_ON] из [NUM_ADS]"],["AD_STATISTICS","Статистика объявлений"],["AD_TIME","Реклама: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Субтитры"],["CAST","Транслировать..."],["CHAPTERS","Эпизоды"],["DOWNLOAD_VIDEO_FRAME","Сохранить кадр видео"],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Выкл."],["ON","Вкл."],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["QUALITY","Качество"],["RECENTER_VR","Центрировать заново"],["REPLAY","Повторить"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["STATISTICS","Статистика"],["SUBTITLE_FORCED","Субтитры принудительно"],["SURROUND","Объемный звук"],["TOGGLE_STEREOSCOPIC","Включить или отключить стереоскопический режим"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),e.Va("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_STATISTICS","สถิติโฆษณา"],["AD_TIME","โฆษณา: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยายแทนเสียง"],["CAST","แคสต์..."],["CHAPTERS","บท"],["DOWNLOAD_VIDEO_FRAME","บันทึกเฟรมวิดีโอ"],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["QUALITY","คุณภาพ"],["RECENTER_VR","จัดกึ่งกลางใหม่"],["REPLAY","เล่นซ้ำ"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["STATISTICS","สถิติ"],["SUBTITLE_FORCED","บังคับ"],["SURROUND","เซอร์ราวด์"],["TOGGLE_STEREOSCOPIC","เปิด/ปิดฟีเจอร์สามมิติ"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),e.Va("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_STATISTICS","Reklam istatistikleri"],["AD_TIME","Reklam: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["CHAPTERS","Bölümler"],["DOWNLOAD_VIDEO_FRAME","Video karesini kaydet"],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["QUALITY","Kalite"],["RECENTER_VR","Ortala"],["REPLAY","Tekrar Oynat"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["STATISTICS","İstatistikler"],["SUBTITLE_FORCED","Zorunlu"],["SURROUND","Surround"],["TOGGLE_STEREOSCOPIC","Stereoskopik modu aç/kapat"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),e.Va("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_STATISTICS","广告统计信息"],["AD_TIME","广告：[AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放…"],["CHAPTERS","章节"],["DOWNLOAD_VIDEO_FRAME","保存视频帧"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["QUALITY","画质"],["RECENTER_VR","重新置中"],["REPLAY","重放"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["STATISTICS","统计信息"],["SUBTITLE_FORCED","已强制显示"],["SURROUND","环绕声"],["TOGGLE_STEREOSCOPIC","切换立体声"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),e.Va("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_STATISTICS","廣告統計資料"],["AD_TIME","廣告：[AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["CHAPTERS","章節"],["DOWNLOAD_VIDEO_FRAME","儲存影片影格"],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["QUALITY","音質"],["RECENTER_VR","重新置中"],["REPLAY","重播"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["STATISTICS","統計資料"],["SUBTITLE_FORCED","強制顯示"],["SURROUND","環場音效"],["TOGGLE_STEREOSCOPIC","切換立體影像"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]])),e.Gi(navigator.languages||[]),e}(),this.h=new At,this.C=null,this.configure(this.g),function(t){t.h.o(t.s,"buffering",function(){nE(t)}),nE(t),t.h.o(e,"keydown",function(n){!function(t,n){t.ba.add(n.key);var i=t.Ec();"Tab"==n.key&&(t.i.classList.add("shaka-keyboard-navigation"),$A(t),t.h.o(e,"mousedown",function(){t.h.Da(e,"mousedown")})),"Escape"==n.key&&t.N.Ka(),i&&t.ba.has("Tab")&&function(e,t){var n=e.I.filter(function(e){return!e.classList.contains("shaka-hidden")});if(n.length){var i=n[0];if(i.childNodes.length){for(n=i.firstElementChild;n&&n.classList.contains("shaka-hidden");)n=n.nextElementSibling;for(i=i.lastElementChild;i&&i.classList.contains("shaka-hidden");)i=i.previousElementSibling;var r=document.activeElement;e.ba.has("Shift")?r==n&&(t.preventDefault(),i.focus()):r==i&&(t.preventDefault(),n.focus())}}}(t,n)}(t,n)}),t.h.o(e,"click",function(){return t.Oc()}),t.h.o(t,"submenuopen",function(){t.Oc()}),t.h.o(t.B,"play",function(){$A(t)}),t.h.o(t.B,"pause",function(){$A(t)}),t.h.o(t.l,"mousemove",function(e){JA(t,e)}),t.h.o(t.l,"touchmove",function(e){JA(t,e)},{passive:!0}),t.h.o(t.l,"touchend",function(e){JA(t,e)},{passive:!0}),t.h.o(t.l,"mouseleave",function(){t.O||t.J.Ka()}),t.h.o(t.l,"wheel",function(e){JA(t,e)},{passive:!0}),t.h.o(t.D,"caststatuschanged",function(){tE(t)}),t.h.o(t.C,"vrstatuschanged",function(){t.dispatchEvent(new V("vrstatuschanged"))}),t.h.o(t.l,"keydown",function(e){var n=document.activeElement,i=!(!n||!n.classList)&&n.classList.contains("shaka-volume-bar"),r=n&&n.classList&&n.classList.contains("shaka-seek-bar");if(t.i.contains(n)&&JA(t,e),t.g.enableKeyboardPlaybackControls&&t.s.cd()){n=t.g.keyboardSeekDistance;var a=t.g.keyboardLargeSeekDistance;switch(e.key){case"ArrowLeft":t.u&&r&&!i&&0<n&&(e.preventDefault(),rE(t,t.u.getValue()-n));break;case"ArrowRight":t.u&&r&&!i&&0<n&&(e.preventDefault(),rE(t,t.u.getValue()+n));break;case"PageDown":t.u&&r&&0<a&&(e.preventDefault(),rE(t,t.u.getValue()-a));break;case"PageUp":t.u&&r&&0<a&&(e.preventDefault(),rE(t,t.u.getValue()+a));break;case"Home":t.u&&rE(t,t.s.xa().start);break;case"End":t.u&&rE(t,t.s.xa().end);break;case"f":t.oe()&&t.lg();break;case"m":t.j&&t.j.isLinear()?t.j.setMuted(!t.j.isMuted()):t.m.muted=!t.m.muted;break;case"p":t.Bf()&&t.Sc();break;case" ":r&&ZA(t)}}}),t.h.o(t.l,"keyup",function(e){t.ba.delete(e.key)}),t.h.o(t.na,"ad-started",function(e){t.j=e.ad,t.Mj(),nE(t)}),t.h.o(t.na,"ad-stopped",function(){t.j=null,t.Wi(),nE(t)}),screen.orientation&&t.h.o(screen.orientation,"change",function(){return L(function(e){return _(e,function(e){return L(function(t){return e.B&&0!=e.B.readyState&&!e.D.Pa()&&e.g.enableFullscreenOnRotation&&e.oe()?screen.orientation.type.includes("landscape")&&!e.tc()?_(t,YA(e),0):screen.orientation.type.includes("portrait")&&e.tc()?_(t,qA(e),0):t.A(0):t.return()})}(t),0)})})}(this),function(t){if(t.g.setupMediaSession&&navigator.mediaSession){var n=function(e,t){try{navigator.mediaSession.setActionHandler(e,function(e){t(e)})}catch(e){}},i=function(){if(t.j&&t.j.isLinear())r();else{var e=t.s.xa(),n=e.end-e.start;e=parseFloat((t.B.currentTime-e.start).toFixed(2)),t.s.T()&&1>Math.abs(n-e)&&(n=1/0);try{navigator.mediaSession.setPositionState({duration:Math.max(0,n),playbackRate:t.B.playbackRate,position:Math.max(0,e)})}catch(e){}}},r=function(){try{navigator.mediaSession.setPositionState()}catch(e){}},a=function(e){var n=t.g.keyboardSeekDistance;switch(e.action){case"pause":case"play":ZA(t);break;case"seekbackward":if(e.seekOffset&&!isFinite(e.seekOffset))break;t.j&&t.j.isLinear()||rE(t,t.u.getValue()-(e.seekOffset||n));break;case"seekforward":if(e.seekOffset&&!isFinite(e.seekOffset))break;t.j&&t.j.isLinear()||rE(t,t.u.getValue()+(e.seekOffset||n));break;case"seekto":if(e.seekTime&&!isFinite(e.seekTime))break;t.j&&t.j.isLinear()||rE(t,t.s.xa().start+e.seekTime);break;case"stop":t.s.nc();break;case"enterpictureinpicture":t.j&&t.j.isLinear()||t.Sc()}};n("pause",a),n("play",a),n("seekbackward",a),n("seekforward",a),n("seekto",a),n("stop",a),("documentPictureInPicture"in e||document.pictureInPictureEnabled)&&n("enterpictureinpicture",a),n=function(){t.s.T()||0!=t.s.xa().start?(i(),t.h.o(t.B,"timeupdate",i)):r()},t.s.$&&n(),t.h.o(t.s,"loaded",n),t.h.o(t.s,"unloading",function(){t.h.Da(t.B,"timeupdate",i)}),t.h.o(t.s,"metadata",function(e){var n,i;(e=e.payload)&&("TIT2"==e.key&&e.data&&(n=e.data),"APIC"==e.key&&"--\x3e"==e.mimeType&&(i=e.data),n&&(e={title:n,artwork:[]},navigator.mediaSession.metadata&&((e=navigator.mediaSession.metadata).title=n),navigator.mediaSession.metadata=new MediaMetadata(e)),i&&(i!=(n=t.m).poster&&(n.poster=i),n={title:"",artwork:[{src:i}]},navigator.mediaSession.metadata&&((n=navigator.mediaSession.metadata).artwork=[{src:i}]),navigator.mediaSession.metadata=new MediaMetadata(n)))})}}(this),this.ba=new Set,tE(this),this.ua.ya(this.g.refreshTickInSeconds),this.h.o(this.sa,"locale-changed",function(e){e=e.locales[0],o.na.setLocale(e),o.l.setAttribute("lang",e)}),this.na.initInterstitial(this.G,this.Z,this.m),this.h.o(this.s,"texttrackvisibility",function(){QA(o)}),this.h.o(this.s,"unloading",function(){o.j||(o.tc()&&qA(o),o.Gd()&&o.Sc())})}function WA(e){for(var t=l(e.H),n=t.next();!n.done;n=t.next())n.value.release();e.H=[]}function zA(e,t){oE.set(e,t)}function KA(e){return!(!document.fullscreenEnabled||e.m.webkitSupportsFullscreen&&e.g.preferVideoFullScreenInVisionOS&&"APPLE_VR"==Me().Ja())}function XA(t){return"documentPictureInPicture"in e&&t.g.preferDocumentPictureInPicture}function YA(e){var t,n;return L(function(i){switch(i.g){case 1:if(S(i,2),!KA(e)){(t=e.m).webkitSupportsFullscreen&&t.webkitEnterFullscreen(),i.A(4);break}if(!e.Gd()){i.A(5);break}return _(i,e.Sc(),6);case 6:if(!XA(e)){i.A(5);break}return _(i,new Promise(function(e){new zi(e).X(.05)}),5);case 5:return _(i,e.g.fullScreenElement.requestFullscreen({navigationUI:"hide"}),9);case 9:if(!e.g.forceLandscapeOnFullscreen||!screen.orientation){i.A(4);break}return S(i,11),_(i,screen.orientation.lock("landscape"),13);case 13:A(i,4,2);break;case 11:E(i,2);case 4:A(i,0);break;case 2:n=E(i),e.dispatchEvent(new V("error",(new Map).set("detail",n))),w(i)}})}function qA(e){var t;return L(function(n){return KA(e)?(screen.orientation&&screen.orientation.unlock(),_(n,document.exitFullscreen(),0)):((t=e.m).webkitSupportsFullscreen&&t.webkitExitFullscreen(),n.A(0))})}function ZA(e){if(e.Y){if(e.j&&(e.j&&e.j.isPaused()?e.j.play():e.j&&e.j.pause(),e.j.isLinear()))return;e.B.duration&&(e.B.paused&&!e.R?(e.s.isEnded()&&(e.B.currentTime=e.s.xa().start),e.B.play()):e.B.pause())}}function JA(e,t){"mousemove"==t.type&&(e.i.classList.remove("shaka-keyboard-navigation"),$A(e)),"touchstart"==t.type||"touchmove"==t.type||"touchend"==t.type||"keyup"==t.type?e.O=Date.now():e.O+1e3<Date.now()&&(e.O=null),e.O&&"mousemove"==t.type||(e.l.classList.remove("no-cursor"),e.Na=!0,e.N.stop(),e.Ba()||(aE(e),$A(e)),e.J.stop(),"touchend"!=t.type&&"wheel"!=t.type&&"keyup"!=t.type&&e.O||e.J.X(3))}function QA(e){var t=e.l.getElementsByClassName("shaka-text-container")[0];t&&(e.Ba()?t.style.bottom=e.L.clientHeight+"px":t.style.bottom="0px")}function $A(t){var n=!!t.j&&t.j.isPaused(),i=t.B.paused&&!t.R,r=t.i.classList.contains("shaka-keyboard-navigation");n||(!t.j||!t.j.isLinear())&&i||t.Na||r||function(t){return!!e.matchMedia("hover: hover").matches&&t.Ta.some(function(e){return e.matches(":hover")})}(t)?(aE(t),null==t.i.getAttribute("shown")&&(t.i.setAttribute("shown","true"),iE(t)),QA(t),t.$.stop()):t.$.X(t.g.fadeDelay),t.Ec()&&t.F.classList.remove("shaka-tooltips-on")}function eE(e,t){t=void 0!==t&&t,e.Y&&!e.Ub()&&(e.Ec()?e.N.Ka():e.g.singleClickForPlayAndPause?ZA(e):t&&e.Ba()&&e.Xi())}function tE(e){var t=e.D.Pa();e.dispatchEvent(new V("caststatuschanged",(new Map).set("newStatus",t))),t?null==e.i.getAttribute("casting")&&(e.i.setAttribute("casting","true"),iE(e)):null!=e.i.getAttribute("casting")&&(e.i.removeAttribute("casting"),iE(e))}function nE(e){e.Y&&(e.j&&e.j.isClientRendering()&&e.j.isLinear()?YT(e.K,!1):YT(e.K,e.s.zf()))}function iE(e){e.Ba()?e.dispatchEvent(new V("showingui")):e.dispatchEvent(new V("hidingui"))}function rE(e,t){e.B.currentTime=t,aE(e)}function aE(e){if(e.u)if(e.u.setValue(e.B.currentTime),e.u.update(),e.u.isShowing()){for(var t=l(e.I),n=t.next();!n.done;n=t.next())n.value.classList.remove("shaka-low-position");(t=e.F).classList.contains("shaka-tooltips-on")&&t.classList.remove("shaka-tooltips-low-position")}else{for(n=(t=l(e.I)).next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");(t=e.F).classList.contains("shaka-tooltips-on")&&t.classList.add("shaka-tooltips-low-position")}e.dispatchEvent(new V("timeandseekrangeupdated"))}m(VA,$),(i=VA.prototype).destroy=function(e){e=void 0!==e&&e;var t=this;return L(function(n){switch(n.g){case 1:if(document.pictureInPictureElement!=t.m){n.A(2);break}return _(n,document.exitPictureInPicture(),2);case 2:if(t.h&&(t.h.release(),t.h=null),t.J&&(t.J.stop(),t.J=null),t.$&&(t.$.stop(),t.$=null),t.N&&(t.N.stop(),t.N=null),t.ua&&(t.ua.stop(),t.ua=null),t.C&&(t.C.release(),t.C=null),WA(t),t.i&&(t.l.removeChild(t.i),t.i=null),!t.D){n.A(4);break}return _(n,t.D.destroy(e),5);case 5:t.D=null;case 4:if(t.K&&(t.l.removeChild(t.K),t.K=null),t.G&&(t.l.removeChild(t.G),t.G=null),!t.Z){n.A(6);break}return _(n,t.Z.destroy(),7);case 7:t.Z=null;case 6:t.s=null,t.m=null,t.B=null,t.sa=null,t.ba.clear(),function(e){if(e.g.setupMediaSession&&navigator.mediaSession){try{navigator.mediaSession.setPositionState()}catch(e){}e=function(e){try{navigator.mediaSession.setActionHandler(e,null)}catch(e){}},e("pause"),e("play"),e("seekbackward"),e("seekforward"),e("seekto"),e("stop"),e("enterpictureinpicture")}}(t),$.prototype.release.call(t),w(n)}})},i.ek=function(e){this.qa=e,tE(this)},i.Fl=function(){$A(this)},i.configure=function(e){var t=this;this.g=e,this.D.Hi(e.castReceiverAppId,e.castAndroidReceiverCompatible),this.u&&(this.u=null),this.La&&(this.La=null),this.U&&(this.U=null),this.C&&this.C.configure(e),this.i?(hs(this.i),WA(this)):(function(e){e.i=os("div"),e.i.classList.add("shaka-controls-container"),e.l.appendChild(e.i),e.l.setAttribute("shaka-controls","true"),e.h.o(e.i,"touchend",function(t){e.B.duration&&(e.Ba()?(e.O=Date.now(),eE(e,!0)):JA(e,t),t.cancelable&&t.preventDefault())}),e.h.o(e.i,"click",function(){eE(e)}),e.h.o(e.i,"dblclick",function(){e.g.doubleClickForFullscreen&&e.oe()&&e.lg()})}(this),function(e){e.G=os("div"),e.G.classList.add("shaka-client-side-ad-container"),YT(e.G,!1),e.h.o(e.G,"click",function(){eE(e)}),e.l.appendChild(e.G)}(this),this.C=new OA(this.i,this.Mb,this.m,this.s,this.g)),this.l.classList.add("shaka-video-container"),this.m.classList.add("shaka-video"),function(e){var t=os("div");t.classList.add("shaka-scrim-container"),e.i.appendChild(t)}(this),this.g.addBigPlayButton&&function(e){var t=os("div");t.classList.add("shaka-play-button-container"),e.i.appendChild(t),e.La=new nA(t,e),e.H.push(e.La)}(this),this.g.customContextMenu&&(this.U=new JT(this.F,this),this.H.push(this.U)),this.K||function(e){e.K=os("div"),e.K.classList.add("shaka-spinner-container"),e.l.appendChild(e.K);var t=os("div");t.classList.add("shaka-spinner"),e.K.appendChild(t),t.insertAdjacentHTML("beforeend",'<svg focusable="false" stroke="currentColor"\n         viewBox="0 0 38 38" xmlns="http://www.w3.org/2000/svg"\n         width="50px" height="50px" class="q-spinner text-grey-9">\n      <g transform="translate(1 1)" stroke-width="6" fill="none"\n        fill-rule="evenodd">\n        <circle stroke-opacity=".5" cx="18" cy="18" r="16"></circle>\n        <path d="M34 18c0-9.94-8.06-16-16-16">\n          <animateTransform attributeName="transform" type="rotate"\n            from="0 18 18" to="360 18 18" dur="1s" repeatCount="indefinite">\n          </animateTransform>\n        </path>\n      </g>\n    </svg>')}(this),this.g.seekOnTaps&&(function(e){var t=os("div");t.classList.add("shaka-hidden-fast-forward-container"),e.i.appendChild(t),e.Ya=new rA(t,e),e.H.push(e.Ya)}(this),function(e){var t=os("div");t.classList.add("shaka-hidden-rewind-container"),e.i.appendChild(t),e.eb=new aA(t,e),e.H.push(e.eb)}(this)),this.Ia=os("div"),this.Ia.classList.add("shaka-server-side-ad-container"),this.i.appendChild(this.Ia),function(e){e.L=os("div"),e.L.classList.add("shaka-bottom-controls"),e.L.classList.add("shaka-no-propagation"),e.i.appendChild(e.L),e.h.o(e.L,"click",function(t){t.target.closest(".shaka-overflow-button")||e.Oc()}),function(e){e.P=os("div"),e.P.classList.add("shaka-ad-controls");var t=null!=e.j&&e.j.isLinear();YT(e.P,t),e.L.appendChild(e.P),t=new bA(e.P,e),e.H.push(t)}(e),function(e){if(e.g.addSeekBar)e.u=sE.create(e.L,e),e.H.push(e.u);else{for(var t=l(e.I),n=t.next();!n.done;n=t.next())n.value.classList.add("shaka-low-position");(e=e.F).classList.contains("shaka-tooltips-on")&&e.classList.add("shaka-tooltips-low-position")}}(e),e.F=os("div"),e.F.classList.add("shaka-controls-button-panel"),e.F.classList.add("shaka-show-controls-on-mouse-over"),e.g.enableTooltips&&e.F.classList.add("shaka-tooltips-on"),e.L.appendChild(e.F);for(var t=l(e.g.controlPanelElements),n=t.next();!n.done;n=t.next())if(n=n.value,oE.get(n)){var i=oE.get(n).create(e.F,e);e.H.push(i),"time_and_duration"==n&&(n=new ZT(e.F,e),e.H.push(n))}else Y("Unrecognized control panel element requested:",n)}(this),this.I=Array.from(this.l.getElementsByClassName("shaka-settings-menu")),this.I.push.apply(this.I,h(Array.from(this.l.getElementsByClassName("shaka-overflow-menu")))),this.Ta=Array.from(this.l.getElementsByClassName("shaka-show-controls-on-mouse-over")),$A(this);for(var n=(e=l(this.l.getElementsByClassName("shaka-no-propagation"))).next();!n.done;n=e.next()){n=n.value;var i=function(e){return e.stopPropagation()};this.h.o(n,"click",i),this.h.o(n,"dblclick",i),0<navigator.maxTouchPoints&&this.h.o(n,"touchend",function(e){t.Ba()&&e.stopPropagation()})}},i.$h=function(e){(this.Y=e)?(this.l.setAttribute("shaka-controls","true"),this.m.tabIndex=-1,this.m.controls=!1):this.l.removeAttribute("shaka-controls"),$A(this)},i.Gj=function(e){this.m.controls=e,this.m.tabIndex=e?0:-1,e&&this.$h(!1)},i.getAd=function(){return this.j},i.xk=function(){return this.D},i.Pk=function(){return this.sa},i.ol=function(){return this.l},i.Mc=function(){return this.B},i.Ok=function(){return this.m},i.Tb=function(){return this.s},i.Nk=function(){return this.Z},i.Ek=function(){return this.i},i.$k=function(){return this.Ia},i.Ak=function(){return this.G},i.Bk=function(){return this.g},i.Cl=function(){return this.R},i.ci=function(e){(this.R=e)?this.J.stop():this.J.X(3)},i.wl=function(){return this.qa},i.lh=function(){return this.u?this.u.getValue():this.B.currentTime},i.Hj=function(e){this.O=e},i.Ec=function(){return this.I.some(function(e){return!e.classList.contains("shaka-hidden")})},i.Oc=function(){this.N.Ka()},i.oe=function(){return!(this.D.Pa()||!KA(this)&&(this.j&&this.j.isUsingAnotherMediaElement()||!this.m.webkitSupportsFullscreen))},i.tc=function(){if(KA(this))return!!document.fullscreenElement;var e=this.m;return!!e.webkitSupportsFullscreen&&e.webkitDisplayingFullscreen},i.lg=function(){var e=this;return L(function(t){return e.tc()?_(t,qA(e),0):_(t,YA(e),0)})},i.Bf=function(){return!(this.D.Pa()||!document.pictureInPictureEnabled&&!XA(this)||this.m.disablePictureInPicture)},i.Gd=function(){return!!(e.documentPictureInPicture&&e.documentPictureInPicture.window||document.pictureInPictureElement)},i.Sc=function(){var t,n=this;return L(function(i){switch(i.g){case 1:if(S(i,2),XA(n)){if(!n.tc()){i.A(10);break}return _(i,qA(n),10)}return document.pictureInPictureElement?_(i,document.exitPictureInPicture(),5):(n.tc()&&qA(n),_(i,n.m.requestPictureInPicture(),5));case 10:return _(i,function(t){var n,i,r,a,o,s;return L(function(u){if(1==u.g)return e.documentPictureInPicture.window?(e.documentPictureInPicture.window.close(),u.return()):(n=t.l,i=n.getBoundingClientRect(),_(u,e.documentPictureInPicture.requestWindow({width:i.width,height:i.height}),2));(function(e){var t=[].concat(h(document.styleSheets)).map(function(t){try{return[].concat(h(t.cssRules)).map(function(e){return e.cssText}).join("")}catch(i){var n=document.createElement("link");n.rel="stylesheet",n.type=t.type,n.media=t.media,n.href=t.href,e.document.head.appendChild(n)}return""}).filter(Boolean).join("\n"),n=document.createElement("style");n.textContent=t,e.document.head.appendChild(n)})(r=u.h),a=n.parentNode||document.body,(o=t.l.cloneNode(!0)).style.visibility="hidden",o.style.height=getComputedStyle(n).height,a.appendChild(o),(s=document.createElement("style")).append("[data-shaka-player-container] {\n      width: 100% !important; max-height: 100%}"),r.document.head.append(s),r.document.body.append(n),t.h.ra(r,"pagehide",function(){o.replaceWith(n)}),w(u)})}(n),5);case 5:A(i,0);break;case 2:t=E(i),n.dispatchEvent(new V("error",(new Map).set("detail",t))),w(i)}})},i.Mj=function(){YT(this.P,!0),YT(this.G,!0),this.j.hasCustomClick()?this.i.setAttribute("ad-active","true"):this.i.removeAttribute("ad-active")},i.Wi=function(){YT(this.P,!1),YT(this.G,!1),this.i.removeAttribute("ad-active")},i.Ba=function(){return!!this.Y&&(null!=this.i.getAttribute("shown")||null!=this.i.getAttribute("casting"))},i.om=function(){JA(this,new Event("mousemove",{bubbles:!1,cancelable:!1}))},i.Xi=function(){this.J.Ka()},i.Jg=function(){return this.C.Jg()},i.Ub=function(){return this.C.Ub()},i.kl=function(){var e=this.C;if(e.g){xA((e=e.g).h,e.D);var t=e.h;e=t[0];var n=t[1],i=t[2],r=i*i,a=(t=t[3])*t,o=e*e+n*n+r+a,s=e*t-n*i;s>.499995*o?(o=Math.PI/2,e=2*Math.atan2(n,e)):s<-.499995*o?(o=-Math.PI/2,e=2*Math.atan2(n,e)):(o=Math.asin(2*(e*i-t*n)),e=Math.atan2(2*(e*t+n*i),1-2*(r+a))),e=180*Math.acos(Math.cos(e)*Math.cos(o))/Math.PI}else Y("Not playing VR content"),e=null;return e},i.jl=function(){var e=this.C;return e.g?e=e.g.j:(Y("Not playing VR content"),e=null),e},i.nm=function(e){var t=this.C;t.g?(0>e?(Y("Field of view should be greater than 0"),e=0):100<e&&(Y("Field of view should be less than 100"),e=100),(t=t.g).j=e,LA(t,!1)):Y("Not playing VR content")},i.Ud=function(){this.C.Ud()},i.wh=function(e){this.C.wh(e)},i.uh=function(e){this.C.uh(e)},i.vh=function(e){this.C.vh(e)},H("shaka.ui.Controls",VA),VA.prototype.incrementRoll=VA.prototype.vh,VA.prototype.incrementPitch=VA.prototype.uh,VA.prototype.incrementYaw=VA.prototype.wh,VA.prototype.toggleStereoscopicMode=VA.prototype.Ud,VA.prototype.setVRFieldOfView=VA.prototype.nm,VA.prototype.getVRFieldOfView=VA.prototype.jl,VA.prototype.getVRNorth=VA.prototype.kl,VA.prototype.isPlayingVR=VA.prototype.Ub,VA.prototype.canPlayVR=VA.prototype.Jg,VA.prototype.hideUI=VA.prototype.Xi,VA.prototype.showUI=VA.prototype.om,VA.prototype.isOpaque=VA.prototype.Ba,VA.prototype.hideAdUI=VA.prototype.Wi,VA.prototype.showAdUI=VA.prototype.Mj,VA.prototype.togglePiP=VA.prototype.Sc,VA.prototype.isPiPEnabled=VA.prototype.Gd,VA.prototype.isPiPAllowed=VA.prototype.Bf,VA.prototype.toggleFullScreen=VA.prototype.lg,VA.prototype.isFullScreenEnabled=VA.prototype.tc,VA.prototype.isFullScreenSupported=VA.prototype.oe,VA.prototype.hideSettingsMenus=VA.prototype.Oc,VA.prototype.anySettingsMenusAreOpen=VA.prototype.Ec,VA.prototype.setLastTouchEventTime=VA.prototype.Hj,VA.prototype.getDisplayTime=VA.prototype.lh,VA.prototype.isCastAllowed=VA.prototype.wl,VA.prototype.setSeeking=VA.prototype.ci,VA.prototype.isSeeking=VA.prototype.Cl,VA.prototype.getConfig=VA.prototype.Bk,VA.prototype.getClientSideAdContainer=VA.prototype.Ak,VA.prototype.getServerSideAdContainer=VA.prototype.$k,VA.prototype.getControlsContainer=VA.prototype.Ek,VA.prototype.getLocalPlayer=VA.prototype.Nk,VA.prototype.getPlayer=VA.prototype.Tb,VA.prototype.getLocalVideo=VA.prototype.Ok,VA.prototype.getVideo=VA.prototype.Mc,VA.prototype.getVideoContainer=VA.prototype.ol,VA.prototype.getLocalization=VA.prototype.Pk,VA.prototype.getCastProxy=VA.prototype.xk,VA.prototype.getAd=VA.prototype.getAd,VA.prototype.setEnabledNativeControls=VA.prototype.Gj,VA.prototype.setEnabledShakaControls=VA.prototype.$h,VA.prototype.configure=VA.prototype.configure,VA.prototype.loadComplete=VA.prototype.Fl,VA.prototype.allowCast=VA.prototype.ek,VA.registerSeekBar=function(e){sE=e},VA.registerElement=zA,VA.prototype.destroy=VA.prototype.destroy;var oE=new Map,sE=new yA;function uE(t,n){function i(){return cE(r)}VT.call(this,t,n);var r=this;this.m=this.controls.g,this.l=this.controls.i,this.s=this.controls.l,this.j=[],function(e){e.h=ss(),e.h.classList.add("shaka-overflow-menu-button"),e.h.classList.add("shaka-no-propagation"),e.h.classList.add("material-icons-round"),e.h.classList.add("shaka-tooltip"),e.h.textContent="settings";var t=os("span");t.classList.add("shaka-overflow-quality-mark"),t.style.display="none",e.h.appendChild(t),e.parent.appendChild(e.h)}(this),this.g=os("div"),this.g.classList.add("shaka-overflow-menu"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-hidden"),this.l.appendChild(this.g),function(e){for(var t=l(e.m.overflowMenuButtons),n=t.next();!n.done;n=t.next())n=n.value,pE.get(n)?(n=pE.get(n),e.j.push(n.create(e.g,e.controls))):Y("Unrecognized overflow menu element requested:",n)}(this),this.eventManager.o(this.localization,"locale-updated",function(){hE(r)}),this.eventManager.o(this.localization,"locale-changed",function(){hE(r)}),this.eventManager.o(this.adManager,"ad-started",function(){r.ad&&r.ad.isLinear()&&YT(r.h,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){YT(r.h,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){YT(r.g,!1)}),this.eventManager.o(this.g,"touchstart",function(e){r.controls.Hj(Date.now()),e.stopPropagation()}),this.eventManager.o(this.h,"click",function(){r.controls.Ba()&&function(e){if(e.controls.Ec())e.controls.Oc();else{YT(e.g,!0),$A(e.controls);var t=function(e){return 0==e.classList.contains("shaka-hidden")};te(e.g.childNodes,t)&&ne(e.g.childNodes,t)[0].focus(),cE(e)}}(r)}),hE(this),this.ad&&this.ad.isLinear()&&YT(this.h,!1),this.i=null,e.ResizeObserver?(this.i=new ResizeObserver(i),this.i.observe(this.controls.l)):this.eventManager.o(e,"resize",i)}function lE(e,t){pE.set(e,t)}function hE(e){e.h.ariaLabel=e.localization.resolve("MORE_SETTINGS")}function cE(t){var n=t.g.getBoundingClientRect(),i=e.getComputedStyle(t.g),r=parseFloat(i.paddingTop);i=parseFloat(i.paddingBottom);var a=t.s.getBoundingClientRect();t.g.style.maxHeight=n.bottom-a.top-r-i+"px"}function dE(){}m(uE,VT),uE.prototype.release=function(){this.l=null;for(var e=l(this.j),t=e.next();!t.done;t=e.next())t.value.release();this.j=[],this.i&&(this.i.disconnect(),this.i=null),VT.prototype.release.call(this)},H("shaka.ui.OverflowMenu",uE),uE.registerElement=lE,dE.prototype.create=function(e,t){return new uE(e,t)},zA("overflow_menu",new dE);var pE=new Map;function fE(e,t){function n(e){return i.i[e]}VT.call(this,e,t);var i=this;this.h=ss(),this.h.classList.add("shaka-ad-statistics-button"),this.j=os("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.h.appendChild(this.j),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.u=os("span"),e.appendChild(this.u),this.m=os("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.h.appendChild(e),this.parent.appendChild(this.h),this.g=os("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-ad-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.i.appendChild(this.g),this.C=[],this.i=this.adManager.getStats(),YT(this.h,0<this.i.started),this.s=new Map,this.B=(new Map).set("loadTimes",function(e){for(var t=0,n=(e=l(i.i[e])).next();!n.done;n=e.next())t+=parseFloat(n.value);return t}).set("averageLoadTime",n).set("started",n).set("overlayAds",n).set("playedCompletely",n).set("skipped",n).set("errors",n),this.l=new zi(function(){i.i=i.adManager.getStats();for(var e=l(i.C),t=e.next();!t.done;t=e.next())t=t.value,i.s.get(t).textContent=i.B.get(t)(t)}),mE(this),function(e){var t=os("div");t.classList.add("shaka-no-propagation"),t.classList.add("shaka-statistics-close");var n=os("i");for(n.classList.add("material-icons"),n.classList.add("notranslate"),n.classList.add("material-icons-round"),n.textContent="close",t.appendChild(n),e.g.appendChild(t),e.eventManager.o(n,"click",function(){gE(e)}),n=(t=l(e.controls.g.adStatisticsList)).next();!n.done;n=t.next())(n=n.value)in e.i?(e.g.appendChild(vE(e,n)),e.C.push(n)):Y("Unrecognized ad statistic element:",n)}(this),this.eventManager.o(this.localization,"locale-updated",function(){mE(i)}),this.eventManager.o(this.localization,"locale-changed",function(){mE(i)}),this.eventManager.o(this.h,"click",function(){i.controls.Ba()&&(gE(i),mE(i))}),this.eventManager.o(this.player,"loading",function(){YT(i.h,!1)}),this.eventManager.o(this.adManager,"ad-started",function(){YT(i.h,!0)})}function gE(e){e.g.classList.contains("shaka-hidden")?(e.j.textContent="insert_chart",e.l.ya(.1),YT(e.g,!0)):(e.j.textContent="insert_chart_outlined",e.l.stop(),YT(e.g,!1))}function mE(e){e.u.textContent=e.localization.resolve("AD_STATISTICS"),e.h.ariaLabel=e.localization.resolve("AD_STATISTICS"),e.m.textContent=e.localization.resolve(e.g.classList.contains("shaka-hidden")?"OFF":"ON")}function vE(e,t){var n=os("div"),i=os("label");return i.textContent=t+":",n.appendChild(i),(i=os("span")).textContent=e.B.get(t)(t),n.appendChild(i),e.s.set(t,i),n}function yE(){}function bE(t,n){VT.call(this,t,n);var i=this;this.g=ss(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=os("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),e.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),(t=os("label")).classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),this.j=os("span"),t.appendChild(this.j),this.i=os("span"),this.i.classList.add("shaka-current-selection-span"),t.appendChild(this.i),this.g.appendChild(t),this.parent.appendChild(this.g),wE(this),_E(this),this.eventManager.o(this.localization,"locale-updated",function(){wE(i)}),this.eventManager.o(this.localization,"locale-changed",function(){wE(i)}),this.eventManager.o(this.g,"click",function(){i.controls.Ba()&&i.controls.Mc().webkitShowPlaybackTargetPicker()}),t=this.controls.Mc(),this.eventManager.o(t,"webkitplaybacktargetavailabilitychanged",function(e){var t=i.player.m==xd;YT(i.g,"available"==e.availability&&t)}),this.eventManager.o(t,"webkitcurrentplaybacktargetiswirelesschanged",function(){_E(i)})}function _E(e){var t=e.controls.Mc();e.g.ariaPressed=t&&t.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function wE(e){e.g.ariaLabel=e.localization.resolve("AIRPLAY"),e.j.textContent=e.localization.resolve("AIRPLAY")}function SE(){}function TE(t,n){VT.call(this,t,n);var i=this;this.g=document.createElement("canvas"),this.g.style.position="absolute",this.g.style.top="0",this.g.style.left="0",this.g.style.pointerEvents="none",this.parent.appendChild(this.g),EE(this),this.i=this.h=null,e.ResizeObserver?(this.i=new ResizeObserver(function(){return EE(i)}),this.i.observe(this.parent)):e.addEventListener("resize",function(){return EE(i)})}function AE(e){return(e=e.g.getContext("2d"))?e:null}function EE(e){e.g.width=e.parent.offsetWidth,e.g.height=e.parent.offsetHeight}function xE(e,t,n,i){i=void 0===i?null:i,this.j=e,this.l=t,this.h=CE(this);var r="",a=!1;t.dataset&&t.dataset.shakaPlayerCastReceiverId?(r=(a=t.dataset).shakaPlayerCastReceiverId,a="true"===a.shakaPlayerCastAndroidReceiverCompatible):n.dataset&&n.dataset.shakaPlayerCastReceiverId&&(r=(a=n.dataset).shakaPlayerCastReceiverId,a="true"===a.shakaPlayerCastAndroidReceiverCompatible),r.length&&(this.h.castReceiverAppId=r,this.h.castAndroidReceiverCompatible=a),t.dataset.shakaPlayerContainer="",t.ui=this,this.Bh()&&t.classList.add("shaka-mobile"),this.g=new VA(e,t,n,i,this.h),n.controls||e.di(t),t.ui=this,n.ui=this,this.i=null}function CE(t){var n="play_pause skip_next mute volume time_and_duration spacer overflow_menu".split(" ");if(e.chrome&&n.push("cast"),"remote"in HTMLMediaElement.prototype?n.push("remote"):e.WebKitPlaybackTargetAvailabilityEvent&&n.push("airplay"),n.push("fullscreen"),n={controlPanelElements:n,overflowMenuButtons:"captions quality language chapter picture_in_picture playback_rate recenter_vr toggle_stereoscopic save_video_frame".split(" "),statisticsList:"width height currentCodecs corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent manifestSizeBytes bytesDownloaded nonFatalErrorCount manifestPeriodCount manifestGapCount".split(" "),adStatisticsList:"loadTimes averageLoadTime started overlayAds playedCompletely skipped errors".split(" "),contextMenuElements:["loop","picture_in_picture","save_video_frame","statistics","ad_statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},qualityMarks:{720:"",1080:"HD",1440:"2K",2160:"4K",4320:"8K"},trackLabelFormat:LE,textTrackLabelFormat:LE,fadeDelay:0,closeMenusDelay:2,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!1,forceLandscapeOnFullscreen:!1,enableTooltips:!0,keyboardSeekDistance:5,keyboardLargeSeekDistance:60,fullScreenElement:t.l,preferDocumentPictureInPicture:!0,showAudioChannelCountVariants:!0,seekOnTaps:!1,tapSeekDistance:10,refreshTickInSeconds:.125,displayInVrMode:!1,defaultVrProjectionMode:"equirectangular",setupMediaSession:!0,preferVideoFullScreenInVisionOS:!1,showAudioCodec:!0,showVideoCodec:!0,castSenderUrl:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js"},t.Bh()){n.addBigPlayButton=!0,n.singleClickForPlayAndPause=!1,n.seekOnTaps=!0,n.enableTooltips=!1,n.doubleClickForFullscreen=!1,t=Me(),n.enableFullscreenOnRotation="WEBKIT"!==t.Fa(),n.forceLandscapeOnFullscreen=!0;var i=["play_pause","skip_next","volume"];n.controlPanelElements=n.controlPanelElements.filter(function(e){return!i.includes(e)}),n.overflowMenuButtons=n.overflowMenuButtons.filter(function(e){return!i.includes(e)}),n.contextMenuElements=n.contextMenuElements.filter(function(e){return!i.includes(e)})}else if(t.Ch()){n.addBigPlayButton=!0,n.singleClickForPlayAndPause=!1,n.enableTooltips=!1,n.doubleClickForFullscreen=!1;var r="play_pause cast remote airplay volume save_video_frame".split(" ");n.controlPanelElements=n.controlPanelElements.filter(function(e){return!r.includes(e)}),n.overflowMenuButtons=n.overflowMenuButtons.filter(function(e){return!r.includes(e)}),n.contextMenuElements=n.contextMenuElements.filter(function(e){return!r.includes(e)})}return n}function kE(){var e,t,n,i,r,a,o,s,u,h,c,d,p,f,g,m,v,y,b,T,x;return L(function(C){switch(C.g){case 1:if(I_(),!Ac())return IE("shaka-ui-load-failed",DE),C.return();if(e=document.querySelectorAll("[data-shaka-player-container]"),t=document.querySelectorAll("[data-shaka-player]"),n=document.querySelectorAll("[data-shaka-player-canvas]"),i=document.querySelectorAll("[data-shaka-player-vr-canvas]"),!t.length&&!e.length){C.A(2);break}if(t.length&&!e.length){for(r=l(t),a=r.next();!a.done;a=r.next())(o=a.value).ui||(s=document.createElement("div"),o.parentElement.replaceChild(s,o),s.appendChild(o),u=PE(s,n,i),h=u.cj,c=u.$j,ME(s,o,h,c));C.A(2);break}d=l(e),p=d.next();case 4:if(p.done){C.A(2);break}if((f=p.value).ui){C.A(5);break}for(g=null,m=l(t),v=m.next();!v.done;v=m.next())if((y=v.value).parentElement==f){g=y;break}return g||((g=document.createElement("video")).setAttribute("playsinline",""),f.appendChild(g)),b=PE(f,n,i),T=b.cj,x=b.$j,S(C,7),_(C,ME(f,g,T,x),9);case 9:A(C,5);break;case 7:return E(C),IE("shaka-ui-load-failed",RE),C.return();case 5:p=d.next(),C.A(4);break;case 2:IE("shaka-ui-loaded"),w(C)}})}function IE(e,t){var n=null;null!=t&&(n={reasonCode:t}),e=new CustomEvent(e,{detail:n}),document.dispatchEvent(e)}function ME(e,t,n,i){var r,a,o,s,u,h,c,d,p,f;return L(function(g){switch(g.g){case 1:for(r=new _c,a=new xE(r,e,t,i||null),r.Bi(n),t.controls&&a.g.Gj(!0),o=[],(s=t.getAttribute("src"))&&(o.push(s),t.removeAttribute("src")),u=l(t.getElementsByTagName("source")),h=u.next();!h.done;h=u.next())c=h.value,o.push(c.src),t.removeChild(c);return _(g,r.ac(t),2);case 2:d=l(o),p=d.next();case 3:if(p.done){g.A(0);break}return f=p.value,S(g,6),_(g,a.g.Tb().load(f),8);case 8:g.A(0);break;case 6:E(g);case 4:p=d.next(),g.A(3)}})}function PE(e,t,n){for(var i=null,r=(t=l(t)).next();!r.done;r=t.next())if((r=r.value).parentElement==e){i=r;break}for(i||((i=document.createElement("canvas")).classList.add("shaka-canvas-container"),e.appendChild(i)),t=null,r=(n=l(n)).next();!r.done;r=n.next())if((r=r.value).parentElement==e){t=r;break}return{cj:i,$j:t}}m(fE,VT),fE.prototype.release=function(){this.l.stop(),this.l=null,VT.prototype.release.call(this)},H("shaka.ui.AdStatisticsButton",fE),yE.prototype.create=function(e,t){return new fE(e,t)},lE("ad_statistics",new yE),QT("ad_statistics",new yE),m(bE,VT),H("shaka.ui.AirPlayButton",bE),SE.prototype.create=function(e,t){return new bE(e,t)},lE("airplay",new SE),zA("airplay",new SE),m(TE,VT),TE.prototype.gg=function(e,t){if(e={type:"static",text:e,position:"top-right",color:"rgba(255, 255, 255, 0.7)",size:20,alpha:.7,interval:2e3,skip:500,displayDuration:2e3,transitionDuration:.5},"static"===(t=Object.assign({},e,t||e)).type){if(e=AE(this)){e.clearRect(0,0,this.g.width,this.g.height),e.globalAlpha=t.alpha,e.fillStyle=t.color,e.font=t.size+"px Arial";var n=e.measureText(t.text);switch(t.position){case"top-left":n=20;var i=t.size+20;break;case"top-right":n=this.g.width-n.width-20,i=t.size+20;break;case"bottom-left":n=20,i=this.g.height-20;break;case"bottom-right":n=this.g.width-n.width-20,i=this.g.height-20;break;default:n=(this.g.width-n.width)/2,i=(this.g.height+t.size)/2}e.fillText(t.text,n,i)}}else"dynamic"===t.type&&function(e,t){function n(){i.font=t.size+"px Arial";var n=i.measureText(t.text).width,r=t.size;return r=(n=[{left:20,top:r+20},{left:e.g.width-n-20,top:r+20},{left:20,top:e.g.height-20},{left:e.g.width-n-20,top:e.g.height-20},{left:(e.g.width-n)/2,top:(e.g.height+r)/2}])[l],l=(l+1)%n.length,r}var i=e.g.getContext("2d"),r={left:0,top:0},a=0,o="fadeIn",s=Math.round(60*t.displayDuration),u=1/(Math.round(60*t.transitionDuration)/2),l=0;r=n(),e.h=requestAnimationFrame(function l(){if(e.h){switch(i.clearRect(0,0,e.g.width,e.g.height),o){case"fadeIn":(a=Math.min(t.alpha,a+u))>=t.alpha&&(o="display");break;case"display":0>=--s&&(o="fadeOut");break;case"fadeOut":0>=(a=Math.max(0,a-u))&&(o="transition",r=n(),s=Math.round(60*t.displayDuration),o="fadeIn")}0<a&&(i.globalAlpha=a,i.fillStyle=t.color,i.font=t.size+"px Arial",i.fillText(t.text,r.left,r.top)),e.h&&(e.h=requestAnimationFrame(l))}})}(this,t)},TE.prototype.Yf=function(){this.h&&(cancelAnimationFrame(this.h),this.h=null);var e=AE(this);e&&e.clearRect(0,0,this.g.width,this.g.height)},TE.prototype.release=function(){var t=this;this.g&&this.g.parentNode&&this.g.parentNode.removeChild(this.g),this.i?(this.i.disconnect(),this.i=null):e.removeEventListener("resize",function(){return EE(t)}),VT.prototype.release.call(this)},H("shaka.ui.Watermark",TE),TE.prototype.removeWatermark=TE.prototype.Yf,TE.prototype.setTextWatermark=TE.prototype.gg,(i=xE.prototype).destroy=function(e){e=void 0!==e&&e;var t=this;return L(function(n){return 1==n.g?t.g?_(n,t.g.destroy(e),2):n.A(2):4!=n.g?(t.g=null,t.j?_(n,t.j.destroy(),4):n.A(4)):(t.j=null,t.i=null,void w(n))})},i.Bh=function(){return"MOBILE"==Me().Ja()},i.Ch=function(){return"TV"==Me().Ja()},i.getConfiguration=function(){var e=CE(this);return Vl(e,this.h,CE(this),{},""),e},i.configure=function(t,n){2==arguments.length&&"string"==typeof t&&(t=Wl(t,n));var i=Object.assign({},this.h);Vl(i,t,CE(this),{},"");var r=Kl(i,this.h);if(Object.keys(r).length&&(this.h=i,this.g.configure(this.h),this.g.dispatchEvent(new V("uiupdated")),(i=this.h.castSenderUrl)&&this.h.castReceiverAppId&&e.chrome&&!chrome.cast&&!this.Ch())){r=!1;for(var a=l(document.getElementsByTagName("script")),o=a.next();!o.done;o=a.next())if(o.value.src===i){r=!0;break}r||((r=document.createElement("script")).src=i,r.defer=!0,document.head.appendChild(r))}},i.Dk=function(){return this.g},i.lm=function(e){this.g.$h(e)},i.gg=function(e,t){e&&!this.i&&this.l&&this.g&&(this.i=new TE(this.l,this.g)),this.i&&this.i.gg(e,t)},i.Yf=function(){this.i&&this.i.Yf()},H("shaka.ui.Overlay",xE),xE.prototype.removeWatermark=xE.prototype.Yf,xE.prototype.setTextWatermark=xE.prototype.gg,xE.prototype.setEnabled=xE.prototype.lm,xE.prototype.getControls=xE.prototype.Dk,xE.prototype.configure=xE.prototype.configure,xE.prototype.getConfiguration=xE.prototype.getConfiguration,xE.prototype.isSmartTV=xE.prototype.Ch,xE.prototype.isMobile=xE.prototype.Bh,xE.prototype.destroy=xE.prototype.destroy;var LE=0;xE.TrackLabelFormat={LANGUAGE:LE,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var DE=0,RE=1;function NE(e,t){if(!e&&!t)return"";switch(e){case"mul":return t.resolve("MULTIPLE_LANGUAGES");case"und":return t.resolve("UNDETERMINED_LANGUAGE");case"zxx":return t.resolve("NOT_APPLICABLE")}var n=pt(e);return e in kh?kh[e]:n in kh?kh[n]+" ("+e+")":t.resolve("UNRECOGNIZED_LANGUAGE")+" ("+e+")"}function OE(t,n,i){function r(){return UE(a)}VT.call(this,t,n);var a=this;this.m=this.controls.l,function(e,t){e.button=ss(),e.button.classList.add("shaka-overflow-button"),e.icon=os("i"),e.icon.classList.add("material-icons-round"),e.icon.textContent=t,e.button.appendChild(e.icon),(t=os("label")).classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),t.classList.add("shaka-overflow-button-label-inline"),e.nameSpan=os("span"),t.appendChild(e.nameSpan),e.currentSelection=os("span"),e.currentSelection.classList.add("shaka-current-selection-span"),t.appendChild(e.currentSelection),e.button.appendChild(t),e.parent.appendChild(e.button)}(this,i),function(e){e.menu=os("div"),e.menu.classList.add("shaka-no-propagation"),e.menu.classList.add("shaka-show-controls-on-mouse-over"),e.menu.classList.add("shaka-settings-menu"),e.menu.classList.add("shaka-hidden"),e.backButton=ss(),e.backButton.classList.add("shaka-back-to-overflow-button"),e.menu.appendChild(e.backButton),e.eventManager.o(e.backButton,"click",function(){e.controls.Oc()});var t=os("i");t.classList.add("material-icons-round"),t.textContent="close",e.backButton.appendChild(t),e.backSpan=os("span"),e.backButton.appendChild(e.backSpan),e.controls.i.appendChild(e.menu)}(this),function(e){e.parent.classList.contains("shaka-overflow-menu")&&(e.backButton.firstChild.textContent="navigate_before",e.eventManager.o(e.menu,"click",function(){function t(e){return 0==e.classList.contains("shaka-hidden")}YT(e.menu,!1),YT(e.parent,!0),te(e.parent.childNodes,t)&&ne(e.parent.childNodes,t)[0].focus(),$A(e.controls),UE(e)}))}(this),this.eventManager.o(this.button,"click",function(){a.controls.Ba()&&(a.menu.classList.contains("shaka-hidden")?(a.controls.dispatchEvent(new V("submenuopen")),YT(a.menu,!0),KT(a.menu),UE(a)):YT(a.menu,!1))}),this.j=null,e.ResizeObserver?(this.j=new ResizeObserver(r),this.j.observe(this.controls.l)):this.eventManager.o(e,"resize",r)}function UE(t){var n=t.menu.getBoundingClientRect(),i=e.getComputedStyle(t.menu),r=parseFloat(i.paddingTop);i=parseFloat(i.paddingBottom);var a=t.m.getBoundingClientRect();t.menu.style.maxHeight=n.bottom-a.top-r-i+"px"}function BE(e,t){OE.call(this,e,t,"language");var n=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){jE(n)}),this.eventManager.o(this.localization,"locale-changed",function(){jE(n)}),this.eventManager.o(this.player,"loading",function(){FE(n)}),this.eventManager.o(this.player,"loaded",function(){FE(n)}),this.eventManager.o(this.player,"unloading",function(){FE(n)}),this.eventManager.o(this.player,"audiotrackschanged",function(){FE(n)}),jE(this),FE(this)}function FE(e){!function(e,t,n,i,r,a,o,s){function u(e){var t="";return"aac"==e?t="AAC":"ac-3"===e?t="Dolby":"ec-3"===e?t="DD+":"ac-4"===e?t="Dolby AC-4":"opus"===e?t="Opus":"flac"===e&&(t="fLaC"),t?" "+t:t}function h(e){var t="";return 5<=e&&(t=" "+r.resolve("SURROUND")),t}function c(e,t,n,i,r,u){return t=[e,t,u],o&&null!=i&&t.push(i),s&&d(e)&&r&&t.push(r),n&&3==a&&t.push(n),t.join(": ")}function d(e){return f.has(e)&&1<f.get(e).size}for(var p=e.find(function(e){return 1==e.active}),f=new Map,g=l(e),m=g.next();!m.done;m=g.next())(m=m.value).codecs&&(f.has(m.language)||f.set(m.language,new Set),f.get(m.language).add(Mi(m.codecs)));g=WT(t),hs(t),t.appendChild(g),g=new Set,p=p?c(p.language,p.roles.join(", "),p.label,p.channelsCount,p.codecs&&Mi(p.codecs),p.spatialAudio):"";var v=(e=l(e)).next();for(m={};!v.done;m={$b:void 0},v=e.next()){m.$b=v.value,v=m.$b.language;var y=m.$b.roles.join(", "),b=m.$b.label,_=m.$b.channelsCount,w=m.$b.codecs&&Mi(m.$b.codecs),S=m.$b.spatialAudio,T=c(v,y,b,_,w,S);if(!g.has(T)){g.add(T);var A=ss();A.addEventListener("click",function(e){return function(){n(e.$b)}}(m));var E=os("span");A.appendChild(E),E.textContent=NE(v,r);var x="";switch(s&&o&&S&&("ec-3"==w||"ac-4"==w)?x+=" Dolby Atmos":(s&&d(v)&&(x+=u(w)),o&&(x+=h(_))),a){case LE:E.textContent+=x;break;case 1:E.textContent+=x,y?E.textContent=y:(Y("Track #"+JSON.stringify(m.$b)+" does not have a role, but the UI is configured to only show role."),E.textContent="?");break;case 2:E.textContent+=x,y&&(E.textContent+=": "+y);break;case 3:b?E.textContent=b:(Y("Track #"+JSON.stringify(m.$b)+" does not have a label, but the UI is configured to only show labels."),E.textContent="?")}T==p&&(A.appendChild(XT()),E.classList.add("shaka-chosen-item"),A.ariaSelected="true",i.textContent=E.textContent),t.appendChild(A)}}}(e.player.getAudioTracks()||[],e.menu,function(t){e.player.Bj(t),e.player.configure("preferredAudioLanguage",t.language),t.label&&e.player.configure("preferredAudioLabel",t.label),t.channelsCount&&e.player.configure("preferredAudioChannelCount",t.channelsCount),e.player.configure("preferSpatialAudio",t.spatialAudio)},e.currentSelection,e.localization,e.controls.g.trackLabelFormat,e.controls.g.showAudioChannelCountVariants,e.controls.g.showAudioCodec),KT(e.menu),e.controls.dispatchEvent(new V("languageselectionupdated")),e.button.setAttribute("shaka-status",e.currentSelection.innerText),YT(e.button,2<e.menu.getElementsByTagName("button").length)}function jE(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("LANGUAGE"),e.nameSpan.textContent=e.localization.resolve("LANGUAGE"),e.backSpan.textContent=e.localization.resolve("LANGUAGE")}function GE(){}function HE(e,t){VT.call(this,e,t);var n=this;this.h=this.controls.D,this.g=ss(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=os("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.l=os("span"),e.appendChild(this.l),this.j=os("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),zE(this),VE(this),this.eventManager.o(this.localization,"locale-updated",function(){zE(n)}),this.eventManager.o(this.localization,"locale-changed",function(){zE(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&function(e){var t;L(function(n){return 1==n.g?e.h.Pa()?(e.h.Qj(),n.A(0)):(S(n,3),e.g.disabled=!0,_(n,e.h.cast(),5)):3!=n.g?(e.g.disabled=!1,A(n,0)):(t=E(n),e.g.disabled=!1,8004!=t.code&&e.controls.dispatchEvent(new V("error",(new Map).set("detail",t))),void w(n))})}(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){VE(n)})}function VE(e){var t=e.h.Ig()&&e.controls.qa,n=e.h.Pa();YT(e.g,t),e.i.textContent=n?"cast_connected":"cast",t&&(e.g.ariaPressed=n?"true":"false"),WE(e)}function WE(e){e.j.textContent=e.h.Pa()?e.h.Wf():e.localization.resolve("OFF")}function zE(e){e.g.ariaLabel=e.localization.resolve("CAST"),e.l.textContent=e.localization.resolve("CAST"),WE(e)}function KE(){}function XE(e,t){OE.call(this,e,t,"bookmarks");var n=this;this.button.classList.add("shaka-chapter-button"),this.menu.classList.add("shaka-chapters"),this.button.classList.add("shaka-tooltip-status"),this.g=[],this.h="und",this.eventManager.o(this.localization,"locale-updated",function(){YE(n),ZE(n)}),this.eventManager.o(this.localization,"locale-changed",function(){YE(n),ZE(n)}),this.eventManager.o(this.player,"unloading",function(){qE(n),n.h="und",n.g=[]}),this.eventManager.o(this.player,"trackschanged",function(){ZE(n)}),YE(this),ZE(this)}function YE(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("CHAPTERS"),e.nameSpan.textContent=e.localization.resolve("CHAPTERS"),e.backSpan.textContent=e.localization.resolve("CHAPTERS")}function qE(e){var t=WT(e.menu);hs(e.menu),e.menu.appendChild(t),YT(e.button,!1)}function ZE(e){var t,n,i,r,a,o,s,u,h,c,d,p,f;L(function(g){switch(g.g){case 1:t=function(e,t){return!e&&!t||e.id===t.id&&e.title===t.title&&e.startTime===t.startTime&&e.endTime===t.endTime},n="und",i=[],r=e.localization.g,a=l(Array.from(r)),o=a.next();case 2:if(o.done){g.A(4);break}if(n=o.value,!e.player){g.A(5);break}return _(g,e.player.kh(n),6);case 6:i=g.h||[];case 5:if(i.length){g.A(4);break}o=a.next(),g.A(2);break;case 4:if(i.length){g.A(7);break}if(n="und",!e.player){g.A(7);break}return _(g,e.player.kh(n),9);case 9:i=g.h||[];case 7:if(s=n!==e.h,u=e.g.length!==i.length||!e.g.some(function(e,n){return n=i.at(n),t(e,n)||i.some(function(n){return t(e,n)})}),e.h=n,e.g=i,i.length){if(s||u){for(h=l(e.g),c=h.next(),d={};!c.done;d={Kg:void 0},c=h.next())d.Kg=c.value,p=ss(),(f=os("span")).classList.add("shaka-chapter"),f.textContent=d.Kg.title,p.appendChild(f),e.eventManager.o(p,"click",function(t){return function(){e.controls.Ba()&&(e.video.currentTime=t.Kg.startTime)}}(d)),e.menu.appendChild(p);YT(e.button,!0),KT(e.menu)}}else qE(e);w(g)}})}function JE(){}function QE(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),$E(this),this.h=this.controls.g.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){$E(n)}),this.eventManager.o(this.localization,"locale-changed",function(){$E(n)}),this.eventManager.o(this.g,"click",function(){if(n.controls.Ba()&&n.video.duration){var e=n.h.indexOf(n.player.Xa())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.video.paused&&n.video.play(),n.player.Uc(e),n.g.setAttribute("shaka-status",e+"x")}}),this.eventManager.o(this.player,"ratechange",function(){n.g.setAttribute("shaka-status",n.player.Xa()+"x")})}function $E(e){e.g.ariaLabel=e.localization.resolve("FAST_FORWARD")}function ex(){}function tx(e,t){VT.call(this,e,t);var n=this;this.h=this.controls.m,this.g=ss(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),nx(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),ix(this),this.eventManager.o(this.localization,"locale-updated",function(){ix(n)}),this.eventManager.o(this.localization,"locale-changed",function(){ix(n)}),this.eventManager.o(this.g,"click",function(){return L(function(e){return n.controls.Ba()?_(e,n.controls.lg(),0):e.return()})}),this.eventManager.o(document,"fullscreenchange",function(){n.g.textContent=n.controls.tc()?"fullscreen_exit":"fullscreen",ix(n)}),this.eventManager.o(this.h,"loadedmetadata",function(){nx(n)}),this.eventManager.o(this.h,"loadeddata",function(){nx(n)}),this.eventManager.o(this.adManager,"ad-started",function(){nx(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){nx(n)})}function nx(e){e.controls.oe()?e.g.classList.remove("shaka-hidden"):e.g.classList.add("shaka-hidden")}function ix(e){var t=e.controls.tc()?"EXIT_FULL_SCREEN":"FULL_SCREEN";e.g.ariaLabel=e.localization.resolve(t)}function rx(){}function ax(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=os("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.l=os("span"),this.l.textContent=this.localization.resolve("LOOP"),e.appendChild(this.l),this.j=os("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),ox(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){ox(n)}),this.eventManager.o(this.localization,"locale-changed",function(){ox(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&(n.video.loop=!n.video.loop,n.h.Ka(),n.h.ya(1))}),this.m=this.video.loop,this.h=new zi(function(){n.m!=n.video.loop&&(ox(n),n.m=n.video.loop)}),this.h.ya(1),this.eventManager.o(this.player,"unloading",function(){sx(n)}),this.eventManager.o(this.player,"loaded",function(){sx(n)}),this.eventManager.o(this.player,"manifestupdated",function(){sx(n)}),this.eventManager.o(this.video,"durationchange",function(){sx(n)})}function ox(e){e.l.textContent=e.localization.resolve("LOOP"),e.j.textContent=e.localization.resolve(e.video.loop?"ON":"OFF"),e.i.textContent=e.video.loop?"repeat_on":"repeat",e.g.ariaLabel=e.localization.resolve(e.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}function sx(e){YT(e.g,!e.player.T())}function ux(){}function lx(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("shaka-tooltip"),this.h=os("i"),this.h.classList.add("material-icons-round"),this.h.textContent="volume_up",this.g.appendChild(this.h),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=os("span"),this.i.textContent=this.localization.resolve("MUTE"),e.appendChild(this.i),this.j=os("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),this.parent.appendChild(this.g),hx(this),cx(this),this.eventManager.o(this.localization,"locale-updated",function(){hx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){hx(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&(n.ad&&n.ad.isLinear()?n.ad.setMuted(!n.ad.isMuted()):n.video.muted||0!=n.video.volume?n.video.muted=!n.video.muted:n.video.volume=1)}),this.eventManager.o(this.video,"volumechange",function(){hx(n),cx(n)}),this.eventManager.o(this.player,"loading",function(){hx(n),cx(n)}),this.eventManager.o(this.player,"loaded",function(){dx(n)}),this.eventManager.o(this.player,"unloading",function(){dx(n)}),this.eventManager.o(this.player,"trackschanged",function(){dx(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){hx(n),cx(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){hx(n),cx(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){hx(n),cx(n)}),this.eventManager.o(this.adManager,"ad-started",function(){dx(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){n.ad=null,hx(n),cx(n),dx(n)}),dx(this)}function hx(e){var t=e.ad?e.ad.isMuted()?"UNMUTE":"MUTE":e.video.muted||0==e.video.volume?"UNMUTE":"MUTE";e.g.ariaLabel=e.localization.resolve(t),e.i.textContent=e.localization.resolve(t)}function cx(e){var t=e.ad?e.ad.isMuted()?"volume_off":"volume_up":e.video.muted||0==e.video.volume?"volume_off":"volume_up";e.h.textContent=t}function dx(e){var t=!0;e.ad&&e.ad.isLinear()?t=!0:e.player.Dh()&&(t=!1),YT(e.g,t)}function px(){}function fx(t,n){VT.call(this,t,n);var i=this;this.l=this.controls.m,this.g=ss(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=os("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),(t=os("label")).classList.add("shaka-overflow-button-label"),t.classList.add("shaka-overflow-menu-only"),t.classList.add("shaka-simple-overflow-button-label-inline"),this.j=os("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),t.appendChild(this.j),this.h=os("span"),this.h.classList.add("shaka-current-selection-span"),t.appendChild(this.h),this.g.appendChild(t),vx(this),this.parent.appendChild(this.g),this.controls.Bf()||YT(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){vx(i)}),this.eventManager.o(this.localization,"locale-changed",function(){vx(i)}),this.eventManager.o(this.g,"click",function(){i.controls.Ba()&&i.controls.Sc()}),this.eventManager.o(this.l,"enterpictureinpicture",function(){gx(i)}),this.eventManager.o(this.l,"leavepictureinpicture",function(){mx(i)}),this.eventManager.o(this.controls,"caststatuschanged",function(){yx(i)}),this.eventManager.o(this.player,"trackschanged",function(){yx(i)}),"documentPictureInPicture"in e&&this.eventManager.o(e.documentPictureInPicture,"enter",function(e){gx(i),i.eventManager.ra(e.window,"pagehide",function(){mx(i)})})}function gx(e){e.i.textContent="branding_watermark",e.g.ariaLabel=e.localization.resolve("EXIT_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("ON")}function mx(e){e.i.textContent="picture_in_picture_alt",e.g.ariaLabel=e.localization.resolve("ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve("OFF")}function vx(e){e.j.textContent=e.localization.resolve("PICTURE_IN_PICTURE");var t=e.controls.Gd();e.g.ariaLabel=e.localization.resolve(t?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),e.h.textContent=e.localization.resolve(t?"ON":"OFF")}function yx(e){L(function(t){return e.controls.Bf()?e.player&&e.player.Fd()?(YT(e.g,!1),e.controls.Gd()?_(t,e.controls.Sc(),0):t.A(0)):(YT(e.g,!0),t.A(0)):(YT(e.g,!1),e.controls.Gd()?_(t,e.controls.Sc(),0):t.A(0))})}function bx(){}function _x(e,t){OE.call(this,e,t,"slow_motion_video");var n=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),Array.from(e.classList).includes("shaka-overflow-menu")||(this.g=os("span"),this.g.classList.add("shaka-overflow-playback-rate-mark"),this.button.appendChild(this.g)),this.eventManager.o(this.localization,"locale-updated",function(){wx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){wx(n)}),this.eventManager.o(this.player,"loaded",function(){Sx(n)}),this.eventManager.o(this.player,"ratechange",function(){Sx(n)}),wx(this),function(e){for(var t=l(e.controls.g.playbackRates),n=t.next(),i={};!n.done;i={Vf:void 0},n=t.next()){i.Vf=n.value,n=ss();var r=os("span");r.textContent=i.Vf+"x",n.appendChild(r),e.eventManager.o(n,"click",function(t){return function(){t.Vf==e.video.defaultPlaybackRate?e.player.xd():e.player.Uc(t.Vf,!1)}}(i)),e.menu.appendChild(n)}KT(e.menu)}(this),Sx(this)}function wx(e){e.backButton.ariaLabel=e.localization.resolve("BACK"),e.button.ariaLabel=e.localization.resolve("PLAYBACK_RATE"),e.nameSpan.textContent=e.localization.resolve("PLAYBACK_RATE"),e.backSpan.textContent=e.localization.resolve("PLAYBACK_RATE")}function Sx(e){var t=e.player.Xa(),n=zT(e.menu,"material-icons-round shaka-chosen-item");if(n){var i=n.parentElement;i.removeAttribute("aria-selected"),i.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),i.removeChild(n)}(n=Array.from(e.menu.querySelectorAll("span")).find(function(e){return e.textContent==t+"x"}))&&((i=n.parentElement).appendChild(XT()),i.ariaSelected="true",n.classList.add("shaka-chosen-item")),e.currentSelection.textContent=t+"x",e.button.setAttribute("shaka-status",t+"x"),e.g&&(e.g.textContent=t+"x")}function Tx(){}function Ax(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("shaka-current-time"),Ex(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&n.player.T()&&(n.video.currentTime=n.player.xa().end)}),this.eventManager.o(this.player,"loading",function(){YT(n.g,!0)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var e=n.controls.R,t=n.controls.lh(),i=n.player.xa(),r=i.end-i.start;isFinite(r)?n.player.T()?(r=3600<=r,1<=(t=Math.max(0,Math.floor(i.end-t)))||e?(Ex(n,"- "+qT(t,r)),n.g.disabled=!1):(Ex(n,n.localization.resolve("LIVE")),n.g.disabled=!0)):(e=3600<=r,t=qT(Math.max(0,t-i.start),e),r&&(t+=" / "+qT(r,e)),Ex(n,t),n.g.disabled=!0):(Ex(n,n.localization.resolve("LIVE")),n.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){n.player.T()&&(n.g.ariaLabel=n.localization.resolve("SKIP_TO_LIVE"))}),this.eventManager.o(this.adManager,"ad-started",function(){YT(n.g,!n.ad.isLinear())}),this.eventManager.o(this.adManager,"ad-stopped",function(){YT(n.g,!0)})}function Ex(e,t){t!=e.g.textContent&&(e.g.textContent=t)}function xx(){}function Cx(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("shaka-recenter-vr-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=os("i"),this.h.classList.add("material-icons-round"),this.h.textContent="control_camera",this.g.appendChild(this.h),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=os("span"),e.appendChild(this.j),this.i=os("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),kx(this),this.eventManager.o(this.localization,"locale-updated",function(){kx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){kx(n)});var i=this.controls.C;this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&(i.g?NA(i.g):Y("Not playing VR content"))}),this.eventManager.o(i,"vrstatuschanged",function(){YT(n.g,n.controls.Ub())}),YT(this.g,this.controls.Ub())}function kx(e){e.g.ariaLabel=e.localization.resolve("RECENTER_VR"),e.j.textContent=e.localization.resolve("RECENTER_VR")}function Ix(){}function Mx(e,t){VT.call(this,e,t);var n=this;this.j=Me().ig(),this.g=ss(),this.g.classList.add("shaka-remote-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=os("i"),this.i.classList.add("material-icons-round"),this.i.textContent=this.j?"airplay":"cast",this.g.appendChild(this.i),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.m=os("span"),e.appendChild(this.m),this.l=os("span"),this.l.classList.add("shaka-current-selection-span"),e.appendChild(this.l),this.g.appendChild(e),this.parent.appendChild(this.g),this.h=-1,Lx(this),YT(this.g,!1),this.video.remote?(this.eventManager.o(this.localization,"locale-updated",function(){Lx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Lx(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Px(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&n.video.remote.prompt().catch(function(){})}),this.eventManager.o(this.video.remote,"connect",function(){Px(n),Dx(n)}),this.eventManager.o(this.video.remote,"connecting",function(){Px(n),Dx(n)}),this.eventManager.o(this.video.remote,"disconnect",function(){Px(n),Dx(n)}),this.eventManager.o(this.player,"loaded",function(){Px(n)}),Px(this,!0),Dx(this)):this.g.classList.add("shaka-hidden")}function Px(e,t){var n,i;t=void 0!==t&&t,L(function(r){switch(r.g){case 1:if(e.controls.D.Ig()&&e.controls.qa||!e.video.remote){YT(e.g,!1),-1!=e.h&&(e.video.remote.cancelWatchAvailability(e.h),e.h=-1),r.A(0);break}if("disconnected"==e.video.remote.state||t){if(n=function(t){if(e.player){var n=e.video.disableRemotePlayback,i=!0;Me().ig()&&e.player.m==Ed&&"HLS"!=e.player.oh()&&(i=!1),YT(e.g,i&&t&&!n)}else YT(e.g,!1)},S(r,7),-1==e.h){r.A(9);break}return _(r,e.video.remote.cancelWatchAvailability(e.h),10)}if(YT(e.g,!0),-1==e.h){r.A(0);break}return _(r,e.video.remote.cancelWatchAvailability(e.h),6);case 6:e.h=-1,r.A(0);break;case 10:e.h=-1;case 9:A(r,8);break;case 7:E(r);case 8:return S(r,11),_(r,e.video.remote.watchAvailability(n),13);case 13:i=r.h,e.h=i,A(r,0);break;case 11:E(r),n(!0),w(r)}})}function Lx(e){var t=e.j?e.localization.resolve("AIRPLAY"):e.localization.resolve("CAST");e.g.ariaLabel=t,e.m.textContent=t}function Dx(e){e.j||(e.i.textContent="disconnected"==e.video.remote.state?"cast":"cast_connected")}function Rx(){}function Nx(e,t){OE.call(this,e,t,"tune");var n=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.h=os("span"),this.h.classList.add("shaka-current-auto-quality"),this.h.style.display="none",this.i=os("sup"),this.i.classList.add("shaka-current-quality-mark"),this.i.style.display="none",Array.from(e.classList).includes("shaka-overflow-menu")?this.parent.parentElement&&(this.g=function(e){return(e=e.getElementsByClassName("shaka-overflow-quality-mark")).length?e[0]:null}(this.parent.parentElement)):(this.g=os("span"),this.g.classList.add("shaka-overflow-playback-rate-mark"),this.button.appendChild(this.g)),e=os("span"),this.button.childNodes[1].appendChild(e),e.appendChild(this.currentSelection),e.appendChild(this.h),e.appendChild(this.i),this.eventManager.o(this.localization,"locale-updated",function(){Gx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Gx(n)}),this.eventManager.o(this.player,"loading",function(){Bx(n),Ox(n)}),this.eventManager.o(this.player,"loaded",function(){Bx(n),Ox(n)}),this.eventManager.o(this.player,"unloading",function(){Bx(n),Ox(n)}),this.eventManager.o(this.player,"variantchanged",function(){Bx(n),Ox(n)}),this.eventManager.o(this.player,"trackschanged",function(){Bx(n),Ox(n)}),this.eventManager.o(this.player,"abrstatuschanged",function(){Bx(n),Ox(n)}),this.eventManager.o(this.player,"adaptation",function(){Bx(n),Ox(n)}),Bx(this)}function Ox(e){var t=e.player.getConfiguration().abr.enabled;if(e.player.Fd()){e.i.textContent="",e.i.style.display="none",e.g&&(e.g.textContent="",e.g.style.display="none");var n=e.player.qb()||[],i=n.find(function(e){return e.active});i&&(t?(e.h.textContent=i.bandwidth?jx(e,i,n):"Unknown",e.h.style.display=""):e.h.style.display="none")}else(i=(n=e.player.getVideoTracks()||[]).find(function(e){return e.active}))?(t?(e.h.textContent=i.height&&i.width?Fx(e,i,n):i.bandwidth?Math.round(i.bandwidth/1e3)+" kbits/s":"Unknown",e.h.style.display=""):e.h.style.display="none",t=Ux(e,i.width,i.height),e.i.textContent=t,e.i.style.display=""!==t?"":"none",e.g&&(e.g.textContent=t,e.g.style.display=""!==t?"":"none")):e.g&&(t=e.player.getStats(),t=Ux(e,t.width,t.height),e.g.textContent=t,e.g.style.display=""!==t?"":"none")}function Ux(e,t,n){return t&&n?(n>t&&(t=(n=l([n,t])).next().value,n=n.next().value),t/n>16/9&&(n=Math.round(9*t/16)),e=e.controls.g.qualityMarks,8640<=n?n+"p":4320<=n?e[4320]:2160<=n?e[2160]:1440<=n?e[1440]:1080<=n?e[1080]:720<=n?e[720]:""):""}function Bx(e){var t=WT(e.menu);hs(e.menu),e.menu.appendChild(t),t=0,t=e.player.Fd()?function(e){var t=[];e.player.m==xd||e.player.Ca()||(t=e.player.qb()||[]);var n=t.find(function(e){return e.active});n&&(t=t.filter(function(t){if(t.language!=n.language||e.controls.g.showAudioChannelCountVariants&&t.channelsCount&&n.channelsCount&&t.channelsCount!=n.channelsCount)return!1;var i=e.controls.g.trackLabelFormat;return!((1==i||2==i)&&JSON.stringify(t.audioRoles)!=JSON.stringify(n.audioRoles)||3==i&&t.label!=n.label||!t.bandwidth)})),t=t.filter(function(e,n){return t.findIndex(function(t){return t.bandwidth==e.bandwidth})==n}),t.sort(function(e,t){return t.bandwidth-e.bandwidth});for(var i=e.player.getConfiguration().abr.enabled,r=l(t),a=r.next(),o={};!a.done;o={Fe:void 0},a=r.next()){o.Fe=a.value,(a=ss()).classList.add("explicit-resolution"),e.eventManager.o(a,"click",function(t){return function(){var n=t.Fe;e.player.configure({abr:{enabled:!1}}),e.player.Ae(n,e.controls.g.clearBufferOnQualityChange)}}(o));var s=os("span");s.textContent=o.Fe.bandwidth?jx(e,o.Fe,t):"Unknown",a.appendChild(s),i||o.Fe!=n||(a.ariaSelected="true",a.appendChild(XT()),s.classList.add("shaka-chosen-item"),e.currentSelection.textContent=s.textContent),e.menu.appendChild(a)}return t.length}(e):function(e){var t=e.player.getVideoTracks()||[],n=t.find(function(e){return e.active});(t=t.filter(function(n,i){return t.findIndex(function(t){var i=t.height==n.height&&t.bandwidth==n.bandwidth&&t.frameRate==n.frameRate&&t.hdr==n.hdr&&t.videoLayout==n.videoLayout;return i&&e.controls.g.showVideoCodec&&t.codecs&&n.codecs&&(i=Mi(t.codecs)==Mi(n.codecs)),i})==i})).sort(function(e,t){return t.height==e.height||null==e.height||null==t.height?t.bandwidth-e.bandwidth:t.height-e.height});for(var i=e.player.getConfiguration().abr.enabled,r=l(t),a=r.next(),o={};!a.done;o={lc:void 0},a=r.next()){o.lc=a.value,(a=ss()).classList.add("explicit-resolution"),e.eventManager.o(a,"click",function(t){return function(){var n=t.lc;e.player.configure({abr:{enabled:!1}}),e.player.Cj(n,e.controls.g.clearBufferOnQualityChange)}}(o));var s=os("span");s.textContent=o.lc.height&&o.lc.width?Fx(e,o.lc,t):o.lc.bandwidth?Math.round(o.lc.bandwidth/1e3)+" kbits/s":"Unknown",a.appendChild(s);var u=Ux(e,o.lc.width,o.lc.height);if(""!==u){var h=os("sup");h.classList.add("shaka-quality-mark"),h.textContent=u,a.appendChild(h)}i||o.lc!=n||(a.ariaSelected="true",a.appendChild(XT()),s.classList.add("shaka-chosen-item"),e.currentSelection.textContent=s.textContent),e.menu.appendChild(a)}return t.length}(e);var n=ss();n.classList.add("shaka-enable-abr-button"),e.eventManager.o(n,"click",function(){e.player.configure({abr:{enabled:!0}}),Bx(e)}),e.l=os("span"),e.l.textContent=e.localization.resolve("AUTO_QUALITY"),n.appendChild(e.l),e.player.getConfiguration().abr.enabled&&(n.ariaSelected="true",n.appendChild(XT()),e.l.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),e.menu.appendChild(n),KT(e.menu),e.controls.dispatchEvent(new V("resolutionselectionupdated")),Gx(e),YT(e.button,0<t)}function Fx(e,t,n){function i(e,t){return e!=t&&e.height==t.height&&e.hdr==t.hdr&&Math.round(e.frameRate||0)==Math.round(t.frameRate||0)}var r=t.height||0,a=t.width||0;r>a&&(a=(r=l([r,a])).next().value,r=r.next().value);var o=r;a/r>16/9&&(o=Math.round(9*a/16)),a=o+"p",r=new Set;for(var s=(o=l(n)).next();!s.done;s=o.next())(s=s.value).frameRate&&r.add(Math.round(s.frameRate));if(1<r.size&&(r=t.frameRate)&&(50<=r||20>=r)&&(a+=Math.round(t.frameRate)),"PQ"!=t.hdr&&"HLG"!=t.hdr||(a+=" HDR"),(t.videoLayout||"").includes("CH-STEREO")&&(a+=" 3D"),n.some(function(e){return i(t,e)})&&(n.some(function(e){return i(t,e)&&e.bandwidth==t.bandwidth})||(a+=" ("+Math.round(t.bandwidth/1e3)+" kbits/s)"),e.controls.g.showVideoCodec)){var u=function(e){var t="";return e&&(t=(e=Mi(e)).startsWith("dovi-")?"Dolby Vision":e.toUpperCase()),t?" "+t:t};n.some(function(e){return i(t,e)&&u(e.codecs)!=u(t.codecs)})&&(a+=u(t.codecs))}return a}function jx(e,t,n){var i=Math.round(t.bandwidth/1e3)+" kbits/s";if(e.controls.g.showAudioCodec){var r=function(e){var t="";return e&&(t=Mi(e).toUpperCase()),t?" "+t:t};n.some(function(e){return r(e.codecs)!=r(t.codecs)})&&(i+=r(t.codecs))}return i}function Gx(e){var t=e.player.Fd()?"QUALITY":"RESOLUTION";e.button.ariaLabel=e.localization.resolve(t),e.backButton.ariaLabel=e.localization.resolve(t),e.backSpan.textContent=e.localization.resolve(t),e.nameSpan.textContent=e.localization.resolve(t),e.l.textContent=e.localization.resolve("AUTO_QUALITY"),e.player.getConfiguration().abr.enabled&&(e.currentSelection.textContent=e.localization.resolve("AUTO_QUALITY"))}function Hx(){}function Vx(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),Wx(this),this.h=this.controls.g.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){Wx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Wx(n)}),this.eventManager.o(this.g,"click",function(){if(n.controls.Ba()&&n.video.duration){var e=n.h.indexOf(n.player.Xa())+1;e=e!=n.h.length?n.h[e]:n.h[0],n.video.paused&&n.video.play(),n.player.Uc(e),n.g.setAttribute("shaka-status",e+"x")}}),this.eventManager.o(this.player,"ratechange",function(){n.g.setAttribute("shaka-status",n.player.Xa()+"x")})}function Wx(e){e.g.ariaLabel=e.localization.resolve("REWIND")}function zx(){}function Kx(e,t){VT.call(this,e,t);var n=this;this.l=this.controls.D,this.g=ss(),this.g.classList.add("shaka-save.video-frame-button"),this.g.classList.add("shaka-tooltip"),this.h=os("i"),this.h.classList.add("material-icons-round"),this.h.textContent="download",this.g.appendChild(this.h),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.i=os("span"),this.i.textContent=this.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.appendChild(this.i),this.j=os("span"),this.j.classList.add("shaka-current-selection-span"),e.appendChild(this.j),this.g.appendChild(e),Yx(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){Yx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Yx(n)}),this.eventManager.o(this.g,"click",function(){var e=document.createElement("canvas"),t=e.getContext("2d"),i=n.controls.m;e.width=i.videoWidth,e.height=i.videoHeight,t.drawImage(i,0,0,e.width,e.height),e=e.toDataURL("image/png"),(t=document.createElement("a")).href=e,t.download="videoframe_"+i.currentTime.toFixed(3)+".png",t.click()}),this.eventManager.o(this.controls.C,"vrstatuschanged",function(){Xx(n)}),this.eventManager.o(this.adManager,"ad-started",function(){Xx(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){Xx(n)}),this.eventManager.o(this.player,"unloading",function(){Xx(n)}),this.eventManager.o(this.player,"loaded",function(){Xx(n)}),this.eventManager.o(this.video,"play",function(){Xx(n)}),this.eventManager.o(this.video,"pause",function(){Xx(n)}),this.eventManager.o(this.video,"seeking",function(){Xx(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){Xx(n)}),Xx(this)}function Xx(e){var t=!0;e.controls.Ub()&&(t=!1),t&&e.l.Pa()&&(t=!1),t&&(e.player.drmInfo()||e.player.Fd())&&(t=!1),t&&e.ad&&(t=!1),t&&e.video.remote&&"disconnected"!=e.video.remote.state&&(t=!1),YT(e.g,t)}function Yx(e){e.g.ariaLabel=e.localization.resolve("DOWNLOAD_VIDEO_FRAME"),e.i.textContent=e.localization.resolve("DOWNLOAD_VIDEO_FRAME")}function qx(){}function Zx(e,t){VT.call(this,e,t);var n=this;(this.h=this.player.qh())&&(this.g=ss(),this.g.classList.add("shaka-skip-next-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="skip_next",this.parent.appendChild(this.g),Jx(this),Qx(this),this.eventManager.o(this.localization,"locale-updated",function(){Jx(n)}),this.eventManager.o(this.localization,"locale-changed",function(){Jx(n)}),this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&n.h.playItem(n.h.getCurrentItemIndex()+1)}),this.eventManager.o(this.h,"currentitemchanged",function(){Qx(n)}),this.eventManager.o(this.h,"itemsinserted",function(){Qx(n)}),this.eventManager.o(this.h,"itemsremoved",function(){Qx(n)}),this.eventManager.o(this.player,"loading",function(){Qx(n)}))}function Jx(e){e.g.ariaLabel=e.localization.resolve("SKIP_NEXT")}function Qx(e){var t=e.h.getItems().length;t=1<t&&e.h.getCurrentItemIndex()+1<t,YT(e.g,t)}function $x(){}function eC(e,t){eA.call(this,e,t),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip")}function tC(){}function nC(e,t){VT.call(this,e,t),(e=os("div")).classList.add("shaka-spacer"),e.ariaHidden="true",this.parent.appendChild(e)}function iC(){}function rC(e,t){function n(e){return 2e9<(e=parseInt(h.g[e],10))?(e/1e9).toFixed(2)+"GB":1e6<e?(e/1e6).toFixed(2)+"MB":1e3<e?(e/1e3).toFixed(2)+"KB":e+"B"}function i(e){return h.g[e]+" (gaps)"}function r(e){return qT(h.g[e],!1)+" (m)"}function a(e){return Math.round(h.g[e]/1e3)+" (kbits/s)"}function o(e){return h.g[e].toFixed(2)+" (s)"}function s(e){return h.g[e]+" (frames)"}function u(e){return h.g[e]+" (px)"}VT.call(this,e,t);var h=this;this.i=ss(),this.i.classList.add("shaka-statistics-button"),this.j=os("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-simple-overflow-button-label-inline"),this.u=os("span"),e.appendChild(this.u),this.m=os("span"),this.m.classList.add("shaka-current-selection-span"),e.appendChild(this.m),this.i.appendChild(e),this.parent.appendChild(this.i),this.h=os("div"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-statistics-container"),this.h.classList.add("shaka-hidden"),this.controls.i.appendChild(this.h),this.C=[],this.D=["stateHistory","switchHistory"],this.g=this.player.getStats(),this.s=new Map,this.B=(new Map).set("width",u).set("height",u).set("currentCodecs",function(e){return h.g[e]}).set("completionPercent",function(e){return h.g[e]+" (%)"}).set("bufferingTime",o).set("drmTimeSeconds",o).set("licenseTime",o).set("liveLatency",o).set("loadLatency",o).set("manifestTimeSeconds",o).set("estimatedBandwidth",a).set("streamBandwidth",a).set("maxSegmentDuration",o).set("pauseTime",r).set("playTime",r).set("corruptedFrames",s).set("decodedFrames",s).set("droppedFrames",s).set("stallsDetected",function(e){return h.g[e]+" (stalls)"}).set("gapsJumped",i).set("manifestSizeBytes",n).set("bytesDownloaded",n).set("nonFatalErrorCount",function(e){return h.g[e]+" (errors)"}).set("manifestPeriodCount",function(e){return h.g[e]+" (periods)"}).set("manifestGapCount",i),this.l=new zi(function(){h.g=h.player.getStats();for(var e=l(h.C),t=e.next();!t.done;t=e.next()){var n=t.value;(t=h.s.get(n)).textContent=h.B.get(n)(n),t&&t.parentElement&&(n=h.g[n],YT(t.parentElement,"string"==typeof n?""!=n:!isNaN(n)))}}),oC(this),function(e){var t=os("div");t.classList.add("shaka-no-propagation"),t.classList.add("shaka-statistics-close");var n=os("i");for(n.classList.add("material-icons"),n.classList.add("notranslate"),n.classList.add("material-icons-round"),n.textContent="close",t.appendChild(n),e.h.appendChild(t),e.eventManager.o(n,"click",function(){aC(e)}),n=(t=l(e.controls.g.statisticsList)).next();!n.done;n=t.next())if((n=n.value)in e.g&&!e.D.includes(n)){var i=sC(e,n);e.h.appendChild(i),e.C.push(n)}else Y("Unrecognized statistic element:",n)}(this),this.eventManager.o(this.localization,"locale-updated",function(){oC(h)}),this.eventManager.o(this.localization,"locale-changed",function(){oC(h)}),this.eventManager.o(this.i,"click",function(){aC(h),oC(h)})}function aC(e){e.h.classList.contains("shaka-hidden")?(e.j.textContent="insert_chart",e.l.ya(.1),YT(e.h,!0)):(e.j.textContent="insert_chart_outlined",e.l.stop(),YT(e.h,!1))}function oC(e){e.u.textContent=e.localization.resolve("STATISTICS"),e.i.ariaLabel=e.localization.resolve("STATISTICS"),e.m.textContent=e.localization.resolve(e.h.classList.contains("shaka-hidden")?"OFF":"ON")}function sC(e,t){var n=os("div"),i=os("label");return i.textContent=t+":",n.appendChild(i),(i=os("span")).textContent=e.B.get(t)(t),n.appendChild(i),e.s.set(t,i),n}function uC(){}function lC(e,t){OE.call(this,e,t,"closed_caption");var n=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.jd()?this.button.ariaPressed="true":this.button.ariaPressed="false",function(e){var t=ss();t.ariaSelected="true",e.menu.appendChild(t),t.appendChild(XT()),e.g=os("span"),t.appendChild(e.g)}(this),this.eventManager.o(this.localization,"locale-updated",function(){dC(n),cC(n)}),this.eventManager.o(this.localization,"locale-changed",function(){dC(n),cC(n)}),this.eventManager.o(this.player,"loading",function(){hC(n),cC(n)}),this.eventManager.o(this.player,"loaded",function(){hC(n),cC(n)}),this.eventManager.o(this.player,"unloading",function(){hC(n),cC(n)}),this.eventManager.o(this.player,"texttrackvisibility",function(){hC(n),cC(n)}),this.eventManager.o(this.player,"textchanged",function(){cC(n)}),this.eventManager.o(this.player,"trackschanged",function(){cC(n)}),hC(this),dC(this),cC(this)}function hC(e){e.player.jd()?(e.icon.textContent="closed_caption",e.button.ariaPressed="true"):(e.icon.textContent="closed_caption_disabled",e.button.ariaPressed="false"),e.controls.dispatchEvent(new V("captionselectionupdated"))}function cC(e){var t=e.player.sc()||[];!function(e,t,n,i,r,a,o){function s(e,t,n){return e=[e,t],n&&3==o&&e.push(n),e.join(": ")}var u=e.find(function(e){return 1==e.active}),h=WT(t);hs(t),t.appendChild(h),h=new Set,u=u?s(u.language,u.roles.join(", "),u.label):"";for(var c=(e=l(e)).next(),d={};!c.done;d={Tc:void 0},c=e.next()){d.Tc=c.value,c=d.Tc.language;var p=d.Tc.forced,f=a.resolve("SUBTITLE_FORCED"),g=d.Tc.roles.join(", "),m=d.Tc.label,v=s(c,g,m);if(!h.has(v)){h.add(v);var y=ss();y.addEventListener("click",function(e){return function(){n(e.Tc)}}(d));var b=os("span");switch(y.appendChild(b),b.textContent=NE(c,a),o){case LE:p&&(b.textContent+=" ("+f+")");break;case 1:g?b.textContent=g:(Y("Track #"+d.Tc.id+" does not have a role, but the UI is configured to only show role."),b.textContent="?"),p&&(b.textContent+=" ("+f+")");break;case 2:g&&(b.textContent+=": "+g),p&&(b.textContent+=" ("+f+")");break;case 3:m?b.textContent=m:(Y("Track #"+d.Tc.id+" does not have a label, but the UI is configured to only show labels."),b.textContent="?")}i&&v==u&&(y.appendChild(XT()),b.classList.add("shaka-chosen-item"),y.ariaSelected="true",r.textContent=b.textContent),t.appendChild(y)}}}(t,e.menu,function(t){return function(e,t){return L(function(n){if(1==n.g)return e.player.dg(t),_(n,e.player.Ce(!0),2);e.player.configure("preferredTextLanguage",t.language),e.player.configure("preferForcedSubs",t.forced),w(n)})}(e,t)},e.player.jd(),e.currentSelection,e.localization,e.controls.g.textTrackLabelFormat);var n=ss();n.classList.add("shaka-turn-captions-off-button"),e.eventManager.o(n,"click",function(){e.player.Ce(!1),cC(e)}),n.appendChild(e.g),e.menu.appendChild(n),e.player.jd()?e.g.classList.remove("shaka-chosen-item"):(n.ariaSelected="true",n.appendChild(XT()),e.g.classList.add("shaka-chosen-item"),e.currentSelection.textContent=e.localization.resolve("OFF")),e.button.setAttribute("shaka-status",e.currentSelection.textContent),KT(e.menu),e.controls.dispatchEvent(new V("captionselectionupdated")),YT(e.button,0<t.length)}function dC(e){e.button.ariaLabel=e.localization.resolve("CAPTIONS"),e.backButton.ariaLabel=e.localization.resolve("BACK"),e.nameSpan.textContent=e.localization.resolve("CAPTIONS"),e.backSpan.textContent=e.localization.resolve("CAPTIONS"),e.g.textContent=e.localization.resolve("OFF")}function pC(){}function fC(e,t){VT.call(this,e,t);var n=this;this.g=ss(),this.g.classList.add("shaka-toggle-stereoscopic-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=os("i"),this.h.classList.add("material-icons-round"),this.h.textContent="3d_rotation",this.g.appendChild(this.h),(e=os("label")).classList.add("shaka-overflow-button-label"),e.classList.add("shaka-overflow-menu-only"),this.j=os("span"),e.appendChild(this.j),this.i=os("span"),this.i.classList.add("shaka-current-selection-span"),e.appendChild(this.i),this.g.appendChild(e),this.parent.appendChild(this.g),gC(this),this.eventManager.o(this.localization,"locale-updated",function(){gC(n)}),this.eventManager.o(this.localization,"locale-changed",function(){gC(n)});var i=this.controls.C;this.eventManager.o(this.g,"click",function(){n.controls.Ba()&&i.Ud()}),this.eventManager.o(i,"vrstatuschanged",function(){YT(n.g,n.controls.Ub())}),YT(this.g,this.controls.Ub())}function gC(e){e.g.ariaLabel=e.localization.resolve("TOGGLE_STEREOSCOPIC"),e.j.textContent=e.localization.resolve("TOGGLE_STEREOSCOPIC")}function mC(){}function vC(e,t){oA.call(this,e,t,["shaka-volume-bar-container"],["shaka-volume-bar"]);var n=this;this.g=this.controls.g,this.setRange(0,100),this.eventManager.o(this.video,"volumechange",function(){return yC(n)}),this.eventManager.o(this.player,"loading",function(){return yC(n)}),this.eventManager.o(this.player,"loaded",function(){return SC(n)}),this.eventManager.o(this.player,"unloading",function(){return SC(n)}),this.eventManager.o(this.player,"trackschanged",function(){return SC(n)}),this.eventManager.o(this.controls,"caststatuschanged",function(){return yC(n)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return bC(n)}),this.eventManager.o(this.adManager,"ad-muted",function(){return bC(n)}),this.eventManager.o(this.adManager,"ad-started",function(){return SC(n)}),this.eventManager.o(this.adManager,"ad-stopped",function(){SC(n),yC(n)}),this.eventManager.o(this.localization,"locale-updated",function(){return wC(n)}),this.eventManager.o(this.localization,"locale-changed",function(){return wC(n)}),yC(this),wC(this),this.ad&&this.onChange(),SC(this)}function yC(e){e.video.muted?e.setValue(0):e.setValue(100*e.video.volume),_C(e)}function bC(e){var t=e.ad.getVolume();e.setValue(100*t),_C(e)}function _C(e){var t=e.g.volumeBarColors,n=["to right"];n.push(t.level+e.getValue()+"%"),n.push(t.base+e.getValue()+"%"),n.push(t.base+"100%"),e.container.style.background="linear-gradient("+n.join(",")+")"}function wC(e){e.bar.ariaLabel=e.localization.resolve("VOLUME")}function SC(e){var t=!0;e.ad&&e.ad.isLinear()?t=!0:e.player.Dh()&&(t=!1),YT(e.container,t)}function TC(){}xE.FailReasonCode={NO_BROWSER_SUPPORT:DE,PLAYER_FAILED_TO_LOAD:RE},"complete"==document.readyState?L(function(e){if(1==e.g)return _(e,Promise.resolve(),2);kE(),w(e)}):e.addEventListener("load",kE),m(OE,VT),OE.prototype.release=function(){this.j&&(this.j.disconnect(),this.j=null),VT.prototype.release.call(this)},H("shaka.ui.SettingsMenu",OE),m(BE,OE),H("shaka.ui.AudioLanguageSelection",BE),GE.prototype.create=function(e,t){return new BE(e,t)},lE("language",new GE),zA("language",new GE),m(HE,VT),H("shaka.ui.CastButton",HE),KE.prototype.create=function(e,t){return new HE(e,t)},lE("cast",new KE),zA("cast",new KE),m(XE,OE),H("shaka.ui.ChapterSelection",XE),JE.prototype.create=function(e,t){return new XE(e,t)},lE("chapter",new JE),zA("chapter",new JE),m(QE,VT),H("shaka.ui.FastForwardButton",QE),ex.prototype.create=function(e,t){return new QE(e,t)},zA("fast_forward",new ex),m(tx,VT),H("shaka.ui.FullscreenButton",tx),rx.prototype.create=function(e,t){return new tx(e,t)},zA("fullscreen",new rx),m(ax,VT),ax.prototype.release=function(){this.h.stop(),this.h=null,VT.prototype.release.call(this)},H("shaka.ui.LoopButton",ax),ux.prototype.create=function(e,t){return new ax(e,t)},lE("loop",new ux),zA("loop",new ux),QT("loop",new ux),m(lx,VT),H("shaka.ui.MuteButton",lx),px.prototype.create=function(e,t){return new lx(e,t)},lE("mute",new px),zA("mute",new px),QT("mute",new px),m(fx,VT),H("shaka.ui.PipButton",fx),bx.prototype.create=function(e,t){return new fx(e,t)},lE("picture_in_picture",new bx),zA("picture_in_picture",new bx),QT("picture_in_picture",new bx),m(_x,OE),H("shaka.ui.PlaybackRateSelection",_x),Tx.prototype.create=function(e,t){return new _x(e,t)},lE("playback_rate",new Tx),zA("playback_rate",new Tx),m(Ax,VT),H("shaka.ui.PresentationTimeTracker",Ax),xx.prototype.create=function(e,t){return new Ax(e,t)},zA("time_and_duration",new xx),m(Cx,VT),H("shaka.ui.RecenterVRButton",Cx),Ix.prototype.create=function(e,t){return new Cx(e,t)},lE("recenter_vr",new Ix),zA("recenter_vr",new Ix),m(Mx,VT),Mx.prototype.release=function(){this.video.remote&&-1!=this.h&&this.video.remote.cancelWatchAvailability(this.h).catch(function(){}),VT.prototype.release.call(this)},H("shaka.ui.RemoteButton",Mx),Rx.prototype.create=function(e,t){return new Mx(e,t)},lE("remote",new Rx),zA("remote",new Rx),m(Nx,OE),H("shaka.ui.ResolutionSelection",Nx),Hx.prototype.create=function(e,t){return new Nx(e,t)},lE("quality",new Hx),zA("quality",new Hx),m(Vx,VT),H("shaka.ui.RewindButton",Vx),zx.prototype.create=function(e,t){return new Vx(e,t)},zA("rewind",new zx),m(Kx,VT),H("shaka.ui.SaveVideoFrameButton",Kx),qx.prototype.create=function(e,t){return new Kx(e,t)},lE("save_video_frame",new qx),QT("save_video_frame",new qx),m(Zx,VT),H("shaka.ui.SkipNextButton",Zx),$x.prototype.create=function(e,t){return new Zx(e,t)},zA("skip_next",new $x),m(eC,eA),H("shaka.ui.SmallPlayButton",eC),tC.prototype.create=function(e,t){return new eC(e,t)},zA("play_pause",new tC),m(nC,VT),H("shaka.ui.Spacer",nC),iC.prototype.create=function(e,t){return new nC(e,t)},zA("spacer",new iC),m(rC,VT),rC.prototype.release=function(){this.l.stop(),this.l=null,VT.prototype.release.call(this)},H("shaka.ui.StatisticsButton",rC),uC.prototype.create=function(e,t){return new rC(e,t)},lE("statistics",new uC),QT("statistics",new uC),m(lC,OE),H("shaka.ui.TextSelection",lC),pC.prototype.create=function(e,t){return new lC(e,t)},lE("captions",new pC),zA("captions",new pC),m(fC,VT),H("shaka.ui.ToggleStereoscopicButton",fC),mC.prototype.create=function(e,t){return new fC(e,t)},lE("toggle_stereoscopic",new mC),zA("toggle_stereoscopic",new mC),m(vC,oA),vC.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()/100):(this.video.volume=this.getValue()/100,0<this.video.volume&&(this.video.muted=!1))},H("shaka.ui.VolumeBar",vC),TC.prototype.create=function(e,t){return new vC(e,t)},zA("volume",new TC)}.call(i,e,e,void 0),i.shaka)t[r]=i.shaka[r]}()},4060:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=t.Transform=void 0;const i=n(8871);class r{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new r(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){const t=this.m;return{x:t[0]*e.x+t[2]*e.y+t[4],y:t[1]*e.x+t[3]*e.y+t[5]}}translate(e,t){return this.m[4]+=this.m[0]*e+this.m[2]*t,this.m[5]+=this.m[1]*e+this.m[3]*t,this}scale(e,t){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=t,this.m[3]*=t,this}rotate(e){const t=Math.cos(e),n=Math.sin(e),i=this.m[0]*t+this.m[2]*n,r=this.m[1]*t+this.m[3]*n,a=this.m[0]*-n+this.m[2]*t,o=this.m[1]*-n+this.m[3]*t;return this.m[0]=i,this.m[1]=r,this.m[2]=a,this.m[3]=o,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,t){const n=this.m[0]+this.m[2]*t,i=this.m[1]+this.m[3]*t,r=this.m[2]+this.m[0]*e,a=this.m[3]+this.m[1]*e;return this.m[0]=n,this.m[1]=i,this.m[2]=r,this.m[3]=a,this}multiply(e){const t=this.m[0]*e.m[0]+this.m[2]*e.m[1],n=this.m[1]*e.m[0]+this.m[3]*e.m[1],i=this.m[0]*e.m[2]+this.m[2]*e.m[3],r=this.m[1]*e.m[2]+this.m[3]*e.m[3],a=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],o=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=t,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=a,this.m[5]=o,this}invert(){const e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),t=this.m[3]*e,n=-this.m[1]*e,i=-this.m[2]*e,r=this.m[0]*e,a=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=t,this.m[1]=n,this.m[2]=i,this.m[3]=r,this.m[4]=a,this.m[5]=o,this}getMatrix(){return this.m}decompose(){const e=this.m[0],n=this.m[1],i=this.m[2],r=this.m[3],a=e*r-n*i,o={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=e||0!=n){const t=Math.sqrt(e*e+n*n);o.rotation=n>0?Math.acos(e/t):-Math.acos(e/t),o.scaleX=t,o.scaleY=a/t,o.skewX=(e*i+n*r)/a,o.skewY=0}else if(0!=i||0!=r){const t=Math.sqrt(i*i+r*r);o.rotation=Math.PI/2-(r>0?Math.acos(-i/t):-Math.acos(i/t)),o.scaleX=a/t,o.scaleY=t,o.skewX=0,o.skewY=(e*i+n*r)/a}return o.rotation=t.Util._getRotation(o.rotation),o}}t.Transform=r;const a=Math.PI/180,o=180/Math.PI,s="Konva error: ",u={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},l=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;let h=[];const c="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(e){setTimeout(e,60)};t.Util={_isElement:e=>!(!e||1!=e.nodeType),_isFunction:e=>!!(e&&e.constructor&&e.call&&e.apply),_isPlainObject:e=>!!e&&e.constructor===Object,_isArray:e=>"[object Array]"===Object.prototype.toString.call(e),_isNumber:e=>"[object Number]"===Object.prototype.toString.call(e)&&!isNaN(e)&&isFinite(e),_isString:e=>"[object String]"===Object.prototype.toString.call(e),_isBoolean:e=>"[object Boolean]"===Object.prototype.toString.call(e),isObject:e=>e instanceof Object,isValidSelector(e){if("string"!=typeof e)return!1;const t=e[0];return"#"===t||"."===t||t===t.toUpperCase()},_sign:e=>0===e||e>0?1:-1,requestAnimFrame(e){h.push(e),1===h.length&&c(function(){const e=h;h=[],e.forEach(function(e){e()})})},createCanvasElement(){const e=document.createElement("canvas");try{e.style=e.style||{}}catch(e){}return e},createImageElement:()=>document.createElement("img"),_isInDocument(e){for(;e=e.parentNode;)if(e==document)return!0;return!1},_urlToImage(e,n){const i=t.Util.createImageElement();i.onload=function(){n(i)},i.src=e},_rgbToHex:(e,t,n)=>((1<<24)+(e<<16)+(t<<8)+n).toString(16).slice(1),_hexToRgb(e){e=e.replace("#","");const t=parseInt(e,16);return{r:t>>16&255,g:t>>8&255,b:255&t}},getRandomColor(){let e=(16777215*Math.random()|0).toString(16);for(;e.length<6;)e="0"+e;return"#"+e},getRGB(e){let t;return e in u?(t=u[e],{r:t[0],g:t[1],b:t[2]}):"#"===e[0]?this._hexToRgb(e.substring(1)):"rgb("===e.substr(0,4)?(t=l.exec(e.replace(/ /g,"")),{r:parseInt(t[1],10),g:parseInt(t[2],10),b:parseInt(t[3],10)}):{r:0,g:0,b:0}},colorToRGBA:e=>(e=e||"black",t.Util._namedColorToRBA(e)||t.Util._hex3ColorToRGBA(e)||t.Util._hex4ColorToRGBA(e)||t.Util._hex6ColorToRGBA(e)||t.Util._hex8ColorToRGBA(e)||t.Util._rgbColorToRGBA(e)||t.Util._rgbaColorToRGBA(e)||t.Util._hslColorToRGBA(e)),_namedColorToRBA(e){const t=u[e.toLowerCase()];return t?{r:t[0],g:t[1],b:t[2],a:1}:null},_rgbColorToRGBA(e){if(0===e.indexOf("rgb(")){const t=(e=e.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:t[0],g:t[1],b:t[2],a:1}}},_rgbaColorToRGBA(e){if(0===e.indexOf("rgba(")){const t=(e=e.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map((e,t)=>"%"===e.slice(-1)?3===t?parseInt(e)/100:parseInt(e)/100*255:Number(e));return{r:t[0],g:t[1],b:t[2],a:t[3]}}},_hex8ColorToRGBA(e){if("#"===e[0]&&9===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}},_hex6ColorToRGBA(e){if("#"===e[0]&&7===e.length)return{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:1}},_hex4ColorToRGBA(e){if("#"===e[0]&&5===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:parseInt(e[4]+e[4],16)/255}},_hex3ColorToRGBA(e){if("#"===e[0]&&4===e.length)return{r:parseInt(e[1]+e[1],16),g:parseInt(e[2]+e[2],16),b:parseInt(e[3]+e[3],16),a:1}},_hslColorToRGBA(e){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(e)){const[t,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e),i=Number(n[0])/360,r=Number(n[1])/100,a=Number(n[2])/100;let o,s,u;if(0===r)return u=255*a,{r:Math.round(u),g:Math.round(u),b:Math.round(u),a:1};o=a<.5?a*(1+r):a+r-a*r;const l=2*a-o,h=[0,0,0];for(let e=0;e<3;e++)s=i+1/3*-(e-1),s<0&&s++,s>1&&s--,u=6*s<1?l+6*(o-l)*s:2*s<1?o:3*s<2?l+(o-l)*(2/3-s)*6:l,h[e]=255*u;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection:(e,t)=>!(t.x>e.x+e.width||t.x+t.width<e.x||t.y>e.y+e.height||t.y+t.height<e.y),cloneObject(e){const t={};for(const n in e)this._isPlainObject(e[n])?t[n]=this.cloneObject(e[n]):this._isArray(e[n])?t[n]=this.cloneArray(e[n]):t[n]=e[n];return t},cloneArray:e=>e.slice(0),degToRad:e=>e*a,radToDeg:e=>e*o,_degToRad:e=>(t.Util.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),t.Util.degToRad(e)),_radToDeg:e=>(t.Util.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),t.Util.radToDeg(e)),_getRotation:e=>i.Konva.angleDeg?t.Util.radToDeg(e):e,_capitalize:e=>e.charAt(0).toUpperCase()+e.slice(1),throw(e){throw new Error(s+e)},error(e){console.error(s+e)},warn(e){i.Konva.showWarnings&&console.warn("Konva warning: "+e)},each(e,t){for(const n in e)t(n,e[n])},_inRange:(e,t,n)=>t<=e&&e<n,_getProjectionToSegment(e,t,n,i,r,a){let o,s,u;const l=(e-n)*(e-n)+(t-i)*(t-i);if(0==l)o=e,s=t,u=(r-n)*(r-n)+(a-i)*(a-i);else{const h=((r-e)*(n-e)+(a-t)*(i-t))/l;h<0?(o=e,s=t,u=(e-r)*(e-r)+(t-a)*(t-a)):h>1?(o=n,s=i,u=(n-r)*(n-r)+(i-a)*(i-a)):(o=e+h*(n-e),s=t+h*(i-t),u=(o-r)*(o-r)+(s-a)*(s-a))}return[o,s,u]},_getProjectionToLine(e,n,i){const r=t.Util.cloneObject(e);let a=Number.MAX_VALUE;return n.forEach(function(o,s){if(!i&&s===n.length-1)return;const u=n[(s+1)%n.length],l=t.Util._getProjectionToSegment(o.x,o.y,u.x,u.y,e.x,e.y),h=l[0],c=l[1],d=l[2];d<a&&(r.x=h,r.y=c,a=d)}),r},_prepareArrayForTween(e,n,i){const r=[],a=[];if(e.length>n.length){const t=n;n=e,e=t}for(let t=0;t<e.length;t+=2)r.push({x:e[t],y:e[t+1]});for(let e=0;e<n.length;e+=2)a.push({x:n[e],y:n[e+1]});const o=[];return a.forEach(function(e){const n=t.Util._getProjectionToLine(e,r,i);o.push(n.x),o.push(n.y)}),o},_prepareToStringify(e){let n;e.visitedByCircularReferenceRemoval=!0;for(const i in e)if(e.hasOwnProperty(i)&&e[i]&&"object"==typeof e[i])if(n=Object.getOwnPropertyDescriptor(e,i),e[i].visitedByCircularReferenceRemoval||t.Util._isElement(e[i])){if(!n.configurable)return null;delete e[i]}else if(null===t.Util._prepareToStringify(e[i])){if(!n.configurable)return null;delete e[i]}return delete e.visitedByCircularReferenceRemoval,e},_assign(e,t){for(const n in t)e[n]=t[n];return e},_getFirstPointerId:e=>e.touches?e.changedTouches[0].identifier:e.pointerId||999,releaseCanvas(...e){i.Konva.releaseCanvasOnDestroy&&e.forEach(e=>{e.width=0,e.height=0})},drawRoundedRectPath(e,t,n,i){let r=0,a=0,o=0,s=0;"number"==typeof i?r=a=o=s=Math.min(i,t/2,n/2):(r=Math.min(i[0]||0,t/2,n/2),a=Math.min(i[1]||0,t/2,n/2),s=Math.min(i[2]||0,t/2,n/2),o=Math.min(i[3]||0,t/2,n/2)),e.moveTo(r,0),e.lineTo(t-a,0),e.arc(t-a,a,a,3*Math.PI/2,0,!1),e.lineTo(t,n-s),e.arc(t-s,n-s,s,0,Math.PI/2,!1),e.lineTo(o,n),e.arc(o,n-o,o,Math.PI/2,Math.PI,!1),e.lineTo(0,r),e.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}}},4357:(e,t,n)=>{const i=n(208);function r(e){this.mode=i.NUMERIC,this.data=e.toString()}r.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){let t,n,i;for(t=0;t+3<=this.data.length;t+=3)n=this.data.substr(t,3),i=parseInt(n,10),e.put(i,10);const r=this.data.length-t;r>0&&(n=this.data.substr(t),i=parseInt(n,10),e.put(i,3*r+1))},e.exports=r},4473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Container=void 0;const i=n(4892),r=n(6536),a=n(5483);class o extends r.Node{constructor(){super(...arguments),this.children=[]}getChildren(e){const t=this.children||[];return e?t.filter(e):t}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(0===e.length)return this;if(e.length>1){for(let t=0;t<e.length;t++)this.add(e[t]);return this}const t=e[0];return t.getParent()?(t.moveTo(this),this):(this._validateAdd(t),t.index=this.getChildren().length,t.parent=this,t._clearCaches(),this.getChildren().push(t),this._fire("add",{child:t}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){const t=this._generalFind(e,!0);return t.length>0?t[0]:void 0}_generalFind(e,t){const n=[];return this._descendants(i=>{const r=i._isMatch(e);return r&&n.push(i),!(!r||!t)}),n}_descendants(e){let t=!1;const n=this.getChildren();for(const i of n){if(t=e(i),t)return!0;if(i.hasChildren()&&(t=i._descendants(e),t))return!0}return!1}toObject(){const e=r.Node.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(t=>{e.children.push(t.toObject())}),e}isAncestorOf(e){let t=e.getParent();for(;t;){if(t._id===this._id)return!0;t=t.getParent()}return!1}clone(e){const t=r.Node.prototype.clone.call(this,e);return this.getChildren().forEach(function(e){t.add(e.clone())}),t}getAllIntersections(e){const t=[];return this.find("Shape").forEach(n=>{n.isVisible()&&n.intersects(e)&&t.push(n)}),t}_clearSelfAndDescendantCache(e){var t;super._clearSelfAndDescendantCache(e),this.isCached()||null===(t=this.children)||void 0===t||t.forEach(function(t){t._clearSelfAndDescendantCache(e)})}_setChildrenIndices(){var e;null===(e=this.children)||void 0===e||e.forEach(function(e,t){e.index=t}),this._requestDraw()}drawScene(e,t,n){const i=this.getLayer(),r=e||i&&i.getCanvas(),a=r&&r.getContext(),o=this._getCanvasCache(),s=o&&o.scene,u=r&&r.isCache;if(!this.isVisible()&&!u)return this;if(s){a.save();const e=this.getAbsoluteTransform(t).getMatrix();a.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(a),a.restore()}else this._drawChildren("drawScene",r,t,n);return this}drawHit(e,t){if(!this.shouldDrawHit(t))return this;const n=this.getLayer(),i=e||n&&n.hitCanvas,r=i&&i.getContext(),a=this._getCanvasCache();if(a&&a.hit){r.save();const e=this.getAbsoluteTransform(t).getMatrix();r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",i,t);return this}_drawChildren(e,t,n,i){var r;const a=t&&t.getContext(),o=this.clipWidth(),s=this.clipHeight(),u=this.clipFunc(),l="number"==typeof o&&"number"==typeof s||u,h=n===this;if(l){a.save();const e=this.getAbsoluteTransform(n);let t,i=e.getMatrix();if(a.transform(i[0],i[1],i[2],i[3],i[4],i[5]),a.beginPath(),u)t=u.call(this,a,this);else{const e=this.clipX(),t=this.clipY();a.rect(e||0,t||0,o,s)}a.clip.apply(a,t),i=e.copy().invert().getMatrix(),a.transform(i[0],i[1],i[2],i[3],i[4],i[5])}const c=!h&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===e;c&&(a.save(),a._applyGlobalCompositeOperation(this)),null===(r=this.children)||void 0===r||r.forEach(function(r){r[e](t,n,i)}),c&&a.restore(),l&&a.restore()}getClientRect(e={}){var t;const n=e.skipTransform,i=e.relativeTo;let r,a,o,s,u={x:1/0,y:1/0,width:0,height:0};const l=this;null===(t=this.children)||void 0===t||t.forEach(function(t){if(!t.visible())return;const n=t.getClientRect({relativeTo:l,skipShadow:e.skipShadow,skipStroke:e.skipStroke});0===n.width&&0===n.height||(void 0===r?(r=n.x,a=n.y,o=n.x+n.width,s=n.y+n.height):(r=Math.min(r,n.x),a=Math.min(a,n.y),o=Math.max(o,n.x+n.width),s=Math.max(s,n.y+n.height)))});const h=this.find("Shape");let c=!1;for(let e=0;e<h.length;e++)if(h[e]._isVisible(this)){c=!0;break}return u=c&&void 0!==r?{x:r,y:a,width:o-r,height:s-a}:{x:0,y:0,width:0,height:0},n?u:this._transformedRect(u,i)}}t.Container=o,i.Factory.addComponentsGetterSetter(o,"clip",["x","y","width","height"]),i.Factory.addGetterSetter(o,"clipX",void 0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(o,"clipY",void 0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(o,"clipWidth",void 0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(o,"clipHeight",void 0,(0,a.getNumberValidator)()),i.Factory.addGetterSetter(o,"clipFunc")},4565:(e,t,n)=>{const i=n(6886),r=i.getBCHDigit(1335);t.getEncodedBits=function(e,t){const n=e.bit<<3|t;let a=n<<10;for(;i.getBCHDigit(a)-r>=0;)a^=1335<<i.getBCHDigit(a)-r;return 21522^(n<<10|a)}},4713:(e,t,n)=>{const i=n(2731);t.mul=function(e,t){const n=new Uint8Array(e.length+t.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<t.length;a++)n[r+a]^=i.mul(e[r],t[a]);return n},t.mod=function(e,t){let n=new Uint8Array(e);for(;n.length-t.length>=0;){const e=n[0];for(let r=0;r<t.length;r++)n[r]^=i.mul(t[r],e);let r=0;for(;r<n.length&&0===n[r];)r++;n=n.slice(r)}return n},t.generateECPolynomial=function(e){let n=new Uint8Array([1]);for(let r=0;r<e;r++)n=t.mul(n,new Uint8Array([1,i.exp(r)]));return n}},4715:(e,t,n)=>{var i,r;void 0===(r="function"==typeof(i=function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function t(e,t,n){return t=u(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,l()?Reflect.construct(t,n||[],u(e).constructor):t.apply(e,n))}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function a(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(t,n){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=function(t,n){if(t){if("string"==typeof t)return e(t,n);var i={}.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var r=0,a=function(){};return{s:a,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,u=!1;return{s:function(){i=i.call(t)},n:function(){var e=i.next();return s=e.done,e},e:function(e){u=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(u)throw o}}}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},s.apply(null,arguments)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(l=function(){return!!e})()}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function c(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}!function(e){e.AbortSignal,e.AbortController}("undefined"!=typeof self?self:n.g);var d=function(){return a(function e(){i(this,e),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})},[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],i=0,r=n.length;i<r;i++)if(n[i].callback===t)return void n.splice(i,1)}},{key:"dispatchEvent",value:function(e){var t=this;if(e.type in this.listeners){for(var n=this.listeners[e.type].slice(),i=function(){var i=n[r];try{i.callback.call(t,e)}catch(e){Promise.resolve().then(function(){throw e})}i.options&&i.options.once&&t.removeEventListener(e.type,i.callback)},r=0,a=n.length;r<a;r++)i();return!e.defaultPrevented}}}])}(),p=function(e){function n(){var e;return i(this,n),(e=t(this,n)).listeners||d.call(e),Object.defineProperty(e,"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(e,"onabort",{value:null,writable:!0,configurable:!0}),Object.defineProperty(e,"reason",{value:void 0,writable:!0,configurable:!0}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(n,e),a(n,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){var t,i,r,a,o;"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),(t=n,i="dispatchEvent",r=this,o=s(u(1&(a=3)?t.prototype:t),i,r),2&a&&"function"==typeof o?function(e){return o.apply(r,e)}:o)([e])}},{key:"throwIfAborted",value:function(){var e=this.aborted,t=this.reason;if(e)throw void 0===t?"Aborted":t}}],[{key:"timeout",value:function(e){var t=new f;return setTimeout(function(){return t.abort(new DOMException("This signal is timeout in ".concat(e,"ms"),"TimeoutError"))},e),t.signal}},{key:"any",value:function(e){var t=new f;function n(){t.abort(this.reason),function(){var t,i=o(e);try{for(i.s();!(t=i.n()).done;)t.value.removeEventListener("abort",n)}catch(e){i.e(e)}finally{i.f()}}()}var i,r=o(e);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(a.aborted){t.abort(a.reason);break}a.addEventListener("abort",n)}}catch(e){r.e(e)}finally{r.f()}return t.signal}}])}(d),f=function(){return a(function e(){i(this,e),Object.defineProperty(this,"signal",{value:new p,writable:!0,configurable:!0})},[{key:"abort",value:function(e){var t=function(e){if(void 0===e)if("undefined"==typeof document)(e=new Error("This operation was aborted")).name="AbortError";else try{e=new DOMException("signal is aborted without reason"),Object.defineProperty(e,"name",{value:"AbortError"})}catch(t){(e=new Error("This operation was aborted")).name="AbortError"}return e}(e),n=function(e){var t;try{t=new Event("abort")}catch(e){"undefined"!=typeof document?document.createEvent?(t=document.createEvent("Event")).initEvent("abort",!1,!1):(t=document.createEventObject()).type="abort":t={type:"abort",bubbles:!1,cancelable:!1}}return t.reason=e,t}(t);this.signal.reason=t,this.signal.dispatchEvent(n)}},{key:"toString",value:function(){return"[object AbortController]"}}])}();function g(e){return e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController}"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",p.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(g(e))if(e.fetch){var t=function(e){"function"==typeof e&&(e={fetch:e});var t=e,n=t.fetch,i=t.Request,r=void 0===i?n.Request:i,a=t.AbortController,o=t.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,s=void 0!==o&&o;if(!g({fetch:n,Request:r,AbortController:a,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:s}))return{fetch:n,Request:u};var u=r;(u&&!u.prototype.hasOwnProperty("signal")||s)&&((u=function(e,t){var n;t&&t.signal&&(n=t.signal,delete t.signal);var i=new r(e,t);return n&&Object.defineProperty(i,"signal",{writable:!1,enumerable:!1,configurable:!0,value:n}),i}).prototype=r.prototype);var l=n;return{fetch:function(e,t){var n=u&&u.prototype.isPrototypeOf(e)?e.signal:t?t.signal:void 0;if(n){var i;try{i=new DOMException("Aborted","AbortError")}catch(e){(i=new Error("Aborted")).name="AbortError"}if(n.aborted)return Promise.reject(i);var r=new Promise(function(e,t){n.addEventListener("abort",function(){return t(i)},{once:!0})});return t&&t.signal&&delete t.signal,Promise.race([r,l(e,t)])}return l(e,t)},Request:u}}(e),n=t.fetch,i=t.Request;e.fetch=n,e.Request=i,Object.defineProperty(e,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:f}),Object.defineProperty(e,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:p})}else console.warn("fetch() is not available, cannot install abortcontroller-polyfill")}("undefined"!=typeof self?self:n.g)})?i.call(t,n,t,e):i)||(e.exports=r)},4723:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Shape=t.shapes=void 0;const i=n(8871),r=n(4060),a=n(4892),o=n(6536),s=n(5483),u=n(8871),l=n(8722),h="hasShadow",c="shadowRGBA",d="patternImage",p="linearGradient",f="radialGradient";let g;function m(){return g||(g=r.Util.createCanvasElement().getContext("2d"),g)}t.shapes={};class v extends o.Node{constructor(e){let n;for(super(e);n=r.Util.getRandomColor(),!n||n in t.shapes;);this.colorKey=n,t.shapes[n]=this}getContext(){return r.Util.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return r.Util.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(h,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(d,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const e=m().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(e&&e.setTransform){const t=new r.Transform;t.translate(this.fillPatternX(),this.fillPatternY()),t.rotate(i.Konva.getAngle(this.fillPatternRotation())),t.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),t.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=t.getMatrix(),a="undefined"==typeof DOMMatrix?{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]}:new DOMMatrix(n);e.setTransform(a)}return e}}_getLinearGradient(){return this._getCache(p,this.__getLinearGradient)}__getLinearGradient(){const e=this.fillLinearGradientColorStops();if(e){const t=m(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),r=t.createLinearGradient(n.x,n.y,i.x,i.y);for(let t=0;t<e.length;t+=2)r.addColorStop(e[t],e[t+1]);return r}}_getRadialGradient(){return this._getCache(f,this.__getRadialGradient)}__getRadialGradient(){const e=this.fillRadialGradientColorStops();if(e){const t=m(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),r=t.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius());for(let t=0;t<e.length;t+=2)r.addColorStop(e[t],e[t+1]);return r}}getShadowRGBA(){return this._getCache(c,this._getShadowRGBA)}_getShadowRGBA(){if(!this.hasShadow())return;const e=r.Util.colorToRGBA(this.shadowColor());return e?"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")":void 0}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return"auto"===e?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){const t=this.getStage();if(!t)return!1;const n=t.bufferHitCanvas;return n.getContext().clear(),this.drawHit(n,void 0,!0),n.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data[3]>0}destroy(){return o.Node.prototype.destroy.call(this),delete t.shapes[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var t;if(null!==(t=this.attrs.perfectDrawEnabled)&&void 0!==t&&!t)return!1;const n=e||this.hasFill(),i=this.hasStroke(),r=1!==this.getAbsoluteOpacity();if(n&&i&&r)return!0;const a=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!(n&&i&&a&&o)}setStrokeHitEnabled(e){r.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){const e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){let t=!1,n=this.getParent();for(;n;){if(n.isCached()){t=!0;break}n=n.getParent()}const i=e.skipTransform,r=e.relativeTo||t&&this.getStage()||void 0,a=this.getSelfRect(),o=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,s=a.width+o,u=a.height+o,l=!e.skipShadow&&this.hasShadow(),h=l?this.shadowOffsetX():0,c=l?this.shadowOffsetY():0,d=s+Math.abs(h),p=u+Math.abs(c),f=l&&this.shadowBlur()||0,g={width:d+2*f,height:p+2*f,x:-(o/2+f)+Math.min(h,0)+a.x,y:-(o/2+f)+Math.min(c,0)+a.y};return i?g:this._transformedRect(g,r)}drawScene(e,t,n){const i=this.getLayer(),r=(e||i.getCanvas()).getContext(),a=this._getCanvasCache(),o=this.getSceneFunc(),s=this.hasShadow();let u;const l=t===this;if(!this.isVisible()&&!l)return this;if(a){r.save();const e=this.getAbsoluteTransform(t).getMatrix();return r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedSceneCanvas(r),r.restore(),this}if(!o)return this;if(r.save(),this._useBufferCanvas()){u=this.getStage();const e=n||u.bufferCanvas,i=e.getContext();i.clear(),i.save(),i._applyLineJoin(this);const a=this.getAbsoluteTransform(t).getMatrix();i.transform(a[0],a[1],a[2],a[3],a[4],a[5]),o.call(this,i,this),i.restore();const l=e.pixelRatio;s&&r._applyShadow(this),r._applyOpacity(this),r._applyGlobalCompositeOperation(this),r.drawImage(e._canvas,e.x||0,e.y||0,e.width/l,e.height/l)}else{if(r._applyLineJoin(this),!l){const e=this.getAbsoluteTransform(t).getMatrix();r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),r._applyOpacity(this),r._applyGlobalCompositeOperation(this)}s&&r._applyShadow(this),o.call(this,r,this)}return r.restore(),this}drawHit(e,t,n=!1){if(!this.shouldDrawHit(t,n))return this;const i=this.getLayer(),a=e||i.hitCanvas,o=a&&a.getContext(),s=this.hitFunc()||this.sceneFunc(),u=this._getCanvasCache(),l=u&&u.hit;if(this.colorKey||r.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){o.save();const e=this.getAbsoluteTransform(t).getMatrix();return o.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this._drawCachedHitCanvas(o),o.restore(),this}if(!s)return this;if(o.save(),o._applyLineJoin(this),this!==t){const e=this.getAbsoluteTransform(t).getMatrix();o.transform(e[0],e[1],e[2],e[3],e[4],e[5])}return s.call(this,o,this),o.restore(),this}drawHitFromCache(e=0){const t=this._getCanvasCache(),n=this._getCachedSceneCanvas(),i=t.hit,a=i.getContext(),o=i.getWidth(),s=i.getHeight();a.clear(),a.drawImage(n._canvas,0,0,o,s);try{const t=a.getImageData(0,0,o,s),n=t.data,i=n.length,u=r.Util._hexToRgb(this.colorKey);for(let t=0;t<i;t+=4)n[t+3]>e?(n[t]=u.r,n[t+1]=u.g,n[t+2]=u.b,n[t+3]=255):n[t+3]=0;a.putImageData(t,0,0)}catch(e){r.Util.error("Unable to draw hit graph from cached scene canvas. "+e.message)}return this}hasPointerCapture(e){return l.hasPointerCapture(e,this)}setPointerCapture(e){l.setPointerCapture(e,this)}releaseCapture(e){l.releaseCapture(e,this)}}t.Shape=v,v.prototype._fillFunc=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},v.prototype._strokeFunc=function(e){e.stroke()},v.prototype._fillFuncHit=function(e){const t=this.attrs.fillRule;t?e.fill(t):e.fill()},v.prototype._strokeFuncHit=function(e){e.stroke()},v.prototype._centroid=!1,v.prototype.nodeType="Shape",(0,u._registerNode)(v),v.prototype.eventListeners={},v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(h)}),v.prototype.on.call(v.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(c)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(d)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(p)}),v.prototype.on.call(v.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(f)}),a.Factory.addGetterSetter(v,"stroke",void 0,(0,s.getStringOrGradientValidator)()),a.Factory.addGetterSetter(v,"strokeWidth",2,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"fillAfterStrokeEnabled",!1),a.Factory.addGetterSetter(v,"hitStrokeWidth","auto",(0,s.getNumberOrAutoValidator)()),a.Factory.addGetterSetter(v,"strokeHitEnabled",!0,(0,s.getBooleanValidator)()),a.Factory.addGetterSetter(v,"perfectDrawEnabled",!0,(0,s.getBooleanValidator)()),a.Factory.addGetterSetter(v,"shadowForStrokeEnabled",!0,(0,s.getBooleanValidator)()),a.Factory.addGetterSetter(v,"lineJoin"),a.Factory.addGetterSetter(v,"lineCap"),a.Factory.addGetterSetter(v,"sceneFunc"),a.Factory.addGetterSetter(v,"hitFunc"),a.Factory.addGetterSetter(v,"dash"),a.Factory.addGetterSetter(v,"dashOffset",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"shadowColor",void 0,(0,s.getStringValidator)()),a.Factory.addGetterSetter(v,"shadowBlur",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"shadowOpacity",1,(0,s.getNumberValidator)()),a.Factory.addComponentsGetterSetter(v,"shadowOffset",["x","y"]),a.Factory.addGetterSetter(v,"shadowOffsetX",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"shadowOffsetY",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"fillPatternImage"),a.Factory.addGetterSetter(v,"fill",void 0,(0,s.getStringOrGradientValidator)()),a.Factory.addGetterSetter(v,"fillPatternX",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"fillPatternY",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"fillLinearGradientColorStops"),a.Factory.addGetterSetter(v,"strokeLinearGradientColorStops"),a.Factory.addGetterSetter(v,"fillRadialGradientStartRadius",0),a.Factory.addGetterSetter(v,"fillRadialGradientEndRadius",0),a.Factory.addGetterSetter(v,"fillRadialGradientColorStops"),a.Factory.addGetterSetter(v,"fillPatternRepeat","repeat"),a.Factory.addGetterSetter(v,"fillEnabled",!0),a.Factory.addGetterSetter(v,"strokeEnabled",!0),a.Factory.addGetterSetter(v,"shadowEnabled",!0),a.Factory.addGetterSetter(v,"dashEnabled",!0),a.Factory.addGetterSetter(v,"strokeScaleEnabled",!0),a.Factory.addGetterSetter(v,"fillPriority","color"),a.Factory.addComponentsGetterSetter(v,"fillPatternOffset",["x","y"]),a.Factory.addGetterSetter(v,"fillPatternOffsetX",0,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"fillPatternOffsetY",0,(0,s.getNumberValidator)()),a.Factory.addComponentsGetterSetter(v,"fillPatternScale",["x","y"]),a.Factory.addGetterSetter(v,"fillPatternScaleX",1,(0,s.getNumberValidator)()),a.Factory.addGetterSetter(v,"fillPatternScaleY",1,(0,s.getNumberValidator)()),a.Factory.addComponentsGetterSetter(v,"fillLinearGradientStartPoint",["x","y"]),a.Factory.addComponentsGetterSetter(v,"strokeLinearGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(v,"fillLinearGradientStartPointX",0),a.Factory.addGetterSetter(v,"strokeLinearGradientStartPointX",0),a.Factory.addGetterSetter(v,"fillLinearGradientStartPointY",0),a.Factory.addGetterSetter(v,"strokeLinearGradientStartPointY",0),a.Factory.addComponentsGetterSetter(v,"fillLinearGradientEndPoint",["x","y"]),a.Factory.addComponentsGetterSetter(v,"strokeLinearGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(v,"fillLinearGradientEndPointX",0),a.Factory.addGetterSetter(v,"strokeLinearGradientEndPointX",0),a.Factory.addGetterSetter(v,"fillLinearGradientEndPointY",0),a.Factory.addGetterSetter(v,"strokeLinearGradientEndPointY",0),a.Factory.addComponentsGetterSetter(v,"fillRadialGradientStartPoint",["x","y"]),a.Factory.addGetterSetter(v,"fillRadialGradientStartPointX",0),a.Factory.addGetterSetter(v,"fillRadialGradientStartPointY",0),a.Factory.addComponentsGetterSetter(v,"fillRadialGradientEndPoint",["x","y"]),a.Factory.addGetterSetter(v,"fillRadialGradientEndPointX",0),a.Factory.addGetterSetter(v,"fillRadialGradientEndPointY",0),a.Factory.addGetterSetter(v,"fillPatternRotation",0),a.Factory.addGetterSetter(v,"fillRule",void 0,(0,s.getStringValidator)()),a.Factory.backCompat(v,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"})},4764:(e,t,n)=>{const i=n(4713);function r(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}r.prototype.initialize=function(e){this.degree=e,this.genPoly=i.generateECPolynomial(this.degree)},r.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const t=new Uint8Array(e.length+this.degree);t.set(e);const n=i.mod(t,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n},e.exports=r},4861:(e,t,n)=>{const i=n(208),r=n(6886);function a(e){this.mode=i.KANJI,this.data=e}a.getBitsLength=function(e){return 13*e},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=r.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[t]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},e.exports=a},4892:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Factory=void 0;const i=n(4060),r=n(5483),a="get",o="set";t.Factory={addGetterSetter(e,n,i,r,a){t.Factory.addGetter(e,n,i),t.Factory.addSetter(e,n,r,a),t.Factory.addOverloadedGetterSetter(e,n)},addGetter(e,t,n){const r=a+i.Util._capitalize(t);e.prototype[r]=e.prototype[r]||function(){const e=this.attrs[t];return void 0===e?n:e}},addSetter(e,n,r,a){const s=o+i.Util._capitalize(n);e.prototype[s]||t.Factory.overWriteSetter(e,n,r,a)},overWriteSetter(e,t,n,r){const a=o+i.Util._capitalize(t);e.prototype[a]=function(e){return n&&null!=e&&(e=n.call(this,e,t)),this._setAttr(t,e),r&&r.call(this),this}},addComponentsGetterSetter(e,n,s,u,l){const h=s.length,c=i.Util._capitalize,d=a+c(n),p=o+c(n);e.prototype[d]=function(){const e={};for(let t=0;t<h;t++){const i=s[t];e[i]=this.getAttr(n+c(i))}return e};const f=(0,r.getComponentValidator)(s);e.prototype[p]=function(e){const t=this.attrs[n];u&&(e=u.call(this,e,n)),f&&f.call(this,e,n);for(const t in e)e.hasOwnProperty(t)&&this._setAttr(n+c(t),e[t]);return e||s.forEach(e=>{this._setAttr(n+c(e),void 0)}),this._fireChangeEvent(n,t,e),l&&l.call(this),this},t.Factory.addOverloadedGetterSetter(e,n)},addOverloadedGetterSetter(e,t){const n=i.Util._capitalize(t),r=o+n,s=a+n;e.prototype[t]=function(){return arguments.length?(this[r](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(e,n,r,o){i.Util.error("Adding deprecated "+n);const s=a+i.Util._capitalize(n),u=n+" property is deprecated and will be removed soon. Look at Konva change log for more information.";e.prototype[s]=function(){i.Util.error(u);const e=this.attrs[n];return void 0===e?r:e},t.Factory.addSetter(e,n,o,function(){i.Util.error(u)}),t.Factory.addOverloadedGetterSetter(e,n)},backCompat(e,t){i.Util.each(t,function(t,n){const r=e.prototype[n],s=a+i.Util._capitalize(t),u=o+i.Util._capitalize(t);function l(){r.apply(this,arguments),i.Util.error('"'+t+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}e.prototype[t]=l,e.prototype[s]=l,e.prototype[u]=l})},afterSetFilter(){this._filterUpToDate=!1}}},5155:(e,t,n)=>{"use strict";t.r=void 0;const i=n(4892),r=n(4723),a=n(8871),o=n(4060),s=n(5483);class u extends r.Shape{_sceneFunc(e){const t=this.cornerRadius(),n=this.width(),i=this.height();e.beginPath(),t?o.Util.drawRoundedRectPath(e,n,i,t):e.rect(0,0,n,i),e.closePath(),e.fillStrokeShape(this)}}t.r=u,u.prototype.className="Rect",(0,a._registerNode)(u),i.Factory.addGetterSetter(u,"cornerRadius",0,(0,s.getNumberOrArrayOfNumbersValidator)(4))},5483:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RGBComponent=function(e){return e>255?255:e<0?0:Math.round(e)},t.alphaComponent=function(e){return e>1?1:e<1e-4?1e-4:e},t.getNumberValidator=function(){if(i.Konva.isUnminified)return function(e,t){return r.Util._isNumber(e)||r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a number.'),e}},t.getNumberOrArrayOfNumbersValidator=function(e){if(i.Konva.isUnminified)return function(t,n){let i=r.Util._isNumber(t),o=r.Util._isArray(t)&&t.length==e;return i||o||r.Util.warn(a(t)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+e+")"),t}},t.getNumberOrAutoValidator=function(){if(i.Konva.isUnminified)return function(e,t){return r.Util._isNumber(e)||"auto"===e||r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or "auto".'),e}},t.getStringValidator=function(){if(i.Konva.isUnminified)return function(e,t){return r.Util._isString(e)||r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a string.'),e}},t.getStringOrGradientValidator=function(){if(i.Konva.isUnminified)return function(e,t){const n=r.Util._isString(e),i="[object CanvasGradient]"===Object.prototype.toString.call(e)||e&&e.addColorStop;return n||i||r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a string or a native gradient.'),e}},t.getFunctionValidator=function(){if(i.Konva.isUnminified)return function(e,t){return r.Util._isFunction(e)||r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a function.'),e}},t.getNumberArrayValidator=function(){if(i.Konva.isUnminified)return function(e,t){const n=Int8Array?Object.getPrototypeOf(Int8Array):null;return n&&e instanceof n||(r.Util._isArray(e)?e.forEach(function(e){r.Util._isNumber(e)||r.Util.warn('"'+t+'" attribute has non numeric element '+e+". Make sure that all elements are numbers.")}):r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a array of numbers.')),e}},t.getBooleanValidator=function(){if(i.Konva.isUnminified)return function(e,t){return!0===e||!1===e||r.Util.warn(a(e)+' is a not valid value for "'+t+'" attribute. The value should be a boolean.'),e}},t.getComponentValidator=function(e){if(i.Konva.isUnminified)return function(t,n){return null==t||r.Util.isObject(t)||r.Util.warn(a(t)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+e),t}};const i=n(8871),r=n(4060);function a(e){return r.Util._isString(e)?'"'+e+'"':"[object Number]"===Object.prototype.toString.call(e)||r.Util._isBoolean(e)?e:Object.prototype.toString.call(e)}},5822:(e,t,n)=>{const i=n(208);function r(e){this.mode=i.BYTE,this.data="string"==typeof e?(new TextEncoder).encode(e):new Uint8Array(e)}r.getBitsLength=function(e){return 8*e},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)},e.exports=r},6267:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=void 0;const i=n(4060),r=n(4473),a=n(6536),o=n(4892),s=n(8604),u=n(5483),l=n(4723),h=n(8871),c=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],d=c.length;class p extends r.Container{constructor(e){super(e),this.canvas=new s.SceneCanvas,this.hitCanvas=new s.HitCanvas({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);const t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),e<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[e+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){a.Node.prototype.moveToTop.call(this);const e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!a.Node.prototype.moveUp.call(this))return!1;const e=this.getStage();return!(!e||!e.content||(e.content.removeChild(this.getNativeCanvasElement()),this.index<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[this.index+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(a.Node.prototype.moveDown.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(a.Node.prototype.moveToBottom.call(this)){const e=this.getStage();if(e){const t=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),t[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){const e=this.getNativeCanvasElement();return a.Node.prototype.remove.call(this),e&&e.parentNode&&i.Util._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:t}){return this.canvas.setSize(e,t),this.hitCanvas.setSize(e,t),this._setSmoothEnabled(),this}_validateAdd(e){const t=e.getType();"Group"!==t&&"Shape"!==t&&i.Util.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return(e=e||{}).width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=void 0!==e.x?e.x:this.x(),e.y=void 0!==e.y?e.y:this.y(),a.Node.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){const e=this.visible();this.canvas._canvas.style.display=e?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){i.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){i.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,i.Util.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;let t=1,n=!1;for(;;){for(let i=0;i<d;i++){const r=c[i],a=this._getIntersection({x:e.x+r.x*t,y:e.y+r.y*t}),o=a.shape;if(o)return o;if(n=!!a.antialiased,!a.antialiased)break}if(!n)return null;t+=1}}_getIntersection(e){const t=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(e.x*t),Math.round(e.y*t),1,1).data,r=n[3];if(255===r){const e=i.Util._rgbToHex(n[0],n[1],n[2]),t=l.shapes["#"+e];return t?{shape:t}:{antialiased:!0}}return r>0?{antialiased:!0}:{}}drawScene(e,t,n){const i=this.getLayer(),a=e||i&&i.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&a.getContext().clear(),r.Container.prototype.drawScene.call(this,a,t,n),this._fire("draw",{node:this}),this}drawHit(e,t){const n=this.getLayer(),i=e||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),r.Container.prototype.drawHit.call(this,i,t),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return i.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!this.parent||!this.parent.content)return;const e=this.parent;this.hitCanvas._canvas.parentNode?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}destroy(){return i.Util.releaseCanvas(this.getNativeCanvasElement(),this.getHitCanvas()._canvas),super.destroy()}}t.Layer=p,p.prototype.nodeType="Layer",(0,h._registerNode)(p),o.Factory.addGetterSetter(p,"imageSmoothingEnabled",!0),o.Factory.addGetterSetter(p,"clearBeforeDraw",!0),o.Factory.addGetterSetter(p,"hitGraphEnabled",!0,(0,u.getBooleanValidator)())},6320:e=>{"use strict";var t={single_source_shortest_paths:function(e,n,i){var r={},a={};a[n]=0;var o,s,u,l,h,c,d,p=t.PriorityQueue.make();for(p.push(n,0);!p.empty();)for(u in s=(o=p.pop()).value,l=o.cost,h=e[s]||{})h.hasOwnProperty(u)&&(c=l+h[u],d=a[u],(void 0===a[u]||d>c)&&(a[u]=c,p.push(u,c),r[u]=s));if(void 0!==i&&void 0===a[i]){var f=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(f)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var n=[],i=t;i;)n.push(i),e[i],i=e[i];return n.reverse(),n},find_path:function(e,n,i){var r=t.single_source_shortest_paths(e,n,i);return t.extract_shortest_path_from_predecessor_list(r,i)},PriorityQueue:{make:function(e){var n,i=t.PriorityQueue,r={};for(n in e=e||{},i)i.hasOwnProperty(n)&&(r[n]=i[n]);return r.queue=[],r.sorter=e.sorter||i.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var n={value:e,cost:t};this.queue.push(n),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}};e.exports=t},6421:(e,t,n)=>{const i=n(6886).getSymbolSize;t.getRowColCoords=function(e){if(1===e)return[];const t=Math.floor(e/7)+2,n=i(e),r=145===n?26:2*Math.ceil((n-13)/(2*t-2)),a=[n-7];for(let e=1;e<t-1;e++)a[e]=a[e-1]-r;return a.push(6),a.reverse()},t.getPositions=function(e){const n=[],i=t.getRowColCoords(e),r=i.length;for(let e=0;e<r;e++)for(let t=0;t<r;t++)0===e&&0===t||0===e&&t===r-1||e===r-1&&0===t||n.push([i[e],i[t]]);return n}},6536:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;const i=n(8604),r=n(1268),a=n(4892),o=n(8871),s=n(4060),u=n(5483),l="absoluteOpacity",h="allEventListeners",c="absoluteTransform",d="absoluteScale",p="canvas",f="listening",g="Shape",m=" ",v="stage",y="transform",b="visible",_=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(m);let w=1;class S{constructor(e){this._id=w++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){e!==y&&e!==c||!this._cache.get(e)?e?this._cache.delete(e):this._cache.clear():this._cache.get(e).dirty=!0}_getCache(e,t){let n=this._cache.get(e);return(void 0===n||(e===y||e===c)&&!0===n.dirty)&&(n=t.call(this),this._cache.set(e,n)),n}_calculate(e,t,n){if(!this._attachedDepsListeners.get(e)){const n=t.map(e=>e+"Change.konva").join(m);this.on(n,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,n)}_getCanvasCache(){return this._cache.get(p)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===c&&this.fire("absoluteTransformChange")}clearCache(){if(this._cache.has(p)){const{scene:e,filter:t,hit:n,buffer:i}=this._cache.get(p);s.Util.releaseCanvas(e,t,n,i),this._cache.delete(p)}return this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){const t=e||{};let n={};void 0!==t.x&&void 0!==t.y&&void 0!==t.width&&void 0!==t.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()||void 0}));let r=Math.ceil(t.width||n.width),a=Math.ceil(t.height||n.height),o=t.pixelRatio,u=void 0===t.x?Math.floor(n.x):t.x,h=void 0===t.y?Math.floor(n.y):t.y,c=t.offset||0,f=t.drawBorder||!1,g=t.hitCanvasPixelRatio||1;if(!r||!a)return void s.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");r+=2*c+(Math.abs(Math.round(n.x)-u)>.5?1:0),a+=2*c+(Math.abs(Math.round(n.y)-h)>.5?1:0),u-=c,h-=c;const m=new i.SceneCanvas({pixelRatio:o,width:r,height:a}),v=new i.SceneCanvas({pixelRatio:o,width:0,height:0,willReadFrequently:!0}),y=new i.HitCanvas({pixelRatio:g,width:r,height:a}),b=m.getContext(),_=y.getContext(),w=new i.SceneCanvas({width:m.width/m.pixelRatio+Math.abs(u),height:m.height/m.pixelRatio+Math.abs(h),pixelRatio:m.pixelRatio}),S=w.getContext();return y.isCache=!0,m.isCache=!0,this._cache.delete(p),this._filterUpToDate=!1,!1===t.imageSmoothingEnabled&&(m.getContext()._context.imageSmoothingEnabled=!1,v.getContext()._context.imageSmoothingEnabled=!1),b.save(),_.save(),S.save(),b.translate(-u,-h),_.translate(-u,-h),S.translate(-u,-h),w.x=u,w.y=h,this._isUnderCache=!0,this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(d),this.drawScene(m,this,w),this.drawHit(y,this),this._isUnderCache=!1,b.restore(),_.restore(),f&&(b.save(),b.beginPath(),b.rect(0,0,r,a),b.closePath(),b.setAttr("strokeStyle","red"),b.setAttr("lineWidth",5),b.stroke(),b.restore()),this._cache.set(p,{scene:m,filter:v,hit:y,buffer:w,x:u,y:h}),this._requestDraw(),this}isCached(){return this._cache.has(p)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,t){const n=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}];let i=1/0,r=1/0,a=-1/0,o=-1/0;const s=this.getAbsoluteTransform(t);return n.forEach(function(e){const t=s.point(e);void 0===i&&(i=a=t.x,r=o=t.y),i=Math.min(i,t.x),r=Math.min(r,t.y),a=Math.max(a,t.x),o=Math.max(o,t.y)}),{x:i,y:r,width:a-i,height:o-r}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const t=this._getCanvasCache();e.translate(t.x,t.y);const n=this._getCachedSceneCanvas(),i=n.pixelRatio;e.drawImage(n._canvas,0,0,n.width/i,n.height/i),e.restore()}_drawCachedHitCanvas(e){const t=this._getCanvasCache(),n=t.hit;e.save(),e.translate(t.x,t.y),e.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),e.restore()}_getCachedSceneCanvas(){let e,t,n,i,r=this.filters(),a=this._getCanvasCache(),o=a.scene,u=a.filter,l=u.getContext();if(r){if(!this._filterUpToDate){const a=o.pixelRatio;u.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(e=r.length,l.clear(),l.drawImage(o._canvas,0,0,o.getWidth()/a,o.getHeight()/a),t=l.getImageData(0,0,u.getWidth(),u.getHeight()),n=0;n<e;n++)i=r[n],"function"==typeof i?(i.call(this,t),l.putImageData(t,0,0)):s.Util.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(e){s.Util.error("Unable to apply filter. "+e.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return u}return o}on(e,t){if(this._cache&&this._cache.delete(h),3===arguments.length)return this._delegate.apply(this,arguments);const n=e.split(m);for(let e=0;e<n.length;e++){const i=n[e].split("."),r=i[0],a=i[1]||"";this.eventListeners[r]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:a,handler:t})}return this}off(e,t){let n,i,r,a,o,s,u=(e||"").split(m),l=u.length;if(this._cache&&this._cache.delete(h),!e)for(i in this.eventListeners)this._off(i);for(n=0;n<l;n++)if(r=u[n],a=r.split("."),o=a[0],s=a[1],o)this.eventListeners[o]&&this._off(o,s,t);else for(i in this.eventListeners)this._off(i,s,t);return this}dispatchEvent(e){const t={target:this,type:e.type,evt:e};return this.fire(e.type,t),this}addEventListener(e,t){return this.on(e,function(e){t.call(this,e.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,t,n){const i=this;this.on(e,function(e){const r=e.target.findAncestors(t,!0,i);for(let t=0;t<r.length;t++)(e=s.Util.cloneObject(e)).currentTarget=r[t],n.call(r[t],e)})}remove(){return this.isDragging()&&this.stopDrag(),r.DD._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(l),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(v),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(f)}_remove(){this._clearCaches();const e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this.clearCache(),this}getAttr(e){const t="get"+s.Util._capitalize(e);return s.Util._isFunction(this[t])?this[t]():this.attrs[e]}getAncestors(){let e=this.getParent(),t=[];for(;e;)t.push(e),e=e.getParent();return t}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{let t,n;if(!e)return this;for(t in e)"children"!==t&&(n="set"+s.Util._capitalize(t),s.Util._isFunction(this[n])?this[n](e[t]):this._setAttr(t,e[t]))}),this}isListening(){return this._getCache(f,this._isListening)}_isListening(e){if(!this.listening())return!1;const t=this.getParent();return!t||t===e||this===e||t._isListening(e)}isVisible(){return this._getCache(b,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const t=this.getParent();return!t||t===e||this===e||t._isVisible(e)}shouldDrawHit(e,t=!1){if(e)return this._isVisible(e)&&this._isListening(e);const n=this.getLayer();let i=!1;r.DD._dragElements.forEach(e=>{"dragging"===e.dragStatus&&("Stage"===e.node.nodeType||e.node.getLayer()===n)&&(i=!0)});const a=!t&&!o.Konva.hitOnDragEnabled&&(i||o.Konva.isTransforming());return this.isListening()&&this.isVisible()&&!a}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){let e,t,n,i,r=this.getDepth(),a=this,o=0;const s=this.getStage();return"Stage"!==a.nodeType&&s&&function s(u){for(e=[],t=u.length,n=0;n<t;n++)i=u[n],o++,i.nodeType!==g&&(e=e.concat(i.getChildren().slice())),i._id===a._id&&(n=t);e.length>0&&e[0].getDepth()<=r&&s(e)}(s.getChildren()),o}getDepth(){let e=0,t=this.parent;for(;t;)e++,t=t.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(y),this._clearSelfAndDescendantCache(c)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){const e=this.getStage();if(!e)return null;const t=e.getPointerPosition();if(!t)return null;const n=this.getAbsoluteTransform().copy();return n.invert(),n.point(t)}getAbsolutePosition(e){let t=!1,n=this.parent;for(;n;){if(n.isCached()){t=!0;break}n=n.parent}t&&!e&&(e=!0);const i=this.getAbsoluteTransform(e).getMatrix(),r=new s.Transform,a=this.offset();return r.m=i.slice(),r.translate(a.x,a.y),r.getTranslation()}setAbsolutePosition(e){const{x:t,y:n,...i}=this._clearTransform();this.attrs.x=t,this.attrs.y=n,this._clearCache(y);const r=this._getAbsoluteTransform().copy();return r.invert(),r.translate(e.x,e.y),e={x:this.attrs.x+r.getTranslation().x,y:this.attrs.y+r.getTranslation().y},this._setTransform(i),this.setPosition({x:e.x,y:e.y}),this._clearCache(y),this._clearSelfAndDescendantCache(c),this}_setTransform(e){let t;for(t in e)this.attrs[t]=e[t]}_clearTransform(){const e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){let t=e.x,n=e.y,i=this.x(),r=this.y();return void 0!==t&&(i+=t),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this}_eachAncestorReverse(e,t){let n,i,r=[],a=this.getParent();if(!t||t._id!==this._id){for(r.unshift(this);a&&(!t||a._id!==t._id);)r.unshift(a),a=a.parent;for(n=r.length,i=0;i<n;i++)e(r[i])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return s.Util.warn("Node has no parent. moveToTop function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0)}moveUp(){if(!this.parent)return s.Util.warn("Node has no parent. moveUp function is ignored."),!1;const e=this.index;return e<this.parent.getChildren().length-1&&(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return s.Util.warn("Node has no parent. moveDown function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return s.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;const e=this.index;return e>0&&(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(e){if(!this.parent)return s.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&s.Util.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");const t=this.index;return this.parent.children.splice(t,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(l,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){let e=this.opacity();const t=this.getParent();return t&&!t._isUnderCache&&(e*=t.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){let e,t,n,i,r,a=this.getAttrs();const o={attrs:{},className:this.getClassName()};for(e in a)t=a[e],r=s.Util.isObject(t)&&!s.Util._isPlainObject(t)&&!s.Util._isArray(t),r||(n="function"==typeof this[e]&&this[e],delete a[e],i=n?n.call(this):null,a[e]=t,i!==t&&(o.attrs[e]=t));return s.Util._prepareToStringify(o)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,t,n){const i=[];t&&this._isMatch(e)&&i.push(this);let r=this.parent;for(;r;){if(r===n)return i;r._isMatch(e)&&i.push(r),r=r.parent}return i}isAncestorOf(e){return!1}findAncestor(e,t,n){return this.findAncestors(e,t,n)[0]}_isMatch(e){if(!e)return!1;if("function"==typeof e)return e(this);let t,n,i=e.replace(/ /g,"").split(","),r=i.length;for(t=0;t<r;t++)if(n=i[t],s.Util.isValidSelector(n)||(s.Util.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),s.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),s.Util.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){const e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(v,this._getStage)}_getStage(){const e=this.getParent();return e?e.getStage():null}fire(e,t={},n){return t.target=t.target||this,n?this._fireAndBubble(e,t):this._fire(e,t),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(c,this._getAbsoluteTransform)}_getAbsoluteTransform(e){let t;if(e)return t=new s.Transform,this._eachAncestorReverse(function(e){const n=e.transformsEnabled();"all"===n?t.multiply(e.getTransform()):"position"===n&&t.translate(e.x()-e.offsetX(),e.y()-e.offsetY())},e),t;{t=this._cache.get(c)||new s.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(t):t.reset();const e=this.transformsEnabled();if("all"===e)t.multiply(this.getTransform());else if("position"===e){const e=this.attrs.x||0,n=this.attrs.y||0,i=this.attrs.offsetX||0,r=this.attrs.offsetY||0;t.translate(e-i,n-r)}return t.dirty=!1,t}}getAbsoluteScale(e){let t=this;for(;t;)t._isUnderCache&&(e=t),t=t.getParent();const n=this.getAbsoluteTransform(e).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(y,this._getTransform)}_getTransform(){var e,t;const n=this._cache.get(y)||new s.Transform;n.reset();const i=this.x(),r=this.y(),a=o.Konva.getAngle(this.rotation()),u=null!==(e=this.attrs.scaleX)&&void 0!==e?e:1,l=null!==(t=this.attrs.scaleY)&&void 0!==t?t:1,h=this.attrs.skewX||0,c=this.attrs.skewY||0,d=this.attrs.offsetX||0,p=this.attrs.offsetY||0;return 0===i&&0===r||n.translate(i,r),0!==a&&n.rotate(a),0===h&&0===c||n.skew(h,c),1===u&&1===l||n.scale(u,l),0===d&&0===p||n.translate(-1*d,-1*p),n.dirty=!1,n}clone(e){let t,n,i,r,a,o=s.Util.cloneObject(this.attrs);for(t in e)o[t]=e[t];const u=new this.constructor(o);for(t in this.eventListeners)for(n=this.eventListeners[t],i=n.length,r=0;r<i;r++)a=n[r],a.name.indexOf("konva")<0&&(u.eventListeners[t]||(u.eventListeners[t]=[]),u.eventListeners[t].push(a));return u}_toKonvaCanvas(e){e=e||{};const t=this.getClientRect(),n=this.getStage(),r=void 0!==e.x?e.x:Math.floor(t.x),a=void 0!==e.y?e.y:Math.floor(t.y),o=e.pixelRatio||1,s=new i.SceneCanvas({width:e.width||Math.ceil(t.width)||(n?n.width():0),height:e.height||Math.ceil(t.height)||(n?n.height():0),pixelRatio:o}),u=s.getContext(),l=new i.SceneCanvas({width:s.width/s.pixelRatio+Math.abs(r),height:s.height/s.pixelRatio+Math.abs(a),pixelRatio:s.pixelRatio});return!1===e.imageSmoothingEnabled&&(u._context.imageSmoothingEnabled=!1),u.save(),(r||a)&&u.translate(-1*r,-1*a),this.drawScene(s,void 0,l),u.restore(),s}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){const t=(e=e||{}).mimeType||null,n=e.quality||null,i=this._toKonvaCanvas(e).toDataURL(t,n);return e.callback&&e.callback(i),i}toImage(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,s.Util._urlToImage(this.toDataURL(e),function(e){t(e),null==n||n(e)})}catch(e){n(e)}})}toBlob(e){return new Promise((t,n)=>{try{const n=null==e?void 0:e.callback;n&&delete e.callback,this.toCanvas(e).toBlob(e=>{t(e),null==n||n(e)},null==e?void 0:e.mimeType,null==e?void 0:e.quality)}catch(e){n(e)}})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():o.Konva.dragDistance}_off(e,t,n){let i,r,a,o=this.eventListeners[e];for(i=0;i<o.length;i++)if(r=o[i].name,a=o[i].handler,!("konva"===r&&"konva"!==t||t&&r!==t||n&&n!==a)){if(o.splice(i,1),0===o.length){delete this.eventListeners[e];break}i--}}_fireChangeEvent(e,t,n){this._fire(e+"Change",{oldVal:t,newVal:n})}addName(e){if(!this.hasName(e)){const t=this.name(),n=t?t+" "+e:e;this.name(n)}return this}hasName(e){if(!e)return!1;const t=this.name();return!!t&&-1!==(t||"").split(/\s/g).indexOf(e)}removeName(e){const t=(this.name()||"").split(/\s/g),n=t.indexOf(e);return-1!==n&&(t.splice(n,1),this.name(t.join(" "))),this}setAttr(e,t){const n=this["set"+s.Util._capitalize(e)];return s.Util._isFunction(n)?n.call(this,t):this._setAttr(e,t),this}_requestDraw(){if(o.Konva.autoDrawEnabled){const e=this.getLayer()||this.getStage();null==e||e.batchDraw()}}_setAttr(e,t){const n=this.attrs[e];(n!==t||s.Util.isObject(t))&&(null==t?delete this.attrs[e]:this.attrs[e]=t,this._shouldFireChangeEvents&&this._fireChangeEvent(e,n,t),this._requestDraw())}_setComponentAttr(e,t,n){let i;void 0!==n&&(i=this.attrs[e],i||(this.attrs[e]=this.getAttr(e)),this.attrs[e][t]=n,this._fireChangeEvent(e,i,n))}_fireAndBubble(e,t,n){t&&this.nodeType===g&&(t.target=this);const i=["mouseenter","mouseleave","pointerenter","pointerleave","touchenter","touchleave"];if(-1===i.indexOf(e)||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this._fire(e,t);const r=-1!==i.indexOf(e)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(t&&!t.cancelBubble||!t)&&this.parent&&this.parent.isListening()&&!r&&(n&&n.parent?this._fireAndBubble.call(this.parent,e,t,n):this._fireAndBubble.call(this.parent,e,t))}}_getProtoListeners(e){var t,n,i;const r=null!==(t=this._cache.get(h))&&void 0!==t?t:{};let a=null==r?void 0:r[e];if(void 0===a){a=[];let t=Object.getPrototypeOf(this);for(;t;){const r=null!==(i=null===(n=t.eventListeners)||void 0===n?void 0:n[e])&&void 0!==i?i:[];a.push(...r),t=Object.getPrototypeOf(t)}r[e]=a,this._cache.set(h,r)}return a}_fire(e,t){(t=t||{}).currentTarget=this,t.type=e;const n=this._getProtoListeners(e);if(n)for(let e=0;e<n.length;e++)n[e].handler.call(this,t);const i=this.eventListeners[e];if(i)for(let e=0;e<i.length;e++)i[e].handler.call(this,t)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){const t=e?e.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition();if(!n)return;const a=n._getPointerById(t)||n._changedPointerPositions[0]||i;r.DD._dragElements.set(this._id,{node:this,startPointerPos:a,offset:{x:a.x-i.x,y:a.y-i.y},dragStatus:"ready",pointerId:t})}startDrag(e,t=!0){r.DD._dragElements.has(this._id)||this._createDragElement(e),r.DD._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},t)}_setDragPosition(e,t){const n=this.getStage()._getPointerById(t.pointerId);if(!n)return;let i={x:n.x-t.offset.x,y:n.y-t.offset.y};const r=this.dragBoundFunc();if(void 0!==r){const t=r.call(this,i,e);t?i=t:s.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}stopDrag(e){const t=r.DD._dragElements.get(this._id);t&&(t.dragStatus="stopped"),r.DD._endDragBefore(e),r.DD._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=r.DD._dragElements.get(this._id);return!!e&&"dragging"===e.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){if(!(void 0===e.evt.button||o.Konva.dragButtons.indexOf(e.evt.button)>=0))return;if(this.isDragging())return;let t=!1;r.DD._dragElements.forEach(e=>{this.isAncestorOf(e.node)&&(t=!0)}),t||this._createDragElement(e)})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const e=r.DD._dragElements.get(this._id),t=e&&"dragging"===e.dragStatus,n=e&&"ready"===e.dragStatus;t?this.stopDrag():n&&r.DD._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const t=this.getStage();if(!t)return!1;const n={x:-e.x,y:-e.y,width:t.width()+2*e.x,height:t.height()+2*e.y};return s.Util.haveIntersection(n,this.getClientRect())}static create(e,t){return s.Util._isString(e)&&(e=JSON.parse(e)),this._createNode(e,t)}static _createNode(e,t){let n,i,r,a=S.prototype.getClassName.call(e),u=e.children;if(t&&(e.attrs.container=t),o.Konva[a]||(s.Util.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape"),n=new(0,o.Konva[a])(e.attrs),u)for(i=u.length,r=0;r<i;r++)n.add(S._createNode(u[r]));return n}}t.Node=S,S.prototype.nodeType="Node",S.prototype._attrsAffectingSize=[],S.prototype.eventListeners={},S.prototype.on.call(S.prototype,_,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(y),this._clearSelfAndDescendantCache(c))}),S.prototype.on.call(S.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(b)}),S.prototype.on.call(S.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(f)}),S.prototype.on.call(S.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(l)});const T=a.Factory.addGetterSetter;T(S,"zIndex"),T(S,"absolutePosition"),T(S,"position"),T(S,"x",0,(0,u.getNumberValidator)()),T(S,"y",0,(0,u.getNumberValidator)()),T(S,"globalCompositeOperation","source-over",(0,u.getStringValidator)()),T(S,"opacity",1,(0,u.getNumberValidator)()),T(S,"name","",(0,u.getStringValidator)()),T(S,"id","",(0,u.getStringValidator)()),T(S,"rotation",0,(0,u.getNumberValidator)()),a.Factory.addComponentsGetterSetter(S,"scale",["x","y"]),T(S,"scaleX",1,(0,u.getNumberValidator)()),T(S,"scaleY",1,(0,u.getNumberValidator)()),a.Factory.addComponentsGetterSetter(S,"skew",["x","y"]),T(S,"skewX",0,(0,u.getNumberValidator)()),T(S,"skewY",0,(0,u.getNumberValidator)()),a.Factory.addComponentsGetterSetter(S,"offset",["x","y"]),T(S,"offsetX",0,(0,u.getNumberValidator)()),T(S,"offsetY",0,(0,u.getNumberValidator)()),T(S,"dragDistance",void 0,(0,u.getNumberValidator)()),T(S,"width",0,(0,u.getNumberValidator)()),T(S,"height",0,(0,u.getNumberValidator)()),T(S,"listening",!0,(0,u.getBooleanValidator)()),T(S,"preventDefault",!0,(0,u.getBooleanValidator)()),T(S,"filters",void 0,function(e){return this._filterUpToDate=!1,e}),T(S,"visible",!0,(0,u.getBooleanValidator)()),T(S,"transformsEnabled","all",(0,u.getStringValidator)()),T(S,"size"),T(S,"dragBoundFunc"),T(S,"draggable",!1,(0,u.getBooleanValidator)()),a.Factory.backCompat(S,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"})},6756:(e,t,n)=>{const i=n(2726);function r(e,t){const n=e.a/255,i=t+'="'+e.hex+'"';return n<1?i+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function a(e,t,n){let i=e+t;return void 0!==n&&(i+=" "+n),i}t.render=function(e,t,n){const o=i.getOptions(t),s=e.modules.size,u=e.modules.data,l=s+2*o.margin,h=o.color.light.a?"<path "+r(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",c="<path "+r(o.color.dark,"stroke")+' d="'+function(e,t,n){let i="",r=0,o=!1,s=0;for(let u=0;u<e.length;u++){const l=Math.floor(u%t),h=Math.floor(u/t);l||o||(o=!0),e[u]?(s++,u>0&&l>0&&e[u-1]||(i+=o?a("M",l+n,.5+h+n):a("m",r,0),r=0,o=!1),l+1<t&&e[u+1]||(i+=a("h",s),s=0)):r++}return i}(u,s,o.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',p='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+d+' shape-rendering="crispEdges">'+h+c+"</svg>\n";return"function"==typeof n&&n(null,p),p}},6886:(e,t)=>{let n;const i=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];t.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},t.getSymbolTotalCodewords=function(e){return i[e]},t.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},t.setToSJISFunction=function(e){if("function"!=typeof e)throw new Error('"toSJISFunc" is not a valid function.');n=e},t.isKanjiModeEnabled=function(){return void 0!==n},t.toSJIS=function(e){return n(e)}},7007:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise(function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}g(e,t,a,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,r)})},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,a,o,l;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=u(e))>0&&o.length>r&&!o.warned){o.warned=!0;var h=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");h.name="MaxListenersExceededWarning",h.emitter=e,h.type=t,h.count=o.length,l=h,console&&console.warn&&console.warn(l)}return e}function h(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=h.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):f(r,r.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function r(a){i.once&&e.removeEventListener(t,r),n(a)})}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return u(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var u=a[e];if(void 0===u)return!1;if("function"==typeof u)i(u,this,t);else{var l=u.length,h=f(u,l);for(n=0;n<l;++n)i(h[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,c(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,c(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,r,a,o;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},a.prototype.listenerCount=p,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},7044:(e,t)=>{const n="[0-9]+";let i="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";i=i.replace(/u/g,"\\u");const r="(?:(?![A-Z0-9 $%*+\\-./:]|"+i+")(?:.|[\r\n]))+";t.KANJI=new RegExp(i,"g"),t.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),t.BYTE=new RegExp(r,"g"),t.NUMERIC=new RegExp(n,"g"),t.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const a=new RegExp("^"+i+"$"),o=new RegExp("^"+n+"$"),s=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");t.testKanji=function(e){return a.test(e)},t.testNumeric=function(e){return o.test(e)},t.testAlphanumeric=function(e){return s.test(e)}},7324:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stage=t.stages=void 0;const i=n(4060),r=n(4892),a=n(4473),o=n(8871),s=n(8604),u=n(1268),l=n(8871),h=n(8722),c="mouseleave",d="mouseover",p="mouseenter",f="mousemove",g="mousedown",m="mouseup",v="pointermove",y="pointerdown",b="pointerup",_="pointercancel",w="pointerout",S="pointerleave",T="pointerover",A="pointerenter",E="contextmenu",x="touchstart",C="touchend",k="touchmove",I="touchcancel",M="wheel",P=[[p,"_pointerenter"],[g,"_pointerdown"],[f,"_pointermove"],[m,"_pointerup"],[c,"_pointerleave"],[x,"_pointerdown"],[k,"_pointermove"],[C,"_pointerup"],[I,"_pointercancel"],[d,"_pointerover"],[M,"_wheel"],[E,"_contextmenu"],[y,"_pointerdown"],[v,"_pointermove"],[b,"_pointerup"],[_,"_pointercancel"],[S,"_pointerleave"],["lostpointercapture","_lostpointercapture"]],L={mouse:{[w]:"mouseout",[S]:c,[T]:d,[A]:p,[v]:f,[y]:g,[b]:m,[_]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[w]:"touchout",[S]:"touchleave",[T]:"touchover",[A]:"touchenter",[v]:k,[y]:x,[b]:C,[_]:I,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[w]:w,[S]:S,[T]:T,[A]:A,[v]:v,[y]:y,[b]:b,[_]:_,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},D=e=>e.indexOf("pointer")>=0?"pointer":e.indexOf("touch")>=0?"touch":"mouse",R=e=>{const t=D(e);return"pointer"===t?o.Konva.pointerEventsEnabled&&L.pointer:"touch"===t?L.touch:"mouse"===t?L.mouse:void 0};function N(e={}){return(e.clipFunc||e.clipWidth||e.clipHeight)&&i.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),e}t.stages=[];class O extends a.Container{constructor(e){super(N(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),t.stages.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{N(this.attrs)}),this._checkVisibility()}_validateAdd(e){const t="Layer"===e.getType(),n="FastLayer"===e.getType();t||n||i.Util.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if("string"==typeof e){let t;if("."===e.charAt(0)){const t=e.slice(1);e=document.getElementsByClassName(t)[0]}else t="#"!==e.charAt(0)?e:e.slice(1),e=document.getElementById(t);if(!e)throw"Can not find container in document with id "+t}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){const e=this.children,t=e.length;for(let n=0;n<t;n++)e[n].clear();return this}clone(e){return e||(e={}),e.container="undefined"!=typeof document&&document.createElement("div"),a.Container.prototype.clone.call(this,e)}destroy(){super.destroy();const e=this.content;e&&i.Util._isInDocument(e)&&this.container().removeChild(e);const n=t.stages.indexOf(this);return n>-1&&t.stages.splice(n,1),i.Util.releaseCanvas(this.bufferCanvas._canvas,this.bufferHitCanvas._canvas),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(i.Util.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(e){return this._pointerPositions.find(t=>t.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){(e=e||{}).x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();const t=new s.SceneCanvas({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),n=t.getContext()._context,i=this.children;return(e.x||e.y)&&n.translate(-1*e.x,-1*e.y),i.forEach(function(t){if(!t.isVisible())return;const i=t._toKonvaCanvas(e);n.drawImage(i._canvas,e.x,e.y,i.getWidth()/i.getPixelRatio(),i.getHeight()/i.getPixelRatio())}),t}getIntersection(e){if(!e)return null;const t=this.children;for(let n=t.length-1;n>=0;n--){const i=t[n].getIntersection(e);if(i)return i}return null}_resizeDOM(){const e=this.width(),t=this.height();this.content&&(this.content.style.width=e+"px",this.content.style.height=t+"px"),this.bufferCanvas.setSize(e,t),this.bufferHitCanvas.setSize(e,t),this.children.forEach(n=>{n.setSize({width:e,height:t}),n.draw()})}add(e,...t){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}super.add(e);const n=this.children.length;return n>5&&i.Util.warn("The stage has "+n+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),o.Konva.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return h.hasPointerCapture(e,this)}setPointerCapture(e){h.setPointerCapture(e,this)}releaseCapture(e){h.releaseCapture(e,this)}getLayers(){return this.children}_bindContentEvents(){o.Konva.isBrowser&&P.forEach(([e,t])=>{this.content.addEventListener(e,e=>{this[t](e)},{passive:!1})})}_pointerenter(e){this.setPointersPositions(e);const t=R(e.type);t&&this._fire(t.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const t=R(e.type);t&&this._fire(t.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let t=this[e+"targetShape"];return t&&!t.getStage()&&(t=null),t}_pointerleave(e){const t=R(e.type),n=D(e.type);if(!t)return;this.setPointersPositions(e);const i=this._getTargetShape(n),r=!(o.Konva.isDragging()||o.Konva.isTransforming())||o.Konva.hitOnDragEnabled;i&&r?(i._fireAndBubble(t.pointerout,{evt:e}),i._fireAndBubble(t.pointerleave,{evt:e}),this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(t.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(t.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=null,this._pointerPositions=[]}_pointerdown(e){const t=R(e.type),n=D(e.type);if(!t)return;this.setPointersPositions(e);let i=!1;this._changedPointerPositions.forEach(r=>{const a=this.getIntersection(r);if(u.DD.justDragged=!1,o.Konva["_"+n+"ListenClick"]=!0,!a||!a.isListening())return void(this[n+"ClickStartShape"]=void 0);o.Konva.capturePointerEventsEnabled&&a.setPointerCapture(r.id),this[n+"ClickStartShape"]=a,a._fireAndBubble(t.pointerdown,{evt:e,pointerId:r.id}),i=!0;const s=e.type.indexOf("touch")>=0;a.preventDefault()&&e.cancelable&&s&&e.preventDefault()}),i||this._fire(t.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}_pointermove(e){const t=R(e.type),n=D(e.type);if(!t)return;if(o.Konva.isDragging()&&u.DD.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e),(o.Konva.isDragging()||o.Konva.isTransforming())&&!o.Konva.hitOnDragEnabled)return;const i={};let r=!1;const a=this._getTargetShape(n);this._changedPointerPositions.forEach(o=>{const s=h.getCapturedShape(o.id)||this.getIntersection(o),u=o.id,l={evt:e,pointerId:u},c=a!==s;if(c&&a&&(a._fireAndBubble(t.pointerout,{...l},s),a._fireAndBubble(t.pointerleave,{...l},s)),s){if(i[s._id])return;i[s._id]=!0}s&&s.isListening()?(r=!0,c&&(s._fireAndBubble(t.pointerover,{...l},a),s._fireAndBubble(t.pointerenter,{...l},a),this[n+"targetShape"]=s),s._fireAndBubble(t.pointermove,{...l})):a&&(this._fire(t.pointerover,{evt:e,target:this,currentTarget:this,pointerId:u}),this[n+"targetShape"]=null)}),r||this._fire(t.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const t=R(e.type),n=D(e.type);if(!t)return;this.setPointersPositions(e);const i=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"],a={};let s=!1;this._changedPointerPositions.forEach(l=>{const c=h.getCapturedShape(l.id)||this.getIntersection(l);if(c){if(c.releaseCapture(l.id),a[c._id])return;a[c._id]=!0}const d=l.id,p={evt:e,pointerId:d};let f=!1;o.Konva["_"+n+"InDblClickWindow"]?(f=!0,clearTimeout(this[n+"DblTimeout"])):u.DD.justDragged||(o.Konva["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){o.Konva["_"+n+"InDblClickWindow"]=!1},o.Konva.dblClickWindow),c&&c.isListening()?(s=!0,this[n+"ClickEndShape"]=c,c._fireAndBubble(t.pointerup,{...p}),o.Konva["_"+n+"ListenClick"]&&i&&i===c&&(c._fireAndBubble(t.pointerclick,{...p}),f&&r&&r===c&&c._fireAndBubble(t.pointerdblclick,{...p}))):(this[n+"ClickEndShape"]=null,o.Konva["_"+n+"ListenClick"]&&this._fire(t.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:d}),f&&this._fire(t.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:d}))}),s||this._fire(t.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),o.Konva["_"+n+"ListenClick"]=!1,e.cancelable&&"touch"!==n&&"pointer"!==n&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(E,{evt:e}):this._fire(E,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);const t=this.getIntersection(this.getPointerPosition());t&&t.isListening()?t._fireAndBubble(M,{evt:e}):this._fire(M,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const t=h.getCapturedShape(e.pointerId)||this.getIntersection(this.getPointerPosition());t&&t._fireAndBubble(b,h.createEvent(e)),h.releaseCapture(e.pointerId)}_lostpointercapture(e){h.releaseCapture(e.pointerId)}setPointersPositions(e){const t=this._getContentPosition();let n=null,r=null;void 0!==(e=e||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,e=>{this._pointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,e=>{this._changedPointerPositions.push({id:e.identifier,x:(e.clientX-t.left)/t.scaleX,y:(e.clientY-t.top)/t.scaleY})})):(n=(e.clientX-t.left)/t.scaleX,r=(e.clientY-t.top)/t.scaleY,this.pointerPos={x:n,y:r},this._pointerPositions=[{x:n,y:r,id:i.Util._getFirstPointerId(e)}],this._changedPointerPositions=[{x:n,y:r,id:i.Util._getFirstPointerId(e)}])}_setPointerPosition(e){i.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};const e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new s.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new s.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!o.Konva.isBrowser)return;const e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}cache(){return i.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}t.Stage=O,O.prototype.nodeType="Stage",(0,l._registerNode)(O),r.Factory.addGetterSetter(O,"container"),o.Konva.isBrowser&&document.addEventListener("visibilitychange",()=>{t.stages.forEach(e=>{e.batchDraw()})})},7457:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FastLayer=void 0;const i=n(4060),r=n(6267),a=n(8871);class o extends r.Layer{constructor(e){super(e),this.listening(!1),i.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}t.FastLayer=o,o.prototype.nodeType="FastLayer",(0,a._registerNode)(o)},7518:(e,t,n)=>{const i=n(9953),r=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],a=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];t.getBlocksCount=function(e,t){switch(t){case i.L:return r[4*(e-1)+0];case i.M:return r[4*(e-1)+1];case i.Q:return r[4*(e-1)+2];case i.H:return r[4*(e-1)+3];default:return}},t.getTotalCodewordsCount=function(e,t){switch(t){case i.L:return a[4*(e-1)+0];case i.M:return a[4*(e-1)+1];case i.Q:return a[4*(e-1)+2];case i.H:return a[4*(e-1)+3];default:return}}},7583:(e,t,n)=>{const i=n(1333),r=n(157),a=n(7899),o=n(6756);function s(e,t,n,a,o){const s=[].slice.call(arguments,1),u=s.length,l="function"==typeof s[u-1];if(!l&&!i())throw new Error("Callback required as last argument");if(!l){if(u<1)throw new Error("Too few arguments provided");return 1===u?(n=t,t=a=void 0):2!==u||t.getContext||(a=n,n=t,t=void 0),new Promise(function(i,o){try{const o=r.create(n,a);i(e(o,t,a))}catch(e){o(e)}})}if(u<2)throw new Error("Too few arguments provided");2===u?(o=n,n=t,t=a=void 0):3===u&&(t.getContext&&void 0===o?(o=a,a=void 0):(o=a,a=n,n=t,t=void 0));try{const i=r.create(n,a);o(null,e(i,t,a))}catch(e){o(e)}}t.create=r.create,t.toCanvas=s.bind(null,a.render),t.toDataURL=s.bind(null,a.renderToDataURL),t.toString=s.bind(null,function(e,t,n){return o.render(e,n)})},7756:(e,t,n)=>{const i=n(6886).getSymbolSize;t.getPositions=function(e){const t=i(e);return[[0,0],[t-7,0],[0,t-7]]}},7899:(e,t,n)=>{const i=n(2726);t.render=function(e,t,n){let r=n,a=t;void 0!==r||t&&t.getContext||(r=t,t=void 0),t||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=i.getOptions(r);const o=i.getImageWidth(e.modules.size,r),s=a.getContext("2d"),u=s.createImageData(o,o);return i.qrToImageData(u.data,e,r),function(e,t,n){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=n,t.width=n,t.style.height=n+"px",t.style.width=n+"px"}(s,a,o),s.putImageData(u,0,0),a},t.renderToDataURL=function(e,n,i){let r=i;void 0!==r||n&&n.getContext||(r=n,n=void 0),r||(r={});const a=t.render(e,n,r),o=r.type||"image/png",s=r.rendererOpts||{};return a.toDataURL(o,s.quality)}},7949:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Group=void 0;const i=n(4060),r=n(4473),a=n(8871);class o extends r.Container{_validateAdd(e){const t=e.getType();"Group"!==t&&"Shape"!==t&&i.Util.throw("You may only add groups and shapes to groups.")}}t.Group=o,o.prototype.nodeType="Group",(0,a._registerNode)(o)},8228:(e,t,n)=>{"use strict";n.d(t,{A:()=>De});var i=n(663),r=n.n(i),a=n(3443),o=n(5155),s=n(1958),u=n(9696),l=n(317);function h(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,n="~";function i(){}function r(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,i,a,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,a||e,o),u=n?n+t:t;return e._events[u]?e._events[u].fn?e._events[u]=[e._events[u],s]:e._events[u].push(s):(e._events[u]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,i,r=[];if(0===this._eventsCount)return r;for(i in e=this._events)t.call(e,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,o=new Array(a);r<a;r++)o[r]=i[r].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,r,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var u,l,h=this._events[s],c=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),c){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,i),!0;case 4:return h.fn.call(h.context,t,i,r),!0;case 5:return h.fn.call(h.context,t,i,r,a),!0;case 6:return h.fn.call(h.context,t,i,r,a,o),!0}for(l=1,u=new Array(c-1);l<c;l++)u[l-1]=arguments[l];h.fn.apply(h.context,u)}else{var d,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(e,h[l].fn,void 0,!0),c){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,t);break;case 3:h[l].fn.call(h[l].context,t,i);break;case 4:h[l].fn.call(h[l].context,t,i,r);break;default:if(!u)for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];h[l].fn.apply(h[l].context,u)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,i,r){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||r&&!s.once||i&&s.context!==i||o(this,a);else{for(var u=0,l=[],h=s.length;u<h;u++)(s[u].fn!==t||r&&!s[u].once||i&&s[u].context!==i)&&l.push(s[u]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s}(c);var d=h(c.exports);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t,n){this.time=e,this.type=t,this.id=n}function g(e,t){for(e=e.toString();e.length<t;)e="0"+e;return e}function m(e,t){var n=[],i=Math.floor(e%1*Math.pow(10,t)),r=Math.floor(e),a=Math.floor(r/60),o=Math.floor(a/60);o>0&&n.push(o),n.push(a%60),n.push(r%60);for(var s=0;s<n.length;s++)n[s]=g(n[s],2);return n=n.join(":"),t>0&&(n+="."+g(i,t)),n}function v(e,t,n){return e<t?t:e>n?n:e}function y(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function b(e,t){for(var n in t)y(t,n)&&(e[n]=t[n]);return e}function _(e){return"number"==typeof e}function w(e){return"number"==typeof e&&Number.isFinite(e)}function S(e){return null!==e&&"object"===p(e)&&!Array.isArray(e)}function T(e){return"string"==typeof e}function A(e){return null==e}function E(e){return!0===e||!1===e}function x(e){return e instanceof HTMLElement}function C(e){return S(e)&&y(e,"linearGradientStart")&&y(e,"linearGradientEnd")&&y(e,"linearGradientColorStops")&&_(e.linearGradientStart)&&_(e.linearGradientEnd)&&function(e){return Array.isArray(e)}(e.linearGradientColorStops)&&2===e.linearGradientColorStops.length}function k(e){for(;null!==e.parent;){if(e.parent instanceof r().Layer)return e;e=e.parent}return null}f.POINT=0,f.SEGMENT_START=1,f.SEGMENT_END=2,f.sorter=function(e,t){return e.time-t.time};var I=/HeadlessChrome/.test(navigator.userAgent),M=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,P=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame,L={forward:{},reverse:{}};L.forward[f.POINT]=0,L.forward[f.SEGMENT_START]=1,L.forward[f.SEGMENT_END]=2,L.reverse[f.POINT]=0,L.reverse[f.SEGMENT_START]=2,L.reverse[f.SEGMENT_END]=1;var D={0:"points.enter",1:"segments.enter",2:"segments.exit"},R={};function N(e,t){switch(t.type){case f.POINT:return e.points.getPoint(t.id);case f.SEGMENT_START:case f.SEGMENT_END:return e.segments.getSegment(t.id);default:throw new Error("getPointOrSegment: id not found?")}}function O(e){this._cues=[],this._peaks=e,this._previousTime=-1,this._updateCues=this._updateCues.bind(this),this._onPlaying=this._onPlaying.bind(this),this._onSeeked=this._onSeeked.bind(this),this._onTimeUpdate=this._onTimeUpdate.bind(this),this._onAnimationFrame=this._onAnimationFrame.bind(this),this._rAFHandle=null,this._activeSegments={},this._attachEventHandlers()}function U(e){return function(t){return t.id===e}}R[0]="point",R[1]="segment",R[2]="segment",O.prototype._updateCues=function(){var e=this,t=e._peaks.points.getPoints(),n=e._peaks.segments.getSegments();e._cues.length=0,t.forEach(function(t){e._cues.push(new f(t.time,f.POINT,t.id))}),n.forEach(function(t){e._cues.push(new f(t.startTime,f.SEGMENT_START,t.id)),e._cues.push(new f(t.endTime,f.SEGMENT_END,t.id))}),e._cues.sort(f.sorter);var i=e._peaks.player.getCurrentTime();e._updateActiveSegments(i)},O.prototype._onUpdate=function(e,t){var n,i,r,a=e>t;a?(n=0,i=this._cues.length,r=1):(n=this._cues.length-1,i=-1,r=-1);for(var o=n;a?o<i:o>i;o+=r){var s=this._cues[o];if(a?s.time>t:s.time<t){if(a?s.time>e:s.time<e)break;var u=N(this._peaks,s),l=a?L.forward[s.type]:L.reverse[s.type];1===l?this._activeSegments[u.id]=u:2===l&&delete this._activeSegments[u.id];var h={time:e};h[R[l]]=u,this._peaks.emit(D[l],h)}}},O.prototype._onTimeUpdate=function(e){(I||navigator.webdriver||"object"!==("undefined"==typeof document?"undefined":p(document))||!("visibilityState"in document)||"visible"!==document.visibilityState)&&(this._peaks.player.isPlaying()&&!this._peaks.player.isSeeking()&&this._onUpdate(e,this._previousTime),this._previousTime=e)},O.prototype._onAnimationFrame=function(){var e=this._peaks.player.getCurrentTime();this._peaks.player.isSeeking()||this._onUpdate(e,this._previousTime),this._previousTime=e,this._peaks.player.isPlaying()&&(this._rAFHandle=M(this._onAnimationFrame))},O.prototype._onPlaying=function(){this._previousTime=this._peaks.player.getCurrentTime(),this._rAFHandle=M(this._onAnimationFrame)},O.prototype._onSeeked=function(e){this._previousTime=e,this._updateActiveSegments(e)},O.prototype._updateActiveSegments=function(e){var t=this,n=t._peaks.segments.getSegmentsAtTime(e);for(var i in t._activeSegments)y(t._activeSegments,i)&&(n.find(U(i))||(t._peaks.emit("segments.exit",{segment:t._activeSegments[i],time:e}),delete t._activeSegments[i]));n.forEach(function(n){n.id in t._activeSegments||(t._activeSegments[n.id]=n,t._peaks.emit("segments.enter",{segment:n,time:e}))})};var B=["points.update","points.dragmove","points.add","points.remove","points.remove_all","segments.update","segments.dragged","segments.add","segments.remove","segments.remove_all"];O.prototype._attachEventHandlers=function(){this._peaks.on("player.timeupdate",this._onTimeUpdate),this._peaks.on("player.playing",this._onPlaying),this._peaks.on("player.seeked",this._onSeeked);for(var e=0;e<B.length;e++)this._peaks.on(B[e],this._updateCues);this._updateCues()},O.prototype._detachEventHandlers=function(){this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.seeked",this._onSeeked);for(var e=0;e<B.length;e++)this._peaks.off(B[e],this._updateCues)},O.prototype.destroy=function(){this._rAFHandle&&(P(this._rAFHandle),this._rAFHandle=null),this._detachEventHandlers(),this._previousTime=-1};var F=["id","pid","time","labelText","color","editable"],j=["update","isVisible","peaks","pid"];function G(e,t){var n=t?"update()":"add()";if((!t||t&&y(e,"time"))&&!w(e.time))throw new TypeError("peaks.points."+n+": time should be a numeric value");if(e.time<0)throw new RangeError("peaks.points."+n+": time should not be negative");if(y(e,"labelText")&&!T(e.labelText))throw new TypeError("peaks.points."+n+": labelText must be a string");if(y(e,"editable")&&!E(e.editable))throw new TypeError("peaks.points."+n+": editable must be true or false");if(y(e,"color")&&!T(e.color)&&!C(e.color))throw new TypeError("peaks.points."+n+": color must be a string or a valid linear gradient object");j.forEach(function(t){if(y(e,t))throw new Error("peaks.points."+n+": invalid option name: "+t)}),F.forEach(function(t){if(y(e,"_"+t))throw new Error("peaks.points."+n+": invalid option name: _"+t)})}function H(e,t,n){this._peaks=e,this._pid=t,this._setUserData(n)}function V(e){this._peaks=e,this._points=[],this._pointsById={},this._pointsByPid={},this._pointIdCounter=0,this._pointPid=0}H.prototype._setUserData=function(e){for(var t in e)y(e,t)&&(-1===F.indexOf(t)?this[t]=e[t]:this["_"+t]=e[t])},Object.defineProperties(H.prototype,{id:{enumerable:!0,get:function(){return this._id}},pid:{enumerable:!0,get:function(){return this._pid}},time:{enumerable:!0,get:function(){return this._time}},labelText:{get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},editable:{enumerable:!0,get:function(){return this._editable}}}),H.prototype.update=function(e){if(G(e,!0),y(e,"id")){if(A(e.id))throw new TypeError("point.update(): invalid id");this._peaks.points.updatePointId(this,e.id)}this._setUserData(e),this._peaks.emit("points.update",this,e)},H.prototype.isVisible=function(e,t){return this.time>=e&&this.time<t},H.prototype._setTime=function(e){this._time=e},V.prototype._getNextPointId=function(){return"peaks.point."+this._pointIdCounter++},V.prototype._getNextPid=function(){return this._pointPid++},V.prototype._addPoint=function(e){this._points.push(e),this._pointsById[e.id]=e,this._pointsByPid[e.pid]=e},V.prototype._createPoint=function(e){var t={};b(t,e),A(t.id)&&(t.id=this._getNextPointId());var n=this._getNextPid();return function(e,t){A(e.labelText)&&(e.labelText=""),A(e.editable)&&(e.editable=!1),A(e.color)&&(e.color=t.pointMarkerColor)}(t,this._peaks.options),G(t,!1),new H(this._peaks,n,t)},V.prototype.getPoints=function(){return this._points},V.prototype.getPoint=function(e){return this._pointsById[e]},V.prototype.find=function(e,t){return this._points.filter(function(n){return n.isVisible(e,t)})},V.prototype.add=function(){var e=this,t=Array.isArray(arguments[0]),n=t?arguments[0]:Array.prototype.slice.call(arguments);return n=n.map(function(t){var n=e._createPoint(t);if(y(e._pointsById,n.id))throw new Error("peaks.points.add(): duplicate id");return n}),n.forEach(function(t){e._addPoint(t)}),this._peaks.emit("points.add",{points:n}),t?n:n[0]},V.prototype.updatePointId=function(e,t){if(this._pointsById[e.id]){if(this._pointsById[t])throw new Error("point.update(): duplicate id");delete this._pointsById[e.id],this._pointsById[t]=e}},V.prototype._findPoint=function(e){for(var t=[],n=0,i=this._points.length;n<i;n++)e(this._points[n])&&t.push(n);return t},V.prototype._removeIndexes=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n]-t.length,r=this._points.splice(i,1)[0];delete this._pointsById[r.id],delete this._pointsByPid[r.pid],t.push(r)}return t},V.prototype._removePoints=function(e){var t=this._findPoint(e),n=this._removeIndexes(t);return this._peaks.emit("points.remove",{points:n}),n},V.prototype.remove=function(e){return this._removePoints(function(t){return t===e})},V.prototype.removeById=function(e){return this._removePoints(function(t){return t.id===e})},V.prototype.removeByTime=function(e){return this._removePoints(function(t){return t.time===e})},V.prototype.removeAll=function(){this._points=[],this._pointsById={},this._pointsByPid={},this._peaks.emit("points.remove_all")};var W=["id","pid","startTime","endTime","labelText","color","borderColor","editable"],z=["update","isVisible","peaks","pid"];function K(e,t){var n=t?"update()":"add()";if(y(e,"startTime")&&!w(e.startTime))throw new TypeError("peaks.segments."+n+": startTime should be a valid number");if(y(e,"endTime")&&!w(e.endTime))throw new TypeError("peaks.segments."+n+": endTime should be a valid number");if(!(t||y(e,"startTime")&&y(e,"endTime")))throw new TypeError("peaks.segments."+n+": missing startTime or endTime");if(e.startTime<0)throw new RangeError("peaks.segments."+n+": startTime should not be negative");if(e.endTime<0)throw new RangeError("peaks.segments."+n+": endTime should not be negative");if(e.endTime<e.startTime)throw new RangeError("peaks.segments."+n+": endTime should not be less than startTime");if(y(e,"labelText")&&!T(e.labelText))throw new TypeError("peaks.segments."+n+": labelText must be a string");if(y(e,"editable")&&!E(e.editable))throw new TypeError("peaks.segments."+n+": editable must be true or false");if(y(e,"color")&&!T(e.color)&&!C(e.color))throw new TypeError("peaks.segments."+n+": color must be a string or a valid linear gradient object");if(y(e,"borderColor")&&!T(e.borderColor))throw new TypeError("peaks.segments."+n+": borderColor must be a string");z.forEach(function(t){if(y(e,t))throw new Error("peaks.segments."+n+": invalid option name: "+t)}),W.forEach(function(t){if(y(e,"_"+t))throw new Error("peaks.segments."+n+": invalid option name: _"+t)})}function X(e,t,n){this._peaks=e,this._pid=t,this._id=n.id,this._startTime=n.startTime,this._endTime=n.endTime,this._labelText=n.labelText,this._color=n.color,this._borderColor=n.borderColor,this._editable=n.editable,this._setUserData(n)}function Y(e){this._peaks=e,this._segments=[],this._segmentsById={},this._segmentsByPid={},this._segmentIdCounter=0,this._segmentPid=0,this._isInserting=!1}X.prototype._setUserData=function(e){for(var t in e)y(e,t)&&(-1===W.indexOf(t)?this[t]=e[t]:this["_"+t]=e[t])},Object.defineProperties(X.prototype,{id:{enumerable:!0,get:function(){return this._id}},pid:{enumerable:!0,get:function(){return this._pid}},startTime:{enumerable:!0,get:function(){return this._startTime}},endTime:{enumerable:!0,get:function(){return this._endTime}},labelText:{enumerable:!0,get:function(){return this._labelText}},color:{enumerable:!0,get:function(){return this._color}},borderColor:{enumerable:!0,get:function(){return this._borderColor}},editable:{enumerable:!0,get:function(){return this._editable}}}),X.prototype.update=function(e){if(K(e,!0),y(e,"id")){if(A(e.id))throw new TypeError("segment.update(): invalid id");this._peaks.segments.updateSegmentId(this,e.id)}this._setUserData(e),this._peaks.emit("segments.update",this,e)},X.prototype.isVisible=function(e,t){return this.startTime<t&&e<this.endTime},X.prototype._setStartTime=function(e){this._startTime=e},X.prototype._setEndTime=function(e){this._endTime=e},Y.prototype._getNextSegmentId=function(){return"peaks.segment."+this._segmentIdCounter++},Y.prototype._getNextPid=function(){return this._segmentPid++},Y.prototype._addSegment=function(e){this._segments.push(e),this._segmentsById[e.id]=e,this._segmentsByPid[e.pid]=e},Y.prototype._createSegment=function(e){var t={};b(t,e),A(t.id)&&(t.id=this._getNextSegmentId());var n=this._getNextPid();return function(e,t){A(e.color)&&(t.overlay?e.color=t.overlayColor:e.color=t.waveformColor),A(e.borderColor)&&(e.borderColor=t.overlayBorderColor),A(e.labelText)&&(e.labelText=""),A(e.editable)&&(e.editable=!1)}(t,this._peaks.options.segmentOptions),K(t,!1),new X(this._peaks,n,t)},Y.prototype.getSegments=function(){return this._segments},Y.prototype.getSegment=function(e){return this._segmentsById[e]},Y.prototype.getSegmentsAtTime=function(e){return this._segments.filter(function(t){return e>=t.startTime&&e<t.endTime})},Y.prototype.find=function(e,t){return this._segments.filter(function(n){return n.isVisible(e,t)})},Y.prototype._getSortedSegments=function(){return this._segments.slice().sort(function(e,t){return e.startTime-t.startTime})},Y.prototype.findPreviousSegment=function(e){var t=this._getSortedSegments(),n=t.findIndex(function(t){return t.id===e.id});if(-1!==n)return t[n-1]},Y.prototype.findNextSegment=function(e){var t=this._getSortedSegments(),n=t.findIndex(function(t){return t.id===e.id});if(-1!==n)return t[n+1]},Y.prototype.add=function(){var e=this,t=Array.isArray(arguments[0]),n=t?arguments[0]:Array.prototype.slice.call(arguments);return n=n.map(function(t){var n=e._createSegment(t);if(y(e._segmentsById,n.id))throw new Error("peaks.segments.add(): duplicate id");return n}),n.forEach(function(t){e._addSegment(t)}),this._peaks.emit("segments.add",{segments:n,insert:this._isInserting}),t?n:n[0]},Y.prototype.updateSegmentId=function(e,t){if(this._segmentsById[e.id]){if(this._segmentsById[t])throw new Error("segment.update(): duplicate id");delete this._segmentsById[e.id],this._segmentsById[t]=e}},Y.prototype._findSegment=function(e){for(var t=[],n=0,i=this._segments.length;n<i;n++)e(this._segments[n])&&t.push(n);return t},Y.prototype._removeIndexes=function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n]-t.length,r=this._segments.splice(i,1)[0];delete this._segmentsById[r.id],delete this._segmentsByPid[r.pid],t.push(r)}return t},Y.prototype._removeSegments=function(e){var t=this._findSegment(e),n=this._removeIndexes(t);return this._peaks.emit("segments.remove",{segments:n}),n},Y.prototype.remove=function(e){return this._removeSegments(function(t){return t===e})},Y.prototype.removeById=function(e){return this._removeSegments(function(t){return t.id===e})},Y.prototype.removeByTime=function(e,t){var n;return n=(t="number"==typeof t?t:0)>0?function(n){return n.startTime===e&&n.endTime===t}:function(t){return t.startTime===e},this._removeSegments(n)},Y.prototype.removeAll=function(){this._segments=[],this._segmentsById={},this._segmentsByPid={},this._peaks.emit("segments.remove_all")},Y.prototype.setInserting=function(e){this._isInserting=e},Y.prototype.isInserting=function(){return this._isInserting};var q=["OBJECT","TEXTAREA","INPUT","SELECT","OPTION"],Z=[32,9,37,39];function J(e){this.eventEmitter=e,this._handleKeyEvent=this._handleKeyEvent.bind(this),document.addEventListener("keydown",this._handleKeyEvent),document.addEventListener("keypress",this._handleKeyEvent),document.addEventListener("keyup",this._handleKeyEvent)}function Q(e){this._mediaElement=e}function $(e,t){this._eventEmitter=e,this._mediaElement=t,this._playerCanPlayHandler=this._playerCanPlayHandler.bind(this),this._playerErrorHandler=this._playerErrorHandler.bind(this)}function ee(e,t){this._peaks=e,this._playingSegment=!1,this._segment=null,this._loop=!1,this._playSegmentTimerCallback=this._playSegmentTimerCallback.bind(this),function(e){var t=function(e){for(var t=[],n=e;n;)Object.getOwnPropertyNames(n).forEach(function(e){t.push(e)}),n=Object.getPrototypeOf(n);return t}(e);["init","destroy","play","pause","isPlaying","isSeeking","getCurrentTime","getDuration","seek"].forEach(function(n){if(!t.includes(n))throw new TypeError("Peaks.init(): Player method "+n+" is undefined");if("function"!=typeof e[n])throw new TypeError("Peaks.init(): Player method "+n+" is not a function")})}(t),this._adapter=t}function te(e){this._options=e,this._draggable=e.editable}function ne(e){this._options=e,this._editable=e.editable}function ie(e){return"zoomview"===e.view?new ne(e):null}function re(e){return new s.EY({x:12,y:12,text:e.segment.labelText,textAlign:"center",fontFamily:e.fontFamily||"sans-serif",fontSize:e.fontSize||12,fontStyle:e.fontStyle||"normal",fill:"#000"})}function ae(e){return new te(e)}function oe(e,t){this._view=e,this._offset=t.highlightOffset,this._color=t.highlightColor,this._layer=new(r().Layer)({listening:!1}),this._highlightRect=null,this._startTime=null,this._endTime=null,this._strokeColor=t.highlightStrokeColor,this._opacity=t.highlightOpacity,this._cornerRadius=t.highlightCornerRadius}function se(e){this._point=e.point,this._marker=e.marker,this._draggable=e.draggable,this._onDragStart=e.onDragStart,this._onDragMove=e.onDragMove,this._onDragEnd=e.onDragEnd,this._dragBoundFunc=e.dragBoundFunc,this._onMouseEnter=e.onMouseEnter,this._onMouseLeave=e.onMouseLeave,this._group=new(r().Group)({name:"point-marker",point:this._point,draggable:this._draggable,dragBoundFunc:e.dragBoundFunc}),this._bindDefaultEventHandlers(),this._marker.init(this._group)}function ue(e,t,n){this._peaks=e,this._view=t,this._allowEditing=n,this._pointMarkers={},this._layer=new(r().Layer),this._onPointsDrag=this._onPointsDrag.bind(this),this._onPointMarkerDragStart=this._onPointMarkerDragStart.bind(this),this._onPointMarkerDragMove=this._onPointMarkerDragMove.bind(this),this._onPointMarkerDragEnd=this._onPointMarkerDragEnd.bind(this),this._pointMarkerDragBoundFunc=this._pointMarkerDragBoundFunc.bind(this),this._onPointMarkerMouseEnter=this._onPointMarkerMouseEnter.bind(this),this._onPointMarkerMouseLeave=this._onPointMarkerMouseLeave.bind(this),this._onPointsUpdate=this._onPointsUpdate.bind(this),this._onPointsAdd=this._onPointsAdd.bind(this),this._onPointsRemove=this._onPointsRemove.bind(this),this._onPointsRemoveAll=this._onPointsRemoveAll.bind(this),this._peaks.on("points.update",this._onPointsUpdate),this._peaks.on("points.add",this._onPointsAdd),this._peaks.on("points.remove",this._onPointsRemove),this._peaks.on("points.remove_all",this._onPointsRemoveAll),this._peaks.on("points.dragstart",this._onPointsDrag),this._peaks.on("points.dragmove",this._onPointsDrag),this._peaks.on("points.dragend",this._onPointsDrag)}function le(e,t,n){this._player=e,this._view=t,this._playheadPixel=0,this._playheadLineAnimation=null,this._playheadVisible=!1,this._playheadColor=n.playheadColor,this._playheadTextColor=n.playheadTextColor,this._playheadBackgroundColor=n.playheadBackgroundColor,this._playheadPadding=n.playheadPadding,this._playheadWidth=n.playheadWidth,this._playheadFontFamily=n.playheadFontFamily,this._playheadFontSize=n.playheadFontSize,this._playheadFontStyle=n.playheadFontStyle,this._playheadLayer=new(r().Layer),this._createPlayhead(),n.showPlayheadTime&&this._createPlayheadText(),this.fitToView(),this.zoomLevelChanged()}function he(e){this._options=e}function ce(e){var t=this;t._segment=e.segment,t._marker=e.marker,t._segmentShape=e.segmentShape,t._editable=e.editable,t._startMarker=e.startMarker,t._onDragStart=e.onDragStart,t._onDragMove=e.onDragMove,t._onDragEnd=e.onDragEnd,t._group=new(r().Group)({name:"segment-marker",segment:t._segment,draggable:t._editable,visible:t._editable,dragBoundFunc:function(n){return e.dragBoundFunc(t,n)}}),t._bindDefaultEventHandlers(),t._marker.init(t._group)}function de(e){this._color=e.color;var t={};if(T(e.color))t.fill=e.color;else{if(!C(e.color))throw new TypeError("Unknown type for color property");var n=e.view._height*(e.color.linearGradientStart/100),i=e.view._height*(e.color.linearGradientEnd/100);t.fillLinearGradientStartPointY=n,t.fillLinearGradientEndPointY=i,t.fillLinearGradientColorStops=[0,e.color.linearGradientColorStops[0],1,e.color.linearGradientColorStops[1]]}this._shape=new(r().Shape)(t),this._view=e.view,this._segment=e.segment,this._shape.sceneFunc(this._sceneFunc.bind(this))}J.prototype._handleKeyEvent=function(e){if(-1===q.indexOf(e.target.nodeName))if(Z.indexOf(e.type)>-1&&e.preventDefault(),"keydown"===e.type||"keypress"===e.type)switch(e.keyCode){case 32:this.eventEmitter.emit("keyboard.space");break;case 9:this.eventEmitter.emit("keyboard.tab")}else if("keyup"===e.type)switch(e.keyCode){case 37:e.shiftKey?this.eventEmitter.emit("keyboard.shift_left"):this.eventEmitter.emit("keyboard.left");break;case 39:e.shiftKey?this.eventEmitter.emit("keyboard.shift_right"):this.eventEmitter.emit("keyboard.right")}},J.prototype.destroy=function(){document.removeEventListener("keydown",this._handleKeyEvent),document.removeEventListener("keypress",this._handleKeyEvent),document.removeEventListener("keyup",this._handleKeyEvent)},Q.prototype._addMediaListener=function(e,t){this._listeners.push({type:e,callback:t}),this._mediaElement.addEventListener(e,t)},Q.prototype.init=function(e){var t,n=this;return n._eventEmitter=e,n._listeners=[],n._duration=n.getDuration(),n._addMediaListener("timeupdate",function(){n._eventEmitter.emit("player.timeupdate",n.getCurrentTime())}),n._addMediaListener("playing",function(){n._eventEmitter.emit("player.playing",n.getCurrentTime())}),n._addMediaListener("pause",function(){n._eventEmitter.emit("player.pause",n.getCurrentTime())}),n._addMediaListener("ended",function(){n._eventEmitter.emit("player.ended")}),n._addMediaListener("seeked",function(){n._eventEmitter.emit("player.seeked",n.getCurrentTime())}),n._addMediaListener("canplay",function(){n._eventEmitter.emit("player.canplay")}),n._addMediaListener("error",function(e){n._eventEmitter.emit("player.error",e.target.error)}),n._interval=null,(t=n._mediaElement).src||t.querySelector("source")?n._mediaElement.error&&n._mediaElement.error.code===MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED?Promise.reject(n._mediaElement.error):new Promise(function(e,t){function i(r){n._mediaElement.removeEventListener("loadedmetadata",i),n._mediaElement.removeEventListener("error",i),"loadedmetadata"===r.type?e():t(r.target.error)}n._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING?(n._mediaElement.addEventListener("loadedmetadata",i),n._mediaElement.addEventListener("error",i),n._mediaElement.load()):e()}):Promise.resolve()},Q.prototype.destroy=function(){for(var e=0;e<this._listeners.length;e++){var t=this._listeners[e];this._mediaElement.removeEventListener(t.type,t.callback)}this._listeners.length=0,this._mediaElement=null},Q.prototype.play=function(){return this._mediaElement.play()},Q.prototype.pause=function(){this._mediaElement.pause()},Q.prototype.isPlaying=function(){return!this._mediaElement.paused},Q.prototype.isSeeking=function(){return this._mediaElement.seeking},Q.prototype.getCurrentTime=function(){return this._mediaElement.currentTime},Q.prototype.getDuration=function(){return this._mediaElement.duration},Q.prototype.seek=function(e){this._mediaElement.currentTime=e},$.prototype.setSource=function(e,t){var n=this;return n._options=e,n._callback=t,n._eventEmitter.on("player.canplay",n._playerCanPlayHandler),n._eventEmitter.on("player.error",n._playerErrorHandler),new Promise(function(t,i){n._resolve=t,n._reject=i,n._eventEmitter.on("player.canplay",n._playerCanPlayHandler),n._eventEmitter.on("player.error",n._playerErrorHandler),n._mediaElement.setAttribute("src",e.mediaUrl),n._mediaElement.readyState===HTMLMediaElement.HAVE_NOTHING&&n._mediaElement.load()})},$.prototype._reset=function(){this._eventEmitter.removeListener("player.canplay",this._playerCanPlayHandler),this._eventEmitter.removeListener("player.error",this._playerErrorHandler)},$.prototype._playerCanPlayHandler=function(){this._reset(),this._resolve()},$.prototype._playerErrorHandler=function(e){this._reset(),this._reject(e)},Q.prototype.setSource=function(e){return e.mediaUrl?new $(this._eventEmitter,this._mediaElement).setSource(e):Promise.reject(new Error("peaks.setSource(): options must contain a mediaUrl when using mediaElement"))},ee.prototype.init=function(){return this._adapter.init(this._peaks)},ee.prototype.destroy=function(){this._adapter.destroy()},ee.prototype.play=function(){return this._adapter.play()},ee.prototype.pause=function(){this._adapter.pause()},ee.prototype.isPlaying=function(){return this._adapter.isPlaying()},ee.prototype.isSeeking=function(){return this._adapter.isSeeking()},ee.prototype.getCurrentTime=function(){return this._adapter.getCurrentTime()},ee.prototype.getDuration=function(){return this._adapter.getDuration()},ee.prototype.seek=function(e){w(e)?this._adapter.seek(e):this._peaks._logger("peaks.player.seek(): parameter must be a valid time, in seconds")},ee.prototype.playSegment=function(e,t){var n=this;return e&&w(e.startTime)&&w(e.endTime)?(n._segment=e,n._loop=t,n.seek(e.startTime),n._peaks.once("player.playing",function(){n._playingSegment||(n._playingSegment=!0,window.requestAnimationFrame(n._playSegmentTimerCallback))}),n.play()):Promise.reject(new Error("peaks.player.playSegment(): parameter must be a segment object"))},ee.prototype._playSegmentTimerCallback=function(){if(this.isPlaying()){if(this.getCurrentTime()>=this._segment.endTime){if(!this._loop)return this.pause(),this._peaks.emit("player.ended"),void(this._playingSegment=!1);this.seek(this._segment.startTime)}window.requestAnimationFrame(this._playSegmentTimerCallback)}else this._playingSegment=!1},ee.prototype._setSource=function(e){return this._adapter.setSource(e)},te.prototype.init=function(e){"zoomview"===this._options.view&&(this._label=new s.EY({x:2,y:0,text:this._options.point.labelText,textAlign:"left",fontFamily:this._options.fontFamily||"sans-serif",fontSize:this._options.fontSize||10,fontStyle:this._options.fontStyle||"normal",fill:"#000"})),this._handle=new o.r({x:-4.5,y:0,width:10,height:20,fill:this._options.color,visible:this._draggable}),this._line=new a.N({x:0,y:0,stroke:this._options.color,strokeWidth:1}),this._time=new s.EY({x:-24,y:0,text:this._options.layer.formatTime(this._options.point.time),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center"}),this._time.hide(),e.add(this._handle),e.add(this._line),this._label&&e.add(this._label),e.add(this._time),this.fitToView(),this.bindEventHandlers(e)},te.prototype.bindEventHandlers=function(e){var t=this;t._handle.on("mouseover touchstart",function(){t._draggable&&(t._time.setX(-24-t._time.getWidth()),t._time.show())}),t._handle.on("mouseout touchend",function(){t._draggable&&t._time.hide()}),e.on("dragstart",function(){t._time.setX(-24-t._time.getWidth()),t._time.show()}),e.on("dragend",function(){t._time.hide()})},te.prototype.fitToView=function(){var e=this._options.layer.getHeight();this._line.points([.5,0,.5,e]),this._label&&this._label.y(12),this._handle&&this._handle.y(e/2-10.5),this._time&&this._time.y(e/2-5)},te.prototype.update=function(e){void 0!==e.time&&this._time&&this._time.setText(this._options.layer.formatTime(e.time)),void 0!==e.labelText&&this._label&&this._label.text(e.labelText),void 0!==e.color&&(this._handle&&this._handle.fill(e.color),this._line.stroke(e.color)),void 0!==e.editable&&(this._draggable=e.editable,this._handle.visible(this._draggable))},ne.prototype.init=function(e){var t=this._options.startMarker?-24:24,n=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new s.EY({x:t,y:0,text:this._options.layer.formatTime(n),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center",visible:this._editable}),this._label.hide(),this._handle=new o.r({x:-4.5,y:0,width:10,height:20,fill:this._options.color,stroke:this._options.color,strokeWidth:1,visible:this._editable}),this._line=new a.N({x:0,y:0,stroke:this._options.color,strokeWidth:1,visible:this._editable}),e.add(this._label),e.add(this._line),e.add(this._handle),this.fitToView(),this.bindEventHandlers(e)},ne.prototype.bindEventHandlers=function(e){var t=this,n=t._options.startMarker?-24:24;e.on("dragstart",function(){t._options.startMarker&&t._label.setX(n-t._label.getWidth()),t._label.show()}),e.on("dragend",function(){t._label.hide()}),t._handle.on("mouseover touchstart",function(){t._options.startMarker&&t._label.setX(n-t._label.getWidth()),t._label.show()}),t._handle.on("mouseout touchend",function(){t._label.hide()})},ne.prototype.fitToView=function(){var e=this._options.layer.getHeight();this._label.y(e/2-5),this._handle.y(e/2-10.5),this._line.points([.5,0,.5,e])},ne.prototype.update=function(e){void 0!==e.startTime&&this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.startTime)),void 0===e.endTime||this._options.startMarker||this._label.text(this._options.layer.formatTime(e.endTime)),void 0!==e.editable&&(this._editable=e.editable,this._label.visible(this._editable),this._handle.visible(this._editable),this._line.visible(this._editable))},oe.prototype.addToStage=function(e){e.add(this._layer)},oe.prototype.showHighlight=function(e,t){this._highlightRect||this._createHighlightRect(e,t),this._update(e,t)},oe.prototype._update=function(e,t){this._startTime=e,this._endTime=t;var n=this._view.timeToPixels(e),i=this._view.timeToPixels(t);this._highlightRect.setAttrs({x:n,width:i-n})},oe.prototype._createHighlightRect=function(e,t){this._startTime=e,this._endTime=t;var n=this._view.timeToPixels(e),i=this._view.timeToPixels(t);this._highlightRect=new o.r({x:n,y:0,width:i-n,height:0,stroke:this._strokeColor,strokeWidth:1,fill:this._color,opacity:this._opacity,cornerRadius:this._cornerRadius}),this.fitToView(),this._layer.add(this._highlightRect)},oe.prototype.removeHighlight=function(){this._highlightRect&&(this._highlightRect.destroy(),this._highlightRect=null)},oe.prototype.updateHighlight=function(){this._highlightRect&&this._update(this._startTime,this._endTime)},oe.prototype.fitToView=function(){if(this._highlightRect){var e=this._view.getHeight(),t=v(this._offset,0,Math.floor(e/2));this._highlightRect.setAttrs({y:t,height:e-2*t})}},se.prototype._bindDefaultEventHandlers=function(){var e=this;e._group.on("dragstart",function(t){e._onDragStart(t,e._point)}),e._group.on("dragmove",function(t){e._onDragMove(t,e._point)}),e._group.on("dragend",function(t){e._onDragEnd(t,e._point)}),e._group.on("mouseenter",function(t){e._onMouseEnter(t,e._point)}),e._group.on("mouseleave",function(t){e._onMouseLeave(t,e._point)})},se.prototype.addToLayer=function(e){e.add(this._group)},se.prototype.fitToView=function(){this._marker.fitToView()},se.prototype.getPoint=function(){return this._point},se.prototype.getX=function(){return this._group.getX()},se.prototype.setX=function(e){this._group.setX(e)},se.prototype.getWidth=function(){return this._group.getWidth()},se.prototype.getAbsolutePosition=function(){return this._group.getAbsolutePosition()},se.prototype.update=function(e){void 0!==e.editable&&this._group.draggable(e.editable),this._marker.update&&this._marker.update(e)},se.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()},ue.prototype.addToStage=function(e){e.add(this._layer)},ue.prototype.enableEditing=function(e){this._allowEditing=e},ue.prototype.getPointMarker=function(e){return this._pointMarkers[e.pid]},ue.prototype.formatTime=function(e){return this._view.formatTime(e)},ue.prototype._onPointsUpdate=function(e,t){var n=this._view.getStartTime(),i=this._view.getEndTime(),r=this.getPointMarker(e),a=e.isVisible(n,i);if(r&&!a)this._removePoint(e);else if(!r&&a)this._updatePoint(e);else if(r&&a){if(y(t,"time")){var o=this._view.timeToPixels(e.time)-this._view.getFrameOffset();r.setX(o)}r.update(t)}},ue.prototype._onPointsAdd=function(e){var t=this,n=t._view.getStartTime(),i=t._view.getEndTime();e.points.forEach(function(e){e.isVisible(n,i)&&t._updatePoint(e)})},ue.prototype._onPointsRemove=function(e){var t=this;e.points.forEach(function(e){t._removePoint(e)})},ue.prototype._onPointsRemoveAll=function(){this._layer.removeChildren(),this._pointMarkers={}},ue.prototype._createPointMarker=function(e){var t=this._allowEditing&&e.editable;return new se({point:e,draggable:t,marker:this._peaks.options.createPointMarker({point:e,editable:t,color:e.color,fontFamily:this._peaks.options.fontFamily||"sans-serif",fontSize:this._peaks.options.fontSize||10,fontStyle:this._peaks.options.fontStyle||"normal",layer:this,view:this._view.getName()}),onDragStart:this._onPointMarkerDragStart,onDragMove:this._onPointMarkerDragMove,onDragEnd:this._onPointMarkerDragEnd,dragBoundFunc:this._pointMarkerDragBoundFunc,onMouseEnter:this._onPointMarkerMouseEnter,onMouseLeave:this._onPointMarkerMouseLeave})},ue.prototype.getHeight=function(){return this._view.getHeight()},ue.prototype._addPointMarker=function(e){var t=this._createPointMarker(e);return this._pointMarkers[e.pid]=t,t.addToLayer(this._layer),t},ue.prototype._onPointsDrag=function(e){this._updatePoint(e.point).update({time:e.point.time})},ue.prototype._onPointMarkerMouseEnter=function(e,t){this._peaks.emit("points.mouseenter",{point:t,evt:e.evt})},ue.prototype._onPointMarkerMouseLeave=function(e,t){this._peaks.emit("points.mouseleave",{point:t,evt:e.evt})},ue.prototype._onPointMarkerDragStart=function(e,t){this._dragPointMarker=this.getPointMarker(t),this._peaks.emit("points.dragstart",{point:t,evt:e.evt})},ue.prototype._onPointMarkerDragMove=function(e,t){var n=this._pointMarkers[t.pid],i=n.getX()+n.getWidth();t._setTime(this._view.pixelOffsetToTime(i)),this._peaks.emit("points.dragmove",{point:t,evt:e.evt})},ue.prototype._onPointMarkerDragEnd=function(e,t){this._dragPointMarker=null,this._peaks.emit("points.dragend",{point:t,evt:e.evt})},ue.prototype._pointMarkerDragBoundFunc=function(e){return{x:v(e.x,0,this._view.getWidth()),y:this._dragPointMarker.getAbsolutePosition().y}},ue.prototype.updatePoints=function(e,t){this._peaks.points.find(e,t).forEach(this._updatePoint.bind(this)),this._removeInvisiblePoints(e,t)},ue.prototype._updatePoint=function(e){var t=this.getPointMarker(e);t||(t=this._addPointMarker(e));var n=this._view.timeToPixels(e.time)-this._view.getFrameOffset();return t.setX(n),t},ue.prototype._removeInvisiblePoints=function(e,t){for(var n in this._pointMarkers)if(y(this._pointMarkers,n)){var i=this._pointMarkers[n].getPoint();i.isVisible(e,t)||this._removePoint(i)}},ue.prototype._removePoint=function(e){var t=this.getPointMarker(e);t&&(t.destroy(),delete this._pointMarkers[e.pid])},ue.prototype.setVisible=function(e){this._layer.setVisible(e)},ue.prototype.destroy=function(){this._peaks.off("points.update",this._onPointsUpdate),this._peaks.off("points.add",this._onPointsAdd),this._peaks.off("points.remove",this._onPointsRemove),this._peaks.off("points.remove_all",this._onPointsRemoveAll),this._peaks.off("points.dragstart",this._onPointsDrag),this._peaks.off("points.dragmove",this._onPointsDrag),this._peaks.off("points.dragend",this._onPointsDrag)},ue.prototype.fitToView=function(){for(var e in this._pointMarkers)y(this._pointMarkers,e)&&this._pointMarkers[e].fitToView()},ue.prototype.draw=function(){this._layer.draw()},le.prototype.addToStage=function(e){e.add(this._playheadLayer)},le.prototype.zoomLevelChanged=function(){var e=this._view.timeToPixels(1);if(this._useAnimation=e>=5,this._useAnimation)this._player.isPlaying()&&!this._playheadLineAnimation&&this._start();else if(this._playheadLineAnimation){var t=this._player.getCurrentTime();this.stop(t)}},le.prototype.fitToView=function(){var e=this._view.getHeight();this._playheadLine.points([.5,0,.5,e]),this._playheadText&&this._playheadText.y(12)},le.prototype._createPlayhead=function(){this._playheadLine=new a.N({stroke:this._playheadColor,strokeWidth:this._playheadWidth}),this._playheadGroup=new(r().Group)({x:0,y:0}),this._playheadGroup.add(this._playheadLine),this._playheadLayer.add(this._playheadGroup)},le.prototype._createPlayheadText=function(){var e=this,t=e._player.getCurrentTime(),n=e._view.formatTime(t);e._playheadText=new s.EY({x:0,y:0,padding:e._playheadPadding,text:n,fontSize:e._playheadFontSize,fontFamily:e._playheadFontFamily,fontStyle:e._playheadFontStyle,fill:e._playheadTextColor,align:"right",sceneFunc:function(t,n){var i=n.width(),r=n.height()+2*e._playheadPadding;t.fillStyle=e._playheadBackgroundColor,t.fillRect(0,-e._playheadPadding,i,r),n._sceneFunc(t)}}),e._playheadGroup.add(e._playheadText)},le.prototype.updatePlayheadTime=function(e){this._syncPlayhead(e),this._player.isPlaying()&&this._start()},le.prototype._syncPlayhead=function(e){var t=this._view.timeToPixels(e),n=this._view.getFrameOffset(),i=this._view.getWidth(),r=t>=n&&t<=n+i;if(this._playheadPixel=t,r){var a=this._playheadPixel-n;if(this._playheadVisible||(this._playheadVisible=!0,this._playheadGroup.show()),this._playheadGroup.setX(a),this._playheadText){var o=this._view.formatTime(e),s=this._playheadText.width();this._playheadText.setText(o),s+a>i-2?this._playheadText.setX(-s):s+a<i&&this._playheadText.setX(0)}}else this._playheadVisible&&(this._playheadVisible=!1,this._playheadGroup.hide());this._view.playheadPosChanged&&this._view.playheadPosChanged(e)},le.prototype._start=function(){var e=this;if(e._playheadLineAnimation&&(e._playheadLineAnimation.stop(),e._playheadLineAnimation=null),e._useAnimation){var t=null;e._playheadLineAnimation=new u.Animation(function(){var n=e._player.getCurrentTime(),i=e._view.timeToPixels(n);i!==t&&(e._syncPlayhead(n),t=i)},e._playheadLayer),e._playheadLineAnimation.start()}},le.prototype.stop=function(e){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null),this._syncPlayhead(e)},le.prototype.getPlayheadPixel=function(){return this._playheadPixel},le.prototype.showPlayheadTime=function(e){e?this._playheadText||(this._createPlayheadText(this._playheadTextColor,this._playheadBackgroundColor,this._playheadPadding),this.fitToView()):this._playheadText&&(this._playheadText.remove(),this._playheadText.destroy(),this._playheadText=null)},le.prototype.updatePlayheadText=function(){if(this._playheadText){var e=this._player.getCurrentTime(),t=this._view.formatTime(e);this._playheadText.setText(t)}},le.prototype.destroy=function(){this._playheadLineAnimation&&(this._playheadLineAnimation.stop(),this._playheadLineAnimation=null)},he.prototype.init=function(e){var t=this._options.startMarker?-24:24,n=this._options.startMarker?this._options.segment.startTime:this._options.segment.endTime;this._label=new s.EY({x:t,y:0,text:this._options.layer.formatTime(n),fontFamily:this._options.fontFamily,fontSize:this._options.fontSize,fontStyle:this._options.fontStyle,fill:"#000",textAlign:"center",visible:!1}),this._handle=new o.r({x:-4.5,y:0,width:10,height:20}),e.add(this._label),e.add(this._handle),this.fitToView(),this.bindEventHandlers(e)},he.prototype.bindEventHandlers=function(e){var t=this,n=t._options.startMarker?-24:24;e.on("dragstart",function(){t._options.startMarker&&t._label.setX(n-t._label.getWidth()),t._label.show()}),e.on("dragend",function(){t._label.hide()}),t._handle.on("mouseover touchstart",function(){t._options.startMarker&&t._label.setX(n-t._label.getWidth()),t._label.show(),document.body.style.cursor="ew-resize"}),t._handle.on("mouseout touchend",function(){t._label.hide(),document.body.style.cursor="default"})},he.prototype.fitToView=function(){var e=this._options.layer.getHeight(),t=this._options.segmentOptions.overlayOffset,n=v(0,e-2*t);this._label.y(e/2-5),this._handle.y(t),this._handle.height(n)},he.prototype.update=function(e){void 0!==e.startTime&&this._options.startMarker&&this._label.text(this._options.layer.formatTime(e.startTime)),void 0===e.endTime||this._options.startMarker||this._label.text(this._options.layer.formatTime(e.endTime))},ce.prototype._bindDefaultEventHandlers=function(){var e=this;e._group.on("dragstart",function(t){e._onDragStart(e,t)}),e._group.on("dragmove",function(t){e._onDragMove(e,t)}),e._group.on("dragend",function(t){e._onDragEnd(e,t)})},ce.prototype.addToLayer=function(e){e.add(this._group)},ce.prototype.moveToTop=function(){this._group.moveToTop()},ce.prototype.fitToView=function(){this._marker.fitToView()},ce.prototype.getSegment=function(){return this._segment},ce.prototype.getX=function(){return this._group.getX()},ce.prototype.setX=function(e){this._group.setX(e)},ce.prototype.getWidth=function(){return this._group.getWidth()},ce.prototype.getAbsolutePosition=function(){return this._group.getAbsolutePosition()},ce.prototype.isStartMarker=function(){return this._startMarker},ce.prototype.update=function(e){void 0!==e.editable&&(this._group.visible(e.editable),this._group.draggable(e.editable)),this._marker.update&&this._marker.update(e)},ce.prototype.destroy=function(){this._marker.destroy&&this._marker.destroy(),this._group.destroyChildren(),this._group.destroy()},ce.prototype.startDrag=function(){this._group.startDrag()},ce.prototype.stopDrag=function(){this._group.stopDrag()},de.prototype.getX=function(){return this._shape.getX()},de.prototype.setX=function(e){return this._shape.setX(e)},de.prototype.setSegment=function(e){this._segment=e},de.prototype.setWaveformColor=function(e){if(T(e))this._shape.fill(e),this._shape.fillLinearGradientStartPointY(null),this._shape.fillLinearGradientEndPointY(null),this._shape.fillLinearGradientColorStops(null);else{if(!C(e))throw new TypeError("Unknown type for color property");this._shape.fill(null);var t=this._view._height*(e.linearGradientStart/100),n=this._view._height*(e.linearGradientEnd/100);this._shape.fillLinearGradientStartPointY(t),this._shape.fillLinearGradientEndPointY(n),this._shape.fillLinearGradientColorStops([0,e.linearGradientColorStops[0],1,e.linearGradientColorStops[1]])}},de.prototype.fitToView=function(){this.setWaveformColor(this._color)},de.prototype._sceneFunc=function(e){var t=this._view.getFrameOffset(),n=this._view.getWidth(),i=this._view.getHeight();this._drawWaveform(e,this._view.getWaveformData(),t,this._segment?this._view.timeToPixels(this._segment.startTime):t,this._segment?this._view.timeToPixels(this._segment.endTime):t+n,n,i)},de.prototype._drawWaveform=function(e,t,n,i,r,a,o){i<n&&(i=n);var s=n+a;r>s&&(r=s),r>t.length-1&&(r=t.length-1);for(var u=t.channels,l=0,h=Math.floor(o/u),c=0;c<u;c++)c===u-1&&(h=o-(u-1)*h),this._drawChannel(e,t.channel(c),n,i,r,l,h),l+=h},de.prototype._drawChannel=function(e,t,n,i,r,a,o){var s,u,l,h,c=this._view.getAmplitudeScale();for(e.beginPath(),s=i;s<=r;s++)u=t.min_sample(s),l=s-n+.5,h=a+de.scaleY(u,o,c)+.5,e.lineTo(l,h);for(s=r;s>=i;s--)u=t.max_sample(s),l=s-n+.5,h=a+de.scaleY(u,o,c)+1,e.lineTo(l,h);e.closePath(),e.fillShape(this._shape)},de.prototype.addToLayer=function(e){e.add(this._shape)},de.prototype.destroy=function(){this._shape.destroy(),this._shape=null},de.prototype.on=function(e,t){this._shape.on(e,t)},de.prototype.off=function(e,t){this._shape.off(e,t)},de.scaleY=function(e,t,n){var i=-(t-1)*(e*n+128)/255+(t-1);return v(Math.floor(i),0,t-1)};var pe="sans-serif",fe="normal";function ge(e,t,n,i){this._segment=e,this._peaks=t,this._layer=n,this._view=i,this._label=null,this._startMarker=null,this._endMarker=null,this._color=e.color,this._borderColor=e.borderColor,this._draggable=this._segment.editable&&this._view.isSegmentDraggingEnabled(),this._dragging=!1;var a=i.getViewOptions().segmentOptions;this._overlayOffset=a.overlayOffset,a.overlay||(this._waveformShape=new de({color:e.color,view:i,segment:e})),this._onMouseEnter=this._onMouseEnter.bind(this),this._onMouseLeave=this._onMouseLeave.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._dragBoundFunc=this._dragBoundFunc.bind(this),this._onSegmentDragStart=this._onSegmentDragStart.bind(this),this._onSegmentDragMove=this._onSegmentDragMove.bind(this),this._onSegmentDragEnd=this._onSegmentDragEnd.bind(this),this._onSegmentMarkerDragStart=this._onSegmentMarkerDragStart.bind(this),this._onSegmentMarkerDragMove=this._onSegmentMarkerDragMove.bind(this),this._onSegmentMarkerDragEnd=this._onSegmentMarkerDragEnd.bind(this),this._segmentMarkerDragBoundFunc=this._segmentMarkerDragBoundFunc.bind(this),this._label=this._peaks.options.createSegmentLabel({segment:e,view:this._view.getName(),layer:this._layer,fontFamily:this._peaks.options.fontFamily,fontSize:this._peaks.options.fontSize,fontStyle:this._peaks.options.fontStyle}),this._label&&this._label.hide();var o,s,u,l,h,c=this._view.timeToPixelOffset(this._segment.startTime),d=this._view.timeToPixelOffset(this._segment.endTime),p=v(0,this._view.getHeight()-2*this._overlayOffset);this._overlay=new(r().Group)({name:"segment-overlay",segment:this._segment,x:c,y:0,width:d-c,height:this._view.getHeight(),clipX:0,clipY:this._overlayOffset,clipWidth:d-c,clipHeight:p,draggable:this._draggable,dragBoundFunc:this._dragBoundFunc}),a.overlay&&(o=this._borderColor||a.overlayBorderColor,s=a.overlayBorderWidth,u=this._color||a.overlayColor,l=a.overlayOpacity,h=a.overlayCornerRadius),this._overlayRect=new(r().Rect)({x:0,y:this._overlayOffset,width:d-c,stroke:o,strokeWidth:s,height:p,fill:u,opacity:l,cornerRadius:h}),this._overlay.add(this._overlayRect),a.overlay&&(this._overlayText=new(r().Text)({x:0,y:this._overlayOffset,text:this._segment.labelText,fontFamily:a.overlayFontFamily,fontSize:a.overlayFontSize,fontStyle:a.overlayFontStyle,fill:a.overlayLabelColor,listening:!1,align:a.overlayLabelAlign,width:d-c,verticalAlign:a.overlayLabelVerticalAlign,height:p,padding:a.overlayLabelPadding}),this._overlay.add(this._overlayText)),this._overlay.on("mouseenter",this._onMouseEnter),this._overlay.on("mouseleave",this._onMouseLeave),this._overlay.on("mousedown",this._onMouseDown),this._overlay.on("mouseup",this._onMouseUp),this._draggable&&(this._overlay.on("dragstart",this._onSegmentDragStart),this._overlay.on("dragmove",this._onSegmentDragMove),this._overlay.on("dragend",this._onSegmentDragEnd)),this._createMarkers()}function me(e){return new he(e)}function ve(e){return e.endTime-e.startTime}function ye(e,t,n){this._peaks=e,this._view=t,this._allowEditing=n,this._segmentShapes={},this._layer=new(r().Layer),this._onSegmentsUpdate=this._onSegmentsUpdate.bind(this),this._onSegmentsAdd=this._onSegmentsAdd.bind(this),this._onSegmentsRemove=this._onSegmentsRemove.bind(this),this._onSegmentsRemoveAll=this._onSegmentsRemoveAll.bind(this),this._onSegmentsDragged=this._onSegmentsDragged.bind(this),this._peaks.on("segments.update",this._onSegmentsUpdate),this._peaks.on("segments.add",this._onSegmentsAdd),this._peaks.on("segments.remove",this._onSegmentsRemove),this._peaks.on("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.on("segments.dragged",this._onSegmentsDragged)}function be(e,t){var n=this;n._axisGridlineColor=t.axisGridlineColor,n._axisLabelColor=t.axisLabelColor,n._showAxisLabels=t.showAxisLabels,n._axisTopMarkerHeight=t.axisTopMarkerHeight,n._axisBottomMarkerHeight=t.axisBottomMarkerHeight,t.formatAxisTime?n._formatAxisTime=t.formatAxisTime:n._formatAxisTime=function(e){return m(e,0)},n._axisLabelFont=be._buildFontString(t.fontFamily,t.fontSize,t.fontStyle),n._axisShape=new(r().Shape)({sceneFunc:function(t){n._drawAxis(t,e)}})}function _e(e,t,n,i){var a=this;a._container=t,a._peaks=n,a._options=n.options,a._viewOptions=i,a._originalWaveformData=e,a._data=e,a._frameOffset=0,a._width=t.clientWidth,a._height=t.clientHeight,a._amplitudeScale=1,a._waveformColor=a._viewOptions.waveformColor,a._playedWaveformColor=a._viewOptions.playedWaveformColor,a._timeLabelPrecision=a._viewOptions.timeLabelPrecision,a._viewOptions.formatPlayheadTime?a._formatPlayheadTime=a._viewOptions.formatPlayheadTime:a._formatPlayheadTime=function(e){return m(e,a._timeLabelPrecision)},a._enableSeek=!0,a.initWaveform(),r().showWarnings=!1,a._stage=new(r().Stage)({container:t,width:a._width,height:a._height}),a._createWaveform(),a._viewOptions.enableSegments&&(a._segmentsLayer=new ye(n,a,a._viewOptions.enableEditing),a._segmentsLayer.addToStage(a._stage)),a._viewOptions.enablePoints&&(a._pointsLayer=new ue(n,a,a._viewOptions.enableEditing),a._pointsLayer.addToStage(a._stage)),a.initHighlightLayer(),a._createAxisLabels(),a._playheadLayer=new le(a._peaks.player,a,a._viewOptions),a._playheadLayer.addToStage(a._stage),a._onClick=a._onClick.bind(a),a._onDblClick=a._onDblClick.bind(a),a._onContextMenu=a._onContextMenu.bind(a),a._stage.on("click",a._onClick),a._stage.on("dblclick",a._onDblClick),a._stage.on("contextmenu",a._onContextMenu)}function we(e,t){this._stage=e,this._handlers=t,this._dragging=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseUp=this._mouseUp.bind(this),this._mouseMove=this._mouseMove.bind(this),this._stage.on("mousedown",this._mouseDown),this._stage.on("touchstart",this._mouseDown),this._lastMouseClientX=null}function Se(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._mouseDragHandler=new we(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove})}function Te(e,t,n){var i=this;_e.call(i,e,t,n,n.options.overview),i._onTimeUpdate=i._onTimeUpdate.bind(i),i._onPlaying=i._onPlaying.bind(i),i._onPause=i._onPause.bind(i),i._onZoomviewDisplaying=i._onZoomviewDisplaying.bind(i),n.on("player.timeupdate",i._onTimeUpdate),n.on("player.playing",i._onPlaying),n.on("player.pause",i._onPause),n.on("zoomview.displaying",i._onZoomviewDisplaying);var r=i._peaks.player.getCurrentTime();i._playheadLayer.updatePlayheadTime(r),i._mouseDragHandler=new Se(n,i)}function Ae(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._mouseDragHandler=new we(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp})}function Ee(e,t){this._peaks=e,this._view=t,this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._mouseDragHandler=new we(t._stage,{onMouseDown:this._onMouseDown,onMouseMove:this._onMouseMove,onMouseUp:this._onMouseUp})}function xe(e,t,n){var i=this;_e.call(i,e,t,n,n.options.zoomview),i._onTimeUpdate=i._onTimeUpdate.bind(i),i._onPlaying=i._onPlaying.bind(i),i._onPause=i._onPause.bind(i),i._onKeyboardLeft=i._onKeyboardLeft.bind(i),i._onKeyboardRight=i._onKeyboardRight.bind(i),i._onKeyboardShiftLeft=i._onKeyboardShiftLeft.bind(i),i._onKeyboardShiftRight=i._onKeyboardShiftRight.bind(i),i._peaks.on("player.timeupdate",i._onTimeUpdate),i._peaks.on("player.playing",i._onPlaying),i._peaks.on("player.pause",i._onPause),i._peaks.on("keyboard.left",i._onKeyboardLeft),i._peaks.on("keyboard.right",i._onKeyboardRight),i._peaks.on("keyboard.shift_left",i._onKeyboardShiftLeft),i._peaks.on("keyboard.shift_right",i._onKeyboardShiftRight),i._autoScroll=i._viewOptions.autoScroll,i._autoScrollOffset=i._viewOptions.autoScrollOffset,i._enableSegmentDragging=!1,i._segmentDragMode="overlap",i._minSegmentDragWidth=0,i._insertSegmentShape=null,i._playheadClickTolerance=i._viewOptions.playheadClickTolerance,i._zoomLevelAuto=!1,i._zoomLevelSeconds=null;var r=i._peaks.player.getCurrentTime();i._syncPlayhead(r),i._mouseDragHandler=new Ee(n,i),i._onWheel=i._onWheel.bind(i),i._onWheelCaptureVerticalScroll=i._onWheelCaptureVerticalScroll.bind(i),i.setWheelMode(i._viewOptions.wheelMode),i._peaks.emit("zoomview.displaying",0,i.getEndTime())}function Ce(e,t,n){this._waveformData=e,this._container=t,this._peaks=n,this._options=n.options.scrollbar,this._zoomview=n.views.getView("zoomview"),this._dragBoundFunc=this._dragBoundFunc.bind(this),this._onScrollboxDragStart=this._onScrollboxDragStart.bind(this),this._onScrollboxDragMove=this._onScrollboxDragMove.bind(this),this._onScrollboxDragEnd=this._onScrollboxDragEnd.bind(this),this._onZoomviewDisplaying=this._onZoomviewDisplaying.bind(this),this._onScrollbarClick=this._onScrollbarClick.bind(this),n.on("zoomview.displaying",this._onZoomviewDisplaying),this._width=t.clientWidth,this._height=t.clientHeight,this._stage=new(r().Stage)({container:t,width:this._width,height:this._height}),this._layer=new(r().Layer),this._stage.on("click",this._onScrollbarClick),this._stage.add(this._layer),this._color=this._options.color,this._scrollboxX=0,this._minScrollboxWidth=this._options.minWidth,this._offsetY=0,this._scrollbox=new(r().Group)({draggable:!0,dragBoundFunc:this._dragBoundFunc}),this._scrollboxRect=new o.r({x:this._scrollboxX,y:this._offsetY,width:0,height:this._height,fill:this._color}),this._scrollbox.add(this._scrollboxRect),this._setScrollboxWidth(),this._scrollbox.on("dragstart",this._onScrollboxDragStart),this._scrollbox.on("dragmove",this._onScrollboxDragMove),this._scrollbox.on("dragend",this._onScrollboxDragEnd),this._layer.add(this._scrollbox),this._layer.draw()}function ke(e){this._peaks=e,this._overview=null,this._zoomview=null,this._scrollbar=null}function Ie(e,t){this._peaks=e,this._zoomLevels=t,this._zoomLevelIndex=0}ge.prototype._createMarkers=function(){var e=this._layer.isEditingEnabled()&&this._segment.editable,t=this._view.getViewOptions().segmentOptions,n=t.markers?this._peaks.options.createSegmentMarker:me,i=n({segment:this._segment,editable:e,startMarker:!0,color:t.startMarkerColor,fontFamily:this._peaks.options.fontFamily||pe,fontSize:this._peaks.options.fontSize||10,fontStyle:this._peaks.options.fontStyle||fe,layer:this._layer,view:this._view.getName(),segmentOptions:this._view.getViewOptions().segmentOptions});i&&(this._startMarker=new ce({segment:this._segment,segmentShape:this,editable:e,startMarker:!0,marker:i,onDragStart:this._onSegmentMarkerDragStart,onDragMove:this._onSegmentMarkerDragMove,onDragEnd:this._onSegmentMarkerDragEnd,dragBoundFunc:this._segmentMarkerDragBoundFunc}));var r=n({segment:this._segment,editable:e,startMarker:!1,color:t.endMarkerColor,fontFamily:this._peaks.options.fontFamily||pe,fontSize:this._peaks.options.fontSize||10,fontStyle:this._peaks.options.fontStyle||fe,layer:this._layer,view:this._view.getName(),segmentOptions:this._view.getViewOptions().segmentOptions});r&&(this._endMarker=new ce({segment:this._segment,segmentShape:this,editable:e,startMarker:!1,marker:r,onDragStart:this._onSegmentMarkerDragStart,onDragMove:this._onSegmentMarkerDragMove,onDragEnd:this._onSegmentMarkerDragEnd,dragBoundFunc:this._segmentMarkerDragBoundFunc}))},ge.prototype._dragBoundFunc=function(e){return{x:e.x,y:0}},ge.prototype.update=function(e){var t,n=this._view.timeToPixelOffset(this._segment.startTime),i=this._view.timeToPixelOffset(this._segment.endTime),r=i-n;(t=this.getStartMarker())&&(t.setX(n-t.getWidth()),e&&t.update(e)),(t=this.getEndMarker())&&(t.setX(i),e&&t.update(e)),this._color=this._segment.color,this._borderColor=this._segment.bordercolor,this._overlayText&&this._overlayText.text(this._segment.labelText),this._view.getViewOptions().segmentOptions.overlay?(this._color&&this._overlayRect.fill(this._color),this._borderColor&&this._overlayRect.stroke(this._borderColor)):this._waveformShape.setWaveformColor(this._segment.color),this._dragging||this._overlay&&(this._overlay.setAttrs({x:n,width:r,clipWidth:r<1?1:r}),this._overlayRect.setAttrs({x:0,width:r}),this._overlayText&&this._overlayText.setAttrs({width:r}))},ge.prototype.getSegment=function(){return this._segment},ge.prototype.getStartMarker=function(){return this._startMarker},ge.prototype.getEndMarker=function(){return this._endMarker},ge.prototype.addToLayer=function(e){this._waveformShape&&this._waveformShape.addToLayer(e),this._label&&e.add(this._label),this._overlay&&e.add(this._overlay),this._startMarker&&this._startMarker.addToLayer(e),this._endMarker&&this._endMarker.addToLayer(e)},ge.prototype.isDragging=function(){return this._dragging},ge.prototype._onMouseEnter=function(e){this._label&&(this._label.moveToTop(),this._label.show()),this._peaks.emit("segments.mouseenter",{segment:this._segment,evt:e.evt})},ge.prototype._onMouseLeave=function(e){this._label&&this._label.hide(),this._peaks.emit("segments.mouseleave",{segment:this._segment,evt:e.evt})},ge.prototype._onMouseDown=function(e){this._peaks.emit("segments.mousedown",{segment:this._segment,evt:e.evt})},ge.prototype._onMouseUp=function(e){this._peaks.emit("segments.mouseup",{segment:this._segment,evt:e.evt})},ge.prototype.segmentClicked=function(e,t){this._moveToTop(),this._peaks.emit("segments."+e,t)},ge.prototype._moveToTop=function(){this._overlay.moveToTop(),this._layer.moveSegmentMarkersToTop()},ge.prototype.enableSegmentDragging=function(e){this._segment.editable&&(!this._draggable&&e?(this._overlay.on("dragstart",this._onSegmentDragStart),this._overlay.on("dragmove",this._onSegmentDragMove),this._overlay.on("dragend",this._onSegmentDragEnd)):this._draggable&&!e&&(this._overlay.off("dragstart",this._onSegmentDragStart),this._overlay.off("dragmove",this._onSegmentDragMove),this._overlay.off("dragend",this._onSegmentDragEnd)),this._overlay.draggable(e),this._draggable=e)},ge.prototype._setPreviousAndNextSegments=function(){"overlap"!==this._view.getSegmentDragMode()?(this._nextSegment=this._peaks.segments.findNextSegment(this._segment),this._previousSegment=this._peaks.segments.findPreviousSegment(this._segment)):(this._nextSegment=null,this._previousSegment=null)},ge.prototype._onSegmentDragStart=function(e){this._setPreviousAndNextSegments(),this._dragging=!0,this._dragStartX=this._overlay.getX(),this._dragStartTime=this._segment.startTime,this._dragEndTime=this._segment.endTime,this._peaks.emit("segments.dragstart",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt})},ge.prototype._onSegmentDragMove=function(e){var t,n=this._overlay.getX()-this._dragStartX,i=this._view.pixelsToTime(n),r=this._dragStartTime+i,a=this._dragEndTime+i,o=this._segment.endTime-this._segment.startTime,s=this._view.getMinSegmentDragWidth(),u=this._view.pixelsToTime(s),l=!1,h=!1;if(r<0&&(r=0,a=o,this._overlay.setX(this._view.timeToPixelOffset(r))),this._previousSegment){var c=this._view.timeToPixelOffset(this._previousSegment.endTime);if(r<this._previousSegment.endTime)if("no-overlap"===(t=this._view.getSegmentDragMode())||"compress"===t&&!this._previousSegment.editable)a=(r=this._previousSegment.endTime)+o,this._overlay.setX(c);else if("compress"===t){var d=r,p=this._previousSegment.startTime+u;d<p&&(d=p,c=this._view.timeToPixelOffset(d),this._overlay.setX(c),a=(r=d)+o),this._previousSegment.update({endTime:d}),l=!0}}if(this._nextSegment){var f=this._view.timeToPixelOffset(this._nextSegment.startTime);if(a>this._nextSegment.startTime)if("no-overlap"===(t=this._view.getSegmentDragMode())||"compress"===t&&!this._nextSegment.editable)r=(a=this._nextSegment.startTime)-o,this._overlay.setX(f-this._overlay.getWidth());else if("compress"===t){var g=a,m=this._nextSegment.endTime-u;g>m&&(g=m,f=this._view.timeToPixelOffset(g),this._overlay.setX(f-this._overlay.getWidth()),r=(a=g)-o),this._nextSegment.update({startTime:g}),h=!0}}this._segment._setStartTime(r),this._segment._setEndTime(a),this._peaks.emit("segments.dragged",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt}),l?this._peaks.emit("segments.dragged",{segment:this._previousSegment,marker:!1,startMarker:!1,evt:e.evt}):h&&this._peaks.emit("segments.dragged",{segment:this._nextSegment,marker:!1,startMarker:!1,evt:e.evt})},ge.prototype._onSegmentDragEnd=function(e){this._dragging=!1,this._peaks.emit("segments.dragend",{segment:this._segment,marker:!1,startMarker:!1,evt:e.evt})},ge.prototype.moveMarkersToTop=function(){this._startMarker&&this._startMarker.moveToTop(),this._endMarker&&this._endMarker.moveToTop()},ge.prototype.startDrag=function(){this._endMarker&&this._endMarker.startDrag()},ge.prototype.stopDrag=function(){this._endMarker&&this._endMarker.stopDrag()},ge.prototype._onSegmentMarkerDragStart=function(e,t){this._setPreviousAndNextSegments(),this._moveToTop(),this._startMarkerX=this._startMarker.getX(),this._endMarkerX=this._endMarker.getX(),this._peaks.emit("segments.dragstart",{segment:this._segment,marker:!0,startMarker:e.isStartMarker(),evt:t.evt})},ge.prototype._onSegmentMarkerDragMove=function(e,t){e.isStartMarker()?(this._segmentStartMarkerDragMove(e,t),e.update({startTime:this._segment.startTime})):(this._segmentEndMarkerDragMove(e,t),e.update({endTime:this._segment.endTime}))},ge.prototype._segmentStartMarkerDragMove=function(e,t){var n=this._view.getWidth(),i=this._startMarker.getX(),r=this._endMarker.getX(),a=this._view.pixelsToTime(50),o=this._view.getMinSegmentDragWidth(),s=this._endMarker.getX()-o;s>n&&(s=n);var u,l=!1,h=!1;if(this._previousSegment&&(l=(u=this._view.timeToPixelOffset(this._previousSegment.endTime))>=0),i>s)e.setX(s),this._overlay.clipWidth(s-r),0===o&&s<n?this._segment._setStartTime(this._segment.endTime):this._segment._setStartTime(this._view.pixelOffsetToTime(s));else if(this._previousSegment&&l){var c=this._view.getSegmentDragMode(),d="no-overlap"===c||"compress"===c&&!this._previousSegment.editable,p="compress"===c&&this._previousSegment.editable;if(i<=u){if(d)e.setX(u),this._overlay.clipWidth(u-r),this._segment._setStartTime(this._previousSegment.endTime);else if(p){var f=ve(this._previousSegment);f<a&&(a=f);var g=this._view.timeToPixelOffset(this._previousSegment.startTime+a);i<g&&(i=g),e.setX(i),this._overlay.clipWidth(r-i),this._segment._setStartTime(this._view.pixelOffsetToTime(i)),this._previousSegment.update({endTime:this._view.pixelOffsetToTime(i)}),h=!0}}else i<0&&(i=0),e.setX(i),this._overlay.clipWidth(r-i),this._segment._setStartTime(this._view.pixelOffsetToTime(i))}else i<0&&(i=0),e.setX(i),this._overlay.clipWidth(r-i),this._segment._setStartTime(this._view.pixelOffsetToTime(i));this._peaks.emit("segments.dragged",{segment:this._segment,marker:!0,startMarker:!0,evt:t.evt}),h&&this._peaks.emit("segments.dragged",{segment:this._previousSegment,marker:!0,startMarker:!1,evt:t.evt})},ge.prototype._segmentEndMarkerDragMove=function(e,t){var n=this._view.getWidth(),i=this._startMarker.getX(),r=this._endMarker.getX(),a=this._view.pixelsToTime(50),o=this._view.getMinSegmentDragWidth(),s=this._startMarker.getX()+o;s<0&&(s=0);var u,l=!1,h=!1;if(this._nextSegment&&(l=(u=this._view.timeToPixelOffset(this._nextSegment.startTime))<n),r<s)e.setX(s),this._overlay.clipWidth(s-i),0===o&&s>0?this._segment._setEndTime(this._segment.startTime):this._segment._setEndTime(this._view.pixelOffsetToTime(s));else if(this._nextSegment&&l){var c=this._view.getSegmentDragMode(),d="no-overlap"===c||"compress"===c&&!this._nextSegment.editable,p="compress"===c&&this._nextSegment.editable;if(r>=u){if(d)e.setX(u),this._overlay.clipWidth(u-i),this._segment._setEndTime(this._nextSegment.startTime);else if(p){var f=ve(this._nextSegment);f<a&&(a=f);var g=this._view.timeToPixelOffset(this._nextSegment.endTime-a);r>g&&(r=g),e.setX(r),this._overlay.clipWidth(r-i),this._segment._setEndTime(this._view.pixelOffsetToTime(r)),this._nextSegment.update({startTime:this._view.pixelOffsetToTime(r)}),h=!0}}else r>n&&(r=n),e.setX(r),this._overlay.clipWidth(r-i),this._segment._setEndTime(this._view.pixelOffsetToTime(r))}else r>n&&(r=n),e.setX(r),this._overlay.clipWidth(r-i),this._segment._setEndTime(this._view.pixelOffsetToTime(r));this._peaks.emit("segments.dragged",{segment:this._segment,marker:!0,startMarker:!1,evt:t.evt}),h&&this._peaks.emit("segments.dragged",{segment:this._nextSegment,marker:!0,startMarker:!0,evt:t.evt})},ge.prototype._onSegmentMarkerDragEnd=function(e,t){this._nextSegment=null,this._previousSegment=null;var n=e.isStartMarker();this._peaks.emit("segments.dragend",{segment:this._segment,marker:!0,startMarker:n,evt:t.evt})},ge.prototype._segmentMarkerDragBoundFunc=function(e,t){return{x:t.x,y:e.getAbsolutePosition().y}},ge.prototype.fitToView=function(){if(this._startMarker&&this._startMarker.fitToView(),this._endMarker&&this._endMarker.fitToView(),this._overlay){var e=this._view.getHeight(),t=v(0,e-2*this._overlayOffset);this._overlay.setAttrs({y:0,height:e,clipY:this._overlayOffset,clipHeight:t}),this._overlayRect.setAttrs({y:this._overlayOffset,height:t}),this._overlayText&&this._overlayText.setAttrs({y:this._overlayOffset,height:t})}},ge.prototype.destroy=function(){this._waveformShape&&this._waveformShape.destroy(),this._label&&this._label.destroy(),this._startMarker&&this._startMarker.destroy(),this._endMarker&&this._endMarker.destroy(),this._overlay&&this._overlay.destroy()},ye.prototype.addToStage=function(e){e.add(this._layer)},ye.prototype.enableEditing=function(e){this._allowEditing=e},ye.prototype.isEditingEnabled=function(){return this._allowEditing},ye.prototype.enableSegmentDragging=function(e){for(var t in this._segmentShapes)y(this._segmentShapes,t)&&this._segmentShapes[t].enableSegmentDragging(e)},ye.prototype.getSegmentShape=function(e){return this._segmentShapes[e.pid]},ye.prototype.formatTime=function(e){return this._view.formatTime(e)},ye.prototype._onSegmentsUpdate=function(e,t){var n=this._view.getStartTime(),i=this._view.getEndTime(),r=this.getSegmentShape(e),a=e.isVisible(n,i);r&&!a?r.isDragging()||this._removeSegment(e):!r&&a?r=this._updateSegment(e):r&&a&&r.update(t)},ye.prototype._onSegmentsAdd=function(e){var t=this,n=t._view.getStartTime(),i=t._view.getEndTime();e.segments.forEach(function(e){e.isVisible(n,i)&&t._addSegmentShape(e).update()}),this.moveSegmentMarkersToTop()},ye.prototype._onSegmentsRemove=function(e){var t=this;e.segments.forEach(function(e){t._removeSegment(e)})},ye.prototype._onSegmentsRemoveAll=function(){this._layer.removeChildren(),this._segmentShapes={}},ye.prototype._onSegmentsDragged=function(e){this._updateSegment(e.segment)},ye.prototype._createSegmentShape=function(e){return new ge(e,this._peaks,this,this._view)},ye.prototype._addSegmentShape=function(e){var t=this._createSegmentShape(e);return t.addToLayer(this._layer),this._segmentShapes[e.pid]=t,t},ye.prototype.updateSegments=function(e,t){this._peaks.segments.find(e,t).forEach(this._updateSegment.bind(this)),this._removeInvisibleSegments(e,t)},ye.prototype._updateSegment=function(e){var t=this.getSegmentShape(e);t||(t=this._addSegmentShape(e)),t.update()},ye.prototype._removeInvisibleSegments=function(e,t){for(var n in this._segmentShapes)if(y(this._segmentShapes,n)){var i=this._segmentShapes[n].getSegment();i.isVisible(e,t)||this._removeSegment(i)}},ye.prototype._removeSegment=function(e){var t=this._segmentShapes[e.pid];t&&(t.destroy(),delete this._segmentShapes[e.pid])},ye.prototype.moveSegmentMarkersToTop=function(){for(var e in this._segmentShapes)y(this._segmentShapes,e)&&this._segmentShapes[e].moveMarkersToTop()},ye.prototype.setVisible=function(e){this._layer.setVisible(e)},ye.prototype.segmentClicked=function(e,t){var n=this._segmentShapes[t.segment.pid];n&&n.segmentClicked(e,t)},ye.prototype.destroy=function(){this._peaks.off("segments.update",this._onSegmentsUpdate),this._peaks.off("segments.add",this._onSegmentsAdd),this._peaks.off("segments.remove",this._onSegmentsRemove),this._peaks.off("segments.remove_all",this._onSegmentsRemoveAll),this._peaks.off("segments.dragged",this._onSegmentsDragged)},ye.prototype.fitToView=function(){for(var e in this._segmentShapes)y(this._segmentShapes,e)&&this._segmentShapes[e].fitToView()},ye.prototype.draw=function(){this._layer.draw()},ye.prototype.getHeight=function(){return this._layer.getHeight()},be._buildFontString=function(e,t,n){return t||(t=11),e||(e="sans-serif"),n||(n="normal"),n+" "+t+"px "+e},be.prototype.addToLayer=function(e){e.add(this._axisShape)},be.prototype.showAxisLabels=function(e,t){this._showAxisLabels=e,t&&(y(t,"topMarkerHeight")&&(this._axisTopMarkerHeight=t.topMarkerHeight),y(t,"bottomMarkerHeight")&&(this._axisBottomMarkerHeight=t.bottomMarkerHeight))},be.prototype._getAxisLabelScale=function(e){for(var t,n=1,i=[1,2,5,10,20,30],r=0;t=n*i[r],e.timeToPixels(t)<60;)++r===i.length&&(n*=60,r=0);return t},be.prototype._drawAxis=function(e,t){var n=t.getStartTime(),i=this._getAxisLabelScale(t),r=function(e,t){if(0===t)return 0;var n=1;return e<0&&(n=-1,e=-e),n*((Math.ceil(e)+t-1)/t|0)*t}(n,i),a=r-n,o=t.timeToPixels(a);e.setAttr("strokeStyle",this._axisGridlineColor),e.setAttr("lineWidth",1),e.setAttr("font",this._axisLabelFont),e.setAttr("fillStyle",this._axisLabelColor),e.setAttr("textAlign","left"),e.setAttr("textBaseline","bottom");for(var s=t.getWidth(),u=t.getHeight(),l=r;;){var h=o+t.timeToPixels(l-r);if(h>=s)break;if(this._axisTopMarkerHeight>0&&(e.beginPath(),e.moveTo(h+.5,0),e.lineTo(h+.5,0+this._axisTopMarkerHeight),e.stroke()),this._axisBottomMarkerHeight&&(e.beginPath(),e.moveTo(h+.5,u),e.lineTo(h+.5,u-this._axisBottomMarkerHeight),e.stroke()),this._showAxisLabels){var c=this._formatAxisTime(l),d=h-e.measureText(c).width/2,p=u-1-this._axisBottomMarkerHeight;d>=0&&e.fillText(c,d,p)}l+=i}},_e.prototype.getViewOptions=function(){return this._viewOptions},_e.prototype.getWaveformData=function(){return this._data},_e.prototype.setWaveformData=function(e){this._data=e},_e.prototype.timeToPixels=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)},_e.prototype.pixelsToTime=function(e){return e*this._data.scale/this._data.sample_rate},_e.prototype.pixelOffsetToTime=function(e){return(this._frameOffset+e)*this._data.scale/this._data.sample_rate},_e.prototype.timeToPixelOffset=function(e){return Math.floor(e*this._data.sample_rate/this._data.scale)-this._frameOffset},_e.prototype.getFrameOffset=function(){return this._frameOffset},_e.prototype.getWidth=function(){return this._width},_e.prototype.getHeight=function(){return this._height},_e.prototype.getStartTime=function(){return this.pixelOffsetToTime(0)},_e.prototype.getEndTime=function(){return this.pixelOffsetToTime(this._width)},_e.prototype._getDuration=function(){return this._peaks.player.getDuration()},_e.prototype._createWaveform=function(){this._waveformLayer=new(r().Layer)({listening:!1}),this._createWaveformShapes(),this._stage.add(this._waveformLayer)},_e.prototype._createWaveformShapes=function(){if(this._waveformShape||(this._waveformShape=new de({color:this._waveformColor,view:this}),this._waveformShape.addToLayer(this._waveformLayer)),this._playedWaveformColor&&!this._playedWaveformShape){var e=this._peaks.player.getCurrentTime();this._playedSegment={startTime:0,endTime:e},this._unplayedSegment={startTime:e,endTime:this._getDuration()},this._waveformShape.setSegment(this._unplayedSegment),this._playedWaveformShape=new de({color:this._playedWaveformColor,view:this,segment:this._playedSegment}),this._playedWaveformShape.addToLayer(this._waveformLayer)}},_e.prototype.setWaveformColor=function(e){this._waveformColor=e,this._waveformShape.setWaveformColor(e)},_e.prototype.setPlayedWaveformColor=function(e){this._playedWaveformColor=e,e?(this._playedWaveformShape||this._createWaveformShapes(),this._playedWaveformShape.setWaveformColor(e)):this._playedWaveformShape&&this._destroyPlayedWaveformShape()},_e.prototype._destroyPlayedWaveformShape=function(){this._waveformShape.setSegment(null),this._playedWaveformShape.destroy(),this._playedWaveformShape=null,this._playedSegment=null,this._unplayedSegment=null},_e.prototype._createAxisLabels=function(){this._axisLayer=new(r().Layer)({listening:!1}),this._axis=new be(this,this._viewOptions),this._axis.addToLayer(this._axisLayer),this._stage.add(this._axisLayer)},_e.prototype.showAxisLabels=function(e,t){this._axis.showAxisLabels(e,t),this._axisLayer.draw()},_e.prototype.showPlayheadTime=function(e){this._playheadLayer.showPlayheadTime(e)},_e.prototype.setTimeLabelPrecision=function(e){this._timeLabelPrecision=e,this._playheadLayer.updatePlayheadText()},_e.prototype.formatTime=function(e){return this._formatPlayheadTime(e)},_e.prototype.setAmplitudeScale=function(e){if(!_(e)||"number"!=typeof(t=e)||t!=t||t===1/0||t===-1/0)throw new Error("view.setAmplitudeScale(): Scale must be a valid number");var t;this._amplitudeScale=e,this.drawWaveformLayer(),this._segmentsLayer&&this._segmentsLayer.draw()},_e.prototype.getAmplitudeScale=function(){return this._amplitudeScale},_e.prototype.enableSeek=function(e){this._enableSeek=e},_e.prototype.isSeekEnabled=function(){return this._enableSeek},_e.prototype._onClick=function(e){this._clickHandler(e,"click")},_e.prototype._onDblClick=function(e){this._clickHandler(e,"dblclick")},_e.prototype._onContextMenu=function(e){this._clickHandler(e,"contextmenu")},_e.prototype._clickHandler=function(e,t){var n=!0;if(e.target!==this._stage){var i=k(e.target);if(i)if("point-marker"===i.attrs.name){var r=i.getAttr("point");r&&this._peaks.emit("points."+t,{point:r,evt:e.evt,preventViewEvent:function(){n=!1}})}else if("segment-overlay"===i.attrs.name){var a=i.getAttr("segment");if(a){var o={segment:a,evt:e.evt,preventViewEvent:function(){n=!1}};this._segmentsLayer&&this._segmentsLayer.segmentClicked(t,o)}}}if(n){var s=e.evt.layerX,u=this.pixelOffsetToTime(s),l=this.getName();this._peaks.emit(l+"."+t,{time:u,evt:e.evt})}},_e.prototype.updatePlayheadTime=function(e){this._playheadLayer.updatePlayheadTime(e)},_e.prototype.playheadPosChanged=function(e){this._playedWaveformShape&&(this._playedSegment.endTime=e,this._unplayedSegment.startTime=e,this.drawWaveformLayer())},_e.prototype.drawWaveformLayer=function(){this._waveformLayer.draw()},_e.prototype.enableMarkerEditing=function(e){this._segmentsLayer&&this._segmentsLayer.enableEditing(e),this._pointsLayer&&this._pointsLayer.enableEditing(e)},_e.prototype.fitToContainer=function(){if(0!==this._container.clientWidth||0!==this._container.clientHeight){var e=!1;this._container.clientWidth!==this._width&&(this._width=this._container.clientWidth,this._stage.setWidth(this._width),e=this.containerWidthChange()),this._container.clientHeight!==this._height&&(this._height=this._container.clientHeight,this._stage.height(this._height),this._waveformShape.fitToView(),this._playheadLayer.fitToView(),this._segmentsLayer&&this._segmentsLayer.fitToView(),this._pointsLayer&&this._pointsLayer.fitToView(),this.containerHeightChange()),e&&this.updateWaveform(this._frameOffset)}},_e.prototype.destroy=function(){this._playheadLayer.destroy(),this._segmentsLayer&&this._segmentsLayer.destroy(),this._pointsLayer&&this._pointsLayer.destroy(),this._stage&&(this._stage.destroy(),this._stage=null)},we.prototype._mouseDown=function(e){var t=null;if("mousedown"!==e.type||0===e.evt.button){var n=k(e.target);if(n){if("point-marker"===n.attrs.name||"segment-marker"===n.attrs.name)return;"segment-overlay"===n.attrs.name&&(t=n)}if(this._lastMouseClientX=Math.floor("touchstart"===e.type?e.evt.touches[0].clientX:e.evt.clientX),this._handlers.onMouseDown){var i=this._getMousePosX(this._lastMouseClientX);this._handlers.onMouseDown(i,t)}window.addEventListener("mousemove",this._mouseMove,{capture:!1,passive:!0}),window.addEventListener("touchmove",this._mouseMove,{capture:!1,passive:!0}),window.addEventListener("mouseup",this._mouseUp,{capture:!1,passive:!0}),window.addEventListener("touchend",this._mouseUp,{capture:!1,passive:!0}),window.addEventListener("blur",this._mouseUp,{capture:!1,passive:!0})}},we.prototype._mouseMove=function(e){var t=Math.floor("touchmove"===e.type?e.changedTouches[0].clientX:e.clientX);if(t!==this._lastMouseClientX&&(this._lastMouseClientX=t,this._dragging=!0,this._handlers.onMouseMove)){var n=this._getMousePosX(t);this._handlers.onMouseMove(n)}},we.prototype._mouseUp=function(e){var t;if("touchend"===e.type?(t=Math.floor(e.changedTouches[0].clientX),e.cancelable&&e.preventDefault()):t=Math.floor(e.clientX),this._handlers.onMouseUp){var n=this._getMousePosX(t);this._handlers.onMouseUp(n)}window.removeEventListener("mousemove",this._mouseMove,{capture:!1}),window.removeEventListener("touchmove",this._mouseMove,{capture:!1}),window.removeEventListener("mouseup",this._mouseUp,{capture:!1}),window.removeEventListener("touchend",this._mouseUp,{capture:!1}),window.removeEventListener("blur",this._mouseUp,{capture:!1}),this._dragging=!1},we.prototype._getMousePosX=function(e){return e-this._stage.getContainer().getBoundingClientRect().left},we.prototype.isDragging=function(){return this._dragging},we.prototype.destroy=function(){this._stage.off("mousedown",this._mouseDown),this._stage.off("touchstart",this._mouseDown)},Se.prototype._onMouseDown=function(e){this._seek(e)},Se.prototype._onMouseMove=function(e){this._seek(e)},Se.prototype._seek=function(e){if(this._view.isSeekEnabled()){e=v(e,0,this._width);var t=this._view.pixelsToTime(e),n=this._peaks.player.getDuration();t>n&&(t=n),this._view.updatePlayheadTime(t),this._peaks.player.seek(t)}},Se.prototype.destroy=function(){this._mouseDragHandler.destroy()},Te.prototype=Object.create(_e.prototype),Te.prototype.initWaveform=function(){0!==this._width&&this._resampleAndSetWaveformData(this._originalWaveformData,this._width)},Te.prototype.initHighlightLayer=function(){this._highlightLayer=new oe(this,this._viewOptions),this._highlightLayer.addToStage(this._stage)},Te.prototype.isSegmentDraggingEnabled=function(){return!1},Te.prototype.getName=function(){return"overview"},Te.prototype._onTimeUpdate=function(e){this._playheadLayer.updatePlayheadTime(e)},Te.prototype._onPlaying=function(e){this._playheadLayer.updatePlayheadTime(e)},Te.prototype._onPause=function(e){this._playheadLayer.stop(e)},Te.prototype._onZoomviewDisplaying=function(e,t){this.showHighlight(e,t)},Te.prototype.showHighlight=function(e,t){this._highlightLayer.showHighlight(e,t)},Te.prototype.setWaveformData=function(e){this._originalWaveformData=e,0!==this._width?this._resampleAndSetWaveformData(e,this._width):this._data=e,this.updateWaveform()},Te.prototype._resampleAndSetWaveformData=function(e,t){try{return this._data=e.resample({width:t}),!0}catch(t){return this._data=e,!1}},Te.prototype.removeHighlightRect=function(){this._highlightLayer.removeHighlight()},Te.prototype.updateWaveform=function(){this._waveformLayer.draw(),this._axisLayer.draw();var e=this._peaks.player.getCurrentTime();this._playheadLayer.updatePlayheadTime(e),this._highlightLayer.updateHighlight();var t=this.pixelsToTime(this._width);this._pointsLayer&&this._pointsLayer.updatePoints(0,t),this._segmentsLayer&&this._segmentsLayer.updateSegments(0,t)},Te.prototype.containerWidthChange=function(){return this._resampleAndSetWaveformData(this._originalWaveformData,this._width)},Te.prototype.containerHeightChange=function(){this._highlightLayer.fitToView()},Te.prototype.destroy=function(){this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("zoomview.displaying",this._onZoomviewDisplaying),this._mouseDragHandler.destroy(),_e.prototype.destroy.call(this)},Ae.prototype.isDragging=function(){return this._mouseDragHandler.isDragging()},Ae.prototype._reset=function(){this._insertSegment=null,this._insertSegmentShape=null,this._segmentIsDraggable=!1,this._peaks.segments.setInserting(!1)},Ae.prototype._onMouseDown=function(e,t){if(this._reset(),this._segment=t,this._segment){if("overlap"!==this._view.getSegmentDragMode())return;this._segmentIsDraggable=this._segment.draggable(),this._segment.draggable(!1)}var n=this._view.pixelsToTime(e+this._view.getFrameOffset());this._peaks.segments.setInserting(!0),this._insertSegment=this._peaks.segments.add({startTime:n,endTime:n,editable:!0}),this._insertSegmentShape=this._view._segmentsLayer.getSegmentShape(this._insertSegment),this._insertSegmentShape&&(this._insertSegmentShape.moveMarkersToTop(),this._insertSegmentShape.startDrag())},Ae.prototype._onMouseMove=function(){},Ae.prototype._onMouseUp=function(){this._insertSegment&&(this._insertSegmentShape&&(this._insertSegmentShape.stopDrag(),this._insertSegmentShape=null),this._segment&&this._segmentIsDraggable&&this._segment.draggable(!0),this._peaks.emit("segments.insert",{segment:this._insertSegment}),this._peaks.segments.setInserting(!1))},Ae.prototype.destroy=function(){this._mouseDragHandler.destroy()},Ee.prototype.isDragging=function(){return this._mouseDragHandler.isDragging()},Ee.prototype._onMouseDown=function(e,t){this._seeking=!1,t&&!t.attrs.draggable?this._segment=null:this._segment=t;var n=this._view.getPlayheadOffset();if(this._view.isSeekEnabled()&&Math.abs(e-n)<=this._view.getPlayheadClickTolerance()&&(this._seeking=!0,this._segment&&(this._segmentIsDraggable=this._segment.draggable(),this._segment.draggable(!1))),this._seeking){e=v(e,0,this._view.getWidth());var i=this._view.pixelsToTime(e+this._view.getFrameOffset());this._seek(i)}else this._initialFrameOffset=this._view.getFrameOffset(),this._mouseDownX=e},Ee.prototype._onMouseMove=function(e){if(!this._segment||this._seeking)if(this._seeking){e=v(e,0,this._view.getWidth());var t=this._view.pixelsToTime(e+this._view.getFrameOffset());this._seek(t)}else if(!this._view.isAutoZoom()){var n=this._mouseDownX-e,i=this._initialFrameOffset+n;i!==this._initialFrameOffset&&this._view.updateWaveform(i)}},Ee.prototype._onMouseUp=function(){if(!this._seeking&&this._view._enableSeek&&!this._mouseDragHandler.isDragging()){var e=this._view.pixelOffsetToTime(this._mouseDownX);this._seek(e)}this._segment&&this._seeking&&this._segmentIsDraggable&&this._segment.draggable(!0)},Ee.prototype._seek=function(e){var t=this._peaks.player.getDuration();e>t&&(e=t),this._view.updatePlayheadTime(e),this._peaks.player.seek(e)},Ee.prototype.destroy=function(){this._mouseDragHandler.destroy()},xe.prototype=Object.create(_e.prototype),xe.prototype.initWaveform=function(){this._enableWaveformCache=this._options.waveformCache,this._initWaveformCache();var e=this._peaks.zoom.getZoomLevel();this._resampleData({scale:e})},xe.prototype._initWaveformCache=function(){this._enableWaveformCache&&(this._waveformData=new Map,this._waveformData.set(this._originalWaveformData.scale,this._originalWaveformData),this._waveformScales=[this._originalWaveformData.scale])},xe.prototype.initHighlightLayer=function(){},xe.prototype.setWheelMode=function(e,t){t||(t={}),e===this._wheelMode&&t.captureVerticalScroll===this._captureVerticalScroll||(this._stage.off("wheel"),this._wheelMode=e,this._captureVerticalScroll=t.captureVerticalScroll,"scroll"!==e)||(t.captureVerticalScroll?this._stage.on("wheel",this._onWheelCaptureVerticalScroll):this._stage.on("wheel",this._onWheel))},xe.prototype._onWheel=function(e){var t,n=e.evt;if(n.shiftKey)if(0!==n.deltaY)t=n.deltaY;else{if(0===n.deltaX)return;t=n.deltaX}else{if(Math.abs(n.deltaX)<Math.abs(n.deltaY))return;t=n.deltaX}n.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._width),n.preventDefault();var i=v(this._frameOffset+Math.floor(t),0,this._pixelLength-this._width);this.updateWaveform(i)},xe.prototype._onWheelCaptureVerticalScroll=function(e){var t=e.evt,n=Math.abs(t.deltaX)<Math.abs(t.deltaY)?t.deltaY:t.deltaX;t.preventDefault();var i=v(this._frameOffset+Math.floor(n),0,this._pixelLength-this._width);this.updateWaveform(i)},xe.prototype.setWaveformDragMode=function(e){this._viewOptions.enableSegments&&(this._mouseDragHandler.destroy(),this._mouseDragHandler="insert-segment"===e?new Ae(this._peaks,this):new Ee(this._peaks,this))},xe.prototype.enableSegmentDragging=function(e){this._enableSegmentDragging=e,this._segmentsLayer&&this._segmentsLayer.enableSegmentDragging(e)},xe.prototype.isSegmentDraggingEnabled=function(){return this._enableSegmentDragging},xe.prototype.setSegmentDragMode=function(e){this._segmentDragMode=e},xe.prototype.getSegmentDragMode=function(){return this._segmentDragMode},xe.prototype.getName=function(){return"zoomview"},xe.prototype._onTimeUpdate=function(e){this._mouseDragHandler.isDragging()||this._syncPlayhead(e)},xe.prototype._onPlaying=function(e){this._playheadLayer.updatePlayheadTime(e)},xe.prototype._onPause=function(e){this._playheadLayer.stop(e)},xe.prototype._onKeyboardLeft=function(){this._keyboardScroll(-1,!1)},xe.prototype._onKeyboardRight=function(){this._keyboardScroll(1,!1)},xe.prototype._onKeyboardShiftLeft=function(){this._keyboardScroll(-1,!0)},xe.prototype._onKeyboardShiftRight=function(){this._keyboardScroll(1,!0)},xe.prototype._keyboardScroll=function(e,t){var n;n=t?e*this._width:e*this.timeToPixels(this._options.nudgeIncrement),this.scrollWaveform({pixels:n})},xe.prototype.setWaveformData=function(e){this._originalWaveformData=e,this._initWaveformCache()},xe.prototype.getPlayheadOffset=function(){return this._playheadLayer.getPlayheadPixel()-this._frameOffset},xe.prototype.getPlayheadClickTolerance=function(){return this._playheadClickTolerance},xe.prototype._syncPlayhead=function(e){if(this._playheadLayer.updatePlayheadTime(e),this._autoScroll&&!this._zoomLevelAuto){var t=this.timeToPixels(e);(t>=this._frameOffset+this._width-this._autoScrollOffset||t<this._frameOffset)&&(this._frameOffset=t-this._autoScrollOffset,this._frameOffset<0&&(this._frameOffset=0),this.updateWaveform(this._frameOffset))}},xe.prototype._getScale=function(e){return Math.floor(e*this._data.sample_rate/this._width)},xe.prototype.setZoom=function(e){var t;if(function(e){return y(e,"scale")&&"auto"===e.scale||y(e,"seconds")&&"auto"===e.seconds}(e)){var n=this._originalWaveformData.duration;this._zoomLevelAuto=!0,this._zoomLevelSeconds=null,t=this._getScale(n)}else{if(y(e,"scale"))this._zoomLevelSeconds=null,t=Math.floor(e.scale);else if(y(e,"seconds")){if(!w(e.seconds))return!1;this._zoomLevelSeconds=e.seconds,t=this._getScale(e.seconds)}this._zoomLevelAuto=!1}t<this._originalWaveformData.scale&&(this._peaks._logger("peaks.zoomview.setZoom(): zoom level must be at least "+this._originalWaveformData.scale),t=this._originalWaveformData.scale);var i,r=this._peaks.player.getCurrentTime(),a=this.getPlayheadOffset();a>=0&&a<this._width?i=r:(a=Math.floor(this._width/2),i=this.pixelOffsetToTime(a));var o=this._scale;this._resampleData({scale:t});var s=this.timeToPixels(i);return this._frameOffset=s-a,this.updateWaveform(this._frameOffset),this._playheadLayer.zoomLevelChanged(),this._playheadLayer.updatePlayheadTime(r),this._peaks.emit("zoom.update",{currentZoom:t,previousZoom:o}),!0},xe.prototype._resampleData=function(e){var t=e.scale;if(this._enableWaveformCache){if(!this._waveformData.has(t)){for(var n=this._originalWaveformData,i=0;i<this._waveformScales.length&&this._waveformScales[i]<t;i++)n=this._waveformData.get(this._waveformScales[i]);this._waveformData.set(t,n.resample(e)),this._waveformScales.push(t),this._waveformScales.sort(function(e,t){return e-t})}this._data=this._waveformData.get(t)}else this._data=this._originalWaveformData.resample(e);this._scale=this._data.scale,this._pixelLength=this._data.length},xe.prototype.isAutoZoom=function(){return this._zoomLevelAuto},xe.prototype.setStartTime=function(e){e<0&&(e=0),this._zoomLevelAuto&&(e=0),this.updateWaveform(this.timeToPixels(e))},xe.prototype.getPixelLength=function(){return this._pixelLength},xe.prototype.scrollWaveform=function(e){var t;if(y(e,"pixels"))t=Math.floor(e.pixels);else{if(!y(e,"seconds"))throw new TypeError("view.scrollWaveform(): Missing umber of pixels or seconds");t=this.timeToPixels(e.seconds)}this.updateWaveform(this._frameOffset+t)},xe.prototype.updateWaveform=function(e){var t;this._pixelLength<this._width?(e=0,t=this._width):t=this._pixelLength-this._width,e=v(e,0,t),this._frameOffset=e;var n=this._playheadLayer.getPlayheadPixel();this._playheadLayer.updatePlayheadTime(this.pixelsToTime(n)),this.drawWaveformLayer(),this._axisLayer.draw();var i=this.getStartTime(),r=this.getEndTime();this._pointsLayer&&this._pointsLayer.updatePoints(i,r),this._segmentsLayer&&this._segmentsLayer.updateSegments(i,r),this._peaks.emit("zoomview.displaying",i,r)},xe.prototype.enableAutoScroll=function(e,t){t||(t={}),this._autoScroll=e,y(t,"offset")&&(this._autoScrollOffset=t.offset)},xe.prototype.getMinSegmentDragWidth=function(){return this._insertSegmentShape?0:this._minSegmentDragWidth},xe.prototype.setMinSegmentDragWidth=function(e){this._minSegmentDragWidth=e},xe.prototype.containerWidthChange=function(){var e,t=!1,n=!1;if(this._zoomLevelAuto?(n=!0,e={width:this._width}):null!==this._zoomLevelSeconds&&(n=!0,e={scale:this._getScale(this._zoomLevelSeconds)}),n)try{this._resampleData(e),t=!0}catch(e){}return t},xe.prototype.containerHeightChange=function(){},xe.prototype.getStage=function(){return this._stage},xe.prototype.getSegmentsLayer=function(){return this._segmentsLayer},xe.prototype.destroy=function(){this._peaks.off("player.playing",this._onPlaying),this._peaks.off("player.pause",this._onPause),this._peaks.off("player.timeupdate",this._onTimeUpdate),this._peaks.off("keyboard.left",this._onKeyboardLeft),this._peaks.off("keyboard.right",this._onKeyboardRight),this._peaks.off("keyboard.shift_left",this._onKeyboardShiftLeft),this._peaks.off("keyboard.shift_right",this._onKeyboardShiftRight),this._mouseDragHandler.destroy(),_e.prototype.destroy.call(this)},Ce.prototype.setZoomview=function(e){this._zoomview=e,this._updateScrollbarWidthAndPosition()},Ce.prototype._setScrollboxWidth=function(){this._zoomview?(this._scrollboxWidth=Math.floor(this._width*this._zoomview.pixelsToTime(this._zoomview.getWidth())/this._peaks.player.getDuration()),this._scrollboxWidth<this._minScrollboxWidth&&(this._scrollboxWidth=this._minScrollboxWidth)):this._scrollboxWidth=this._width,this._scrollboxRect.width(this._scrollboxWidth)},Ce.prototype._getScrollbarRange=function(){return this._width-this._scrollboxWidth},Ce.prototype._dragBoundFunc=function(e){return{x:e.x,y:0}},Ce.prototype._onScrollboxDragStart=function(){this._dragging=!0},Ce.prototype._onScrollboxDragEnd=function(){this._dragging=!1},Ce.prototype._onScrollboxDragMove=function(){var e=this._getScrollbarRange(),t=v(this._scrollbox.x(),0,e);this._scrollbox.x(t),t!==this._scrollboxX&&(this._scrollboxX=t,this._zoomview&&this._updateWaveform(t))},Ce.prototype._onZoomviewDisplaying=function(){this._dragging||this._updateScrollbarWidthAndPosition()},Ce.prototype._updateScrollbarWidthAndPosition=function(){if(this._setScrollboxWidth(),this._zoomview){var e=this._zoomview.getStartTime(),t=this._zoomview.getPixelLength()-this._zoomview.getWidth(),n=Math.floor(this._zoomview.timeToPixels(e)*this._getScrollbarRange()/t);this._scrollbox.x(n),this._layer.draw()}},Ce.prototype._onScrollbarClick=function(e){if(e.target===this._stage&&this._zoomview){var t=Math.floor(e.evt.layerX-this._scrollboxWidth/2);t<0&&(t=0),this._updateWaveform(t)}},Ce.prototype._updateWaveform=function(e){var t=Math.floor((this._zoomview.getPixelLength()-this._zoomview.getWidth())*e/this._getScrollbarRange());this._zoomview.updateWaveform(t)},Ce.prototype.fitToContainer=function(){0===this._container.clientWidth&&0===this._container.clientHeight||(this._container.clientWidth!==this._width&&(this._width=this._container.clientWidth,this._stage.width(this._width),this._updateScrollbarWidthAndPosition()),this._height=this._container.clientHeight,this._stage.height(this._height))},Ce.prototype.destroy=function(){this._layer.destroy(),this._stage.destroy(),this._stage=null},ke.prototype.createOverview=function(e){if(this._overview)return this._overview;var t=this._peaks.getWaveformData();return this._overview=new Te(t,e,this._peaks),this._zoomview&&this._overview.showHighlight(this._zoomview.getStartTime(),this._zoomview.getEndTime()),this._overview},ke.prototype.createZoomview=function(e){if(this._zoomview)return this._zoomview;var t=this._peaks.getWaveformData();return this._zoomview=new xe(t,e,this._peaks),this._scrollbar&&this._scrollbar.setZoomview(this._zoomview),this._zoomview},ke.prototype.createScrollbar=function(e){var t=this._peaks.getWaveformData();return this._scrollbar=new Ce(t,e,this._peaks),this._scrollbar},ke.prototype.destroyOverview=function(){this._overview&&this._zoomview&&(this._overview.destroy(),this._overview=null)},ke.prototype.destroyZoomview=function(){this._zoomview&&this._overview&&(this._zoomview.destroy(),this._zoomview=null,this._overview.removeHighlightRect())},ke.prototype.destroy=function(){this._overview&&(this._overview.destroy(),this._overview=null),this._zoomview&&(this._zoomview.destroy(),this._zoomview=null),this._scrollbar&&(this._scrollbar.destroy(),this._scrollbar=null)},ke.prototype.getView=function(e){if(A(e))return this._overview&&this._zoomview?null:this._overview?this._overview:this._zoomview?this._zoomview:null;switch(e){case"overview":return this._overview;case"zoomview":return this._zoomview;default:return null}},ke.prototype.getScrollbar=function(){return this._scrollbar},Ie.prototype.setZoomLevels=function(e){this._zoomLevels=e,this.setZoom(0,!0)},Ie.prototype.zoomIn=function(){this.setZoom(this._zoomLevelIndex-1)},Ie.prototype.zoomOut=function(){this.setZoom(this._zoomLevelIndex+1)},Ie.prototype.setZoom=function(e,t){if(e>=this._zoomLevels.length&&(e=this._zoomLevels.length-1),e<0&&(e=0),t||e!==this._zoomLevelIndex){this._zoomLevelIndex=e;var n=this._peaks.views.getView("zoomview");n&&n.setZoom({scale:this._zoomLevels[e]})}},Ie.prototype.getZoom=function(){return this._zoomLevelIndex},Ie.prototype.getZoomLevel=function(){return this._zoomLevels[this._zoomLevelIndex]};var Me="withCredentials"in new XMLHttpRequest;function Pe(e){this._peaks=e}function Le(e){var t=e.getResponseHeader("content-range");if(!t)return!1;var n=t.match(/^bytes (\d+)-(\d+)\/(\d+)$/);if(n&&4===n.length){var i=parseInt(n[1],10),r=parseInt(n[2],10),a=parseInt(n[3],10);return 0===i&&r+1===a}return!1}function De(){return d.call(this),this.options={zoomLevels:[512,1024,2048,4096],waveformCache:!0,mediaElement:null,mediaUrl:null,dataUri:null,withCredentials:!1,waveformData:null,webAudio:null,nudgeIncrement:1,pointMarkerColor:"#39cccc",createSegmentMarker:ie,createSegmentLabel:re,createPointMarker:ae,logger:console.error.bind(console)},this}Pe.prototype.init=function(e,t){if(!(e.dataUri&&(e.webAudio||e.audioContext)||e.waveformData&&(e.webAudio||e.audioContext)||e.dataUri&&e.waveformData))return e.audioContext&&(this._peaks._logger("Peaks.init(): The audioContext option is deprecated, please pass a webAudio object instead"),e.webAudio={audioContext:e.audioContext}),e.dataUri?this._getRemoteWaveformData(e,t):e.waveformData?this._buildWaveformFromLocalData(e,t):e.webAudio?e.webAudio.audioBuffer?this._buildWaveformDataFromAudioBuffer(e,t):this._buildWaveformDataUsingWebAudio(e,t):void t(new Error("Peaks.init(): You must pass an audioContext, or dataUri, or waveformData to render waveform data"));t(new TypeError("Peaks.init(): You may only pass one source (webAudio, dataUri, or waveformData) to render waveform data."))},Pe.prototype._getRemoteWaveformData=function(e,t){var n,i=this,r=null,a=null;S(e.dataUri)?(r=e.dataUri,["ArrayBuffer","JSON"].some(function(e){if(window[e])return a=e.toLowerCase(),n=r[a],Boolean(n)}),n?(i._xhr=i._createXHR(n,a,e.withCredentials,function(e){if(4===this.readyState)if(200===this.status||206===this.status&&Le(this)){i._xhr=null;var n=l.A.create(e.target.response);1===n.channels||2===n.channels?8===n.bits?t(null,n):t(new Error("Peaks.init(): 16-bit waveform data is not supported")):t(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"))}else t(new Error("Unable to fetch remote data. HTTP status "+this.status))},function(){t(new Error("XHR failed"))},function(){t(new Error("XHR aborted"))}),i._xhr.send()):t(new Error("Peaks.init(): Unable to determine a compatible dataUri format for this browser"))):t(new TypeError("Peaks.init(): The dataUri option must be an object"))},Pe.prototype._buildWaveformFromLocalData=function(e,t){var n,i=null,r=null;if(S(e.waveformData))if(S((i=e.waveformData).json)?r=i.json:(n=i.arraybuffer,Object.prototype.toString.call(n).includes("ArrayBuffer")&&(r=i.arraybuffer)),r)try{var a=l.A.create(r);if(1!==a.channels&&2!==a.channels)return void t(new Error("Peaks.init(): Only mono or stereo waveforms are currently supported"));if(8!==a.bits)return void t(new Error("Peaks.init(): 16-bit waveform data is not supported"));t(null,a)}catch(e){t(e)}else t(new Error("Peaks.init(): Unable to determine a compatible waveformData format"));else t(new Error("Peaks.init(): The waveformData option must be an object"))},Pe.prototype._buildWaveformDataUsingWebAudio=function(e,t){var n=this,i=window.AudioContext||window.webkitAudioContext;if(e.webAudio.audioContext instanceof i){var r=e.webAudio;r.scale!==e.zoomLevels[0]&&(r.scale=e.zoomLevels[0]);var a=n._peaks.options.mediaElement.currentSrc;a?n._requestAudioAndBuildWaveformData(a,r,e.withCredentials,t):n._peaks.once("player.canplay",function(){n._requestAudioAndBuildWaveformData(n._peaks.options.mediaElement.currentSrc,r,e.withCredentials,t)})}else t(new TypeError("Peaks.init(): The webAudio.audioContext option must be a valid AudioContext"))},Pe.prototype._buildWaveformDataFromAudioBuffer=function(e,t){var n=e.webAudio;n.scale!==e.zoomLevels[0]&&(n.scale=e.zoomLevels[0]);var i={audio_buffer:n.audioBuffer,split_channels:n.multiChannel,scale:n.scale,disable_worker:!0};l.A.createFromAudio(i,t)},Pe.prototype._requestAudioAndBuildWaveformData=function(e,t,n,i){var r=this;e?(r._xhr=r._createXHR(e,"arraybuffer",n,function(e){if(4===this.readyState)if(200===this.status||206===this.status&&Le(this)){r._xhr=null;var n={audio_context:t.audioContext,array_buffer:e.target.response,split_channels:t.multiChannel,scale:t.scale};l.A.createFromAudio(n,i)}else i(new Error("Unable to fetch remote data. HTTP status "+this.status))},function(){i(new Error("XHR failed"))},function(){i(new Error("XHR aborted"))}),r._xhr.send()):r._peaks._logger("Peaks.init(): The mediaElement src is invalid")},Pe.prototype.abort=function(){this._xhr&&this._xhr.abort()},Pe.prototype._createXHR=function(e,t,n,i,r,a){var o=new XMLHttpRequest;if(o.open("GET",e,!0),Me)try{o.responseType=t}catch(e){}return o.onload=i,o.onerror=r,Me&&n&&(o.withCredentials=!0),o.addEventListener("abort",a),o},De.prototype=Object.create(d.prototype);var Re={playheadColor:"#111111",playheadTextColor:"#aaaaaa",playheadBackgroundColor:"transparent",playheadPadding:2,playheadWidth:1,axisGridlineColor:"#cccccc",showAxisLabels:!0,axisTopMarkerHeight:10,axisBottomMarkerHeight:10,axisLabelColor:"#aaaaaa",fontFamily:"sans-serif",fontSize:11,fontStyle:"normal",timeLabelPrecision:2,enablePoints:!0,enableSegments:!0},Ne={playheadClickTolerance:3,waveformColor:"rgba(0, 225, 128, 1)",wheelMode:"none",autoScroll:!0,autoScrollOffset:100,enableEditing:!0},Oe={waveformColor:"rgba(0, 0, 0, 0.2)",highlightColor:"#aaaaaa",highlightStrokeColor:"transparent",highlightOpacity:.3,highlightOffset:11,highlightCornerRadius:2,enableEditing:!1},Ue={overlay:!1,markers:!0,startMarkerColor:"#aaaaaa",endMarkerColor:"#aaaaaa",waveformColor:"#0074d9",overlayColor:"#ff0000",overlayOpacity:.3,overlayBorderColor:"#ff0000",overlayBorderWidth:2,overlayCornerRadius:5,overlayOffset:25,overlayLabelAlign:"left",overlayLabelVerticalAlign:"top",overlayLabelPadding:8,overlayLabelColor:"#000000",overlayFontFamily:"sans-serif",overlayFontSize:12,overlayFontStyle:"normal"},Be={color:"#888888",minWidth:50};function Fe(e,t){for(var n in t)y(t,n)&&y(e,n)&&(e[n]=t[n]);return e}function je(e){var t=e.zoomview.container,n=e.overview.container;return x(t)||x(n)?t&&(t.clientWidth<=0||t.clientHeight<=0)?new Error("Peaks.init(): The zoomview container must be visible and have non-zero width and height"):n&&(n.clientWidth<=0||n.clientHeight<=0)?new Error("Peaks.init(): The overview container must be visible and have non-zero width and height"):void 0:new TypeError("Peaks.init(): The zoomview and/or overview container options must be valid HTML elements")}De.init=function(e,t){var n=new De,i=n._setOptions(e);if(i||(i=je(n.options)),!i){var r=null;if(n.options.scrollbar){if(!x(r=n.options.scrollbar.container))return void t(new TypeError("Peaks.init(): The scrollbar container option must be a valid HTML element"));if(r.clientWidth<=0)return void t(new TypeError("Peaks.init(): The scrollbar container must be visible and have non-zero width"))}e.keyboard&&(n._keyboardHandler=new J(n));var a=e.player?e.player:new Q(n.options.mediaElement);return n.player=new ee(n,a),n.segments=new Y(n),n.points=new V(n),n.zoom=new Ie(n,n.options.zoomLevels),n.views=new ke(n),n._waveformBuilder=new Pe(n),n.player.init(n).then(function(){n._waveformBuilder.init(n.options,function(i,a){if(i)t&&t(i);else if(i=je(n.options))t&&t(i);else{n._waveformBuilder=null,n._waveformData=a;var o=n.options.zoomview.container,s=n.options.overview.container;s&&n.views.createOverview(s),o&&n.views.createZoomview(o),r&&n.views.createScrollbar(r),e.segments&&n.segments.add(e.segments),e.points&&n.points.add(e.points),e.emitCueEvents&&(n._cueEmitter=new O(n)),setTimeout(function(){n.emit("peaks.ready")},0),t(null,n)}})}).catch(function(e){t&&t(e)}),n}t(i)},De.prototype._setOptions=function(e){if(!S(e))return new TypeError("Peaks.init(): The options parameter should be an object");if(!e.player){if(!e.mediaElement)return new Error("Peaks.init(): Missing mediaElement option");if(!(e.mediaElement instanceof HTMLMediaElement))return new TypeError("Peaks.init(): The mediaElement option should be an HTMLMediaElement")}return e.logger&&"function"!=typeof e.logger?new TypeError("Peaks.init(): The logger option should be a function"):e.segments&&!Array.isArray(e.segments)?new TypeError("Peaks.init(): options.segments must be an array of segment objects"):e.points&&!Array.isArray(e.points)?new TypeError("Peaks.init(): options.points must be an array of point objects"):(Fe(this.options,e),this.options.overview=function(e){var t={};return e.overview&&e.overview.showPlayheadTime&&(t.showPlayheadTime=e.overview.showPlayheadTime),["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","playheadBackgroundColor","playheadPadding","playheadWidth","formatPlayheadTime","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisTopMarkerHeight","axisBottomMarkerHeight","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","highlightColor","highlightStrokeColor","highlightOpacity","highlightCornerRadius","highlightOffset","enablePoints","enableSegments","enableEditing"].forEach(function(n){e.overview&&y(e.overview,n)?t[n]=e.overview[n]:y(e,n)?t[n]=e[n]:y(t,n)||(y(Oe,n)?t[n]=Oe[n]:y(Re,n)&&(t[n]=Re[n]))}),t}(e),this.options.zoomview=function(e){var t={};return e.showPlayheadTime?t.showPlayheadTime=e.showPlayheadTime:e.zoomview&&e.zoomview.showPlayheadTime&&(t.showPlayheadTime=e.zoomview.showPlayheadTime),["container","waveformColor","playedWaveformColor","playheadColor","playheadTextColor","playheadBackgroundColor","playheadPadding","playheadWidth","formatPlayheadTime","playheadClickTolerance","timeLabelPrecision","axisGridlineColor","showAxisLabels","axisTopMarkerHeight","axisBottomMarkerHeight","axisLabelColor","formatAxisTime","fontFamily","fontSize","fontStyle","wheelMode","autoScroll","autoScrollOffset","enablePoints","enableSegments","enableEditing"].forEach(function(n){e.zoomview&&y(e.zoomview,n)?t[n]=e.zoomview[n]:y(e,n)?t[n]=e[n]:y(t,n)||(y(Ne,n)?t[n]=Ne[n]:y(Re,n)&&(t[n]=Re[n]))}),t}(e),this.options.scrollbar=function(e){if(!y(e,"scrollbar"))return null;var t={};return["container","color","minWidth"].forEach(function(n){y(e.scrollbar,n)?t[n]=e.scrollbar[n]:t[n]=Be[n]}),t}(e),function(e,t){e.segmentOptions={},b(e.segmentOptions,Ue),t.segmentOptions&&Fe(e.segmentOptions,t.segmentOptions),e.zoomview.segmentOptions={},b(e.zoomview.segmentOptions,e.segmentOptions),t.zoomview&&t.zoomview.segmentOptions&&Fe(e.zoomview.segmentOptions,t.zoomview.segmentOptions),e.overview.segmentOptions={},b(e.overview.segmentOptions,e.segmentOptions),t.overview&&t.overview.segmentOptions&&Fe(e.overview.segmentOptions,t.overview.segmentOptions)}(this.options,e),Array.isArray(this.options.zoomLevels)?0===this.options.zoomLevels.length?new Error("Peaks.init(): The zoomLevels array must not be empty"):function(e){if(0===e.length)return!0;for(var t=e[0],n=1;n<e.length;n++){if(t>=e[n])return!1;t=e[n]}return!0}(this.options.zoomLevels)?void(this._logger=this.options.logger):new Error("Peaks.init(): The zoomLevels array must be sorted in ascending order"):new TypeError("Peaks.init(): The zoomLevels option should be an array"))},De.prototype.setSource=function(e,t){var n=this;n.player._setSource(e).then(function(){e.zoomLevels||(e.zoomLevels=n.options.zoomLevels),n._waveformBuilder=new Pe(n),n._waveformBuilder.init(e,function(i,r){i?t(i):(n._waveformBuilder=null,n._waveformData=r,["overview","zoomview"].forEach(function(e){var t=n.views.getView(e);t&&t.setWaveformData(r)}),n.zoom.setZoomLevels(e.zoomLevels),t())})}).catch(function(e){t(e)})},De.prototype.getWaveformData=function(){return this._waveformData},De.prototype.destroy=function(){this._waveformBuilder&&this._waveformBuilder.abort(),this._keyboardHandler&&this._keyboardHandler.destroy(),this.views&&this.views.destroy(),this.player&&this.player.destroy(),this._cueEmitter&&this._cueEmitter.destroy()}},8604:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HitCanvas=t.SceneCanvas=t.Canvas=void 0;const i=n(4060),r=n(9869),a=n(8871);let o;class s{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;const t=(e||{}).pixelRatio||a.Konva.pixelRatio||function(){if(o)return o;const e=i.Util.createCanvasElement(),t=e.getContext("2d");return o=(a.Konva._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1),i.Util.releaseCanvas(e),o}();this.pixelRatio=t,this._canvas=i.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){const t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";const t=this.pixelRatio;this.getContext()._context.scale(t,t)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,t){this.setWidth(e||0),this.setHeight(t||0)}toDataURL(e,t){try{return this._canvas.toDataURL(e,t)}catch(e){try{return this._canvas.toDataURL()}catch(e){return i.Util.error("Unable to get data URL. "+e.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}t.Canvas=s,t.SceneCanvas=class extends s{constructor(e={width:0,height:0,willReadFrequently:!1}){super(e),this.context=new r.SceneContext(this,{willReadFrequently:e.willReadFrequently}),this.setSize(e.width,e.height)}},t.HitCanvas=class extends s{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new r.HitContext(this),this.setSize(e.width,e.height)}}},8665:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Easings=t.Tween=void 0;const i=n(4060),r=n(9696),a=n(6536),o=n(8871),s={node:1,duration:1,easing:1,onFinish:1,yoyo:1},u=["fill","stroke","shadowColor"];let l=0;class h{constructor(e,t,n,i,r,a,o){this.prop=e,this.propFunc=t,this.begin=i,this._pos=i,this.duration=a,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(e){const t=this[e];t&&t()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return void 0===e&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){const e=this.getTimer()-this._startTime;2===this.state?this.setTime(e):3===this.state&&this.setTime(this.duration-e)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}class c{constructor(e){const n=this,a=e.node,u=a._id,d=e.easing||t.Easings.Linear,p=!!e.yoyo;let f,g;f=void 0===e.duration?.3:0===e.duration?.001:e.duration,this.node=a,this._id=l++;const m=a.getLayer()||(a instanceof o.Konva.Stage?a.getLayers():null);for(g in m||i.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new r.Animation(function(){n.tween.onEnterFrame()},m),this.tween=new h(g,function(e){n._tweenFunc(e)},d,0,1,1e3*f,p),this._addListeners(),c.attrs[u]||(c.attrs[u]={}),c.attrs[u][this._id]||(c.attrs[u][this._id]={}),c.tweens[u]||(c.tweens[u]={}),e)void 0===s[g]&&this._addAttr(g,e[g]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,t){const n=this.node,r=n._id;let a,o,s,l,h;const d=c.tweens[r][e];d&&delete c.attrs[r][d][e];let p=n.getAttr(e);if(i.Util._isArray(t))if(a=[],o=Math.max(t.length,p.length),"points"===e&&t.length!==p.length&&(t.length>p.length?(l=p,p=i.Util._prepareArrayForTween(p,t,n.closed())):(s=t,t=i.Util._prepareArrayForTween(t,p,n.closed()))),0===e.indexOf("fill"))for(let e=0;e<o;e++)if(e%2==0)a.push(t[e]-p[e]);else{const n=i.Util.colorToRGBA(p[e]);h=i.Util.colorToRGBA(t[e]),p[e]=n,a.push({r:h.r-n.r,g:h.g-n.g,b:h.b-n.b,a:h.a-n.a})}else for(let e=0;e<o;e++)a.push(t[e]-p[e]);else-1!==u.indexOf(e)?(p=i.Util.colorToRGBA(p),h=i.Util.colorToRGBA(t),a={r:h.r-p.r,g:h.g-p.g,b:h.b-p.b,a:h.a-p.a}):a=t-p;c.attrs[r][this._id][e]={start:p,diff:a,end:t,trueEnd:s,trueStart:l},c.tweens[r][e]=this._id}_tweenFunc(e){const t=this.node,n=c.attrs[t._id][this._id];let r,a,o,s,l,h,d,p;for(r in n){if(a=n[r],o=a.start,s=a.diff,p=a.end,i.Util._isArray(o))if(l=[],d=Math.max(o.length,p.length),0===r.indexOf("fill"))for(h=0;h<d;h++)h%2==0?l.push((o[h]||0)+s[h]*e):l.push("rgba("+Math.round(o[h].r+s[h].r*e)+","+Math.round(o[h].g+s[h].g*e)+","+Math.round(o[h].b+s[h].b*e)+","+(o[h].a+s[h].a*e)+")");else for(h=0;h<d;h++)l.push((o[h]||0)+s[h]*e);else l=-1!==u.indexOf(r)?"rgba("+Math.round(o.r+s.r*e)+","+Math.round(o.g+s.g*e)+","+Math.round(o.b+s.b*e)+","+(o.a+s.a*e)+")":o+s*e;t.setAttr(r,l)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{const e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueEnd&&e.setAttr("points",t.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{const e=this.node,t=c.attrs[e._id][this._id];t.points&&t.points.trueStart&&e.points(t.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(1e3*e),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){const e=this.node._id,t=this._id,n=c.tweens[e];this.pause(),this.anim&&this.anim.stop();for(const t in n)delete c.tweens[e][t];delete c.attrs[e][t],c.tweens[e]&&(0===Object.keys(c.tweens[e]).length&&delete c.tweens[e],0===Object.keys(c.attrs[e]).length&&delete c.attrs[e])}}t.Tween=c,c.attrs={},c.tweens={},a.Node.prototype.to=function(e){const t=e.onFinish;e.node=this,e.onFinish=function(){this.destroy(),t&&t()},new c(e).play()},t.Easings={BackEaseIn(e,t,n,i){const r=1.70158;return n*(e/=i)*e*((r+1)*e-r)+t},BackEaseOut(e,t,n,i){const r=1.70158;return n*((e=e/i-1)*e*((r+1)*e+r)+1)+t},BackEaseInOut(e,t,n,i){let r=1.70158;return(e/=i/2)<1?n/2*(e*e*((1+(r*=1.525))*e-r))+t:n/2*((e-=2)*e*((1+(r*=1.525))*e+r)+2)+t},ElasticEaseIn(e,t,n,i,r,a){let o=0;return 0===e?t:1===(e/=i)?t+n:(a||(a=.3*i),!r||r<Math.abs(n)?(r=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e*i-o)*(2*Math.PI)/a)+t)},ElasticEaseOut(e,t,n,i,r,a){let o=0;return 0===e?t:1===(e/=i)?t+n:(a||(a=.3*i),!r||r<Math.abs(n)?(r=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*e)*Math.sin((e*i-o)*(2*Math.PI)/a)+n+t)},ElasticEaseInOut(e,t,n,i,r,a){let o=0;return 0===e?t:2==(e/=i/2)?t+n:(a||(a=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,o=a/4):o=a/(2*Math.PI)*Math.asin(n/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e*i-o)*(2*Math.PI)/a)*-.5+t:r*Math.pow(2,-10*(e-=1))*Math.sin((e*i-o)*(2*Math.PI)/a)*.5+n+t)},BounceEaseOut:(e,t,n,i)=>(e/=i)<1/2.75?n*(7.5625*e*e)+t:e<2/2.75?n*(7.5625*(e-=1.5/2.75)*e+.75)+t:e<2.5/2.75?n*(7.5625*(e-=2.25/2.75)*e+.9375)+t:n*(7.5625*(e-=2.625/2.75)*e+.984375)+t,BounceEaseIn:(e,n,i,r)=>i-t.Easings.BounceEaseOut(r-e,0,i,r)+n,BounceEaseInOut:(e,n,i,r)=>e<r/2?.5*t.Easings.BounceEaseIn(2*e,0,i,r)+n:.5*t.Easings.BounceEaseOut(2*e-r,0,i,r)+.5*i+n,EaseIn:(e,t,n,i)=>n*(e/=i)*e+t,EaseOut:(e,t,n,i)=>-n*(e/=i)*(e-2)+t,EaseInOut:(e,t,n,i)=>(e/=i/2)<1?n/2*e*e+t:-n/2*(--e*(e-2)-1)+t,StrongEaseIn:(e,t,n,i)=>n*(e/=i)*e*e*e*e+t,StrongEaseOut:(e,t,n,i)=>n*((e=e/i-1)*e*e*e*e+1)+t,StrongEaseInOut:(e,t,n,i)=>(e/=i/2)<1?n/2*e*e*e*e*e+t:n/2*((e-=2)*e*e*e*e+2)+t,Linear:(e,t,n,i)=>n*e/i+t}},8722:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCapturedShape=function(e){return r.get(e)},t.createEvent=o,t.hasPointerCapture=function(e,t){return r.get(e)===t},t.setPointerCapture=function(e,t){s(e),t.getStage()&&(r.set(e,t),a&&t._fire("gotpointercapture",o(new PointerEvent("gotpointercapture"))))},t.releaseCapture=s;const i=n(8871),r=new Map,a=void 0!==i.Konva._global.PointerEvent;function o(e){return{evt:e,pointerId:e.pointerId}}function s(e,t){const n=r.get(e);if(!n)return;const i=n.getStage();i&&i.content,r.delete(e),a&&n._fire("lostpointercapture",o(new PointerEvent("lostpointercapture")))}},8820:e=>{function t(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}t.prototype.set=function(e,t,n,i){const r=e*this.size+t;this.data[r]=n,i&&(this.reservedBit[r]=!0)},t.prototype.get=function(e,t){return this.data[e*this.size+t]},t.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n},t.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},e.exports=t},8871:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._registerNode=t.Konva=t.glob=void 0;const i=Math.PI/180;t.glob=void 0!==n.g?n.g:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},t.Konva={_global:t.glob,version:"9.3.22",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test(function(e){}.toString()),dblClickWindow:400,getAngle:e=>t.Konva.angleDeg?e*i:e,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,_fixTextRendering:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>t.Konva.DD.isDragging,isTransforming(){var e;return null===(e=t.Konva.Transformer)||void 0===e?void 0:e.isTransforming()},isDragReady:()=>!!t.Konva.DD.node,releaseCanvasOnDestroy:!0,document:t.glob.document,_injectGlobal(e){t.glob.Konva=e}},t._registerNode=e=>{t.Konva[e.prototype.getClassName()]=e},t.Konva._injectGlobal(t.Konva)},9696:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Animation=void 0;const i=n(8871),r=n(4060),a=i.glob.performance&&i.glob.performance.now?function(){return i.glob.performance.now()}:function(){return(new Date).getTime()};class o{constructor(e,t){this.id=o.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:a(),frameRate:0},this.func=e,this.setLayers(t)}setLayers(e){let t=[];return e&&(t=Array.isArray(e)?e:[e]),this.layers=t,this}getLayers(){return this.layers}addLayer(e){const t=this.layers,n=t.length;for(let i=0;i<n;i++)if(t[i]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){const e=o.animations,t=e.length;for(let n=0;n<t;n++)if(e[n].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=a(),o._addAnimation(this),this}stop(){return o._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){const t=e.id,n=this.animations,i=n.length;for(let e=0;e<i;e++)if(n[e].id===t){this.animations.splice(e,1);break}}static _runFrames(){const e={},t=this.animations;for(let n=0;n<t.length;n++){const i=t[n],r=i.layers,o=i.func;i._updateFrameObject(a());const s=r.length;let u;if(u=!o||!1!==o.call(i,i.frame),u)for(let t=0;t<s;t++){const n=r[t];void 0!==n._id&&(e[n._id]=n)}}for(const t in e)e.hasOwnProperty(t)&&e[t].batchDraw()}static _animationLoop(){const e=o;e.animations.length?(e._runFrames(),r.Util.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,r.Util.requestAnimFrame(this._animationLoop))}}t.Animation=o,o.animations=[],o.animIdCounter=0,o.animRunning=!1},9801:(e,t,n)=>{const i=n(208),r=n(4357),a=n(1433),o=n(5822),s=n(4861),u=n(7044),l=n(6886),h=n(6320);function c(e){return unescape(encodeURIComponent(e)).length}function d(e,t,n){const i=[];let r;for(;null!==(r=e.exec(n));)i.push({data:r[0],index:r.index,mode:t,length:r[0].length});return i}function p(e){const t=d(u.NUMERIC,i.NUMERIC,e),n=d(u.ALPHANUMERIC,i.ALPHANUMERIC,e);let r,a;return l.isKanjiModeEnabled()?(r=d(u.BYTE,i.BYTE,e),a=d(u.KANJI,i.KANJI,e)):(r=d(u.BYTE_KANJI,i.BYTE,e),a=[]),t.concat(n,r,a).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function f(e,t){switch(t){case i.NUMERIC:return r.getBitsLength(e);case i.ALPHANUMERIC:return a.getBitsLength(e);case i.KANJI:return s.getBitsLength(e);case i.BYTE:return o.getBitsLength(e)}}function g(e,t){let n;const u=i.getBestModeForData(e);if(n=i.from(t,u),n!==i.BYTE&&n.bit<u.bit)throw new Error('"'+e+'" cannot be encoded with mode '+i.toString(n)+".\n Suggested mode is: "+i.toString(u));switch(n!==i.KANJI||l.isKanjiModeEnabled()||(n=i.BYTE),n){case i.NUMERIC:return new r(e);case i.ALPHANUMERIC:return new a(e);case i.KANJI:return new s(e);case i.BYTE:return new o(e)}}t.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(g(t,null)):t.data&&e.push(g(t.data,t.mode)),e},[])},t.fromString=function(e,n){const r=function(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];switch(r.mode){case i.NUMERIC:t.push([r,{data:r.data,mode:i.ALPHANUMERIC,length:r.length},{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.ALPHANUMERIC:t.push([r,{data:r.data,mode:i.BYTE,length:r.length}]);break;case i.KANJI:t.push([r,{data:r.data,mode:i.BYTE,length:c(r.data)}]);break;case i.BYTE:t.push([{data:r.data,mode:i.BYTE,length:c(r.data)}])}}return t}(p(e,l.isKanjiModeEnabled())),a=function(e,t){const n={},r={start:{}};let a=["start"];for(let o=0;o<e.length;o++){const s=e[o],u=[];for(let e=0;e<s.length;e++){const l=s[e],h=""+o+e;u.push(h),n[h]={node:l,lastCount:0},r[h]={};for(let e=0;e<a.length;e++){const o=a[e];n[o]&&n[o].node.mode===l.mode?(r[o][h]=f(n[o].lastCount+l.length,l.mode)-f(n[o].lastCount,l.mode),n[o].lastCount+=l.length):(n[o]&&(n[o].lastCount=l.length),r[o][h]=f(l.length,l.mode)+4+i.getCharCountIndicator(l.mode,t))}}a=u}for(let e=0;e<a.length;e++)r[a[e]].end=0;return{map:r,table:n}}(r,n),o=h.find_path(a.map,"start","end"),s=[];for(let e=1;e<o.length-1;e++)s.push(a.table[o[e]].node);return t.fromArray(s.reduce(function(e,t){const n=e.length-1>=0?e[e.length-1]:null;return n&&n.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[]))},t.rawSplit=function(e){return t.fromArray(p(e,l.isKanjiModeEnabled()))}},9869:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HitContext=t.SceneContext=t.Context=void 0;const i=n(4060),r=n(8871),a=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","roundRect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class o{constructor(e){this.canvas=e,r.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,t){let n,r,a,o,s=this.traceArr,u=s.length,l="";for(n=0;n<u;n++)r=s[n],a=r.method,a?(o=r.args,l+=a,e?l+="()":i.Util._isArray(o[0])?l+="(["+o.join(",")+"])":(t&&(o=o.map(e=>"number"==typeof e?Math.floor(e):e)),l+="("+o.join(",")+")")):(l+=r.property,e||(l+="="+r.val)),l+=";";return l}clearTrace(){this.traceArr=[]}_trace(e){let t,n=this.traceArr;n.push(e),t=n.length,t>=100&&n.shift()}reset(){const e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){const t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)}_applyLineCap(e){const t=e.attrs.lineCap;t&&this.setAttr("lineCap",t)}_applyOpacity(e){const t=e.getAbsoluteOpacity();1!==t&&this.setAttr("globalAlpha",t)}_applyLineJoin(e){const t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)}setAttr(e,t){this._context[e]=t}arc(e,t,n,i,r,a){this._context.arc(e,t,n,i,r,a)}arcTo(e,t,n,i,r){this._context.arcTo(e,t,n,i,r)}beginPath(){this._context.beginPath()}bezierCurveTo(e,t,n,i,r,a){this._context.bezierCurveTo(e,t,n,i,r,a)}clearRect(e,t,n,i){this._context.clearRect(e,t,n,i)}clip(...e){this._context.clip.apply(this._context,e)}closePath(){this._context.closePath()}createImageData(e,t){const n=arguments;return 2===n.length?this._context.createImageData(e,t):1===n.length?this._context.createImageData(e):void 0}createLinearGradient(e,t,n,i){return this._context.createLinearGradient(e,t,n,i)}createPattern(e,t){return this._context.createPattern(e,t)}createRadialGradient(e,t,n,i,r,a){return this._context.createRadialGradient(e,t,n,i,r,a)}drawImage(e,t,n,i,r,a,o,s,u){const l=arguments,h=this._context;3===l.length?h.drawImage(e,t,n):5===l.length?h.drawImage(e,t,n,i,r):9===l.length&&h.drawImage(e,t,n,i,r,a,o,s,u)}ellipse(e,t,n,i,r,a,o,s){this._context.ellipse(e,t,n,i,r,a,o,s)}isPointInPath(e,t,n,i){return n?this._context.isPointInPath(n,e,t,i):this._context.isPointInPath(e,t,i)}fill(...e){this._context.fill.apply(this._context,e)}fillRect(e,t,n,i){this._context.fillRect(e,t,n,i)}strokeRect(e,t,n,i){this._context.strokeRect(e,t,n,i)}fillText(e,t,n,i){i?this._context.fillText(e,t,n,i):this._context.fillText(e,t,n)}measureText(e){return this._context.measureText(e)}getImageData(e,t,n,i){return this._context.getImageData(e,t,n,i)}lineTo(e,t){this._context.lineTo(e,t)}moveTo(e,t){this._context.moveTo(e,t)}rect(e,t,n,i){this._context.rect(e,t,n,i)}roundRect(e,t,n,i,r){this._context.roundRect(e,t,n,i,r)}putImageData(e,t,n){this._context.putImageData(e,t,n)}quadraticCurveTo(e,t,n,i){this._context.quadraticCurveTo(e,t,n,i)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,t){this._context.scale(e,t)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,t,n,i,r,a){this._context.setTransform(e,t,n,i,r,a)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,t,n,i){this._context.strokeText(e,t,n,i)}transform(e,t,n,i,r,a){this._context.transform(e,t,n,i,r,a)}translate(e,t){this._context.translate(e,t)}_enableTrace(){let e,t,n=this,r=a.length,o=this.setAttr;const s=function(e){let r,a=n[e];n[e]=function(){return t=function(e){const t=[],n=e.length,r=i.Util;for(let i=0;i<n;i++){let n=e[i];r._isNumber(n)?n=Math.round(1e3*n)/1e3:r._isString(n)||(n+=""),t.push(n)}return t}(Array.prototype.slice.call(arguments,0)),r=a.apply(n,arguments),n._trace({method:e,args:t}),r}};for(e=0;e<r;e++)s(a[e]);n.setAttr=function(){o.apply(n,arguments);const e=arguments[0];let t=arguments[1];"shadowOffsetX"!==e&&"shadowOffsetY"!==e&&"shadowBlur"!==e||(t/=this.canvas.getPixelRatio()),n._trace({property:e,val:t})}}_applyGlobalCompositeOperation(e){const t=e.attrs.globalCompositeOperation;!t||"source-over"===t||this.setAttr("globalCompositeOperation",t)}}t.Context=o,["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","letterSpacing","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","direction","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(e){Object.defineProperty(o.prototype,e,{get(){return this._context[e]},set(t){this._context[e]=t}})}),t.SceneContext=class extends o{constructor(e,{willReadFrequently:t=!1}={}){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:t})}_fillColor(e){const t=e.fill();this.setAttr("fillStyle",t),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){const t=e._getLinearGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fillRadialGradient(e){const t=e._getRadialGradient();t&&(this.setAttr("fillStyle",t),e._fillFunc(this))}_fill(e){const t=e.fill(),n=e.getFillPriority();if(t&&"color"===n)return void this._fillColor(e);const i=e.getFillPatternImage();if(i&&"pattern"===n)return void this._fillPattern(e);const r=e.getFillLinearGradientColorStops();if(r&&"linear-gradient"===n)return void this._fillLinearGradient(e);const a=e.getFillRadialGradientColorStops();a&&"radial-gradient"===n?this._fillRadialGradient(e):t?this._fillColor(e):i?this._fillPattern(e):r?this._fillLinearGradient(e):a&&this._fillRadialGradient(e)}_strokeLinearGradient(e){const t=e.getStrokeLinearGradientStartPoint(),n=e.getStrokeLinearGradientEndPoint(),i=e.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(t.x,t.y,n.x,n.y);if(i){for(let e=0;e<i.length;e+=2)r.addColorStop(i[e],i[e+1]);this.setAttr("strokeStyle",r)}}_stroke(e){const t=e.dash(),n=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!n){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e),t&&e.dashEnabled()&&(this.setLineDash(t),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),e.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),n||this.restore()}}_applyShadow(e){var t,n,i;const r=null!==(t=e.getShadowRGBA())&&void 0!==t?t:"black",a=null!==(n=e.getShadowBlur())&&void 0!==n?n:5,o=null!==(i=e.getShadowOffset())&&void 0!==i?i:{x:0,y:0},s=e.getAbsoluteScale(),u=this.canvas.getPixelRatio(),l=s.x*u,h=s.y*u;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",a*Math.min(Math.abs(l),Math.abs(h))),this.setAttr("shadowOffsetX",o.x*l),this.setAttr("shadowOffsetY",o.y*h)}},t.HitContext=class extends o{constructor(e){super(e),this._context=e._canvas.getContext("2d",{willReadFrequently:!0})}_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){const t=e.getStrokeScaleEnabled();if(!t){this.save();const e=this.getCanvas().getPixelRatio();this.setTransform(e,0,0,e,0,0)}this._applyLineCap(e);const n=e.hitStrokeWidth(),i="auto"===n?e.strokeWidth():n;this.setAttr("lineWidth",i),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),t||this.restore()}}}},9899:e=>{function t(){this.buffer=[],this.length=0}t.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=t},9953:(e,t)=>{t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2},t.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},t.from=function(e,n){if(t.isValid(e))return e;try{return function(e){if("string"!=typeof e)throw new Error("Param is not a string");switch(e.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+e)}}(e)}catch(e){return n}}}}]);
//# sourceMappingURL=DlfMediaVendor.js.map